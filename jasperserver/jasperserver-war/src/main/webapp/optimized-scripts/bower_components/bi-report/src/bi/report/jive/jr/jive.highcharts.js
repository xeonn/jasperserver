define(["require","jquery","underscore","bundle!adhoc_messages","highcharts-more","logger","heatmap"],function(e,n,t,i,r,h,a){var c={changeType:{}},o=(h.register("jive.highcharts"),function(e){this.rdy=new n.Deferred,this.config=e,this.parent=null,this.loader=null,this.api=c,this.highchartsInstance=null,this.events={ACTION_PERFORMED:"action",HYPERLINK_INTERACTION:"hyperlinkInteraction"},this._init()});return o.prototype={changeType:function(e){var n=this,t={action:{actionName:"changeChartType",changeChartTypeData:{chartComponentUuid:n.config.id,chartType:e.type}}};return this.loader.runAction(t).then(function(e){return n._notify({name:n.events.ACTION_PERFORMED,type:"changeChartType",data:e}),n})},render:function(e){var r,h=this;h.rdy.then(function(){try{h.hcConfig.chart.renderTo=n("#"+h.hcConfig.chart.renderTo,e)[0],h.highchartsInstance=new a.Chart(h.hcConfig)}catch(c){r=/\#19/.test(c)?i.ADH_1214_ICHARTS_ERROR_TOO_MANY_VALUES:i.ADH_1214_ICHARTS_ERROR_UNCAUGHT,t.each(a.charts,function(e){e&&h.hcConfig.chart.renderTo===e.renderTo&&e.destroy()}),h.highchartsInstance&&h.highchartsInstance.destroy&&(h.highchartsInstance.destroy(),h.highchartsInstance=void 0),h._notify({name:"error",type:"highchartsInternalError",data:{error:c,message:r}})}})},_init:function(){var i=this,r=this.config.hcinstancedata;this.config.globalOptions&&a.setOptions(this.config.globalOptions),i.hcConfig={};var h=new n.Deferred;h.resolve(),n.each(this.config.hcinstancedata.services,function(r,a){var c=a.service,o=a.data;"dataSettingService"===c?i.hcConfig=o:h=h.then(function(){var r=new n.Deferred;return e(["../jr/"+c],function(e){if("itemHyperlinkSettingService"===c){var n=t.extend({},o,{linkOptions:i.config.linkOptions}),h=new e(i,i.hcConfig,n);h.hyperlinkSeriesPointClickedHandler=i._hyperlinkSeriesPointClicked,h.perform()}else e.perform(i.hcConfig,o);r.resolve()}),r})}),h.then(function(){i.hcConfig.chart.renderTo=r.renderto,i.hcConfig.chart.width=r.width,i.hcConfig.chart.height=r.height,i.rdy.resolve()})},_hyperlinkSeriesPointClicked:function(e){this._notify({name:this.events.HYPERLINK_INTERACTION,type:"hyperlinkClicked",data:e})},_notify:function(e){this.parent&&this.parent._notify(e)}},o});