define(["jquery"],function(t){var e={APPLICATION_CONTEXT_PATH:"",dialogsContainerSelector:"div.jrPage:first",reportContainerSelector:"body"},s=e;return s.isEmpty=function(t){return null==t||void 0==t||""==t?!0:!1},s.escapeString=function(t){return t.replace(/\\/g,"\\\\").replace(/\"/g,'\\"')},s.toJsonString=function(t,e){var r,i,n,o=Object.prototype.toString.call(t),c="",a=e||!1;switch(o){case"[object Array]":for(c+="[",r=0,i=t.length;i>r;r++)c+=s.toJsonString(t[r],a),i-1>r&&(c+=",");c+="]";break;case"[object Object]":c+="{";for(n in t)t.hasOwnProperty(n)&&null!=t[n]&&(c+='"'+n+'":'+s.toJsonString(t[n],a)+",");-1!=c.indexOf(",")&&(c=c.substring(0,c.lastIndexOf(","))),c+="}";break;case"[object String]":c+='"'+(a?s.escapeString(t):t)+'"';break;case"[object Null]":c=null;break;default:c+=t}return c},s.extractCallbackFunction=function(t,e){var s=t;if("string"==typeof t){var r,i,n=t.split(".");for(s=e||window,r=0,i=n.length;i>r;r++){if(!s[n[r]])throw new Error("Invalid callback function: "+t+"; token: "+n[r]);s=s[n[r]]}}return s},s.extractContext=function(t){var e=t||null;if("string"==typeof t){var s,r,i=t.split(".");for(e=window,s=0,r=i.length;r>s;s++){if(!e[i[s]])throw new Error("Invalid context: "+t+"; token: "+i[s]);e=e[i[s]]}}return e},t.fn.loadmask=function(e){return this.each(function(){var r=this.id+"_maskDiv",i="#"+r;if("string"==typeof e)switch(e){case"hide":t(i).hide();break;case"remove":t(i).remove()}else{var n={bgimage:s.APPLICATION_CONTEXT_PATH+"/images/loadmask.png",loadinggif:s.APPLICATION_CONTEXT_PATH+"/images/loading4.gif",opacity:.3};e&&t.extend(n,e),0==t(i).size()&&t(this).parent().append("<div id='"+r+"'></div>"),t(i).show().css({position:"absolute",backgroundImage:"url('"+n.bgimage+"')",opacity:n.opacity,width:t(this).css("width"),height:t(this).css("height"),top:t(this).position().top,left:t(this).position().left,"border-top-width":t(this).css("borderTopWidth"),"border-top-style":t(this).css("borderTopStyle"),borderBottomWidth:t(this).css("borderBottomWidth"),borderBottomStyle:t(this).css("borderBottomStyle"),borderLeftWidth:t(this).css("borderLeftWidth"),borderLeftStyle:t(this).css("borderLeftStyle"),borderRightWidth:t(this).css("borderRightWidth"),borderRightStyle:t(this).css("borderRightStyle"),"z-index":1e3,cursor:"wait"})}})},e.events={_events:{},Event:function(t){return!this instanceof e.events.Event?new e.events.Event(t):(this.status="default",this.name=t,void(this.subscribers=[]))},registerEvent:function(t){return this._events[t]||(this._events[t]=new e.events.Event(t)),this._events[t]},registerEvents:function(s){var r=[];return t.each(this._getEventNames(s),function(t,s){r.push(e.events.registerEvent(s))}),r},subscribeToEvent:function(t){this.registerEvent(t.name).subscribe({callback:t.callback,args:t.args,ctx:t.thisContext,keep:t.keep})},subscribeToEvents:function(e){t.each(this.registerEvents(e.names),function(t,s){s.subscribe({callback:e.callback,args:e.args,ctx:e.thisContext,keep:e.keep})})},triggerEvents:function(s){t.each(this._getEventNames(s),function(t,s){e.events.triggerEvent(s)})},checkRegistered:function(t){if(!this._events[t])throw new Error("Event not registered:"+t)},registerTriggerReset:function(e,s){t.each(this.registerEvents(e),function(t,e){e.trigger(s).reset()})},_getEventNames:function(t){var e,s,r,i=[];if(t&&"string"==typeof t)for(e=t.split(","),s=0,r=e.length;r>s;s++)i.push(e[s].replace(/^\s+|\s+$/g,""));return i}},e.events.Event.prototype={getName:function(){return this.name},getStatus:function(){return this.status},hasFinished:function(){return"finished"===this.status},subscribe:function(t){this.hasFinished()?(t.keep&&this.subscribers.push(t),this.processSubscriber(t)):this.subscribers.push(t)},trigger:function(t){var e,s;for(e=0;e<this.subscribers.length;e++)s=this.subscribers[e],s.args?s.args.push(t):s.args=[t],e-=this.processSubscriber(s);return this.status="finished",this},reset:function(){this.status="default"},processSubscriber:function(t){var e,r=this.subscribers.length;if(s.extractCallbackFunction(t.callback).apply(s.extractContext(t.ctx),t.args||[]),!t.keep)for(e=0;r>e;e++)if(this.subscribers[e]===t)return this.subscribers.splice(e,1),1;return 0}},e});