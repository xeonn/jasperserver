define(["require","jquery.ui.mouse.touch","backbone","../enum/jiveTypes","./BaseJiveComponentView","./ColumnJiveComponentView","./CrosstabJiveComponentView","./ChartJiveComponentView","underscore","jquery","logger"],function(e){function i(e){e||(e={}),this.stateModel=e.stateModel,this.collection=e.collection,this.listenTo(this.collection,"reset",this.initSubviews,this)}e("jquery.ui.mouse.touch");var t,n=e("backbone"),o=e("../enum/jiveTypes"),s=e("./BaseJiveComponentView"),r=e("./ColumnJiveComponentView"),u=e("./CrosstabJiveComponentView"),v=e("./ChartJiveComponentView"),l=e("underscore"),c=e("jquery"),a=e("logger").register("Report");return i.prototype={initSubviews:function(){var e=this,i={};i[o.CHART]=v,i[o.FUSION_MAP]=s,i[o.FUSION_CHART]=s,i[o.FUSION_WIDGET]=s,i[o.GOOGLEMAP]=s,this.stateModel.isDefaultJiveUiEnabled()&&(i[o.COLUMN]=r,i[o.CROSSTAB]=u,i[o.TABLE]=s),l.invoke(this.subviews||[],"remove"),this.subviews=this.collection.map(function(t){var n=i[t.get("type")];return n&&new n({model:t,report:e.collection.report,stateModel:e.stateModel})}),this.subviews=l.compact(this.subviews),a.debug("Create JIVE views ",this.subviews)},render:function(i){var n=this,o=new c.Deferred,s=function(){var e=l.invoke(n.subviews||[],"render",i);c.when.apply(c,e).then(function(){o.resolve()})};return t||!this.stateModel.isDefaultJiveUiEnabled()?s():e(["../jr/jive"],function(e){t=e,s()}),o},sizableSubviews:function(){return l.filter(this.subviews,function(e){return e.setSize})},scalableSubviews:function(){return l.filter(this.subviews,function(e){return e.scale})},remove:function(){l.invoke(this.subviews||[],"remove"),this.stopListening(this.collection,"reset",this.initSubviews,this)}},l.extend(i.prototype,n.Events),i});