define(["jquery"],function(s){var t=function(s){return!this instanceof t?new t(s):(this.status="default",this.name=s,void(this.subscribers=[]))};t.prototype={getName:function(){return this.name},getStatus:function(){return this.status},hasFinished:function(){return"finished"===this.status},subscribe:function(s){this.hasFinished()?(s.keep&&this.subscribers.push(s),this.processSubscriber(s)):this.subscribers.push(s)},trigger:function(s){var t,e=this.subscribers.length;for(t=0;e>t;t++)t-=this.processSubscriber(this.subscribers[t],s);return this.status="finished",this},reset:function(){this.status="default"},processSubscriber:function(s,t){var e,i=this.subscribers.length,r=s.args||[];if(r.push(t),s.callback.apply(s.ctx,r),!s.keep)for(e=0;i>e;e++)if(this.subscribers[e]===s)return this.subscribers.splice(e,1),1;return 0}};var e=function(s){this._events={},this.debug=s};return e.prototype={subscribeToEvent:function(t){var e=this,i=this._getEventNames(t.name);s.each(i,function(s,i){e.registerEvent(i).subscribe({callback:t.callback,ctx:t.thisContext,keep:t.keep})})},registerEvent:function(s){return this._events[s]||(this._events[s]=new t(s)),this._events[s]},triggerEvent:function(s,t){this._events[s]&&(this.debug&&console.log("triggering event: "+s),this._events[s].trigger(t))},_getEventNames:function(s){var t,e,i,r=[];if(s&&"string"==typeof s)for(t=s.split(","),e=0,i=t.length;i>e;e++)r.push(t[e].replace(/^\s+|\s+$/g,""));return r}},e});