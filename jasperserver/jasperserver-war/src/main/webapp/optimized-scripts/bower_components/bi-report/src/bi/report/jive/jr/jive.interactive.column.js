define(["jquery.ui","./jive","text!jr.jive.chartSelector.tmpl","bundle!CommonBundle","csslink!jr.jive.highcharts.vm.css"],function(e,t,i,n){var o=null;return t.interactive.column={genericPropertiesInitialized:!1,uuid:null,allColumns:{},allColumnGroups:{},allColumnsMap:{},columnsData:{},count:0,ids:{},fontSizes:null,fonts:{extension:null,system:null},patterns:null,operators:null,filterPatterns:null,calendarPatterns:null,actions:{format:{icon:"formatIcon",title:t.i18n.get("column.format.title"),actions:{formatHeaderAndValues:{label:t.i18n.get("column.format.formatmenu.label"),fn:"formatHeader"},hideColumn:{label:t.i18n.get("column.format.hidecolumn.label"),fn:"hide",arg:'{"hide":true}'},showColumns:{label:t.i18n.get("column.format.showcolumns.label"),actions:{showAll:{label:t.i18n.get("column.format.showcolumns.all.label"),fn:"hide",arg:'{"hide":false,"column":"all"}'}}}}},filter:{icon:"filterIcon",title:t.i18n.get("column.filter.title"),fn:"filter"},sortAscending:{icon:"sortAscIcon",title:t.i18n.get("column.sortasc.title"),fn:"sort",arg:["Asc"]},sortDescnding:{icon:"sortDescIcon",title:t.i18n.get("column.sortdesc.title"),fn:"sort",arg:["Desc"]}},dropColumns:{},dropPoints:{},visibleColumnsMoveData:{},ldi:null,rdi:null,delta:null,init:function(i){var n=this;o=i.eventManager,t.init(i),n.columnsData[i.id]={},e.each(i.components.table,function(){!n.genericPropertiesInitialized&&this.config.genericProperties&&(n.setGenericProperties(this.config.genericProperties),n.genericPropertiesInitialized=!0),n.genericPropertiesInitialized?n.initColumns(this,i.id,i.config.container):alert("Error: generic properties not set for interactive column.")})},scale:function(e){t.scale(e)},initColumns:function(i,n,a){var r,l,d,u,c,s=this,m=[],f=i.config.id,p=i.config.allColumnsData;s.allColumns[f]=p,s.allColumnGroups[f]=i.config.allColumnGroupsData,s.allColumnsMap[f]={},s.basicFormatForm.elements[1][0][0].groups=[{name:t.i18n.get("column.dialog.extfonts"),values:[]}],e.each(s.fonts.extension,function(e,t){s.basicFormatForm.elements[1][0][0].groups[0].values.push([t,t])}),s.basicFormatForm.elements[1][0][0].groups.push({name:t.i18n.get("column.dialog.sysfonts"),values:[]}),e.each(s.fonts.system,function(e,t){s.basicFormatForm.elements[1][0][0].groups[1].values.push([t,t])}),s.basicFormatForm.elements[1][0][1].values=[],e.each(s.fontSizes,function(e,t){s.basicFormatForm.elements[1][0][1].values.push([t,t])}),s.dropPoints[f]=[],s.visibleColumnsMoveData[f]=[],s.dropColumns[f]=[];var h,g=a.find("table.jrPage").find("td.jrcolHeader[data-tableuuid="+f+"]:first");g.parents("table").each(function(t,i){return h=e(i),m=h.find("td.jrcolHeader[data-tableuuid="+f+"]"),m.length>0?!1:void 0});var v=s.columnsData[n][f]={};for(l=0;l<m.length;l++){var b,j,y,C,F,x=e(m.get(l)).data("coluuid");v[x]||(b=h.find("td.jrcolHeader[data-coluuid="+x+"]"),j=b.eq(0),y=b.size()>0?b.eq(b.size()-1):j,C=j.outerWidth(),F=j.position().left,b.each(function(t,i){var n=e(i);n.position().left<F&&(C+=F-n.position().left,F=n.position().left),n.position().left+n.outerWidth()>F+C&&(C=n.position().left+n.outerWidth()-F)}),v[x]={jo:e(j),width:C,height:y.position().top-j.position().top+y.height(),colidx:y.data("colidx")})}m=[];for(c in v)v.hasOwnProperty(c)&&m.push(v[c]);for(m.sort(function(e,t){return e.jo.data("colidx")-t.jo.data("colidx")}),l=0;l<m.length;l++)r=m[l],d=r.jo.offset().left,u=s.getColumnByUuid(r.jo.data("coluuid"),f),null!=u&&(u.visible=!0),s.dropColumns[f].push("cel_"+r.jo.data("cellid")),s.dropPoints[f].push(d),s.visibleColumnsMoveData[f].push({left:d,right:d+r.width,width:r.width,index:null!=u?u.index:null,uuid:r.jo.data("coluuid")}),l==m.length-1&&s.dropPoints[f].push(d+r.width);var T=[];for(l=0;l<s.dropColumns[f].length;l++)T.push(s.dropPoints[f][l]),T.push(s.dropPoints[f][l]+(s.dropPoints[f][l+1]-s.dropPoints[f][l])/2);T.push(s.dropPoints[f][l]),s.dropPoints[f]=T;var w=s.actions.format.actions.showColumns;for(l in p)r=p[l],r.interactive&&(w.actions[r.uuid]={label:r.label,fn:"hide",arg:'{"hide":false, "columnUuid": "'+r.uuid+'"}'}),s.allColumnsMap[f][r.uuid]=r;s.count=s.dropColumns[f].length,t.ui.foobar.reset(),t.ui.forms.add(t.interactive.column.columnFilterForm),t.ui.forms.add(t.interactive.column.columnConditionalFormattingForm),t.ui.forms.add(t.interactive.column.basicFormatForm),o.registerEvent("jive.interactive.column.init").trigger(),e.each(i.columns,function(e,i){i&&t.initInteractiveElement(i,n,a)})},getJoForCurrentSelection:function(t){var i=null;return t.parents("table").each(function(n,o){return i=e(o).find('td.jrcolHeader[data-cellid="'+t.data("cellid")+'"]:first'),i.length>0?!1:void 0}),i},getColumnByUuid:function(e,t){var i,n=this.allColumns[t];for(i in n)if(n[i].uuid===e)return n[i];return null},getInteractiveElementFromProxy:function(t){var i=t.attr("class").split(" "),n='td[data-cellid="'+i[1].substring(4)+'"]:first',o=null,a=t.offset().top;return t.parents().each(function(t,i){return o=e(n,i),o&&o.length>0&&o.offset().top<a?!1:void(o=null)}),o},getElementSize:function(){var i=t.selected.jo,n=i.data("cellid"),o=null;return n=(""+n).replace(/\./g,"\\."),i.parents().each(function(t,a){var r=e("td.cel_"+n+":last",a);if(r&&r.length>0){var l=r.offset().top,d=r.outerHeight();return o=l+d-i.offset().top,!1}}),null===o&&(o=t.selected.realHeight),{w:t.selected.realWidth,h:o}},onSelect:function(){{var i=this,n=[],o=t.ui.foobar.menus.column.showColumns.jo,a=t.selected.jo.data("tableuuid");i.allColumns[a]}1==i.count?(t.ui.foobar.menus.column.format.jo.find("li").eq(1).hide(),t.ui.overlay.jo.draggable("option","disabled",!0)):(t.ui.foobar.menus.column.format.jo.find("li").eq(1).show(),t.ui.overlay.jo.draggable("option","disabled",!1)),o.children().each(function(t,o){if(t>0){var r=e(o).data("args"),l=i.getColumnByUuid(r.columnUuid,a);null!=l&&(r.column=[l.index],e(o).data("args",r)),l&&l.visible===!0?o.style.display="none":l?(n.push(l.index),o.style.display="block"):o.style.display="none"}}),n.length>0?(t.ui.foobar.menus.column.format.jo.find("li").eq(2).show(),o.children().eq(0).data("args",{hide:!1,column:n})):t.ui.foobar.menus.column.format.jo.find("li").eq(2).hide();var r=e("button:eq(2), button:eq(3)",t.ui.foobar.jo),l=e("button:eq(1)",t.ui.foobar.jo);t.selected.ie.config.canSort?r.removeClass("disabled"):r.addClass("disabled"),t.selected.ie.config.canFilter?l.removeClass("disabled"):l.addClass("disabled")},onDragStart:function(){var i;for(this.uuid=t.selected.jo.data("tableuuid"),this.currentColumnsMoveData=this.visibleColumnsMoveData[this.uuid],this.currentColMoveData=null,i=0;i<this.currentColumnsMoveData.length;i++)if(this.currentColumnsMoveData[i].uuid===t.selected.jo.data("coluuid")){this.currentColMoveData=this.currentColumnsMoveData[i];break}var n="cel_"+t.selected.jo.data("cellid"),o=2*e.inArray(n,this.dropColumns[this.uuid]);this.ldi=0==o?0:o-1,this.rdi=o+3==this.dropPoints[this.uuid].length?o+2:o+3,this.delta=t.ui.marker.position.left-this.dropPoints[this.uuid][o+2],this.dropColumnIndex=o,this.colToMoveToIndex=this.currentColMoveData.index},onDrag:function(e){var i,n,o,a,r=(e.originalEvent.originalEvent||e,this.dropPoints[this.uuid]),l=0,d=this.currentColumnsMoveData.length;for(e.pageX<r[this.ldi]&&this.ldi>0&&(this.dropColumnIndex=this.ldi%2==1?this.ldi-1:this.ldi,t.ui.marker.jo.css("left",r[this.dropColumnIndex]+this.delta+"px").show(),this.rdi=this.ldi,this.ldi--),e.pageX>r[this.rdi]&&this.rdi<r.length-1&&(this.dropColumnIndex=this.rdi%2==1?this.rdi+1:this.rdi,t.ui.marker.jo.css("left",r[this.dropColumnIndex]+this.delta+"px").show(),this.ldi=this.rdi,this.rdi++),e.pageX>this.currentColMoveData.right?a=!0:e.pageX<this.currentColMoveData.left&&(a=!1);d>l;l++)if(i=this.currentColumnsMoveData[l],e.pageX<=i.right){n=parseInt(i.index),o=i.left+i.width/2,e.pageX<=o?n>0?a===!0?this.colToMoveToIndex=n-1:a===!1&&(this.colToMoveToIndex=n):this.colToMoveToIndex=0:a===!0?this.colToMoveToIndex=n:a===!1&&(this.colToMoveToIndex=n+1);break}a&&null==this.colToMoveToIndex&&(this.colToMoveToIndex=parseInt(this.currentColumnsMoveData[d-1].index))},onDragStop:function(){null!=this.colToMoveToIndex&&this.colToMoveToIndex!=t.selected.ie.config.columnIndex&&t.selected.ie.move({index:this.colToMoveToIndex})},resize:function(e){var i=8>e?8:Math.floor(e);t.hide(),t.selected.ie.resize({width:i})},sort:function(e){t.hide(),t.selected.ie.sort({order:e[0]})},filter:function(){t.ui.dialog.show(t.i18n.get("column.filter.dialog.title")+": "+t.selected.ie.config.columnLabel,["columnfilter"])},formatHeader:function(){t.ui.dialog.show(t.i18n.get("column.format.dialog.title")+": "+t.selected.ie.config.columnLabel,["basicFormat","columnConditionalFormatting"])},hide:function(e){if(t.hide(),e.hide)t.selected.ie.hide();else{var i,n;e.columnUuid?(n=t.elements[e.columnUuid]?this.allColumnsMap[t.elements[e.columnUuid].config.parentId]:this.allColumnsMap[t.selected.ie.config.parentId],i=[n[e.columnUuid].index]):i=e.column,t.selected.ie.unhide(i)}},remove:function(e){t.remove(e)},setGenericProperties:function(e){t.interactive.column.fontSizes=e.fontSizes,t.interactive.column.fonts=e.fonts,t.interactive.column.patterns=e.patterns,t.interactive.column.operators=e.operators,t.interactive.column.filterPatterns=e.filterPatterns,t.interactive.column.calendarPatterns=e.calendarPatterns},handleServerError:function(t){var o=this;this.errorDialog||(this.errorDialog=e(i).find(".jive_chartTypeSelector").css({"z-index":500,width:400,"min-height":150}),this.errorDialog.appendTo("body").draggable().on("click touchend",".closeIcon",function(){o.errorDialog.hide()})),this.errorDialog.find(".body").html("<span>"+t.devmsg+"</span>"),this.errorDialog.find(".title").html(n["dialog.exception.title"]),this.errorDialog.show().position({of:"body",at:"center center",my:"center center"})},showCurrencyDropDown:function(){t.selected.form.inputs["currencyBtn1-jr-uuid-for-ui-element-0"].showOptions()},applyCurrencyFormat:function(i){var n=this,o=t.selected.form.inputs["currencyBtn1-jr-uuid-for-ui-element-0"],a=e("#formatPattern-jr-uuid-for-ui-element-0").data("cSymbol");e("#formatPattern-jr-uuid-for-ui-element-0").children().each(function(t,o){var r=e(o);a&&a.length>0&&(r.text(n.numberFormat.addRemoveCurrencySymbol(r.text(),!1,a)),r.val(n.numberFormat.addRemoveCurrencySymbol(r.val(),!1,a))),i.val&&i.val.length>0&&(r.text(n.numberFormat.addRemoveCurrencySymbol(r.text(),!0,i.val)),r.val(n.numberFormat.addRemoveCurrencySymbol(r.val(),!0,i.val)),e("#formatPattern-jr-uuid-for-ui-element-0").data("cSymbol",i.val))}),o.hideOptions()},togglePercentageFormat:function(){var i=this;e("#formatPattern-jr-uuid-for-ui-element-0").children().each(function(n,o){var a=e(o);a.text(i.numberFormat.addRemovePercentageForNumber(a.text(),t.selected.form.inputs["percentageBtn-jr-uuid-for-ui-element-0"].value)),a.val(i.numberFormat.addRemovePercentage(a.val(),t.selected.form.inputs["percentageBtn-jr-uuid-for-ui-element-0"].value))})},toggleCommaFormat:function(){var i=this;e("#formatPattern-jr-uuid-for-ui-element-0").children().each(function(n,o){var a=e(o);a.text(i.numberFormat.addRemoveThousandsSeparator(a.text(),t.selected.form.inputs["commaBtn-jr-uuid-for-ui-element-0"].value)),a.val(i.numberFormat.addRemoveThousandsSeparator(a.val(),t.selected.form.inputs["commaBtn-jr-uuid-for-ui-element-0"].value))})},addDecimal:function(){var t=this;e("#formatPattern-jr-uuid-for-ui-element-0").children().each(function(i,n){var o=e(n);o.text(t.numberFormat.addRemoveDecimalPlace(o.text(),!0)),o.val(t.numberFormat.addRemoveDecimalPlace(o.val(),!0))})},remDecimal:function(){var t=this;e("#formatPattern-jr-uuid-for-ui-element-0").children().each(function(i,n){var o=e(n);o.text(t.numberFormat.addRemoveDecimalPlace(o.text(),!1)),o.val(t.numberFormat.addRemoveDecimalPlace(o.val(),!1))})},numberFormat:{symbols:{currency:"¤"},regex:{numberPart:/([\d|#]+(?!,))/,decimalPart:/(\.[\d|#]+)/,numericChar:/[\d|#]/},addRemoveDecimalPlace:function(){function e(e){var i=e.indexOf(".");if(-1!=i){var n=t.interactive.column.numberFormat.regex.decimalPart.exec(e)[1];return e.replace(n,n+"0")}var o=t.interactive.column.numberFormat.regex.numberPart.exec(e)[1];return e.replace(o,o+".0")}function i(e){var i=e,n=i.indexOf(".");if(-1!=n){var o=t.interactive.column.numberFormat.regex.decimalPart.exec(i)[1];i=o.length>2?i.replace(o,o.substring(0,o.length-1)):i.replace(o,"")}return i}return function(t,n){var o=t.split(";")[0],a=t.split(";")[1];return n?(t=e(o),a&&(t=t+";"+e(a)),t):(t=i(o),a&&(t=t+";"+i(a)),t)}}(),addRemoveThousandsSeparator:function(){function e(e){var i=e.indexOf(t.interactive.column.numberFormat.regex.numericChar.exec(e)),n=e.substring(0,i+1);return n+","+e.substring(n.length)}function i(e){return e.replace(",","")}return function(t,n){var o=t.indexOf(","),a=t.split(";")[0],r=t.split(";")[1];return n?-1==o&&(t=e(a),r&&(t=t+";"+e(r))):-1!=o&&(t=i(a),r&&(t=t+";"+i(r))),t}}(),addRemovePercentage:function(){function e(e){return e+" %"}function t(e){return e.substring(0,e.length-2)}return function(i,n){var o=i.indexOf("%"),a=i.split(";")[0],r=i.split(";")[1];return n?-1==o&&(i=e(a),r&&(i=i+";"+e(r))):-1!=o&&(i=t(a),r&&(i=i+";"+t(r))),i}}(),applyNegativeNumberPattern:function(e){var i=new RegExp(e.split(";")[0],"g"),n=t.interactive.column.numberFormatExpression||"###0",o=n.split(";")[0];return n=e.replace(i,o)},addRemovePercentageForNumber:function(e,i){var n=t.interactive.column.numberFormat.regex.numberPart.exec(e)[1];return i?-1==e.indexOf("%")&&-1==n.indexOf("00")&&(e=e.replace(n,n+"00"),e+=" %"):-1!=e.indexOf("%")&&-1!=n.indexOf("00")&&(e=e.replace(n,n.substring(0,n.length-2)),e=e.substring(0,e.length-2)),e},addRemoveCurrencySymbol:function(e,i,n){var o=n||t.interactive.column.numberFormat.symbols.currency,a=e.indexOf(o),r=e.split(";")[0],l=e.split(";")[1];return i?-1==a&&(e=o+" "+r,l&&(e=e+";"+o+" "+l)):-1!=a&&(e=r.substring(2),l&&(e=e+";"+l.substring(2))),e}}},t.interactive.column.columnFilterForm={name:"columnfilter",method:"get",jc:{},elements:[[[{type:"radio",id:"clearFilter-jr-uuid-for-ui-element-0",label:t.i18n.get("column.filterform.clearfilter.true.label"),value:"true"}]],[[{type:"radio",id:"clearFilter-jr-uuid-for-ui-element-0",label:t.i18n.get("column.filterform.clearfilter.false.label"),value:"false",colspan:4}],[{type:"list",id:"filterTypeOperator-jr-uuid-for-ui-element-0",values:[]},{type:"text",id:"fieldValueStart-jr-uuid-for-ui-element-0",value:""},{type:"label",value:"and"},{type:"text",id:"fieldValueEnd-jr-uuid-for-ui-element-0",value:""}]]],onCreate:function(){var i=this;this.isInitialized=!0,i.jc.filterStart=e("#fieldValueStart-jr-uuid-for-ui-element-0"),i.jc.filterEnd=e("#fieldValueEnd-jr-uuid-for-ui-element-0").prop("disabled",!0),i.jc.filterType=e("#filterTypeOperator-jr-uuid-for-ui-element-0").change(function(){e(this).val().indexOf("BETWEEN")>=0?(i.jc.filterEnd.parent().parent().prev().show(),i.jc.filterEnd.parent().parent().show(),i.jc.filterEnd.prop("disabled",!1)):(i.jc.filterEnd.parent().parent().prev().hide(),i.jc.filterEnd.parent().parent().hide(),i.jc.filterEnd.prop("disabled",!0))}),e('input[name="clearFilter-jr-uuid-for-ui-element-0"]').change(function(){var n=t.selected.ie.config.filtering.filterData.filterType.toLowerCase();for(p in i.jc)i.jc.hasOwnProperty(p)&&"true"==e(this).val()?i.jc[p].prop("disabled",!0):i.jc[p].prop("disabled",!1);i.jc.filterEnd.prop("disabled",i.jc.filterType.val().indexOf("BETWEEN")>=0&&"false"==e(this).val()?!1:!0),"boolean"==n&&"false"==e(this).val()&&(i.jc.filterStart.prop("disabled",!0),i.jc.filterStart.closest("td").hide())})},onShow:function(){var i=t.ui.dialog.jo;i.find(".applytoWrapper").hide(),i.find("#colprev").hide(),i.find("#colnext").hide();var n,o=this,a=t.selected.ie.config.filtering.filterData,r=a.filterType.toLowerCase(),l=t.interactive.column.operators[r],d=t.interactive.column.calendarPatterns.date,u=t.interactive.column.calendarPatterns.time;o.jc.filterType.empty(),e.each(l,function(t,i){o.jc.filterType.append(e("<option/>",{value:i.key,text:i.val}))}),a.filterTypeOperator&&o.jc.filterType.val(a.filterTypeOperator),o.jc.filterStart.val("text"===r?t.decodeHTML(a.fieldValueStart):a.fieldValueStart);var c=null==a.filterTypeOperator?!0:!1;e('input[name="clearFilter-jr-uuid-for-ui-element-0"][value="'+c+'"]').prop("checked",!0);for(n in o.jc)o.jc.hasOwnProperty(n)&&c?o.jc[n].prop("disabled",!0):o.jc[n].prop("disabled",!1);if(!c&&a.filterTypeOperator&&a.filterTypeOperator.indexOf("BETWEEN")>=0?(o.jc.filterEnd.parent().parent().prev().show(),o.jc.filterEnd.parent().parent().show(),o.jc.filterEnd.val(a.fieldValueEnd).prop("disabled",!1)):(o.jc.filterEnd.parent().parent().prev().hide(),o.jc.filterEnd.parent().parent().hide(),o.jc.filterEnd.val(a.fieldValueEnd).prop("disabled",!0)),"boolean"===r?(o.jc.filterStart.prop("disabled",!0),o.jc.filterStart.closest("td").hide()):o.jc.filterStart.closest("td").show(),"date"===r){var s={changeMonth:!0,changeYear:!0,dateFormat:d,timeFormat:u,showSecond:!0};o.jc.filterStart.timepicker("destroy"),o.jc.filterEnd.timepicker("destroy"),o.jc.filterStart.datetimepicker(s),o.jc.filterEnd.datetimepicker(s)}else if("time"===r){var m={timeFormat:u,showSecond:!0,constrainInput:!1};o.jc.filterStart.datetimepicker("destroy"),o.jc.filterEnd.datetimepicker("destroy"),o.jc.filterStart.timepicker(m),o.jc.filterEnd.timepicker(m)}else o.jc.filterStart.datetimepicker("destroy"),o.jc.filterStart.timepicker("destroy"),o.jc.filterEnd.datetimepicker("destroy"),o.jc.filterEnd.timepicker("destroy")},submit:function(){var e=t.selected.ie.config.filtering.filterData,i=e.filterType.toLowerCase(),n={tableUuid:t.selected.ie.config.parentId,filterPattern:t.interactive.column.filterPatterns[i]||null,fieldValueStart:t.selected.form.jo.find('input[name="fieldValueStart-jr-uuid-for-ui-element-0"]').val(),filterTypeOperator:t.selected.form.jo.find('select[name="filterTypeOperator-jr-uuid-for-ui-element-0"]').val(),clearFilter:t.selected.form.jo.find('input[name="clearFilter-jr-uuid-for-ui-element-0"]:checked').val()};t.selected.form.jo.find('input[name="filterValueEnd"]').is(":hidden")||(n.fieldValueEnd=t.selected.form.jo.find('input[name="fieldValueEnd-jr-uuid-for-ui-element-0"]').val()),t.hide(),t.selected.ie.filter(n)},remove:function(){this.isInitialized&&(e("#filterTypeOperator-jr-uuid-for-ui-element-0").off("change"),e('input[name="clearFilter-jr-uuid-for-ui-element-0"]').off("change"),this.jo=null)}},t.interactive.column.basicFormatForm={actionDataCache:{},title:t.i18n.get("column.basicFormatForm.title"),name:"basicFormat",method:"get",prevApplyTo:null,elements:[[[{type:"text",id:"headingName-jr-uuid-for-ui-element-0",label:t.i18n.get("column.formatHeaderForm.headingName.label"),value:"",colspan:4}]],[[{type:"list",id:"fontName-jr-uuid-for-ui-element-0",label:t.i18n.get("column.formatforms.fontName.label"),values:[],freeText:!0,size:6,rowspan:2},{type:"list",id:"fontSize-jr-uuid-for-ui-element-0",label:t.i18n.get("column.formatforms.fontSize.label"),values:[],freeText:!0,size:6,rowspan:2},{type:"buttons",label:t.i18n.get("column.formatforms.styleButtons.label"),items:[{type:"checkbox",id:"fontBold-jr-uuid-for-ui-element-0",value:"bold",bIcon:"boldIcon"},{type:"checkbox",id:"fontItalic-jr-uuid-for-ui-element-0",value:"italic",bIcon:"italicIcon"},{type:"checkbox",id:"fontUnderline-jr-uuid-for-ui-element-0",value:"underline",bIcon:"underlineIcon"}]},{type:"buttons",label:t.i18n.get("column.formatforms.color.label"),items:[{type:"backcolor",id:"fontBackColor-jr-uuid-for-ui-element-0",bIcon:"backgroundColorIcon",title:t.i18n.get("column.formatforms.fontBackColor.title"),drop:!0,showTransparent:!0,styleClass:"wide"},{type:"color",id:"fontColor-jr-uuid-for-ui-element-0",bIcon:"fontColorIcon",title:t.i18n.get("column.formatforms.fontColor.title"),drop:!0}]}],[{type:"buttons",label:t.i18n.get("column.formatforms.alignment.label"),items:[{type:"radio",id:"fontAlign-jr-uuid-for-ui-element-0",value:"Left",bIcon:"leftIcon"},{type:"radio",id:"fontAlign-jr-uuid-for-ui-element-0",value:"Center",bIcon:"centerIcon"},{type:"radio",id:"fontAlign-jr-uuid-for-ui-element-0",value:"Right",bIcon:"rightIcon"}]}]],[[{type:"list",id:"formatPattern-jr-uuid-for-ui-element-0",label:t.i18n.get("column.formatCellsForm.formatPattern.label"),freeText:!0,values:[],colspan:2,size:4,rowspan:2},{type:"buttons",id:"numberFormatButtons-jr-uuid-for-ui-element-0",label:t.i18n.get("column.formatforms.numberformat.label"),items:[{type:"checkbox",id:"percentageBtn-jr-uuid-for-ui-element-0",fn:"togglePercentageFormat",value:"",bIcon:"percentageIcon"},{type:"checkbox",id:"commaBtn-jr-uuid-for-ui-element-0",fn:"toggleCommaFormat",value:"",bIcon:"commaIcon"},{type:"action",id:"increaseDecimalsBtn-jr-uuid-for-ui-element-0",fn:"addDecimal",value:"",bIcon:"increaseDecimalsIcon"},{type:"action",id:"decreaseDecimalsBtn-jr-uuid-for-ui-element-0",fn:"remDecimal",value:"",bIcon:"decreaseDecimalsIcon"}]}],[{type:"buttons",label:t.i18n.get("column.formatforms.currency.label"),items:[{type:"dropdown",drop:!0,id:"currencyBtn1-jr-uuid-for-ui-element-0",fn:"showCurrencyDropDown",bIcon:"currencyIcon",options:{none:{label:t.i18n.get("column.formatforms.currency.none.label"),value:"",fn:"applyCurrencyFormat"},locale_specific:{label:t.i18n.get("column.formatCellsForm.numberFormatButtons.localespecific.label"),value:"¤",fn:"applyCurrencyFormat"},dollar:{label:"$ - USD",value:"$",fn:"applyCurrencyFormat"},euro:{label:"€ - EUR",value:"€",fn:"applyCurrencyFormat"},pound:{label:"£ - GBP",value:"£",fn:"applyCurrencyFormat"},yen:{label:"¥ - YEN",value:"¥",fn:"applyCurrencyFormat"}}}]}]]],onCreate:function(){var i=this;this.isInitialized=!0,this.$applyTo=e("#applyTo"),this.$columnSwitchers=e("#colnext, #colprev"),this.$applyTo.on("change",function(){t.selected.form.onBlur(t.selected.form.prevApplyTo),t.selected.form.applyToChanged(this.value),t.selected.form.prevApplyTo=this.value}),this.$columnSwitchers.on(t.clickEventName,function(){if(this.className.indexOf("disabled")<0){var e=t.selected.ie.config.columnIndex;t.selected.form.onBlur(),t.selected.ie="colnext"==this.id?t.elements[t.reportInstance.id][i.getNextVisibleColUuid(e)]:t.elements[t.reportInstance.id][i.getPrevVisibleColUuid(e)],t.selected.form.columnChanged()}})},updateApplyToSelector:function(i){var n,o,a=[],r=e("#applyTo"),l=t.interactive.column.allColumnGroups[t.selected.jo.data("tableuuid")],d=t.selected.ie.config.columnIndex,u=[],c=[],s=[];i||a.push({value:"heading",text:t.i18n.get("column.basicFormatForm.applyto.option.headings")}),e("option",r).remove(),e.each(l,function(i,n){-1!=e.inArray(d,n.forColumns)&&(o=n.groupData?n.groupData.groupName:n.id,"groupheading"===n.grouptype?u.push({value:n.id,text:o+" "+t.i18n.get("column.basicFormatForm.groupheading.prefix")}):"groupsubtotal"===n.grouptype?c.push({value:n.id,text:o+" "+t.i18n.get("column.basicFormatForm.groupsubtotal.prefix")}):"tabletotal"===n.grouptype&&s.push({value:n.id,text:t.i18n.get("column.basicFormatForm.applyto.option.tabletotal")}))}),n=a.concat(u,[{value:"detailrows",text:t.i18n.get("column.basicFormatForm.applyto.option.detailrows")}],c,s),e.each(n,function(t,i){r.append(e("<option/>",i))})},onShow:function(){var e=t.ui.dialog.jo;e.find(".applytoWrapper").show(),e.find("#colprev").show(),e.find("#colnext").show(),t.selected.form.jo.parent().css({"overflow-y":"hidden"}),this.updateColNavButtons(),this.updateApplyToSelector(),this.prevApplyTo="heading",this.applyToChanged("heading")},columnChanged:function(){var i,n=e("#applyTo :selected").text();t.ui.dialog.title.html(t.i18n.get("column.format.dialog.title")+": "+t.selected.ie.config.columnLabel),this.updateColNavButtons(),this.updateApplyToSelector(),i=e("#applyTo").find("option:contains("+n+")"),i.length>0?(i.attr("selected",!0),this.applyToChanged(i.val())):this.applyToChanged("heading")},applyToChanged:function(e){var i=this,n=t.selected.form.jo.find("table"),o=e.substring(0,-1!=e.indexOf("_")?e.indexOf("_"):e.length);switch(o){case"heading":n.eq(2).hide(),n.eq(0).show();break;case"groupheading":n.eq(2).hide(),n.eq(0).hide();break;case"detailrows":n.eq(2).show(),n.eq(0).hide();break;case"tabletotal":case"groupsubtotal":n.eq(2).show(),n.eq(0).hide()}i.onGenericShow(e)},updateColNavButtons:function(){var i=t.selected.ie.config.columnIndex,n=e("#colnext"),o=e("#colprev");this.getNextVisibleColUuid(i)?n.removeClass("disabled"):n.addClass("disabled"),this.getPrevVisibleColUuid(i)?o.removeClass("disabled"):o.addClass("disabled")},getNextVisibleColUuid:function(e){var i,n=t.interactive.column.allColumns[t.selected.ie.config.parentId];for(i=e+1;n[i];i++)if(n[i].visible)return n[i].uuid;return!1},getPrevVisibleColUuid:function(e){var i,n=t.interactive.column.allColumns[t.selected.ie.config.parentId];for(i=e-1;i>=0;i--)if(n[i].visible)return n[i].uuid;return!1},getCacheKey:function(i){var n=i||e("#applyTo").val();return"heading"===n||"detailrows"===n?this.name+"_"+t.selected.ie.config.columnIndex+"_"+n:this.name+"_"+n},onGenericShow:function(i){var n,o,a,r=t.selected.form.inputs,l=!1,d=[];this.actionDataCache[this.getCacheKey()]?(n=this.actionDataCache[this.getCacheKey()].editTextElementData,l=!0):n="heading"===i?t.selected.ie.config.headingsTabContent:"detailrows"===i?t.selected.ie.config.valuesTabContent:this.getGroupMetadata(i),r["fontBold-jr-uuid-for-ui-element-0"].set(n.fontBold),r["fontItalic-jr-uuid-for-ui-element-0"].set(n.fontItalic),r["fontUnderline-jr-uuid-for-ui-element-0"].set(n.fontUnderline),r["fontAlign-jr-uuid-for-ui-element-0"].set(n.fontHAlign),l?("heading"===i&&r["headingName-jr-uuid-for-ui-element-0"].set(n.headingName),r["fontName-jr-uuid-for-ui-element-0"].set(n.fontName)):("heading"===i&&r["headingName-jr-uuid-for-ui-element-0"].set(t.decodeHTML(n.headingName)),r["fontName-jr-uuid-for-ui-element-0"].set(t.decodeHTML(n.fontName))),r["fontSize-jr-uuid-for-ui-element-0"].set(n.fontSize),r["fontColor-jr-uuid-for-ui-element-0"].set(n.fontColor),r["fontBackColor-jr-uuid-for-ui-element-0"].set(n.fontBackColor,n.mode),"heading"!==i&&(o=t.selected.form.jo.find("table:eq(2)"),"detailrows"===i?a=t.selected.ie.config.dataType.toLowerCase():n.dataType&&(a=n.dataType.toLowerCase()),!a||"numeric"!=a&&"date"!=a&&"time"!=a?o.find("tr").hide():(e.each(t.interactive.column.patterns[a],function(e,t){t&&d.push('<option value="'+t.key+'">'+t.val+"</option>")}),e("#formatPattern-jr-uuid-for-ui-element-0").html(d.join("")),r["formatPattern-jr-uuid-for-ui-element-0"].set(l?n.formatPattern:t.decodeHTML(n.formatPattern)),o.find("tr").show(),"numeric"==a?(o.find("tr:eq(0)").children("td:last").css("visibility","visible"),o.find("tr:eq(1)").children("td:last").css("visibility","visible"),r["percentageBtn-jr-uuid-for-ui-element-0"].set(!1),r["commaBtn-jr-uuid-for-ui-element-0"].set(!1)):(o.find("tr:eq(0)").children("td:last").css("visibility","hidden"),o.find("tr:eq(1)").children("td:last").css("visibility","hidden"))))},getGroupMetadata:function(i){var n=null;return e.each(t.interactive.column.allColumnGroups[t.selected.ie.config.parentId],function(e,t){return t.id===i?(n=t.groupData,!1):void 0}),n},submit:function(){var e,i=[];this.actionDataCache[this.getCacheKey()]=this.getActionData();for(e in this.actionDataCache)this.actionDataCache.hasOwnProperty(e)&&i.push(this.actionDataCache[e]);t.hide(),t.selected.ie.format(i)},onBlur:function(e){this.actionDataCache[this.getCacheKey(e)]=this.getActionData(e)},onHide:function(){this.actionDataCache={}},getActionData:function(i){var n,o=t.selected.form.inputs,a=i||e("#applyTo").val(),r=a.substring(0,-1!=a.indexOf("_")?a.indexOf("_"):a.length),l=this.getGroupMetadata(a);switch(n={actionName:"editTextElement",editTextElementData:{applyTo:r,tableUuid:t.selected.ie.config.parentId,columnIndex:t.selected.ie.config.columnIndex,fontName:t.escapeFontName(o["fontName-jr-uuid-for-ui-element-0"].get()),fontSize:o["fontSize-jr-uuid-for-ui-element-0"].get(),fontBold:o["fontBold-jr-uuid-for-ui-element-0"].get(),fontItalic:o["fontItalic-jr-uuid-for-ui-element-0"].get(),fontUnderline:o["fontUnderline-jr-uuid-for-ui-element-0"].get(),fontHAlign:o["fontAlign-jr-uuid-for-ui-element-0"].get(),fontColor:o["fontColor-jr-uuid-for-ui-element-0"].get(),fontBackColor:o["fontBackColor-jr-uuid-for-ui-element-0"].getBackColor(),mode:o["fontBackColor-jr-uuid-for-ui-element-0"].getModeValue(),dataType:l&&l.dataType}},r){case"heading":n.editTextElementData.headingName=o["headingName-jr-uuid-for-ui-element-0"].get();break;case"tabletotal":case"detailrows":n.editTextElementData.formatPattern=o["formatPattern-jr-uuid-for-ui-element-0"].get();break;case"groupheading":n.editTextElementData.groupName=l.groupName||null;break;case"groupsubtotal":n.editTextElementData.formatPattern=o["formatPattern-jr-uuid-for-ui-element-0"].get(),n.editTextElementData.groupName=l.groupName||null}return n},remove:function(){this.isInitialized&&(this.$applyTo.off(),this.$columnSwitchers.off(),this.jo=null)}},t.interactive.column.columnConditionalFormattingForm={actionDataCache:{},name:"columnConditionalFormatting",title:t.i18n.get("column.conditionalFormatting.title"),method:"get",options:null,conditionType:null,prevApplyTo:null,templateElements:[{type:"label",value:""},{type:"list",id:"conditionTypeOperator-jr-uuid-for-ui-element-0",values:[]},{type:"text",id:"conditionStart-jr-uuid-for-ui-element-0",value:"",wrapClass:"t_wrap"},{type:"label",value:"and",wrapClass:"t_wrap",tdClass:"condition_between_start"},{type:"text",id:"conditionEnd-jr-uuid-for-ui-element-0",value:"",wrapClass:"t_wrap"},{type:"buttons",items:[{type:"checkbox",id:"conditionFontBold-jr-uuid-for-ui-element-0",value:"bold",bIcon:"boldIcon",isTripleState:!0},{type:"checkbox",id:"conditionFontItalic-jr-uuid-for-ui-element-0",value:"italic",bIcon:"italicIcon",isTripleState:!0},{type:"checkbox",id:"conditionFontUnderline-jr-uuid-for-ui-element-0",value:"underline",bIcon:"underlineIcon",isTripleState:!0},{type:"backcolor",id:"conditionFontBackColor-jr-uuid-for-ui-element-0",bIcon:"backgroundColorIcon",title:t.i18n.get("column.formatforms.fontBackColor.title"),drop:!0,showTransparent:!0,showReset:!0,styleClass:"wide"},{type:"color",id:"conditionFontColor-jr-uuid-for-ui-element-0",bIcon:"fontColorIcon",title:t.i18n.get("column.formatforms.fontColor.title"),drop:!0,showReset:!0}]},{type:"buttons",items:[{type:"action",id:"conditionMoveUp-jr-uuid-for-ui-element-0",fn:"conditionMoveUp",bIcon:"moveUpIcon",btnClass:"plain"},{type:"action",id:"conditionMoveDown-jr-uuid-for-ui-element-0",fn:"conditionMoveDown",bIcon:"moveDownIcon",btnClass:"plain"}]},{type:"button",id:"conditionRemove-jr-uuid-for-ui-element-0",bIcon:"deleteIcon",fn:"removeFormatCondition",btnClass:"plain",tdClass:"last"}],elements:[[[{type:"label",value:t.i18n.get("column.conditionalFormatting.conditions.list.title"),align:"left",wrapClass:"wrapper label"}]],[[{type:"label",value:"#",isHeader:!0,tdWidth:"3%",align:"center"},{type:"label",value:t.i18n.get("column.conditionalFormatting.condition.operator"),isHeader:!0,tdWidth:"26%",align:"center"},{type:"label",value:t.i18n.get("column.conditionalFormatting.condition.condition"),colspan:3,isHeader:!0,tdWidth:"30%",align:"center"},{type:"label",value:t.i18n.get("column.conditionalFormatting.condition.format"),isHeader:!0,tdWidth:"26%",align:"center"},{type:"label",isHeader:!0,tdWidth:"10%",align:"center"},{type:"label",isHeader:!0,tdClass:"last",tdWidth:"5%",align:"center"}],[{type:"label"},{type:"button",id:"conditionAdd-jr-uuid-for-ui-element-0",bLabel:t.i18n.get("column.conditionalFormatting.condition.add"),fn:"addFormatCondition",btnClass:"plain",nowrap:!0},{type:"label",nowrap:!0,colspan:3},{type:"label",nowrap:!0},{type:"label",nowrap:!0},{type:"label",nowrap:!0,tdClass:"last"}]]],onCreate:function(t){this.isInitialized=!0,this.form=t,this.form.on("change","select[name=conditionTypeOperator-jr-uuid-for-ui-element-0]",function(){var t=e(this),i=t.closest("tr"),n=i.find("input[name^=conditionEnd-jr-uuid-for-ui-element-0]"),o=i.find("input[name^=conditionStart-jr-uuid-for-ui-element-0]");t.val().indexOf("BETWEEN")>=0?(n.closest("td").addClass("condition_between_end").show().prev().show(),n.prop("disabled",!1),o.closest("td").attr("colspan",1).addClass("condition_between_start")):(n.closest("td").removeClass("condition_between_end").hide().prev().hide(),n.prop("disabled",!0),o.closest("td").attr("colspan",3).removeClass("condition_between_start"))
}),this.form.on("rowchange","table",function(){e(this).find("tr.jive_condition").each(function(t){e(this).find(".jive_textLabel:first div:first").text(t+1)})}),this.form.find("table:eq(1)").addClass("conditionList").find("tr:last").addClass("add")},columnChanged:function(){var i,n=e("#applyTo :selected").text();t.ui.dialog.title.html(t.i18n.get("column.format.dialog.title")+": "+t.selected.ie.config.columnLabel),t.interactive.column.basicFormatForm.updateColNavButtons(),t.interactive.column.basicFormatForm.updateApplyToSelector(!0),i=e("#applyTo").find("option:contains("+n+")"),i.length>0?(i.attr("selected",!0),this.applyToChanged(i.val())):(e("#applyTo").val("detailrows"),this.applyToChanged("detailrows"))},applyToChanged:function(e){this.onGenericShow(e)},onShow:function(){t.selected.form.jo.parent().css({"overflow-y":"hidden"}),t.interactive.column.basicFormatForm.updateColNavButtons(),t.interactive.column.basicFormatForm.updateApplyToSelector(!0),this.prevApplyTo="detailrows",e("#applyTo").val("detailrows"),this.onGenericShow("detailrows")},getGroupMetadata:function(i){var n=null;return e.each(t.interactive.column.allColumnGroups[t.selected.ie.config.parentId],function(e,t){return t.id===i?(n=t.conditionalFormattingData,!1):void 0}),n},onGenericShow:function(i){var n,o=this,a=t.selected.form.jo.find("table:eq(1)"),r=!1,l=t.selected.form.jo.find("div.jive_inputbutton[bname=conditionAdd-jr-uuid-for-ui-element-0]");t.selected.form.jo.parent().css({"overflow-y":"auto"}),this.actionDataCache[this.getCacheKey()]?(n=this.actionDataCache[this.getCacheKey()].conditionalFormattingData,r=!0):-1!=i.indexOf("group")||-1!=i.indexOf("tabletotal")?n=this.getGroupMetadata(i):"detailrows"==i&&(n=t.selected.ie.config.conditionalFormattingData),n?(o.conditionType=n.conditionType.toLowerCase(),o.options=t.interactive.column.operators[o.conditionType],l.removeClass("disabled"),"boolean"===o.conditionType?a.find("th:eq(2), tr.add td:eq(2)").hide():a.find("th:eq(2), tr.add td:eq(2)").show(),e.each(n.conditions,function(e,i){o.addFormatCondition(t.selected.form.jo,i,r)})):(t.selected.form.jo.find("table:eq(1) tr.jive_condition").each(function(){o.removeRow(e(this))}),l.addClass("disabled"))},onBlur:function(i){var n,o=this,a=i||e("#applyTo").val();"heading"!==a&&(n=this.getCacheKey(a),n&&(this.actionDataCache[n]=this.getActionData(a))),t.selected.form.jo.find("table:eq(1) tr.jive_condition").each(function(){o.removeRow(e(this))})},onHide:function(){var i=this;this.actionDataCache={},t.selected.form.jo.find("table:eq(1) tr.jive_condition").each(function(){i.removeRow(e(this))})},submit:function(){var e,i=[];this.actionDataCache[this.name]=this.getActionData();for(e in this.actionDataCache)this.actionDataCache.hasOwnProperty(e)&&i.push(this.actionDataCache[e]);t.hide(),t.selected.ie.format(i)},addFormatCondition:function(i,n,o){if(!i.is(".disabled")){var a,r=this,l=r.conditionType,d=t.interactive.column.calendarPatterns.date,u=t.interactive.column.calendarPatterns.time,c=i.closest("form"),s=c.find("table:eq(1)"),m=[],f=t.selected.form.inputs,p=[];if(m.push('<tr class="jive_condition">'),e.each(this.templateElements,function(e,i){t.ui.forms.createTemplateElement(i,r,c,m)}),m.push("</tr>"),a=e(m.join("")),a.insertBefore(s.find("tr:last")),e.each(r.options,function(e,t){t&&p.push('<option value="'+t.key+'">'+t.val+"</option>")}),a.find("select[name=conditionTypeOperator-jr-uuid-for-ui-element-0]").append(p.join("")).trigger("change"),"date"===l){var h={changeMonth:!0,changeYear:!0,dateFormat:d,timeFormat:u,showSecond:!0};a.find("input[name=conditionStart-jr-uuid-for-ui-element-0]").datetimepicker(h),a.find("input[name=conditionEnd-jr-uuid-for-ui-element-0]").datetimepicker(h)}else if("time"===l){var g={timeFormat:u,showSecond:!0,constrainInput:!1};a.find("input[name=conditionStart-jr-uuid-for-ui-element-0]").timepicker(g),a.find("input[name=conditionEnd-jr-uuid-for-ui-element-0]").timepicker(g)}else"boolean"===l&&(a.find("input[name=conditionStart-jr-uuid-for-ui-element-0]").prop("disabled",!0),a.find("input[name=conditionStart-jr-uuid-for-ui-element-0]").closest("td").hide());n?(a.find("select[name=conditionTypeOperator-jr-uuid-for-ui-element-0]").val(n.conditionTypeOperator).trigger("change"),f[a.find("input[name=conditionEnd-jr-uuid-for-ui-element-0]").attr("id")].set(n.conditionEnd),f[a.find("input[name=conditionStart-jr-uuid-for-ui-element-0]").attr("id")].set("text"===l&&o?n.conditionStart:t.decodeHTML(n.conditionStart)),f[a.find(".jive_inputbutton[bname^=conditionFontBold-jr-uuid-for-ui-element-0]").attr("bname")].set(n.conditionFontBold),f[a.find(".jive_inputbutton[bname^=conditionFontItalic-jr-uuid-for-ui-element-0]").attr("bname")].set(n.conditionFontItalic),f[a.find(".jive_inputbutton[bname^=conditionFontUnderline-jr-uuid-for-ui-element-0]").attr("bname")].set(n.conditionFontUnderline),f[a.find(".jive_inputbutton[bname^=conditionFontColor-jr-uuid-for-ui-element-0]").attr("bname")].set(n.conditionFontColor),f[a.find(".jive_inputbutton[bname^=conditionFontBackColor-jr-uuid-for-ui-element-0]").attr("bname")].set(n.conditionFontBackColor,n.conditionMode)):(f[a.find(".jive_inputbutton[bname^=conditionFontBold-jr-uuid-for-ui-element-0]").attr("bname")].set(null),f[a.find(".jive_inputbutton[bname^=conditionFontItalic-jr-uuid-for-ui-element-0]").attr("bname")].set(null),f[a.find(".jive_inputbutton[bname^=conditionFontUnderline-jr-uuid-for-ui-element-0]").attr("bname")].set(null),f[a.find(".jive_inputbutton[bname^=conditionFontColor-jr-uuid-for-ui-element-0]").attr("bname")].set(null),f[a.find(".jive_inputbutton[bname^=conditionFontBackColor-jr-uuid-for-ui-element-0]").attr("bname")].set(null,null)),s.trigger("rowchange")}},removeFormatCondition:function(e){var t=e.closest("tr"),i=t.closest("table");this.removeRow(t),i.trigger("rowchange")},removeRow:function(i){var n=t.selected.form.inputs;i.find("[name^=condition]").each(function(){delete n[e(this).attr("id")]}),i.find(".jive_inputbutton[bname^=conditionFont]").each(function(){delete n[e(this).attr("bname")]}),i.remove()},conditionMoveUp:function(e){var t=e.closest("tr"),i=t.prev(),n=t.closest("table");n.find("tr").index(t)>1&&(t.insertBefore(i),n.trigger("rowchange"))},conditionMoveDown:function(e){var t=e.closest("tr"),i=t.next(),n=t.closest("table"),o=n.find("tr");i.size()>0&&o.index(t)<o.size()-2&&(t.insertAfter(i),n.trigger("rowchange"))},getCacheKey:function(i){var n=i||e("#applyTo").val();return"heading"===n?null:"detailrows"===n&&t.selected.ie.config.conditionalFormattingData?this.name+"_"+t.selected.ie.config.columnIndex+"_"+n:this.getGroupMetadata(n)&&this.getGroupMetadata(n).conditionalFormattingData?this.name+"_"+n:null},getActionData:function(i){var n,o,a=i||e("#applyTo").val(),r=a.substring(0,-1!=a.indexOf("_")?a.indexOf("_"):a.length),l=t.selected.form.inputs;return-1!=a.indexOf("group")?(n=this.getGroupMetadata(a),o={actionName:"conditionalFormatting",conditionalFormattingData:{applyTo:r,tableUuid:t.selected.ie.config.parentId,columnIndex:t.selected.ie.config.columnIndex,conditionPattern:n.conditionPattern,conditionType:n.conditionType,conditions:[],groupName:n.groupName}}):("detailrows"==a||"tabletotal"===r)&&(n="tabletotal"===r?this.getGroupMetadata(a):t.selected.ie.config.conditionalFormattingData,o={actionName:"conditionalFormatting",conditionalFormattingData:{applyTo:r,tableUuid:t.selected.ie.config.parentId,columnIndex:t.selected.ie.config.columnIndex,conditionPattern:n.conditionPattern,conditionType:n.conditionType,conditions:[]}}),t.selected.form.jo.find("table:eq(1) tr.jive_condition").each(function(){var t=e(this);o.conditionalFormattingData.conditions.push({conditionStart:l[t.find("input[name=conditionStart-jr-uuid-for-ui-element-0]").attr("id")].get(),conditionEnd:l[t.find("input[name=conditionEnd-jr-uuid-for-ui-element-0]").attr("id")].get(),conditionTypeOperator:l[t.find("select[name=conditionTypeOperator-jr-uuid-for-ui-element-0]").attr("id")].get(),conditionFontBold:l[t.find(".jive_inputbutton[bname^=conditionFontBold-jr-uuid-for-ui-element-0]").attr("bname")].get(),conditionFontItalic:l[t.find(".jive_inputbutton[bname^=conditionFontItalic-jr-uuid-for-ui-element-0]").attr("bname")].get(),conditionFontUnderline:l[t.find(".jive_inputbutton[bname^=conditionFontUnderline-jr-uuid-for-ui-element-0]").attr("bname")].get(),conditionFontColor:l[t.find(".jive_inputbutton[bname^=conditionFontColor-jr-uuid-for-ui-element-0]").attr("bname")].get(),conditionFontBackColor:l[t.find(".jive_inputbutton[bname^=conditionFontBackColor-jr-uuid-for-ui-element-0]").attr("bname")].getBackColor(),conditionMode:l[t.find(".jive_inputbutton[bname^=conditionFontBackColor-jr-uuid-for-ui-element-0]").attr("bname")].getModeValue()})}),o},remove:function(){this.isInitialized&&(this.form.off(),this.jo=null)}},t.interactive.column});