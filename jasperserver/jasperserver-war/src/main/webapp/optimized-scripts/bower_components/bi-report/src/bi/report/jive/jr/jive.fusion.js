define(["require","jquery","./jasperreports-url-manager","fusioncharts","jrs.configs"],function(t,n,e,i,s){var r=function(t){this.config=t,this.parent=null,this.loader=null;var n=this.config.instanceData.swfUrl;this.config.instanceData.swfUrl=s.contextPath+n.substring(n.indexOf("/fusion")),this.fusionInstance=null,this.events={HYPERLINK_INTERACTION:"hyperlinkInteraction"},this._init()};return r.prototype={_init:function(){var t,n=this,e=n.config.instanceData;FusionCharts.options.html5ChartsSrc="../charts/FusionCharts.HC.Charts.js",FusionCharts.options.html5WidgetsSrc="../widgets/FusionCharts.HC.Widgets.js",document.getElementById(e.id)||("function"==typeof window.printRequest&&window.printRequest(),t={id:e.id,swfUrl:e.swfUrl,width:e.width,height:e.height,debugMode:e.debugMode,registerWithJS:e.registerWithJS,renderAt:e.renderAt,allowScriptAccess:e.allowScriptAccess,dataFormat:e.dataFormat,dataSource:e.dataSource},"html5"===e.rendererType&&(t.renderer="javascript"),FusionCharts.items[t.id]&&FusionCharts.items[t.id].dispose(),n.fusionInstance=new FusionCharts(t),n.fusionInstance.addEventListener("BeforeRender",function(t,n){"javascript"===n.renderer&&t.sender.setChartAttribute("exportEnabled","0")}),n.fusionInstance.addEventListener("JR_Hyperlink_Interception",function(t,e){var i;n.config.linksOptions.events&&(i=n.config.linksOptions.events.click),i&&i.call(this,t,e),n._hyperlinkItemClicked(e)}),n.fusionInstance.setTransparent(e.transparent),n.fusionInstance.render())},_hyperlinkItemClicked:function(t){this._notify({name:this.events.HYPERLINK_INTERACTION,type:"hyperlinkClicked",data:{hyperlink:t}})},_notify:function(t){this.parent&&this.parent._notify(t)}},r});