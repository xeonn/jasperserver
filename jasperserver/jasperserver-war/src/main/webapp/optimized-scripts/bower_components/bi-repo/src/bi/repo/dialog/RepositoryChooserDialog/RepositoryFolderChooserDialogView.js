define(["require","underscore","bundle!all","jrs.configs","common/component/dialog/Dialog","bi/repo/dialog/RepositoryChooserDialog/RepositoryFolderTreeFactory","text!./template/repositoryFolderChooserDialogTemplate.htm","text!./template/repositoryFolderChooserDialogTooltipTemplate.htm"],function(e){"use strict";var t=e("underscore"),o=e("bundle!all"),i=e("jrs.configs"),l=e("common/component/dialog/Dialog"),r=e("bi/repo/dialog/RepositoryChooserDialog/RepositoryFolderTreeFactory"),s=e("text!./template/repositoryFolderChooserDialogTemplate.htm"),n=e("text!./template/repositoryFolderChooserDialogTooltipTemplate.htm");return l.extend({constructor:function(e){e||(e={});var i="selectFolder newResizeableDialog";e.additionalCssClasses&&(i+=" "+e.additionalCssClasses),l.prototype.constructor.call(this,{modal:!0,resizable:!0,minWidth:400,minHeight:400,additionalCssClasses:i,title:o["repository.content"],content:t.template(s)({i18n:o}),buttons:[{label:o["button.select"],action:"select",primary:!0},{label:o["button.cancel"],action:"cancel",primary:!1}]}),this.on("button:select",t.bind(this._onSelectDialogButtonClick,this)),this.on("button:cancel",t.bind(this._onCancelDialogButtonClick,this))},initialize:function(e){l.prototype.initialize.apply(this,arguments),this.foldersTree=r({contextPath:i.contextPath,tooltipContentTemplate:n}),this.selectedResource={resourceUri:""},this.listenTo(this.foldersTree,"selection:change",function(e){var o;e&&t.isArray(e)&&e[0]&&e[0].uri&&(o=e[0].uri),this.selectedResource.resourceUri=o,this.enableButton("select")});var o=this.$contentContainer.find(".control.groupBox .body");o.append(this.foldersTree.render().el),this.disableButton("select")},open:function(){l.prototype.open.apply(this,arguments)},close:function(){l.prototype.close.apply(this,arguments)},remove:function(){this.foldersTree.remove(),l.prototype.remove.apply(this,arguments)},_onSelectDialogButtonClick:function(){this.close()},_onCancelDialogButtonClick:function(){this.selectedResource.resourceUri="",this.close()}})});