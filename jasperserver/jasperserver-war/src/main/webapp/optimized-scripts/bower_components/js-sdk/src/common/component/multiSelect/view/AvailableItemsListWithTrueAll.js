define(["require","jquery","underscore","text!common/component/multiSelect/templates/availableItemsListDropdownWithTrueAllTemplate.htm","common/component/multiSelect/view/AvailableItemsList"],function(e){var t=e("jquery"),i=e("underscore"),l=e("text!common/component/multiSelect/templates/availableItemsListDropdownWithTrueAllTemplate.htm"),o=e("common/component/multiSelect/view/AvailableItemsList"),n=o.extend({initialize:function(e){i.bindAll(this,"onSetTrueAll"),e=i.extend({dropDownTemplate:l},e),e.trueAll&&delete e.value,o.prototype.initialize.call(this,e),this.setTrueAll(e.trueAll)},initListeners:function(){o.prototype.initListeners.call(this),this.listenTo(this.model,"change:isTrueAll",this.changeTrueAll,this),this.$dropDownEl.on("change",".mSelect-footer input[type='checkbox']",this.onSetTrueAll)},onSelectAll:function(){if(!this.model.get("disabled")){var e=this.$dropDownEl.find(".mSelect-footer input[type='checkbox']");e.prop("checked",!e.prop("checked")),this.model.set("isTrueAll",e.is(":checked"))}},onSelectNone:function(){this.model.get("isTrueAll")||o.prototype.onSelectNone.call(this)},onInvertSelection:function(){this.model.get("isTrueAll")||o.prototype.onInvertSelection.call(this)},onSetTrueAll:function(e){var i=t(e.target).is(":checked");this.model.set("isTrueAll",i)},changeTrueAll:function(){var e=this.model.get("isTrueAll"),t=this.$dropDownEl.find(".mSelect-footer input[type='checkbox']");if(e!==t.is(":checked")&&t.prop("checked",e),e){this.$dropDownEl.find("a.none, a.invert").addClass("disabled"),this.listView.activate(void 0),this.listView.reset({silent:!0});var i=this;this.clearFilterForTrueAll(function(){i.listView.once("selection:change",i.processSelectionThroughApi,i),i.setTrueAllForListView(!0)})}else this.$dropDownEl.find("a.none, a.invert").removeClass("disabled"),this.model.trigger("change:value"),this.setTrueAllForListView(!1)},setTrueAllForListView:function(e){e&&this.listView.selectAll(),this.listView.setDisabled(e)},clearFilterForTrueAll:function(e){this.model.get("criteria")?(this.$el.find("input").val(""),this.model.set("criteria","",{silent:!0}),this.changeFilter(e)):e&&e()},changeDisabled:function(){var e=this.model.get("disabled");e?this.$dropDownEl.find(".mSelect-footer input[type='checkbox']").attr("disabled","disabled"):this.$dropDownEl.find(".mSelect-footer input[type='checkbox']").removeAttr("disabled"),o.prototype.changeDisabled.call(this)},getModelForRendering:function(){return i.extend(o.prototype.getModelForRendering.call(this),{isTrueAll:this.model.get("isTrueAll")})},setTrueAll:function(e){this.model.set("isTrueAll",e)},getTrueAll:function(){return this.model.get("isTrueAll")},remove:function(){o.prototype.remove.call(this),this.$dropDownEl.off("change",this.onSetTrueAll)}});return n});