define(["require","underscore","jquery"],function(e){var t=e("underscore"),r=e("jquery"),n=function(e){t.bindAll(this,"getData"),e=e||{},this.format=e.format,this.request=e.request};return t.extend(n.prototype,{getData:function(e){var n=r.Deferred();return this.request(e).done(t.bind(this._requestDone,this,n)).fail(n.reject),n.promise()},_requestDone:function(e,t){if(this.format&&t&&t.data){var r=t.data;if(r.length>0&&!r[0].label)for(var n=0;n<r.length;n++)r[n].label=this.format(r[n].value)}e.resolve(t)}}),n});