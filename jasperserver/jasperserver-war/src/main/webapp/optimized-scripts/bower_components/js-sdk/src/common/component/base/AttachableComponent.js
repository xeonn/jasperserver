define(["require","jquery","underscore","common/util/classUtil"],function(t){"use strict";var i=t("jquery"),e=t("underscore"),h=t("common/util/classUtil");return h.extend({constructor:function(t,e){if(this.padding=e?e:{top:5,left:5},!t||0===i(t).length)throw new Error("AttachableComponent should be attached to an element");this.$attachTo=i(t)},show:function(){var t=this.$attachTo.offset(),h=this.$attachTo[0].tagName&&"input"===this.$attachTo[0].tagName.toLowerCase()?this.$attachTo.outerHeight():this.$attachTo.height(),o=this.$attachTo.width(),s=i("body"),n=s.height(),a=s.width(),r=this.$el.innerWidth(),d=this.$el.innerHeight(),c=t.top+h+this.padding.top,l=t.left,p=t.top+h+this.padding.top,u=t.left+o;d+c>n&&(p=t.top-d-this.padding.top),0>p&&(p=t.top-d/2-this.padding.top),0>p&&(p=0),r+l>a&&(u=t.left-r),0>u&&(u=t.left+o/2-r/2),0>u&&(u=0),p>t.top&&a>r+l&&(u-=o),e.extend(this,{top:p,left:u}),this.$el.css({top:this.top,left:this.left}),this.$el.show(),this.trigger("show",this)},hide:function(){return this.$el.hide(),this.trigger("hide",this),this}})});