!function(e,r){function n(e,n){var l,a,c,u,f,h,g,p;if(e&&("object"==typeof e?(a=e.url,u=e.logEnabled,f=e.logLevel,h=e.scripts,r.config({config:{logger:{enabled:e.logEnabled,level:e.logLevel,appenders:["console"]}}})):"string"==typeof e&&(a=e)),a||(l=new Error(t.BASE_URL_NOT_FOUND)),n&&"function"!=typeof n&&(l=new Error(t.ILLEGAL_CALLBACK),n=null),n||(n=o),l)n.apply(this,[l]),p=function(e){throw new Error("Can't load "+e)};else{var d;try{d=i(window.location.href)===i(a)}catch(j){d=!1}g=new s(n,l),r(["common/loader/core/Root","logger","xdm"],function(e,r,n){d&&(window.easyXDM=n),c=new e(a,u,f,h);var t=r.register("Jasper");c.settings().done(function(e){t.debug("Server settings: ",e),g.resolveSettings(e)}),c.requirejs().done(function(e){var r=requirejs.config(e);g.resolveConfig(r)})},n),p=function(e,r){g.then(function(t){t.apply(this,[e,r,n])})}}return p}var t={BASE_URL_NOT_FOUND:"Illegal 'conf' argument, it should be url to server or contains 'url' property",ILLEGAL_CALLBACK:"Illegal 'callback' argument, it should be function or undefined"},o=function(e){if(e)throw e},i=function(e){var r=document.createElement("a");return r.href=e,r.origin||r.protocol+"//"+r.host},s=function(e,r){function n(){e&&e.call(this,r,this.require);for(var n=0;n<this._callbacks.length;n++)this._callbacks[n](this.require)}this._callbacks=[],this.then=function(e){this.require?e(this.require):this._callbacks.push(e)},this.resolveSettings=function(e){this.settings=e,this.require&&n.call(this)},this.resolveConfig=function(e){this.require=e,this.settings&&n.call(this)}},l=e.jasper,a=e.jasperjs;n.noConflict=function(r){return e.jasper===n&&(e.jasper=l),r&&e.jasperjs===jasperjs&&(e.jasperjs=a),n},e.jasper=n,e.jasperjs=n,n._errors_=t,n.version="0.0.1a"}(this,require);