define(["require","backbone.epoxy.original","common/component/colorPicker/SimpleAttachableColorPicker","underscore"],function(t){function i(t,i){var e=t.data("bind"),a=new RegExp(i+":(\\w*)\\(?(\\w*)?\\)?");return n.last(n.compact(e.match(a)))}var e=t("backbone.epoxy.original"),a=t("common/component/colorPicker/SimpleAttachableColorPicker"),n=t("underscore");return e.binding.addHandler("validationErrorClass",{init:function(t,e,a,n){this.attr=i(t,"validationErrorClass");var c=this.view.model;this._onAttrValidated=function(i,e,a){t[a?"addClass":"removeClass"]("error")},c.on("validate:"+this.attr,this._onAttrValidated)},get:function(t,i,e){return t.val()},set:function(t,i){t.val(i)},clean:function(){this.view.model.off("validate:"+this.attr,this._onAttrValidated)}}),e.binding.addHandler("validationErrorText",{init:function(t,e,a,n){this.attr=i(t,"validationErrorText");var c=this.view.model;this._onAttrValidated=function(i,e,a){t.text(a||"")},c.on("validate:"+this.attr,this._onAttrValidated)},get:function(t,i,e){return t.val()},set:function(t,i){t.val(i)},clean:function(){this.view.model.off("validate:"+this.attr,this._onAttrValidated)}}),e.binding.addFilter("escapeCharacters",{get:function(t){return n.escape(t)},set:function(t){return n.unescape(t)}}),e.binding.addHandler("colorpicker",{init:function(t,e,c,o){var r=!!t.data("showTransparentInput"),l=t.data("label"),d=i(t,"colorpicker");this.attachableColorPicker=new a(t,{top:5,left:5},{label:l,showTransparentInput:r}),this.callback=function(t){c[d](t)},this.attachableColorPicker.on("color:selected",n.bind(this.callback,this))},get:function(t,i,e){return t.val()},set:function(t,i){var e=t.find(".colorIndicator");this.attachableColorPicker.highlightColor(i),e.css("background-color",i)},clean:function(){this.attachableColorPicker.off("color:selected",n.bind(this.callback,this)),this.attachableColorPicker.remove()}}),e.binding.addHandler("radioDiv",{init:function(t,e,a,c){var o=i(t,"radioDiv");this.callback=function(){var i=t.data("value");a[o](i)},t.on("click",n.bind(this.callback,this))},get:function(t,i,e){return t.data("value")},set:function(t,i){var e=t.siblings("div[data-bind*='radioDiv:']");t.data("value")===i&&(t.addClass("checked"),t.children(".radioChild").addClass("checked"),e.removeClass("checked"),e.children(".radioChild").removeClass("checked"))}}),e.binding.addHandler("checkboxDiv",{init:function(t,e,a,c){var o=i(t,"checkboxDiv");this.callback=function(){a[o](!a[o]())},t.on("click",n.bind(this.callback,this))},get:function(t,i,e){return t.data("value")},set:function(t,i){i?(t.addClass("checked"),t.children(".checkboxChild").addClass("checked")):(t.removeClass("checked"),t.children(".checkboxChild").removeClass("checked"))}}),e.binding.addHandler("slide",function(t,i){t[i?"slideDown":"slideUp"]({complete:function(){!i&&t.hide()}})}),e.binding.addFilter("prependText",function(t,i){return"'"===i.charAt(0)&&"'"===i.charAt(i.length-1)&&(i=i.slice(1,i.length-1)),i+" "+(n.isUndefined(t)?"":t)}),e});