define(["require","moment","settings/localeSettings","underscore","common/util/datetime/RelativeDate","common/util/datetime/RelativeTimestamp"],function(e){"use strict";function t(e){var t=e;return t=e.indexOf("yy")>-1?t.replace("yy","YYYY"):t.replace("y","YY"),e.indexOf("mm")>-1?t=t.replace("mm","MM"):e.indexOf("MM")>-1?t=t.replace("MM","MMMM"):e.indexOf("m")>-1?t=t.replace("m","M"):e.indexOf("M")>-1&&(t=t.replace("M","MMM")),e.indexOf("dd")>-1?t=t.replace("dd","DD"):e.indexOf("DD")>-1?t=t.replace("DD","dddd"):e.indexOf("d")>-1?t=t.replace("d","D"):e.indexOf("D")>-1&&(t=t.replace("D","ddd")),t}function i(e){return e.toLowerCase().replace("hh","HH")}function a(e,a,r){var n=t(e),o=i(a);return n+(null!=r?r:" ")+o}function r(e){return x(e,t(S.dateFormat),!0)}function n(e){return x(e,a(S.dateFormat,S.timeFormat,S.timestampSeparator),!0)}function o(e){return z.isValid(e)}function m(e){return R.isValid(e)}function s(e){return g.isDate(e)&&x(e).isValid()||g.isString(e)&&""!==e&&r(e).isValid()}function u(e){return g.isDate(e)&&x(e).isValid()||g.isString(e)&&""!==e&&n(e).isValid()}function d(e){return x(e,y,!0).isValid()}function c(e,t){if(s(e)&&s(t)){var i=g.isDate(e)?x(e):r(e),a=g.isDate(t)?x(t):r(t);return f(i,a)}}function l(e,t){if(u(e)&&u(t)){var i=g.isDate(e)?x(e):n(e),a=g.isDate(t)?x(t):n(t);return f(i,a)}}function f(e,t){return e.isBefore(t)?-1:e.isAfter(t)?1:0}function p(e){var t=x(e);return g.isDate(e)&&t.isValid()?t.format(y):void 0}function D(e){var t=x(e,y,!0);return t.isValid()?t.toDate():void 0}function T(e){return V(e,a(S.dateFormat,S.timeFormat,S.timestampSeparator),y)}function M(e){return V(e,y,a(S.dateFormat,S.timeFormat,S.timestampSeparator))}function v(e){return V(e,t(S.dateFormat),I)}function Y(e){return V(e,I,t(S.dateFormat))}function F(e){return V(e,i(S.timeFormat),h)}function O(e){return V(e,h,i(S.timeFormat))}function V(e,t,i){if(z.isValid(e))return e;var a=x(e,t,!0);return a.isValid()?a.format(i):e}var x=e("moment"),S=e("settings/localeSettings").localeSettings,g=e("underscore"),z=e("common/util/datetime/RelativeDate"),R=e("common/util/datetime/RelativeTimestamp"),y="YYYY-MM-DD[T]HH:mm:ss",I="YYYY-MM-DD",h="hh:mm:ss";return{isRelativeDate:o,isRelativeTimestamp:m,isDate:s,isTimestamp:u,isIso8601Timestamp:d,compareDates:c,compareTimestamps:l,dateObjectToIso8601Timestamp:p,iso8601TimestampToDateObject:D,localizedTimestampToIsoTimestamp:T,isoTimestampToLocalizedTimestamp:M,localizedDateToIsoDate:v,isoDateToLocalizedDate:Y,localizedTimeToIsoTime:F,isoTimeToLocalizedTime:O}});