define(["require","moment","jrs.configs","underscore","common/util/datetime/RelativeDate","common/util/datetime/RelativeTimestamp"],function(e){"use strict";function t(e){var t=e;return t=e.indexOf("yy")>-1?t.replace("yy","YYYY"):t.replace("y","YY"),e.indexOf("mm")>-1?t=t.replace("mm","MM"):e.indexOf("MM")>-1?t=t.replace("MM","MMMM"):e.indexOf("m")>-1?t=t.replace("m","M"):e.indexOf("M")>-1&&(t=t.replace("M","MMM")),e.indexOf("dd")>-1?t=t.replace("dd","DD"):e.indexOf("DD")>-1?t=t.replace("DD","dddd"):e.indexOf("d")>-1?t=t.replace("d","D"):e.indexOf("D")>-1&&(t=t.replace("D","ddd")),t}function i(e){return e.toLowerCase().replace("hh","HH")}function a(e,a,n){var r=t(e),o=i(a);return r+(null!=n?n:" ")+o}function n(e){return O(e,t(V.localeSettings.dateFormat),!0)}function r(e){return O(e,a(V.localeSettings.dateFormat,V.localeSettings.timeFormat,V.localeSettings.timestampSeparator),!0)}function o(e){return z.isValid(e)}function m(e){return R.isValid(e)}function s(e){return x.isDate(e)&&O(e).isValid()||x.isString(e)&&""!==e&&n(e).isValid()}function l(e){return x.isDate(e)&&O(e).isValid()||x.isString(e)&&""!==e&&r(e).isValid()}function c(e){return O(e,y,!0).isValid()}function u(e,t){if(s(e)&&s(t)){var i=x.isDate(e)?O(e):n(e),a=x.isDate(t)?O(t):n(t);return f(i,a)}}function d(e,t){if(l(e)&&l(t)){var i=x.isDate(e)?O(e):r(e),a=x.isDate(t)?O(t):r(t);return f(i,a)}}function f(e,t){return e.isBefore(t)?-1:e.isAfter(t)?1:0}function p(e){var t=O(e);return x.isDate(e)&&t.isValid()?t.format(y):void 0}function D(e){var t=O(e,y,!0);return t.isValid()?t.toDate():void 0}function T(e){return F(e,a(V.localeSettings.dateFormat,V.localeSettings.timeFormat,V.localeSettings.timestampSeparator),y)}function M(e){return F(e,y,a(V.localeSettings.dateFormat,V.localeSettings.timeFormat,V.localeSettings.timestampSeparator))}function S(e){return F(e,t(V.localeSettings.dateFormat),I)}function g(e){return F(e,I,t(V.localeSettings.dateFormat))}function v(e){return F(e,i(V.localeSettings.timeFormat),h)}function Y(e){return F(e,h,i(V.localeSettings.timeFormat))}function F(e,t,i){if(z.isValid(e))return e;var a=O(e,t,!0);return a.isValid()?a.format(i):e}var O=e("moment"),V=e("jrs.configs"),x=e("underscore"),z=e("common/util/datetime/RelativeDate"),R=e("common/util/datetime/RelativeTimestamp"),y="YYYY-MM-DD[T]HH:mm:ss",I="YYYY-MM-DD",h="hh:mm:ss";return{isRelativeDate:o,isRelativeTimestamp:m,isDate:s,isTimestamp:l,isIso8601Timestamp:c,compareDates:u,compareTimestamps:d,dateObjectToIso8601Timestamp:p,iso8601TimestampToDateObject:D,localizedTimestampToIsoTimestamp:T,isoTimestampToLocalizedTimestamp:M,localizedDateToIsoDate:S,isoDateToLocalizedDate:g,localizedTimeToIsoTime:v,isoTimeToLocalizedTime:Y}});