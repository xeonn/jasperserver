define(["require","moment","jrs.configs","underscore","common/util/datetime/RelativeDate","common/util/datetime/RelativeTimestamp"],function(t){function e(t){var e=t.toLowerCase();return e.replace(e.indexOf("yyyy")>-1?"yyyy":"yy","YYYY").replace("mm","MM").replace("dd","DD")}function i(t){return t.toLowerCase().replace("hh","HH")}function a(t,a,o){var n=e(t),r=i(a);return n+(null!=o?o:" ")+r}function o(t){return y(t,e(z.localeSettings.dateFormat),!0)}function n(t){return y(t,a(z.localeSettings.dateFormat,z.localeSettings.timeFormat,z.localeSettings.timestampSeparator),!0)}function r(t){return R.isValid(t)}function s(t){return I.isValid(t)}function m(t){return M.isDate(t)&&y(t).isValid()||M.isString(t)&&""!==t&&o(t).isValid()}function l(t){return M.isDate(t)&&y(t).isValid()||M.isString(t)&&""!==t&&n(t).isValid()}function c(t){return y(t,L,!0).isValid()}function u(t,e){if(m(t)&&m(e)){var i=M.isDate(t)?y(t):o(t),a=M.isDate(e)?y(e):o(e);return f(i,a)}}function d(t,e){if(l(t)&&l(e)){var i=M.isDate(t)?y(t):n(t),a=M.isDate(e)?y(e):n(e);return f(i,a)}}function f(t,e){return t.isBefore(e)?-1:t.isAfter(e)?1:0}function T(t){var e=y(t);return M.isDate(t)&&e.isValid()?e.format(L):void 0}function p(t){var e=y(t,L,!0);return e.isValid()?e.toDate():void 0}function D(t){return V(t,a(z.localeSettings.dateFormat,z.localeSettings.timeFormat,z.localeSettings.timestampSeparator),L)}function S(t){return V(t,L,a(z.localeSettings.dateFormat,z.localeSettings.timeFormat,z.localeSettings.timestampSeparator))}function g(t){return V(t,e(z.localeSettings.dateFormat),h)}function v(t){return V(t,h,e(z.localeSettings.dateFormat))}function Y(t){return V(t,i(z.localeSettings.timeFormat),j)}function F(t){return V(t,j,i(z.localeSettings.timeFormat))}function V(t,e,i){if(R.isValid(t))return t;var a=y(t,e);return a.isValid()?a.format(i):t}var y=t("moment"),z=t("jrs.configs"),M=t("underscore"),R=t("common/util/datetime/RelativeDate"),I=t("common/util/datetime/RelativeTimestamp"),L="YYYY-MM-DD[T]HH:mm:ss",h="YYYY-MM-DD",j="hh:mm:ss";return{isRelativeDate:r,isRelativeTimestamp:s,isDate:m,isTimestamp:l,isIso8601Timestamp:c,compareDates:u,compareTimestamps:d,dateObjectToIso8601Timestamp:T,iso8601TimestampToDateObject:p,localizedTimestampToIsoTimestamp:D,isoTimestampToLocalizedTimestamp:S,localizedDateToIsoDate:g,isoDateToLocalizedDate:v,localizedTimeToIsoTime:Y,isoTimeToLocalizedTime:F}});