define(["require","underscore","common/component/multiSelect/dataprovider/DelegatingDataProvider","common/component/singleSelect/dataprovider/CacheableDataProvider","common/component/multiSelect/view/new/AvailableItemsListWithTrueAllNew","common/component/multiSelect/view/new/MultiSelectNew","common/component/multiSelect/view/MultiSelectWithTrueAll"],function(e){var t=e("underscore"),i=e("common/component/multiSelect/dataprovider/DelegatingDataProvider"),a=e("common/component/singleSelect/dataprovider/CacheableDataProvider"),l=e("common/component/multiSelect/view/new/AvailableItemsListWithTrueAllNew"),o=e("common/component/multiSelect/view/new/MultiSelectNew"),n=e("common/component/multiSelect/view/MultiSelectWithTrueAll"),r=n.extend({_createSelectedItemsList:o.prototype._createSelectedItemsList,selectionRemoved:o.prototype.selectionRemoved,_sortSelection:o.prototype._sortSelection,_convertSelectionToStandardData:o.prototype._convertSelectionToStandardData,getValue:o.prototype.getValue});return r=r.extend({_createAvailableItemsList:function(e){return this.availableItemsListDataProvider=e.getData,e.availableItemsList||new l({getData:e.getData,bufferSize:e.bufferSize,loadFactor:e.loadFactor,chunksTemplate:e.chunksTemplate,scrollTimeout:e.scrollTimeout,trueAll:e.trueAll})},_createSelectedItemsListDataProvider:function(){return new i},selectionChangeInternal:function(e){var i=this.getTrueAll();if(i){this.selectedItemsDataProvider.setGetData(this.availableItemsListDataProvider),this.selectedItemsDataProvider.setData=null;var l=this;this.selectedItemsList.fetch(function(){l.selectedItemsList.resize(),l.selectedItemsList.setDisabled(!0)}),this.silent?delete this.silent:this.triggerSelectionChange()}else{var n=new a;this.selectedItemsDataProvider.setGetData(n.getData),this.selectedItemsDataProvider.setData=t.bind(n.setData,n),o.prototype.selectionChangeInternal.call(this,e),this.selectedItemsList.setDisabled(!1)}}})});