define(["require","./Menu","jquery","underscore"],function(t){"use strict";var e=t("./Menu"),i=t("jquery"),o=t("underscore");return e.extend({constructor:function(t,i){e.call(this,t,i),this.topPadding=i&&i.topPadding||5,this.leftPadding=i&&i.leftPadding||5,this.hideOnMouseLeave=i&&i.hideOnMouseLeave||!1,this.hideOnMouseLeave&&this.$el.on("mouseleave",this._tryHide),o.bindAll(this,"_tryHide")},_tryHide:function(){this.hide(),i(document.body).off("click.contextMenu",this._tryHide)},show:function(t,s){if(!t||!o.isNumber(t.top)||!o.isNumber(t.left))throw new Error("Required params (top, left) missing: "+JSON.stringify(t));i(document.body).on("click.contextMenu",this._tryHide);var n=t.top,h=t.left,d=this.topPadding,r=this.leftPadding,u=i("body"),f=this.$el.height(),l=this.$el.width(),c=s?s.height():u.height(),p=s?s.width():u.width(),a=s?s.offset():u.offset(),y=c-t.top,g=p-t.left;return f>y&&(n=t.top-f-d,n<a.top&&(n+=a.top-n+d),n=0>n?c/2-f/2:n),l>g&&(h=t.left-l-r,h<a.left&&(h+=a.left-h+r),h=0>h?p/2-l/2:h),o.extend(this,{top:n,left:h}),this.$el.css({top:this.top,left:this.left}),e.prototype.show.apply(this,arguments)},remove:function(){i(document.body).off("click.contextMenu",this._tryHide),this.hideOnMouseLeave&&this.$el.off("mouseleave",this._tryHide),e.prototype.remove.apply(this,arguments)}})});