define(["require"],function(e){var t="a,abbr,acronym,address,area,article,aside,b,bdi,bdo,big,blockquote,body,br,caption,center,center,cite,code,col,colgroup,dd,details,dfn,div,dl,dt,em,fieldset,font,footer,form,h1,h2,h3,h4,h5,h6,head,header,hr,html,i,iframe,img,input,label,legend,li,main,map,mark,menu,menuitem,meta,nav,ol,option,p,pre,section,select,small,span,strike,strong,sub,summary,sup,table,tbody,td,textarea,th,thead,title,tr,u,ul,!--",r={"(":"&#40;",")":"&#41;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},i=function(e){return null==e?"":e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")},n=function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(i(r));return t},a=function(){var e,t={"&#111;":"o","&#110;":"n","&amp;":"&"};for(e in r)Object.prototype.hasOwnProperty.call(r,e)&&(t[r[e]]=e);return t}(),p="(?:"+n(r).join("|")+")",l=RegExp(p),o=RegExp(p,"g"),c="(?:\\)|\\()",g=RegExp(c),s=RegExp(c,"g"),u="\\b='(.*?)'",f=RegExp(u),x=RegExp(u,"g"),E='\\b="(.*?)"',d=RegExp(E),R=RegExp(E,"g"),b="<(?!/|"+t.replace(/,/g,"|")+")",h=RegExp(b,"i"),m=RegExp(b,"ig"),y="</(?!"+t.replace(/,/g,"|")+")",v=RegExp(y,"i"),w=RegExp(y,"ig"),j="\\bjavascript:",$=RegExp(j,"i"),L=RegExp(j,"ig"),q="\\bon(\\w+?)=",O=RegExp(q,"i"),k=RegExp(q,"ig"),P=function(e,t){if(e=null==e?"":e,t=t||{},!("string"==typeof e||e instanceof String))return e;if(t.softHTMLEscape){if(e=g.test(e)?e.replace(s,function(e){return r[e]}):e,e=f.test(e)?e.replace(x,"=`$1`").replace(/'/g,"&#39;").replace(/\b=`(.*?)`/g,"='$1'"):e.replace(/'/g,"&#39;"),e=d.test(e)?e.replace(R,"=`$1`").replace(/"/g,"&quot;").replace(/\b=`(.*?)`/g,'="$1"'):e.replace(/"/g,"&quot;"),t.whiteList&&t.whiteList instanceof Array&&t.whiteList.length>0){var i="<(?!/|"+t.whiteList.join("|")+")",n=RegExp(i,"i"),a=RegExp(i,"ig");e=n.test(e)?e.replace(a,"&lt;"):e;var p="</(?!"+t.whiteList.join("|")+")",c=RegExp(p,"i"),u=RegExp(p,"ig");e=c.test(e)?e.replace(u,"&lt;/"):e}else e=h.test(e)?e.replace(m,"&lt;"):e,e=v.test(e)?e.replace(w,"&lt;/"):e;e=$.test(e)?e.replace(L,""):e,e=O.test(e)?e.replace(k,"&#111;&#110;$1="):e}else e=l.test(e)?e.replace(o,function(e){return r[e]}):e;return e},S="(?:"+n(a).join("|")+")",U=RegExp(S,"i"),A=RegExp(S,"ig"),C=function(e){return e=null==e?"":e,("string"==typeof e||e instanceof String)&&U.test(e)?e.replace(A,function(e){return a[e]}):e};return xssUtil={escape:P,unescape:C,noConflict:function(){}},xssUtil});