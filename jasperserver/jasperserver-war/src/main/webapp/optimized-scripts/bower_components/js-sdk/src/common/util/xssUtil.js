define(["require"],function(e){var t="a,abbr,acronym,address,area,article,aside,b,bdi,bdo,big,blockquote,body,br,caption,center,cite,code,col,colgroup,dd,details,dfn,div,dl,dt,em,fieldset,font,footer,form,h1,h2,h3,h4,h5,h6,head,header,hr,html,i,iframe,img,input,label,legend,li,main,map,mark,menu,menuitem,meta,nav,ol,option,p,pre,section,select,small,span,strike,strong,sub,summary,sup,table,tbody,td,textarea,th,thead,title,tr,u,ul,!--",r={"(":"&#40;",")":"&#41;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},a=function(e){return null==e?"":e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")},n=function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(a(r));return t},i=function(){var e,t={"&#111;":"o","&#110;":"n","&#115;":"s","&#114;":"r","&#99;":"c","&amp;":"&"};for(e in r)Object.prototype.hasOwnProperty.call(r,e)&&(t[r[e]]=e);return t}(),c=RegExp("(?:"+n(r).join("|")+")","g"),l=/(?:\)|\()/g,s=/\b='(.*?)'/g,o=/\b="(.*?)"/g,p=/\bjavascript:/gi,g=/\bon(\w+?)\s*=/gi,u=/\bsrcdoc\s*=/gi,f=function(e,a){if(e=null==e?"":e,a=a||{},!("string"==typeof e||e instanceof String))return e;if(a.softHTMLEscape){if(e=l.test(e)?e.replace(l,function(e){return r[e]}):e,e=s.test(e)?e.replace(s,"=`$1`").replace(/'/g,"&#39;").replace(/\b=`(.*?)`/g,"='$1'"):e.replace(/'/g,"&#39;"),e=o.test(e)?e.replace(o,"=`$1`").replace(/"/g,"&quot;").replace(/\b=`(.*?)`/g,'="$1"'):e.replace(/"/g,"&quot;"),a.whiteList&&a.whiteList instanceof Array&&a.whiteList.length>0){var n=RegExp("<(?!/|"+a.whiteList.join("\\b|")+")","ig");e=n.test(e)?e.replace(n,"&lt;"):e;var i=RegExp("</(?!"+a.whiteList.join("\\b|")+")","ig");e=i.test(e)?e.replace(i,"&lt;/"):e}else{var f=t;if(a.escapeTags&&a.escapeTags instanceof Array)for(var b=0;b<a.escapeTags.length;++b)f=t.replace(a.escapeTags[b]+",","");var d=RegExp("<(?!/|"+f.replace(/,/g,"\\b|")+")","ig");e=d.test(e)?e.replace(d,"&lt;"):e;var h=RegExp("</(?!"+f.replace(/,/g,"\\b|")+")","ig");e=h.test(e)?e.replace(h,"&lt;/"):e}e=p.test(e)?e.replace(p,""):e,e=g.test(e)?e.replace(g,"&#111;&#110;$1="):e,e=u.test(e)?e.replace(u,"&#115;&#114;&#99;doc="):e}else e=c.test(e)?e.replace(c,function(e){return r[e]}):e;return e},b=RegExp("(?:"+n(i).join("|")+")","ig"),d=function(e){return e=null==e?"":e,("string"==typeof e||e instanceof String)&&b.test(e)?e.replace(b,function(e){return i[e]}):e};return xssUtil={escape:f,unescape:d,noConflict:function(){}},xssUtil});