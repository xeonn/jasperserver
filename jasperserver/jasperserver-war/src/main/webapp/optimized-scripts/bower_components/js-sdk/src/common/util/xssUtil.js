define(["require"],function(){var e="a,abbr,acronym,address,area,article,aside,b,bdi,bdo,big,blockquote,body,br,caption,center,center,cite,code,col,colgroup,dd,details,dfn,div,dl,dt,em,fieldset,font,footer,form,h1,h2,h3,h4,h5,h6,head,header,hr,html,i,iframe,img,input,label,legend,li,main,map,mark,menu,menuitem,meta,nav,ol,option,p,pre,section,select,small,span,strike,strong,sub,summary,sup,table,tbody,td,textarea,th,thead,title,tr,u,ul,!--",t={"(":"&#40;",")":"&#41;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},r=function(e){return null==e?"":e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")},i=function(e){var t=[];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.push(r(i));return t},n=function(){var e,r={"&#111;":"o","&#110;":"n","&amp;":"&"};for(e in t)Object.prototype.hasOwnProperty.call(t,e)&&(r[t[e]]=e);return r}(),a="(?:"+i(t).join("|")+")",p=RegExp(a),l=RegExp(a,"g"),o="(?:\\)|\\()",c=RegExp(o),g=RegExp(o,"g"),s="\\b='(.*?)'",u=RegExp(s),f=RegExp(s,"g"),x='\\b="(.*?)"',E=RegExp(x),d=RegExp(x,"g"),R="<(?!/|"+e.replace(/,/g,"|")+")",b=RegExp(R,"i"),h=RegExp(R,"ig"),m="</(?!"+e.replace(/,/g,"|")+")",y=RegExp(m,"i"),v=RegExp(m,"ig"),w="\\bjavascript:",j=RegExp(w,"i"),$=RegExp(w,"ig"),L="\\bon(\\w+?)=",q=RegExp(L,"i"),O=RegExp(L,"ig"),k=function(e,r){if(e=null==e?"":e,r=r||{},!("string"==typeof e||e instanceof String))return e;if(r.softHTMLEscape){if(e=c.test(e)?e.replace(g,function(e){return t[e]}):e,e=u.test(e)?e.replace(f,"=`$1`").replace(/'/g,"&#39;").replace(/\b=`(.*?)`/g,"='$1'"):e.replace(/'/g,"&#39;"),e=E.test(e)?e.replace(d,"=`$1`").replace(/"/g,"&quot;").replace(/\b=`(.*?)`/g,'="$1"'):e.replace(/"/g,"&quot;"),r.whiteList&&r.whiteList instanceof Array&&r.whiteList.length>0){var i="<(?!/|"+r.whiteList.join("|")+")",n=RegExp(i,"i"),a=RegExp(i,"ig");e=n.test(e)?e.replace(a,"&lt;"):e;var o="</(?!"+r.whiteList.join("|")+")",s=RegExp(o,"i"),x=RegExp(o,"ig");e=s.test(e)?e.replace(x,"&lt;/"):e}else e=b.test(e)?e.replace(h,"&lt;"):e,e=y.test(e)?e.replace(v,"&lt;/"):e;e=j.test(e)?e.replace($,""):e,e=q.test(e)?e.replace(O,"&#111;&#110;$1="):e}else e=p.test(e)?e.replace(l,function(e){return t[e]}):e;return e},P="(?:"+i(n).join("|")+")",S=RegExp(P,"i"),U=RegExp(P,"ig"),A=function(e){return e=null==e?"":e,("string"==typeof e||e instanceof String)&&S.test(e)?e.replace(U,function(e){return n[e]}):e};return xssUtil={escape:k,unescape:A,noConflict:function(){}},xssUtil});