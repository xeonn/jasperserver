define(["require","backbone","underscore","xregexp","settings!dataSourcePatterns","dataSource/util/settingsUtility"],function(e){var t=e("backbone"),r=e("underscore"),a=e("xregexp"),n=e("settings!dataSourcePatterns"),u=e("dataSource/util/settingsUtility"),i=t.Model.extend({idAttribute:"jdbcDriverClass",defaults:{defaultValues:{},jdbcDriverClass:"",label:"",available:!1,isDefault:!1,jdbcUrl:"",uploaded:!1},initialize:function(e,t){var s=u.deepDefaults(t,{dataSourcePatterns:n});i.DYNAMIC_URL_PART_PATTERN=s.dataSourcePatterns.dynamicUrlPartPattern,i.VALIDATION_PATTERNS=r.reduce(s.dataSourcePatterns,function(e,t,r){return e[r]=a(t),e},{})},isOtherDriver:function(){return this.get("jdbcDriverClass")===i.OTHER_DRIVER},isUploadedDriver:function(){return this.get("uploaded")===!0},getCustomAttributes:function(){if(this.isOtherDriver())return[];var e=this._getRegExpFieldGroupsFromConnectionUrlTemplate(),t=[];return r.each(e,function(e){return t.push(e[1])}),t},convertUrlTemplateToRegex:function(){var e=this.get("jdbcUrl");e=e.replace(/\?/g,"\\?");for(var t in i.VALIDATION_PATTERNS){var r=new RegExp("\\$\\["+t+"\\]","g");e=e.replace(r,i.DYNAMIC_URL_PART_PATTERN)}return"^"+e},parse:function(e){return e.isDefault=e.isDefault?!0:!1,e.defaultValues&&(e.defaultValues=r.reduce(e.defaultValues,function(e,t){return e[t.key]=t.value,e},{})),e},_getRegExpFieldGroupsFromConnectionUrlTemplate:function(){for(var e,t=[];!r.isNull(e=i.FIELD_TEMPLATE_REGEXP.exec(this.get("jdbcUrl")));)r.isArray(e)&&2===e.length&&t.push(e);return t}},{FIELD_TEMPLATE_REGEXP:/\$\[([^\]]+)\]/g,OTHER_DRIVER:"other"});return i});