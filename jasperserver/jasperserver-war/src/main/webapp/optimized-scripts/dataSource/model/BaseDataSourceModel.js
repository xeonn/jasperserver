define(["require","common/model/RepositoryResourceModel","underscore","jquery","backbone","jrs.configs"],function(e){var t=e("common/model/RepositoryResourceModel"),o=e("underscore"),i=e("jquery"),n=e("backbone"),r=e("jrs.configs");return t.extend({defaults:function(){var e={};return o.extend(e,t.prototype.defaults,{connectionType:void 0}),e}(),validation:{},initialize:function(e,o){this.options=o,this.isNew()&&o.parentFolderUri&&this.set("parentFolderUri",o.parentFolderUri,{silent:!0});var i=o.parentFolderUri?o.parentFolderUri:e.parentFolderUri;e.name&&i&&!e.uri&&o.isEditMode===!0&&this.set("uri",t.constructUri(i,e.name),{silent:!0}),t.prototype.initialize.apply(this,arguments)},testConnection:function(){if(this.validate(),this._isValid){var e=i.Deferred(),t=i("#"+ajax.LOADING_ID)[0],o=!1,s=window.setTimeout(function(){o=!0,dialogs.popup.show(t,!0)},AjaxRequester.prototype.MAX_WAIT_TIME),a=this.toJSON();return n.ajax({type:"POST",url:r.contextPath+"/rest_v2/connections",contentType:a.connectionType,headers:{Accept:"application/json"},data:JSON.stringify(a)}).always(function(){window.clearTimeout(s),o&&dialogs.popup.hide(t)}).done(e.resolve).fail(e.reject),e.promise()}}})});