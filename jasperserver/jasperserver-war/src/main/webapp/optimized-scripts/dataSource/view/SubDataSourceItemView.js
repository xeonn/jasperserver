define(["require","backbone","jquery","underscore","core.layout","components.list","common/util/featureDetection","text!dataSource/template/subDataSourceItemTemplate.htm","backbone.validation"],function(e){var t=e("backbone"),a=e("jquery"),i=(e("underscore"),e("core.layout")),n=e("components.list"),o=(e("common/util/featureDetection"),e("text!dataSource/template/subDataSourceItemTemplate.htm")),s=e("backbone.validation");return t.View.extend({events:{"keyup input[type='text']":"updateDataSourceId","change input[type='text']":"updateDataSourceId"},initialize:function(){var e=this.model.toJSON();this._listItem=new n.UnderscoreTemplatedListItem({template:o,cssClassName:i.LEAF_CLASS,value:e,tooltipText:this.model.get("uri")}),s.bind(this,{valid:this.fieldIsValid,invalid:this.fieldIsInvalid,forceUpdate:!0})},updateDataSourceId:function(){var e=this.$("input[type='text']"),t={};t.id=a.trim(e.val()),this.model.set(t),this.model.validate(t),this._listItem.setValue(this.model.toJSON())},getListItem:function(){return this._listItem},setRootElement:function(){this.setElement(this._listItem._getElement())},fieldIsValid:function(e){var t=e.$("input[type='text']").parent();t.removeClass("error"),t.find(".validatorMessageContainer").removeClass("error"),t.find(".message.warning").text("")},fieldIsInvalid:function(e,t,a){var i=e.$("input[type='text']").parent();i.addClass("error"),i.find(".validatorMessageContainer").addClass("error"),i.find(".message.warning").text(a)}})});