define(["require","underscore"],function(e){var i=e("underscore");return{_findInheritedViewByName:function(e,t){return i.find(e,function(e){return e.isInherited()&&e.model.get("name")===t})},_filterInheritedViews:function(e){if(e){var t=e.attribute;this.inheritedAttributes=i.filter(t,function(e){return e.inherited&&!this._findInheriteds(e.name)},this)}else this.inheritedAttributes=null},_findInheriteds:function(e){return this._findModelsWhere({name:e,inherited:!0})},_revertInheritedRemoval:function(e){if(!this._findInheriteds(e)){var i=this._findInheritedViewByName(this.changedViews,e);i&&this._revertViewRemoval(i)}},_searchForInherited:function(e){var i=this;return this.collection.search(e).done(function(e){i._filterInheritedViews(e),i.collection.addItemsToCollection(i.inheritedAttributes)})},_removeInheritedView:function(e){var t=this.collection.where({name:e.get("name"),inherited:!0});i.each(t,function(t){t&&!i.isEqual(e,t)&&this.removeView(null,t)},this)},_addInheritedView:function(e){this.inheritedAttributes&&this.inheritedAttributes.length&&(e.resetField("id"),this.collection.addItemsToCollection(this.inheritedAttributes))}}});