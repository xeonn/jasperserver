"undefined"==typeof Administer&&(Administer={}),Administer=_.extend({_messages:{},urlContext:null,getMessage:function(t,e){var i=this._messages[t];return i?new Template(i).evaluate(e?e:{}):""},menuActions:{"p#navAnalysisOptions":function(){return Administer.urlContext+"/flow.html?_flowId=mondrianPropertiesFlow"},"p#navAnalysisOptionsCE":function(){return Administer.urlContext+"/olap/properties.html"},"p#navDesignerOptions":function(){return Administer.urlContext+"/flow.html?_flowId=designerOptionsFlow"},"p#navDesignerCache":function(){return Administer.urlContext+"/flow.html?_flowId=designerCacheFlow"},"p#navAwsSettings":function(){return Administer.urlContext+"/flow.html?_flowId=awsSettingsFlow"},"p#navLogSettings":function(){return Administer.urlContext+"/log_settings.html"},"p#logCollectors":function(){return Administer.urlContext+"/logCollectors.html"},"p#navImport":function(){return Administer.urlContext+"/adminImport.html"},"p#navExport":function(){return Administer.urlContext+"/adminExport.html"},"p#navCustomAttributes":function(){return Administer.urlContext+"/customAttributes.html"},"p#navResetSettings":function(){return Administer.urlContext+"/resetSettings.html"}},_sendRequest:function(t,e,i){ajaxTargettedUpdate(t,{postData:e,callback:i,mode:AjaxRequester.prototype.EVAL_JSON,errorHandler:this._errorHandler})},_errorHandler:function(t){return t.getResponseHeader("LoginRequested")?(window.location="flow.html?_flowId=designerCacheFlow",!0):baseErrorHandler(t)}},Administer),define("administer.base",["prototype","underscore","core.ajax"],function(t){return function(){var e;return e||t.Administer}}(this));var logging={initialize:function(){layoutModule.resizeOnClient("serverSettingsMenu","settings"),webHelpModule.setCurrentContext("admin"),this.initEvents()},initEvents:function(){var t=this;$("display").observe("click",function(t){var e=t.element(),i=matchAny(e,[layoutModule.BUTTON_PATTERN],!0);if(i)for(var n in Administer.menuActions)if(i.match(n)&&!i.up("li").hasClassName("selected"))return void(document.location=Administer.menuActions[n]())}),jQuery(".js-logSettings select").on("change",function(e){var i,n=jQuery(e.target);i=n.hasClass("js-newLogger")?jQuery("#newLoggerName").val():n.parent().prev().text(),t._setLevel(encodeURIComponent(i),n.val())})},_setLevel:function(t,e){document.location="log_settings.html?logger="+t+"&level="+e}};"undefined"==typeof require&&document.observe("dom:loaded",function(){logging.initialize()}),define("administer.logging",["administer.base","core.layout","components.webHelp","utils.common"],function(t){return function(){var e;return e||t.logging}}(this)),define("tenantImportExport/export/enum/exportTypesEnum",{ROOT_TENANT:"rootTenant",TENANT:"tenant",SERVER_CE:"serverCE",SERVER_PRO:"serverPRO",REPOSITORY:"repository"}),define("tenantImportExport/import/factory/importModelAttributesFactory",["require","underscore","tenantImportExport/export/enum/exportTypesEnum"],function(t){var e=t("underscore"),i=t("tenantImportExport/export/enum/exportTypesEnum"),n={},s={includeAccessEvents:!0,includeAuditEvents:!0,includeMonitoringEvents:!0},o={skipThemes:!0},r={includeServerSettings:!0};return n[i.ROOT_TENANT]=e.extend({},s,o),n[i.TENANT]=e.extend({},o),n[i.SERVER_PRO]=e.extend({},s,o,r),n[i.SERVER_CE]=e.extend({},r,{includeAccessEvents:!0}),function(t){return n[t]}}),define("tenantImportExport/import/enum/brokenDependencyStrategyEnum",{FAIL:"fail",SKIP:"skip",INCLUDE:"include"}),define("common/transport/AjaxFormSubmitter",["require","underscore","request","jquery"],function(t){function e(t){var e,n=null;return t.firstChild.innerText&&""!==t.firstChild.innerText&&t.body?(e=new window.ActiveXObject("Microsoft.XMLDOM"),e.async=!1,e.loadXML(t.firstChild.innerText.replace("\r\n-","\r\n"))):e=t,e.firstChild&&(n=e.firstChild.nodeName.toLowerCase()),n&&"html"!==n&&"#comment"!==n?i("xml"===e.firstChild.nodeName.toLowerCase()?e.firstChild.nextSibling:e.firstChild):{errorCode:"unexpected.error"}}function i(t){var e,n;if(t.children)e=t.children;else{e=[];for(var s=0,o=t.childNodes.length;o>s;s++)null===t.childNodes[s].nodeValue&&e.push(t.childNodes[s])}if(0===e.length&&1===t.childNodes.length)return t.childNodes[0].nodeValue;if(e.length>1&&e[0].nodeName===e[1].nodeName){n=[];for(var s=0,o=e.length;o>s;s++)n[s]=i(e[s])}else{n={};for(var s=0,o=e.length;o>s;s++)n[e[s].nodeName]=i(e[s])}return n}function n(t){var e=new a.Deferred;return t.submit(function(i){i.preventDefault(),r({url:t.attr("action"),type:t.attr("method"),data:new FormData(t[0]),cache:!1,contentType:!1,processData:!1,headers:{Accept:"application/json"}}).done(function(t){e.resolve(t)}).fail(function(t){t=t.responseJSON||t||{},o.defaults(t,{errorCode:"error.load.error"}),e.reject(t)}),t.unbind("submit")}),t.submit(),e}function s(t,i){var n=a.Deferred(),s=a("<iframe style='display:none' name='"+i+"'></iframe>");return t.append(s).attr("target",i),s.load(function(){try{n.resolve(e(this.contentWindow.document))}catch(t){n.reject({errorCode:"error.invalid.response"})}s.remove()}),s.on("abort",function(){n.reject({errorCode:"error.load.aborted"}),s.remove()}),s.on("error",function(){n.reject({errorCode:"error.load.error"}),s.remove()}),t.submit(),n}var o=t("underscore"),r=t("request"),a=t("jquery"),l=function(t,i,n,s){this.name=o.uniqueId("uploadTarget"),this.form=a(t),i&&this.form.attr("action",i),n&&this.form.attr("method",n),s&&this.form.attr("enctype",s),this.parceXmlDocToObject=e};return l.prototype.submit=function(){return window.FormData?n(this.form):s(this.form,this.name)},l}),define("common/enum/httpStatusCodes",{100:"continue",101:"switchingProtocols",200:"ok",201:"created",202:"accepted",203:"nonAuthoritativeInformation",204:"noContent",205:"resetContent",206:"partialContent",300:"multipleChoices",301:"movedPermanently",302:"found",303:"seeOther",304:"notModified",305:"useProxy",307:"temporaryRedirect",400:"badRequest",401:"unauthorized",402:"paymentRequired",403:"forbidden",404:"notFound",405:"methodNotAllowed",406:"notAcceptable",407:"proxyAuthenticationRequired",408:"requestTimeout",409:"conflict",410:"gone",411:"lengthRequired",412:"preconditionFailed",413:"requestEntityTooLarge",414:"requestUriTooLong",415:"unsupportedMediaType",416:"requestedRangeNotSatisfiable",417:"expectationFailed",500:"internalServerError",501:"notImplemented",502:"badGateway",503:"serviceUnavailable",504:"gatewayTimeout",505:"httpVersionNotSupported"}),define("common/enum/errorCodes",["require"],function(t){"use strict";return{UNEXPECTED_ERROR:"unexpected.error",INVALID_RESOURCE_TYPE:"invalid.resource.type"}}),define("common/model/BaseModel",["require","underscore","backbone","common/enum/httpStatusCodes","common/enum/errorCodes"],function(t){"use strict";var e=t("underscore"),i=t("backbone"),n=t("common/enum/httpStatusCodes"),s=t("common/enum/errorCodes"),o=i.Model.extend({initialize:function(){this.on("error",o.unifyServerErrors)},serialize:function(){return e.clone(this.attributes)}},{unifyServerErrors:function(t,e){var i=n[e.status],s=o.createServerError(e);t.trigger("error:"+i,t,s,e),t.trigger("error:all",t,s,e)},createServerError:function(t){var e;try{e=JSON.parse(t.responseText)}catch(i){e={message:"Can't parse server response",errorCode:s.UNEXPECTED_ERROR,parameters:[]}}return e}});return o}),define("tenantImportExport/import/model/ImportModel",["require","underscore","jquery","tenantImportExport/import/factory/importModelAttributesFactory","../enum/brokenDependencyStrategyEnum","common/transport/AjaxFormSubmitter","backbone.validation","common/model/BaseModel"],function(t){var e=t("underscore"),i=t("jquery"),n=t("tenantImportExport/import/factory/importModelAttributesFactory"),s=t("../enum/brokenDependencyStrategyEnum"),o=t("common/transport/AjaxFormSubmitter"),r=t("backbone.validation"),a=t("common/model/BaseModel"),l=a.extend({defaults:{fileName:"",update:!0,skipUserUpdate:!1,mergeOrganization:!1,skipThemes:!0,brokenDependencies:s.FAIL},url:"rest_v2/import",validation:{fileName:[{fn:function(t){return!/\.zip$/.test(t)}}]},initialize:function(t,e){this.form=new o(e.form,this.url,"post","multipart/form-data")},parse:function(){return this.attributes},save:function(){var t,n,s=this;return this.isNew()?(t=new i.Deferred,this.form.submit().done(function(i){s.set("id",i.id),e.isUndefined(i.errorCode)&&e.isUndefined(i.error)?t.resolve(i):t.reject(i)}).fail(function(e){s.trigger("error",e),t.reject(e)})):(n=this._convertParameters(),t=a.prototype.save.call(this,{parameters:n},{url:this.url+"/"+this.id}).fail(e.bind(this.trigger,"error"))),t},cancel:function(){var t=this.url+"/"+this.id;this.destroy({url:t})},reset:function(t,i){var s=e.extend({},this.defaults,n(t),i);this.clear().set(e.extend({},s)),this.id=void 0},_convertParameters:function(){var t=[];return this.get("skipUserUpdate")&&t.push("skip-user-update"),this.get("includeAccessEvents")&&t.push("include-access-events"),this.get("includeAuditEvents")&&t.push("include-audit-events"),this.get("includeMonitoringEvents")&&t.push("include-monitoring-events"),this.get("includeServerSettings")&&t.push("include-server-setting"),this.get("mergeOrganization")&&t.push("merge-organization"),this.get("skipThemes")&&t.push("skip-themes"),this.get("update")&&t.push("update"),t}});return e.extend(l.prototype,r.mixin),l}),define("tenantImportExport/export/model/ExportStateModel",["require","underscore","common/model/BaseModel"],function(t){var e=t("underscore"),i=t("common/model/BaseModel"),n={INPROGRESS:"inprogress",READY:"finished",FAILED:"failed",PENDING:"pending",CANCELLED:"cancelled"};return i.extend({url:function(){return"rest_v2/export/"+this.id+"/state"},initialize:function(t){i.prototype.initialize.call(this),this.on("change:phase",function(t,i){i==n.INPROGRESS&&e.isUndefined(t.interval)?t.interval=window.setInterval(function(){t.fetch({cache:!1}).fail(e.bind(t.stopPolling,t))},1e3):t.stopPolling()})},stopPolling:function(){e.isUndefined(this.interval)||(window.clearInterval(this.interval),this.interval=void 0)}},{STATE:n})}),define("tenantImportExport/import/model/ImportStateModel",["require","../../export/model/ExportStateModel"],function(t){var e=t("../../export/model/ExportStateModel");return e.extend({url:function(){return"rest_v2/import/"+this.id+"/state"}})}),define("tenantImportExport/import/enum/importPendingStatesEnum",{BROKEN_DEPS:"import.broken.dependencies",TENANT_MISMATCH:"import.organizations.not.match"}),define("common/component/base/Dimmer",["require","jquery","common/util/classUtil"],function(t){var e,i,n=t("jquery"),s=t("common/util/classUtil");return s.extend({constructor:function(t){e||(i=0,e=n("<div id='dialogDimmer' class='dimmer'></div>").css(t),n(document.body).append(e)),e.hide(),i++},css:function(t){return e.css(t),this},show:function(){var t=this.getCount()||0;return this.setCount(++t),e.show(),this},hide:function(){if(this.isVisible()){var t=this.getCount();return this.setCount(--t),!t&&e.hide(),this}},setCount:function(t){e.data({count:t})},getCount:function(){return parseInt(e.data("count"),10)},isVisible:function(){return e.is(":visible")},remove:function(){this._removed||(this._removed=!0,e&&(i--,i||(e.remove(),e=null)))}})}),define("text!common/component/panel/template/panelTemplate.htm",[],function(){return'<div class="panel {{- additionalCssClasses }}">\n    <div class="header">\n        <div class="title">{{- title}}</div>\n    </div>\n    <div class="subcontainer"></div>\n</div>\n'}),define("common/component/panel/Panel",["require","css!panel","underscore","backbone","text!./template/panelTemplate.htm"],function(t){"use strict";t("css!panel");var e=t("underscore"),i=t("backbone"),n=t("text!./template/panelTemplate.htm");return i.View.extend({defaultTemplate:n,el:function(){return this.template({title:this.title,additionalCssClasses:this.additionalCssClasses})},constructor:function(t){t||(t={}),this.template=e.template(t.template||this.defaultTemplate),this.title=t.title||"",this.additionalCssClasses=t.additionalCssClasses||"",this.content=t.content||"",this.collapsed=!t.collapsed,this.openClass=t.openClass||"open",this.closedClass=t.closedClass||"closed",this.loadingClass=t.loadingClass||"loading",this.fixedHeight=t.fixedHeight||!1,this.contentContainer=t.contentContainer||".subcontainer",this.overflow=t.overflow||"auto",this.traits=t.traits||[],e.each(this.traits,e.bind(function(t){t.extension&&e.extend(this,t.extension)},this)),this.invokeTraits("onConstructor",t),i.View.apply(this,arguments)},invokeTraits:function(t){var i=Array.prototype.slice.call(arguments,1),n=this;e.each(this.traits,function(e){e[t]&&e[t].apply(n,i)})},initialize:function(t){this.invokeTraits("beforeInitialize",t),this.content&&this.setContent(this.content),this.toggleCollapsedState(),this.invokeTraits("afterInitialize",t)},setElement:function(t){this.invokeTraits("beforeSetElement",t);var e=i.View.prototype.setElement.apply(this,arguments);return this.$contentContainer=this.$(this.contentContainer),this.$contentContainer[this.collapsed?"hide":"show"](),this.invokeTraits("afterSetElement",t),e},open:function(t){return this.invokeTraits("beforeOpen",t),this.$contentContainer.show(),this.$el.removeClass(this.closedClass).addClass(this.openClass),this.collapsed=!1,t&&t.renderContent&&this.renderContent(),this.invokeTraits("afterOpen",t),t&&t.silent||this.trigger("open",this),this},close:function(t){return this.invokeTraits("beforeClose",t),this.$contentContainer.hide(),this.$el.removeClass(this.openClass).addClass(this.closedClass),this.collapsed=!0,this.invokeTraits("afterClose",t),t&&t.silent||this.trigger("close",this),this},setContent:function(t,e){this.content=t;var i=this.renderContent();this.$contentContainer[e===!0?"append":"html"](i)},renderContent:function(){return this.content instanceof i.View?this.content.render().$el:this.content},setHeight:function(t){var i=this.$("> .header").outerHeight();this.$contentContainer.css({height:e.isNumber(t)?t-i+"px":"auto",overflow:this.overflow})},toggleCollapsedState:function(){return this.collapsed?this.open():this.close(),this},remove:function(){this.invokeTraits("onRemove"),this.content&&this.content.remove&&this.content.remove(),i.View.prototype.remove.call(this)}})}),define("common/component/base/OptionView",["require","backbone","underscore"],function(t){"use strict";var e=t("backbone"),i=t("underscore");return e.View.extend({events:{click:"select",mouseover:"mouseover",mouseout:"mouseout"},constructor:function(t){if(!t||!t.template)throw new Error("Option should have defined template");if(!(t.model&&t.model instanceof e.Model))throw new Error("Option should have associated Backbone.Model");this.template=i.template(t.template),this.disabledClass=t.disabledClass,this.hiddenClass=t.hiddenClass,this.toggleClass=t.toggleClass,this.overClass=t.overClass||"over",e.View.apply(this,arguments)},initialize:function(){e.View.prototype.initialize.apply(this,arguments);var t=this;this.model.get("disabled")===!0&&this.disable(),this.model.get("hidden")===!0&&this.hide(),this.listenTo(this.model,"change:over",function(e,i){i?t.$("> p").addClass(t.overClass):t.$("> p").removeClass(t.overClass)})},el:function(){return this.template(this.model.toJSON())},enable:function(){this.$el.removeAttr("disabled").removeClass(this.disabledClass)},disable:function(){this.$el.attr("disabled","disabled").addClass(this.disabledClass)},over:function(){this.model.set({over:!0})},leave:function(){this.model.set({over:!1})},show:function(){this.$el.show().removeClass(this.hiddenClass)},hide:function(){this.$el.hide().addClass(this.hiddenClass)},isVisible:function(){return this.$el.is(":visible")},isDisabled:function(){return this.$el.is(":disabled")},select:function(t){this.model.trigger("select",this,this.model,t),this.trigger("click",this,this.model,t)},addSelection:function(){this.$el.addClass(this.toggleClass)},removeSelection:function(){this.$el.removeClass(this.toggleClass)},mouseover:function(t){this.trigger("mouseover",this,this.model,t)},mouseout:function(t){this.trigger("mouseout",this,this.model,t)}})}),define("common/component/base/OptionContainer",["require","backbone","underscore","./OptionView"],function(t){"use strict";var e=t("backbone"),i=t("underscore"),n=t("./OptionView"),s=Array.prototype.slice;return e.View.extend({el:function(){return i.template(this.template)()},constructor:function(t){if(t||(t={}),!t.options||!t.options.length)throw new Error("Option views descriptors must be specified");if(!t.mainTemplate&&!t.el)throw new Error("Option container must have a template");if(!t.optionTemplate)throw new Error("Option container must have an option template");this.contextName=t.contextName||"option",this.contentContainer=t.el?t.contentContainer:t.contentContainer||"> .content > ul",this.toggle=!!t.toggle,this.toggleClass=t.toggleClass||"active",this.options=[],this.collection=new e.Collection(t.options),this.hasGroups=this.collection.models[0]&&this.collection.models[0].get("groupId")?!0:!1,this.defalutOptionView=this.hasGroups?this.collection.where({"default":!0}):[this.collection.findWhere({"default":!0})],this.listenTo(this.collection,"select",this._selectOption),this.template=t.mainTemplate,this.optionTemplate=t.optionTemplate,e.View.apply(this,arguments)},setElement:function(t){var i=e.View.prototype.setElement.apply(this,arguments);return this.$contentContainer=this.contentContainer?this.$(this.contentContainer):this.$el,i},initialize:function(){var t=this;this.collection.forEach(function(e){var i=new n({template:t.optionTemplate,model:e,toggleClass:t.toggleClass});t.listenTo(i,"mouseover",function(e,i){t.trigger("mouseover",e,t,i)}),t.listenTo(i,"mouseout",function(e,i){t.trigger("mouseout",e,t,i)}),t.options.push(i),t.$contentContainer.append(i.$el)}),this.toggle&&this.defalutOptionView&&i.each(this.defalutOptionView,function(t){t&&this.getOptionView(t.get("action")).addSelection()},this)},_onKeyDown:function(t){var e=this.getOptionView(t.keyCode,"triggerOnKeyCode");e&&!e.isDisabled()&&e.select()},_selectOption:function(t,e){if(this.toggle){var n=e.get("groupId"),s=this.hasGroups?i.where(this.options,function(t){return t.model.get("groupId")===n}):this.options;i.each(s,function(t){t.removeSelection()},this),t.addSelection()}this.trigger(this.contextName+":"+e.get("action"),t,e)},getOptionView:function(t,e){return i.find(this.options,function(i){return i.model.get(e||"action")===t})},resetSelection:function(t,e){t=t||[],this.toggle&&(this.hasGroups?(t.length<this.defalutOptionView.length&&i.each(this.defalutOptionView,function(e){var n={groupId:e.get("groupId")},s=i.findWhere(t,n);!s&&e&&t.push(i.extend(n,{action:e.get("action")}))}),t=i.pluck(t,"action")):!t.length&&this.defalutOptionView[0]&&t.push(this.defalutOptionView[0].get("action")),i.each(this.options,function(n){t.length&&(i.contains(t,n.model.get("action"))?e?this._selectOption(n,n.model):n.addSelection():n.removeSelection())},this))},select:function(t){var e=s.call(arguments);this.toggle&&i.each(this.options,function(t){!e.length||i.contains(e,t.model.get("action"))?t.addSelection():t.removeSelection()},this)},deselect:function(t){var e=s.call(arguments);this.toggle&&i.each(this.options,function(t){(!e.length||i.contains(e,t.model.get("action")))&&t.removeSelection()},this)},show:function(){return i.each(this.options,function(t){var e=t.model.get("test");e&&!e()?t.hide():t[t.model.get("hidden")?"hide":"show"]()}),this.$el.show(),this.trigger("show",this),this},hide:function(){return this.$el.hide(),this.trigger("hide",this),this},enable:function(t){var e=s.call(arguments);i.each(this.options,function(t){(!e.length||i.contains(e,t.model.get("action")))&&t.enable()})},disable:function(t){var e=s.call(arguments);i.each(this.options,function(t){(!e.length||i.contains(e,t.model.get("action")))&&t.disable()})},remove:function(){i.invoke(this.options,"remove"),e.View.prototype.remove.apply(this,arguments)}})}),define("common/component/panel/trait/abstractPanelTrait",[],function(){"use strict";var t={extension:{},onConstructor:function(){},beforeInitialize:function(){},afterInitialize:function(){},beforeSetElement:function(){},afterSetElement:function(){},beforeOpen:function(){},afterOpen:function(){},beforeClose:function(){},afterClose:function(){},onRemove:function(){}};return t}),define("jquery-ui/jquery.ui.resizable",["require","./jquery.ui.core","./jquery.ui.mouse","./jquery.ui.widget"],function(t){function e(t){return parseInt(t,10)||0}function i(t){return!isNaN(parseInt(t,10))}t("./jquery.ui.core"),t("./jquery.ui.mouse");var n=t("./jquery.ui.widget");return n.widget("ui.resizable",n.ui.mouse,{version:"@VERSION",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_create:function(){function t(t){return a._mouseDown(t)}var e,i,s,o,r,a=this,l=this.options;if(this.element.addClass("ui-resizable"),n.extend(this,{_aspectRatio:!!l.aspectRatio,aspectRatio:l.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:l.helper||l.ghost||l.animate?l.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(n("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.data("ui-resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=l.handles||(n(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),e=this.handles.split(","),this.handles={},i=0;i<e.length;i++)s=n.trim(e[i]),r="ui-resizable-"+s,o=n("<div class='ui-resizable-handle "+r+"'></div>"),o.css({zIndex:l.zIndex}),"se"===s&&o.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[s]=".ui-resizable-"+s,this.element.append(o);this._renderAxis=function(t){var e,i,s,o;t=t||this.element;for(e in this.handles)this.handles[e].constructor===String&&(this.handles[e]=n(this.handles[e],this.element).show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)&&(i=n(this.handles[e],this.element),o=/sw|ne|nw|se|n|s/.test(e)?i.outerHeight():i.outerWidth(),s=["padding",/ne|nw|n/.test(e)?"Top":/se|sw|s/.test(e)?"Bottom":/^e$/.test(e)?"Right":"Left"].join(""),t.css(s,o),this._proportionallyResize()),n(this.handles[e]).length},this._renderAxis(this.element),this._handles=n(".ui-resizable-handle",this.element);for(i in this.handles)this._handles=this._handles.add(this.handles[i]);if(this._handles.disableSelection(),this._handles.mouseover(function(){a.resizing||(this.className&&(o=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),a.axis=o&&o[1]?o[1]:"se")}),l.autoHide&&(this._handles.hide(),n(this.element).addClass("ui-resizable-autohide").mouseenter(function(){l.disabled||(n(this).removeClass("ui-resizable-autohide"),a._handles.show())}).mouseleave(function(){l.disabled||a.resizing||(n(this).addClass("ui-resizable-autohide"),a._handles.hide())})),this._mouseInit(),l.handles.constructor!==String)for(i in l.handles)s=l.handles[i],s instanceof n&&s.bind("mousedown."+this.widgetName,t)},_destroy:function(){this._mouseDestroy();var t,e=function(t){n(t).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(e(this.element),t=this.element,this.originalElement.css({position:t.css("position"),width:t.outerWidth(),height:t.outerHeight(),top:t.css("top"),left:t.css("left")}).insertAfter(t),t.remove()),this.originalElement.css("resize",this.originalResizeStyle),e(this.originalElement),this},_mouseCapture:function(t){var e,i,s=!1;for(e in this.handles)i=n(this.handles[e])[0],(i===t.target||n.contains(i,t.target))&&(s=!0);return!this.options.disabled&&s},_mouseStart:function(t){var i,s,o,r=this.options,a=this.element.position(),l=this.element;return this.resizing=!0,/absolute/.test(l.css("position"))?l.css({position:"absolute",top:l.css("top"),left:l.css("left")}):l.is(".ui-draggable")&&l.css({position:"absolute",top:a.top,left:a.left}),this._renderProxy(),i=e(this.helper.css("left")),s=e(this.helper.css("top")),r.containment&&(i+=n(r.containment).scrollLeft()||0,s+=n(r.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:i,top:s},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:l.width(),height:l.height()},this.originalSize=this._helper?{width:l.outerWidth(),height:l.outerHeight()}:{width:l.width(),height:l.height()},this.originalPosition={left:i,top:s},this.sizeDiff={width:l.outerWidth()-l.width(),height:l.outerHeight()-l.height()},this.originalMousePosition={left:t.pageX,top:t.pageY},this.aspectRatio="number"==typeof r.aspectRatio?r.aspectRatio:this.originalSize.width/this.originalSize.height||1,o=n(".ui-resizable-"+this.axis).css("cursor"),n("body").css("cursor","auto"===o?this.axis+"-resize":o),l.addClass("ui-resizable-resizing"),this._propagate("start",t),!0},_mouseDrag:function(t){var e,i=this.helper,s={},o=this.originalMousePosition,r=this.axis,a=this.position.top,l=this.position.left,h=this.size.width,c=this.size.height,d=t.pageX-o.left||0,p=t.pageY-o.top||0,u=this._change[r];return u?(e=u.apply(this,[t,d,p]),this._updateVirtualBoundaries(t.shiftKey),(this._aspectRatio||t.shiftKey)&&(e=this._updateRatio(e,t)),e=this._respectSize(e,t),this._updateCache(e),this._propagate("resize",t),this.position.top!==a&&(s.top=this.position.top+"px"),this.position.left!==l&&(s.left=this.position.left+"px"),this.size.width!==h&&(s.width=this.size.width+"px"),this.size.height!==c&&(s.height=this.size.height+"px"),i.css(s),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),n.isEmptyObject(s)||this._trigger("resize",t,this.ui()),!1):!1},_mouseStop:function(t){this.resizing=!1;var e,i,s,o,r,a,l,h=this.options,c=this;return this._helper&&(e=this._proportionallyResizeElements,i=e.length&&/textarea/i.test(e[0].nodeName),s=i&&n.ui.hasScroll(e[0],"left")?0:c.sizeDiff.height,o=i?0:c.sizeDiff.width,r={width:c.helper.width()-o,height:c.helper.height()-s},a=parseInt(c.element.css("left"),10)+(c.position.left-c.originalPosition.left)||null,l=parseInt(c.element.css("top"),10)+(c.position.top-c.originalPosition.top)||null,h.animate||this.element.css(n.extend(r,{top:l,left:a})),c.helper.height(c.size.height),c.helper.width(c.size.width),this._helper&&!h.animate&&this._proportionallyResize()),n("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",t),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(t){var e,n,s,o,r,a=this.options;r={minWidth:i(a.minWidth)?a.minWidth:0,maxWidth:i(a.maxWidth)?a.maxWidth:1/0,minHeight:i(a.minHeight)?a.minHeight:0,maxHeight:i(a.maxHeight)?a.maxHeight:1/0},(this._aspectRatio||t)&&(e=r.minHeight*this.aspectRatio,s=r.minWidth/this.aspectRatio,n=r.maxHeight*this.aspectRatio,o=r.maxWidth/this.aspectRatio,e>r.minWidth&&(r.minWidth=e),s>r.minHeight&&(r.minHeight=s),n<r.maxWidth&&(r.maxWidth=n),o<r.maxHeight&&(r.maxHeight=o)),this._vBoundaries=r},_updateCache:function(t){this.offset=this.helper.offset(),i(t.left)&&(this.position.left=t.left),i(t.top)&&(this.position.top=t.top),i(t.height)&&(this.size.height=t.height),i(t.width)&&(this.size.width=t.width)},_updateRatio:function(t){var e=this.position,n=this.size,s=this.axis;return i(t.height)?t.width=t.height*this.aspectRatio:i(t.width)&&(t.height=t.width/this.aspectRatio),"sw"===s&&(t.left=e.left+(n.width-t.width),t.top=null),"nw"===s&&(t.top=e.top+(n.height-t.height),t.left=e.left+(n.width-t.width)),t},_respectSize:function(t){var e=this._vBoundaries,n=this.axis,s=i(t.width)&&e.maxWidth&&e.maxWidth<t.width,o=i(t.height)&&e.maxHeight&&e.maxHeight<t.height,r=i(t.width)&&e.minWidth&&e.minWidth>t.width,a=i(t.height)&&e.minHeight&&e.minHeight>t.height,l=this.originalPosition.left+this.originalSize.width,h=this.position.top+this.size.height,c=/sw|nw|w/.test(n),d=/nw|ne|n/.test(n);return r&&(t.width=e.minWidth),a&&(t.height=e.minHeight),s&&(t.width=e.maxWidth),o&&(t.height=e.maxHeight),r&&c&&(t.left=l-e.minWidth),s&&c&&(t.left=l-e.maxWidth),a&&d&&(t.top=h-e.minHeight),o&&d&&(t.top=h-e.maxHeight),t.width||t.height||t.left||!t.top?t.width||t.height||t.top||!t.left||(t.left=null):t.top=null,t},_proportionallyResize:function(){if(this._proportionallyResizeElements.length){var t,e,i,n,s,o=this.helper||this.element;for(t=0;t<this._proportionallyResizeElements.length;t++){if(s=this._proportionallyResizeElements[t],!this.borderDif)for(this.borderDif=[],i=[s.css("borderTopWidth"),s.css("borderRightWidth"),s.css("borderBottomWidth"),s.css("borderLeftWidth")],n=[s.css("paddingTop"),s.css("paddingRight"),s.css("paddingBottom"),s.css("paddingLeft")],e=0;e<i.length;e++)this.borderDif[e]=(parseInt(i[e],10)||0)+(parseInt(n[e],10)||0);s.css({height:o.height()-this.borderDif[0]-this.borderDif[2]||0,width:o.width()-this.borderDif[1]-this.borderDif[3]||0})}}},_renderProxy:function(){var t=this.element,e=this.options;this.elementOffset=t.offset(),this._helper?(this.helper=this.helper||n("<div style='overflow:hidden;'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++e.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(t,e){return{width:this.originalSize.width+e}},w:function(t,e){var i=this.originalSize,n=this.originalPosition;return{left:n.left+e,width:i.width-e}},n:function(t,e,i){var n=this.originalSize,s=this.originalPosition;return{top:s.top+i,height:n.height-i}},s:function(t,e,i){return{height:this.originalSize.height+i}},se:function(t,e,i){return n.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,e,i]))},sw:function(t,e,i){return n.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,e,i]))},ne:function(t,e,i){return n.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,e,i]))},nw:function(t,e,i){return n.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,e,i]))}},_propagate:function(t,e){n.ui.plugin.call(this,t,[e,this.ui()]),"resize"!==t&&this._trigger(t,e,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),n.ui.plugin.add("resizable","animate",{stop:function(t){var e=n(this).data("ui-resizable"),i=e.options,s=e._proportionallyResizeElements,o=s.length&&/textarea/i.test(s[0].nodeName),r=o&&n.ui.hasScroll(s[0],"left")?0:e.sizeDiff.height,a=o?0:e.sizeDiff.width,l={
width:e.size.width-a,height:e.size.height-r},h=parseInt(e.element.css("left"),10)+(e.position.left-e.originalPosition.left)||null,c=parseInt(e.element.css("top"),10)+(e.position.top-e.originalPosition.top)||null;e.element.animate(n.extend(l,c&&h?{top:c,left:h}:{}),{duration:i.animateDuration,easing:i.animateEasing,step:function(){var i={width:parseInt(e.element.css("width"),10),height:parseInt(e.element.css("height"),10),top:parseInt(e.element.css("top"),10),left:parseInt(e.element.css("left"),10)};s&&s.length&&n(s[0]).css({width:i.width,height:i.height}),e._updateCache(i),e._propagate("resize",t)}})}}),n.ui.plugin.add("resizable","containment",{start:function(){var t,i,s,o,r,a,l,h=n(this).data("ui-resizable"),c=h.options,d=h.element,p=c.containment,u=p instanceof n?p.get(0):/parent/.test(p)?d.parent().get(0):p;u&&(h.containerElement=n(u),/document/.test(p)||p===document?(h.containerOffset={left:0,top:0},h.containerPosition={left:0,top:0},h.parentData={element:n(document),left:0,top:0,width:n(document).width(),height:n(document).height()||document.body.parentNode.scrollHeight}):(t=n(u),i=[],n(["Top","Right","Left","Bottom"]).each(function(n,s){i[n]=e(t.css("padding"+s))}),h.containerOffset=t.offset(),h.containerPosition=t.position(),h.containerSize={height:t.innerHeight()-i[3],width:t.innerWidth()-i[1]},s=h.containerOffset,o=h.containerSize.height,r=h.containerSize.width,a=n.ui.hasScroll(u,"left")?u.scrollWidth:r,l=n.ui.hasScroll(u)?u.scrollHeight:o,h.parentData={element:u,left:s.left,top:s.top,width:a,height:l}))},resize:function(t){var e,i,s,o,r=n(this).data("ui-resizable"),a=r.options,l=r.containerOffset,h=r.position,c=r._aspectRatio||t.shiftKey,d={top:0,left:0},p=r.containerElement;p[0]!==document&&/static/.test(p.css("position"))&&(d=l),h.left<(r._helper?l.left:0)&&(r.size.width=r.size.width+(r._helper?r.position.left-l.left:r.position.left-d.left),c&&(r.size.height=r.size.width/r.aspectRatio),r.position.left=a.helper?l.left:0),h.top<(r._helper?l.top:0)&&(r.size.height=r.size.height+(r._helper?r.position.top-l.top:r.position.top),c&&(r.size.width=r.size.height*r.aspectRatio),r.position.top=r._helper?l.top:0),r.offset.left=r.parentData.left+r.position.left,r.offset.top=r.parentData.top+r.position.top,e=Math.abs((r._helper?r.offset.left-d.left:r.offset.left-d.left)+r.sizeDiff.width),i=Math.abs((r._helper?r.offset.top-d.top:r.offset.top-l.top)+r.sizeDiff.height),s=r.containerElement.get(0)===r.element.parent().get(0),o=/relative|absolute/.test(r.containerElement.css("position")),s&&o&&(e-=Math.abs(r.parentData.left)),e+r.size.width>=r.parentData.width&&(r.size.width=r.parentData.width-e,c&&(r.size.height=r.size.width/r.aspectRatio)),i+r.size.height>=r.parentData.height&&(r.size.height=r.parentData.height-i,c&&(r.size.width=r.size.height*r.aspectRatio))},stop:function(){var t=n(this).data("ui-resizable"),e=t.options,i=t.containerOffset,s=t.containerPosition,o=t.containerElement,r=n(t.helper),a=r.offset(),l=r.outerWidth()-t.sizeDiff.width,h=r.outerHeight()-t.sizeDiff.height;t._helper&&!e.animate&&/relative/.test(o.css("position"))&&n(this).css({left:a.left-s.left-i.left,width:l,height:h}),t._helper&&!e.animate&&/static/.test(o.css("position"))&&n(this).css({left:a.left-s.left-i.left,width:l,height:h})}}),n.ui.plugin.add("resizable","alsoResize",{start:function(){var t=n(this).data("ui-resizable"),e=t.options,i=function(t){n(t).each(function(){var t=n(this);t.data("ui-resizable-alsoresize",{width:parseInt(t.width(),10),height:parseInt(t.height(),10),left:parseInt(t.css("left"),10),top:parseInt(t.css("top"),10)})})};"object"!=typeof e.alsoResize||e.alsoResize.parentNode?i(e.alsoResize):e.alsoResize.length?(e.alsoResize=e.alsoResize[0],i(e.alsoResize)):n.each(e.alsoResize,function(t){i(t)})},resize:function(t,e){var i=n(this).data("ui-resizable"),s=i.options,o=i.originalSize,r=i.originalPosition,a={height:i.size.height-o.height||0,width:i.size.width-o.width||0,top:i.position.top-r.top||0,left:i.position.left-r.left||0},l=function(t,i){n(t).each(function(){var t=n(this),s=n(this).data("ui-resizable-alsoresize"),o={},r=i&&i.length?i:t.parents(e.originalElement[0]).length?["width","height"]:["width","height","top","left"];n.each(r,function(t,e){var i=(s[e]||0)+(a[e]||0);i&&i>=0&&(o[e]=i||null)}),t.css(o)})};"object"!=typeof s.alsoResize||s.alsoResize.nodeType?l(s.alsoResize):n.each(s.alsoResize,function(t,e){l(t,e)})},stop:function(){n(this).removeData("resizable-alsoresize")}}),n.ui.plugin.add("resizable","ghost",{start:function(){var t=n(this).data("ui-resizable"),e=t.options,i=t.size;t.ghost=t.originalElement.clone(),t.ghost.css({opacity:.25,display:"block",position:"relative",height:i.height,width:i.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof e.ghost?e.ghost:""),t.ghost.appendTo(t.helper)},resize:function(){var t=n(this).data("ui-resizable");t.ghost&&t.ghost.css({position:"relative",height:t.size.height,width:t.size.width})},stop:function(){var t=n(this).data("ui-resizable");t.ghost&&t.helper&&t.helper.get(0).removeChild(t.ghost.get(0))}}),n.ui.plugin.add("resizable","grid",{resize:function(){var t=n(this).data("ui-resizable"),e=t.options,i=t.size,s=t.originalSize,o=t.originalPosition,r=t.axis,a="number"==typeof e.grid?[e.grid,e.grid]:e.grid,l=a[0]||1,h=a[1]||1,c=Math.round((i.width-s.width)/l)*l,d=Math.round((i.height-s.height)/h)*h,p=s.width+c,u=s.height+d,m=e.maxWidth&&e.maxWidth<p,f=e.maxHeight&&e.maxHeight<u,g=e.minWidth&&e.minWidth>p,v=e.minHeight&&e.minHeight>u;e.grid=a,g&&(p+=l),v&&(u+=h),m&&(p-=l),f&&(u-=h),/^(se|s|e)$/.test(r)?(t.size.width=p,t.size.height=u):/^(ne)$/.test(r)?(t.size.width=p,t.size.height=u,t.position.top=o.top-d):/^(sw)$/.test(r)?(t.size.width=p,t.size.height=u,t.position.left=o.left-c):(u-h>0?(t.size.height=u,t.position.top=o.top-d):(t.size.height=h,t.position.top=o.top+s.height-h),p-l>0?(t.size.width=p,t.position.left=o.left-c):(t.size.width=l,t.position.left=o.left+s.width-l))}}),n}),define("common/component/panel/trait/resizablePanelTrait",["require","underscore","./abstractPanelTrait","css!jquery-ui/jquery-ui","jquery-ui/jquery.ui.resizable"],function(t){"use strict";function e(t,e){this.trigger("resize",t,e)}function i(t,e){this.trigger("resizeStart",t,e)}function n(t,e){this.trigger("resizeStop",t,e)}var s=t("underscore"),o=t("./abstractPanelTrait");return t("css!jquery-ui/jquery-ui"),t("jquery-ui/jquery.ui.resizable"),s.extend({},o,{onConstructor:function(t){t||(t={}),this.handles=t.handles||"e, s, se",this.minWidth=t.minWidth||10,this.minHeight=t.minHeight||10,this.maxWidth=t.maxWidth||null,this.maxHeight=t.maxHeight||null,this.alsoResize=t.alsoResize||!1,this.resizableEl=t.resizableEl},afterSetElement:function(){this.$resizableEl=this.$el.find(this.resizableEl).length?this.$el.find(this.resizableEl):this.$el,this.$resizableEl.resizable({handles:this.handles,minHeight:this.minHeight,minWidth:this.minWidth,maxWidth:this.maxWidth,maxHeight:this.maxHeight,alsoResize:this.alsoResize,resize:s.bind(e,this),start:s.bind(i,this),stop:s.bind(n,this)})},onRemove:function(){try{this.$el.resizable("destroy")}catch(t){}}})}),define("text!common/component/dialog/template/dialogTemplate.htm",[],function(){return'<div class="jr-mDialog jr {{- additionalCssClasses }}" tabindex="-1">\n    <div class="jr-mDialog-header mover jr">\n        <h1 class="jr-mDialog-header-title jr">{{- title }}</h1>\n    </div>\n    <div class="jr-mDialog-body jr">\n        <div class="jr-mDialog-body-wrapper jr subcontainer"></div>\n    </div>\n    <div class="jr-mDialog-footer jr"></div>\n\n</div>\n'}),define("text!common/component/dialog/template/dialogButtonTemplate.htm",[],function(){return"<button class=\"button action up {{- primary ? 'primary' : ''}} {{- (typeof float !== 'undefined' ? 'right' : '') }}\">\n    <span class=\"wrap\">{{- label }}<span class=\"icon\"></span></span>\n</button>\n"}),define("jquery-ui/jquery.ui.draggable",["require","./jquery.ui.core","./jquery.ui.mouse","./jquery.ui.widget"],function(t){t("./jquery.ui.core"),t("./jquery.ui.mouse");var e=t("./jquery.ui.widget");return e.widget("ui.draggable",e.ui.mouse,{version:"@VERSION",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"!==this.options.helper||/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy()},_mouseCapture:function(t){var i=this.options;return this.helper||i.disabled||e(t.target).closest(".ui-resizable-handle").length>0?!1:(this.handle=this._getHandle(t),this.handle?(e(i.iframeFix===!0?"iframe":i.iframeFix).each(function(){e("<div class='ui-draggable-iframeFix' style='background: #fff;'></div>").css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(e(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(t){var i=this.options;return this.helper=this._createHelper(t),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offsetParent=this.helper.offsetParent(),this.offsetParentCssPosition=this.offsetParent.css("position"),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},this.offset.scroll=!1,e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),this._setContainment(),this._trigger("start",t)===!1?(this._clear(),!1):(this._cacheHelperProportions(),e.ui.ddmanager&&!i.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this._mouseDrag(t,!0),e.ui.ddmanager&&e.ui.ddmanager.dragStart(this,t),!0)},_mouseDrag:function(t,i){if("fixed"===this.offsetParentCssPosition&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),!i){var n=this._uiHash();if(this._trigger("drag",t,n)===!1)return this._mouseUp({}),!1;this.position=n.position}return this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var i=this,n=!1;return e.ui.ddmanager&&!this.options.dropBehaviour&&(n=e.ui.ddmanager.drop(this,t)),this.dropped&&(n=this.dropped,this.dropped=!1),"original"!==this.options.helper||e.contains(this.element[0].ownerDocument,this.element[0])?("invalid"===this.options.revert&&!n||"valid"===this.options.revert&&n||this.options.revert===!0||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,n)?e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){i._trigger("stop",t)!==!1&&i._clear()}):this._trigger("stop",t)!==!1&&this._clear(),!1):!1},_mouseUp:function(t){return e("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),e.ui.ddmanager&&e.ui.ddmanager.dragStop(this,t),e.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(t){return this.options.handle?!!e(t.target).closest(this.element.find(this.options.handle)).length:!0},_createHelper:function(t){var i=this.options,n=e.isFunction(i.helper)?e(i.helper.apply(this.element[0],[t])):"clone"===i.helper?this.element.clone().removeAttr("id"):this.element;return n.parents("body").length||n.appendTo("parent"===i.appendTo?this.element[0].parentNode:i.appendTo),n[0]===this.element[0]||/(fixed|absolute)/.test(n.css("position"))||n.css("position","absolute"),n},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){var t=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&e.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var t=this.element.position();return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:t.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,i,n,s=this.options;return s.containment?"window"===s.containment?void(this.containment=[e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,e(window).scrollLeft()+e(window).width()-this.helperProportions.width-this.margins.left,e(window).scrollTop()+(e(window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):"document"===s.containment?void(this.containment=[0,0,e(document).width()-this.helperProportions.width-this.margins.left,(e(document).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):s.containment.constructor===Array?void(this.containment=s.containment):("parent"===s.containment&&(s.containment=this.helper[0].parentNode),i=e(s.containment),n=i[0],void(n&&(t="hidden"!==i.css("overflow"),this.containment=[(parseInt(i.css("borderLeftWidth"),10)||0)+(parseInt(i.css("paddingLeft"),10)||0),(parseInt(i.css("borderTopWidth"),10)||0)+(parseInt(i.css("paddingTop"),10)||0),(t?Math.max(n.scrollWidth,n.offsetWidth):n.offsetWidth)-(parseInt(i.css("borderRightWidth"),10)||0)-(parseInt(i.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(t?Math.max(n.scrollHeight,n.offsetHeight):n.offsetHeight)-(parseInt(i.css("borderBottomWidth"),10)||0)-(parseInt(i.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=i))):void(this.containment=null)},_convertPositionTo:function(t,i){i||(i=this.position);var n="absolute"===t?1:-1,s="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent;return this.offset.scroll||(this.offset.scroll={top:s.scrollTop(),left:s.scrollLeft()}),{top:i.top+this.offset.relative.top*n+this.offset.parent.top*n-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():this.offset.scroll.top)*n,left:i.left+this.offset.relative.left*n+this.offset.parent.left*n-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)*n}},_generatePosition:function(t){var i,n,s,o,r=this.options,a="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,l=t.pageX,h=t.pageY;return this.offset.scroll||(this.offset.scroll={top:a.scrollTop(),left:a.scrollLeft()}),this.originalPosition&&(this.containment&&(this.relative_container?(n=this.relative_container.offset(),i=[this.containment[0]+n.left,this.containment[1]+n.top,this.containment[2]+n.left,this.containment[3]+n.top]):i=this.containment,t.pageX-this.offset.click.left<i[0]&&(l=i[0]+this.offset.click.left),t.pageY-this.offset.click.top<i[1]&&(h=i[1]+this.offset.click.top),t.pageX-this.offset.click.left>i[2]&&(l=i[2]+this.offset.click.left),t.pageY-this.offset.click.top>i[3]&&(h=i[3]+this.offset.click.top)),r.grid&&(s=r.grid[1]?this.originalPageY+Math.round((h-this.originalPageY)/r.grid[1])*r.grid[1]:this.originalPageY,h=i?s-this.offset.click.top>=i[1]||s-this.offset.click.top>i[3]?s:s-this.offset.click.top>=i[1]?s-r.grid[1]:s+r.grid[1]:s,o=r.grid[0]?this.originalPageX+Math.round((l-this.originalPageX)/r.grid[0])*r.grid[0]:this.originalPageX,l=i?o-this.offset.click.left>=i[0]||o-this.offset.click.left>i[2]?o:o-this.offset.click.left>=i[0]?o-r.grid[0]:o+r.grid[0]:o)),{top:h-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():this.offset.scroll.top),left:l-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(t,i,n){return n=n||this._uiHash(),e.ui.plugin.call(this,t,[i,n]),"drag"===t&&(this.positionAbs=this._convertPositionTo("absolute")),e.Widget.prototype._trigger.call(this,t,i,n)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),e.ui.plugin.add("draggable","connectToSortable",{start:function(t,i){var n=e(this).data("ui-draggable"),s=n.options,o=e.extend({},i,{item:n.element});n.sortables=[],e(s.connectToSortable).each(function(){var i=e.data(this,"ui-sortable");i&&!i.options.disabled&&(n.sortables.push({instance:i,shouldRevert:i.options.revert}),i.refreshPositions(),i._trigger("activate",t,o))})},stop:function(t,i){var n=e(this).data("ui-draggable"),s=e.extend({},i,{item:n.element});e.each(n.sortables,function(){this.instance.isOver?(this.instance.isOver=0,n.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=this.shouldRevert),this.instance._mouseStop(t),this.instance.options.helper=this.instance.options._helper,"original"===n.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",t,s))})},drag:function(t,i){var n=e(this).data("ui-draggable"),s=this;e.each(n.sortables,function(){var o=!1,r=this;this.instance.positionAbs=n.positionAbs,this.instance.helperProportions=n.helperProportions,this.instance.offset.click=n.offset.click,this.instance._intersectsWith(this.instance.containerCache)&&(o=!0,e.each(n.sortables,function(){return this.instance.positionAbs=n.positionAbs,this.instance.helperProportions=n.helperProportions,this.instance.offset.click=n.offset.click,this!==r&&this.instance._intersectsWith(this.instance.containerCache)&&e.contains(r.instance.element[0],this.instance.element[0])&&(o=!1),o})),o?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=e(s).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return i.helper[0]},t.target=this.instance.currentItem[0],this.instance._mouseCapture(t,!0),this.instance._mouseStart(t,!0,!0),this.instance.offset.click.top=n.offset.click.top,this.instance.offset.click.left=n.offset.click.left,this.instance.offset.parent.left-=n.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=n.offset.parent.top-this.instance.offset.parent.top,n._trigger("toSortable",t),n.dropped=this.instance.element,n.currentItem=n.element,this.instance.fromOutside=n),this.instance.currentItem&&this.instance._mouseDrag(t)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",t,this.instance._uiHash(this.instance)),this.instance._mouseStop(t,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),n._trigger("fromSortable",t),n.dropped=!1)})}}),e.ui.plugin.add("draggable","cursor",{start:function(){var t=e("body"),i=e(this).data("ui-draggable").options;t.css("cursor")&&(i._cursor=t.css("cursor")),t.css("cursor",i.cursor)},stop:function(){var t=e(this).data("ui-draggable").options;t._cursor&&e("body").css("cursor",t._cursor)}}),e.ui.plugin.add("draggable","opacity",{start:function(t,i){var n=e(i.helper),s=e(this).data("ui-draggable").options;n.css("opacity")&&(s._opacity=n.css("opacity")),n.css("opacity",s.opacity)},stop:function(t,i){var n=e(this).data("ui-draggable").options;n._opacity&&e(i.helper).css("opacity",n._opacity)}}),e.ui.plugin.add("draggable","scroll",{start:function(){var t=e(this).data("ui-draggable");t.scrollParent[0]!==document&&"HTML"!==t.scrollParent[0].tagName&&(t.overflowOffset=t.scrollParent.offset())},drag:function(t){var i=e(this).data("ui-draggable"),n=i.options,s=!1;i.scrollParent[0]!==document&&"HTML"!==i.scrollParent[0].tagName?(n.axis&&"x"===n.axis||(i.overflowOffset.top+i.scrollParent[0].offsetHeight-t.pageY<n.scrollSensitivity?i.scrollParent[0].scrollTop=s=i.scrollParent[0].scrollTop+n.scrollSpeed:t.pageY-i.overflowOffset.top<n.scrollSensitivity&&(i.scrollParent[0].scrollTop=s=i.scrollParent[0].scrollTop-n.scrollSpeed)),n.axis&&"y"===n.axis||(i.overflowOffset.left+i.scrollParent[0].offsetWidth-t.pageX<n.scrollSensitivity?i.scrollParent[0].scrollLeft=s=i.scrollParent[0].scrollLeft+n.scrollSpeed:t.pageX-i.overflowOffset.left<n.scrollSensitivity&&(i.scrollParent[0].scrollLeft=s=i.scrollParent[0].scrollLeft-n.scrollSpeed))):(n.axis&&"x"===n.axis||(t.pageY-e(document).scrollTop()<n.scrollSensitivity?s=e(document).scrollTop(e(document).scrollTop()-n.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<n.scrollSensitivity&&(s=e(document).scrollTop(e(document).scrollTop()+n.scrollSpeed))),n.axis&&"y"===n.axis||(t.pageX-e(document).scrollLeft()<n.scrollSensitivity?s=e(document).scrollLeft(e(document).scrollLeft()-n.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<n.scrollSensitivity&&(s=e(document).scrollLeft(e(document).scrollLeft()+n.scrollSpeed)))),s!==!1&&e.ui.ddmanager&&!n.dropBehaviour&&e.ui.ddmanager.prepareOffsets(i,t)}}),e.ui.plugin.add("draggable","snap",{start:function(){var t=e(this).data("ui-draggable"),i=t.options;t.snapElements=[],e(i.snap.constructor!==String?i.snap.items||":data(ui-draggable)":i.snap).each(function(){var i=e(this),n=i.offset();this!==t.element[0]&&t.snapElements.push({item:this,width:i.outerWidth(),height:i.outerHeight(),top:n.top,left:n.left})})},drag:function(t,i){var n,s,o,r,a,l,h,c,d,p,u=e(this).data("ui-draggable"),m=u.options,f=m.snapTolerance,g=i.offset.left,v=g+u.helperProportions.width,b=i.offset.top,w=b+u.helperProportions.height;for(d=u.snapElements.length-1;d>=0;d--)a=u.snapElements[d].left,l=a+u.snapElements[d].width,h=u.snapElements[d].top,c=h+u.snapElements[d].height,a-f>v||g>l+f||h-f>w||b>c+f||!e.contains(u.snapElements[d].item.ownerDocument,u.snapElements[d].item)?(u.snapElements[d].snapping&&u.options.snap.release&&u.options.snap.release.call(u.element,t,e.extend(u._uiHash(),{snapItem:u.snapElements[d].item})),u.snapElements[d].snapping=!1):("inner"!==m.snapMode&&(n=Math.abs(h-w)<=f,s=Math.abs(c-b)<=f,o=Math.abs(a-v)<=f,r=Math.abs(l-g)<=f,n&&(i.position.top=u._convertPositionTo("relative",{top:h-u.helperProportions.height,left:0}).top-u.margins.top),s&&(i.position.top=u._convertPositionTo("relative",{top:c,left:0}).top-u.margins.top),o&&(i.position.left=u._convertPositionTo("relative",{top:0,left:a-u.helperProportions.width}).left-u.margins.left),r&&(i.position.left=u._convertPositionTo("relative",{top:0,left:l}).left-u.margins.left)),p=n||s||o||r,"outer"!==m.snapMode&&(n=Math.abs(h-b)<=f,s=Math.abs(c-w)<=f,o=Math.abs(a-g)<=f,r=Math.abs(l-v)<=f,n&&(i.position.top=u._convertPositionTo("relative",{top:h,left:0}).top-u.margins.top),s&&(i.position.top=u._convertPositionTo("relative",{top:c-u.helperProportions.height,left:0}).top-u.margins.top),o&&(i.position.left=u._convertPositionTo("relative",{top:0,left:a}).left-u.margins.left),r&&(i.position.left=u._convertPositionTo("relative",{top:0,left:l-u.helperProportions.width}).left-u.margins.left)),!u.snapElements[d].snapping&&(n||s||o||r||p)&&u.options.snap.snap&&u.options.snap.snap.call(u.element,t,e.extend(u._uiHash(),{snapItem:u.snapElements[d].item})),u.snapElements[d].snapping=n||s||o||r||p)}}),e.ui.plugin.add("draggable","stack",{start:function(){var t,i=this.data("ui-draggable").options,n=e.makeArray(e(i.stack)).sort(function(t,i){return(parseInt(e(t).css("zIndex"),10)||0)-(parseInt(e(i).css("zIndex"),10)||0)});n.length&&(t=parseInt(e(n[0]).css("zIndex"),10)||0,e(n).each(function(i){e(this).css("zIndex",t+i)}),this.css("zIndex",t+n.length))}}),e.ui.plugin.add("draggable","zIndex",{start:function(t,i){var n=e(i.helper),s=e(this).data("ui-draggable").options;n.css("zIndex")&&(s._zIndex=n.css("zIndex")),n.css("zIndex",s.zIndex)},stop:function(t,i){var n=e(this).data("ui-draggable").options;n._zIndex&&e(i.helper).css("zIndex",n._zIndex)}}),e}),define("common/component/dialog/Dialog",["require","underscore","jquery","common/component/base/Dimmer","common/component/panel/Panel","common/component/base/OptionContainer","common/component/panel/trait/resizablePanelTrait","text!./template/dialogTemplate.htm","text!./template/dialogButtonTemplate.htm","jquery-ui/jquery.ui.draggable"],function(t){"use strict";var e=t("underscore"),i=t("jquery"),n=t("common/component/base/Dimmer"),s=t("common/component/panel/Panel"),o=t("common/component/base/OptionContainer"),r=t("common/component/panel/trait/resizablePanelTrait"),a=t("text!./template/dialogTemplate.htm"),l=t("text!./template/dialogButtonTemplate.htm");t("jquery-ui/jquery.ui.draggable");var h={},c=s.extend({defaultTemplate:a,events:{mousedown:"_focus",touchstart:"_focus",keydown:"_onKeyDown"},constructor:function(t){t||(t={}),t.traits||(t.traits=[]),this.resizable=t.resizable||!1,this.modal=t.modal||!1,this.resizable&&-1===e.indexOf(t.traits,r)&&t.traits.push(r),s.call(this,t)},initialize:function(t){h=e.extend({},t),this.collapsed=!this.collapsed,e.isEmpty(t.buttons)||(this.buttons=new o({options:t.buttons,el:this.$(".jr-mDialog-footer")[0]||this.$(".footer")[0],contextName:"button",optionTemplate:l})),s.prototype.initialize.apply(this,arguments),this.buttons&&this.listenTo(this.buttons,e.map(t.buttons,function(t){return"button:"+t.action}).join(" "),e.bind(function(t,e){this.trigger("button:"+e.get("action"),t,e)},this)),this.render()},setElement:function(t){var e=s.prototype.setElement.apply(this,arguments);return this.buttons&&this.buttons.setElement(this.$(".jr-mDialog-footer")[0]||this.$(".footer")[0]),e},setTitle:function(t){this.$(".jr-mDialog-header > .jr-mDialog-header-title").text(t)},render:function(){return this.$el.hide(),this.modal&&(this.dimmer=new n({zIndex:900})),i("body").append(this.$el),this.$el.draggable({handle:".mover",addClasses:!1,containment:"document"}),this},open:function(t){return this.isVisible()?void 0:(s.prototype.open.apply(this,arguments),this.modal&&this.dimmer.css({zIndex:++c.highestIndex}).show(),h.additionalCssClasses&&-1!==h.additionalCssClasses.indexOf("newResizeableDialog")&&this._setMinSize(),this._position(t)._increaseZIndex(),this.buttons&&this.buttons.$(".over").removeClass("over"),this.$el.show(),this.trigger("dialog:visible"),this)},close:function(){return this.isVisible()?(this.$el.css({zIndex:--c.highestIndex}),this.modal&&this.dimmer.css({zIndex:--c.highestIndex}).hide(),this.$el.hide(),s.prototype.close.apply(this,arguments),this):void 0},addCssClasses:function(t){this.$el.addClass(t)},toggleCollapsedState:function(){return this},enableButton:function(t){this.buttons.enable(t)},disableButton:function(t){this.buttons.disable(t)},isVisible:function(){return this.$el.is(":visible")},_setMinSize:function(){h.minWidth&&this.$el.css({width:h.minWidth,minWidth:h.minWidth}),h.minHeight&&this.$el.css({height:h.minHeight,minHeight:h.minHeight})},_position:function(t){var e,n,s=i("body"),o=this.$el.height(),r=this.$el.width();if(t&&"undefined"!=typeof t.top&&"undefined"!=typeof t.left){e=t.top,n=t.left;var a=s.height(),l=s.width(),h=a-t.top,c=l-t.left;o>h&&(e=t.top-o,e=0>e?a/2-o/2:e),r>c&&(n=t.left-r,n=0>n?l/2-r/2:n)}else e=i(window).height()/2-o/2,n=i(window).width()/2-r/2;return this.$el.css({top:e,left:n,position:"absolute"}),this},_focus:function(){!this.modal&&this._increaseZIndex()},_increaseZIndex:function(){this.$el.css({zIndex:++c.highestIndex})},_onKeyDown:function(t){this.buttons._onKeyDown(t)},remove:function(){this.buttons&&this.buttons.remove(),this.dimmer&&this.dimmer.remove();try{this.$el.draggable("destroy")}catch(t){}s.prototype.remove.call(this)}},{highestIndex:1e3,resetHighestIndex:function(t){c.highestIndex=t||1e3}});return c}),define("text!tenantImportExport/export/template/loadingDialogTemplate.htm",[],function(){return'<div class="panel dialog loading overlay moveable centered_horz centered_vert {{- additionalCssClasses }}" tabindex="-1">\n    <div class="content">\n        <div class="header mover">\n            <div class="title">{{- title }}</div>\n        </div>\n        <div class="body">\n            <p class="message"></p>\n        </div>\n    </div>\n</div>\n'}),define("tenantImportExport/export/view/LoadingDialog",["require","common/component/dialog/Dialog","underscore","bundle!CommonBundle","text!tenantImportExport/export/template/loadingDialogTemplate.htm"],function(t){var e=t("common/component/dialog/Dialog"),i=t("underscore"),n=t("bundle!CommonBundle"),s=t("text!tenantImportExport/export/template/loadingDialogTemplate.htm");return e.extend({defaultTemplate:s,constructor:function(t){i.defaults(t,{contentContainer:".body > .message",title:n["dialog.overlay.title"],modal:!0}),e.call(this,t)}})}),define("text!tenantImportExport/import/template/dependentResourcesDialogTemplate.htm",[],function(){return'{{ if (message) { }}<p class="message">{{- message }}</p> {{ } }}\n<div class="control groupBox">\n    <ol class="list tabular oneColumn">\n        {{ for (var i = 0; i<items.length; i++) { }}\n        <li class="leaf {{-  i === 0 ? \' first\' : \'\' }} {{- i === items.length - 1 ? \'last\' : \'\' }}" tabindex="-1">\n            <div class="wrap">\n                <div class="column one">\n                    <p class="uri">{{- items[i] }} </p>\n                </div>\n            </div>\n        </li>\n        {{ } }}\n    </ol>\n\n</div>\n\n'}),define("tenantImportExport/view/BaseWarningDialogView",["require","jquery","underscore","common/component/dialog/Dialog","bundle!ImportExportBundle","text!tenantImportExport/import/template/dependentResourcesDialogTemplate.htm"],function(t){
var e=(t("jquery"),t("underscore")),i=t("common/component/dialog/Dialog"),n=t("bundle!ImportExportBundle"),s=t("text!tenantImportExport/import/template/dependentResourcesDialogTemplate.htm");return i.extend({events:{resize:"onResizeHeight"},onResizeHeight:function(){this.$contentContainer.height(this.$el.height()-this._resizableContainerShiftHeight),this.$(".control.groupBox").css("min-height",this.$contentContainer.height()-this.$(".message").outerHeight(!0))},constructor:function(t){t=t||{},this.options=t,i.prototype.constructor.call(this,{modal:!0,resizable:t.resizable,minWidth:t.minWidth,minHeight:t.minHeight,additionalCssClasses:t.additionalCssClasses||"dependent-resources-dialog",title:t.title||n["dialog.broken.dependencies.title"],content:"",buttons:t.buttons}),this.template=e.template(t.template||s)},open:function(t){this.setContent(this.template(e.defaults(t,{message:""}))),i.prototype.open.apply(this,arguments),this.$contentContainer.scrollTop(0),this._resizableContainerShiftHeight=this.$(".jr-mDialog-footer").outerHeight()+this.$(".jr-mDialog-header").outerHeight()+this.$contentContainer.outerHeight()-this.$contentContainer.height()}})}),define("text!tenantImportExport/import/template/mergeTenantDialogTemplate.htm",[],function(){return"<p class=\"message\">{{- i18n['import.dialog.merge.tenant.intro'] }}</p>\n\n<p class=\"message imported-tenant\"><b>{{- i18n['import.dialog.merge.tenant.imported'] }} : </b> {{- fileTenantId}} </p>\n<p class=\"message selected-tenant\"><b>{{- i18n['import.dialog.merge.tenant.selected'] }} : </b> {{- selectedTenantId}} </p>\n\n<p class=\"message\">{{- i18n['import.dialog.merge.tenant.outro'] }} {{- selectedTenantId}}</p>\n"}),define("tenantImportExport/import/view/MergeTenantDialogView",["require","underscore","bundle!CommonBundle","bundle!ImportExportBundle","tenantImportExport/view/BaseWarningDialogView","text!tenantImportExport/import/template/mergeTenantDialogTemplate.htm"],function(t){var e=t("underscore"),i=t("bundle!CommonBundle"),n=t("bundle!ImportExportBundle"),s=t("tenantImportExport/view/BaseWarningDialogView"),o=t("text!tenantImportExport/import/template/mergeTenantDialogTemplate.htm");return s.extend({constructor:function(t){t||(t={}),e.extend(t,{resizable:!0,additionalCssClasses:"merge-tenant-dialog",title:n["import.dialog.merge.tenant.title"],buttons:[{label:n["import.button.continue"],action:"import",primary:!0},{label:i["button.cancel"],action:"cancel",primary:!1}],template:o}),s.prototype.constructor.call(this,t),this.on("button:import",e.bind(this.close,this)),this.on("button:cancel",e.bind(this.close,this))},open:function(t){e.extend(t,{i18n:n}),s.prototype.open.call(this,t)}})}),define("tenantImportExport/import/view/ImportDependentResourcesDialogView",["require","underscore","bundle!CommonBundle","bundle!ImportExportBundle","tenantImportExport/view/BaseWarningDialogView"],function(t){var e=t("underscore"),i=t("bundle!CommonBundle"),n=t("bundle!ImportExportBundle"),s=t("tenantImportExport/view/BaseWarningDialogView");return s.extend({constructor:function(t){t||(t={}),e.extend(t,{resizable:!0,buttons:[{label:n["import.button.include"],action:"include",primary:!0},{label:n["import.button.skip"],action:"skip",primary:!1},{label:i["button.cancel"],action:"cancel",primary:!1}]}),s.prototype.constructor.call(this,t),this.on("button:include",e.bind(this.close,this)),this.on("button:skip",e.bind(this.close,this)),this.on("button:cancel",e.bind(this.close,this))},open:function(t){e.extend(t,{message:n["import.dialog.broken.dependencies.intro"]}),s.prototype.open.call(this,t)}})}),define("tenantImportExport/import/view/ImportWarningsDialogView",["require","underscore","bundle!CommonBundle","bundle!ImportExportBundle","tenantImportExport/view/BaseWarningDialogView"],function(t){var e=t("underscore"),i=t("bundle!CommonBundle"),n=t("bundle!ImportExportBundle"),s=t("tenantImportExport/view/BaseWarningDialogView");return s.extend({constructor:function(t){t||(t={}),e.extend(t,{resizable:!0,title:n["import.dialog.warnings.title"],additionalCssClasses:"warnings-dialog",buttons:[{label:i["button.close"],action:"close",primary:!1}]}),s.prototype.constructor.call(this,t),this.on("button:close",e.bind(this.close,this))}})}),define("tenantImportExport/import/factory/warningsFactory",["require","bundle!ImportExportBundle","underscore"],function(t){function e(t,e){var i={};return n.each(t,function(t,n){i[t]=e[n]}),i}var i=t("bundle!ImportExportBundle"),n=t("underscore"),s={};return s["import.resource.uri.too.long"]=[{msg:i["import.resource.uri.too.long"],parameters:["resourceURI"]},{msg:i["import.resource.uri.too.long.length"],parameters:["resourceURI","maxURILength"]}],s["import.access.denied"]=[{msg:i["import.access.denied"],parameters:["resourceURI"]}],s["import.resource.not.found"]=[{msg:i["import.resource.not.found"],parameters:["resourceURI"]}],s["import.resource.different.type.already.exists"]=[{msg:i["import.resource.different.type.already.exists"],parameters:["resourceURI"]}],s["import.resource.uri.not.valid"]=[{msg:i["import.resource.uri.not.valid"],parameters:["resourceURI"]}],s["import.resource.data.missing"]=[{msg:i["import.resource.data.missing"],parameters:["resourceURI"]}],s["import.reference.resource.not.found"]=[{msg:i["import.reference.resource.not.found"],parameters:["resourceURI"]},{msg:i["import.reference.dependent.resource.not.found"],parameters:["dependentResourceURI","resourceURI"]}],s["import.resource.attached.not.exist.org"]=[{msg:i["import.resource.attached.not.exist.org"],parameters:["resourceURI"]}],s["import.folder.attached.not.exist.org"]=[{msg:i["import.folder.attached.not.exist.org"],parameters:["resourceURI"]}],s["import.multi.tenancy.not.supported"]=[{msg:i["import.multi.tenancy.not.supported"],parameters:["organizationId"]}],function(t){var i,o=t.code,r=t.parameters,a=s[o];return i=n.template(a[r.length-1].msg)(e(a[r.length-1].parameters,r))}}),define("text!common/component/notification/template/notificationTemplate.htm",[],function(){return'<div class="notificationAlert">\n    <p class="notificationMessage">\n        <span>{{- message }}</span>\n        <span class="close">| <a href="#">{{- i18n[\'notification.button.close\'] }}</a></span>\n    </p>\n</div>'}),define("common/component/notification/Notification",["require","underscore","jquery","backbone","bundle!js-sdk/CommonBundle","text!./template/notificationTemplate.htm","css!notifications"],function(t){"use strict";var e,i,n=t("underscore"),s=t("jquery"),o=t("backbone"),r=t("bundle!js-sdk/CommonBundle"),a=t("text!./template/notificationTemplate.htm");t("css!notifications");var l={SUCCESS:"success",WARNING:"warning"},h=2e3,c={};return c[l.WARNING]=l.WARNING,i=o.View.extend({template:n.template(a),events:{"click .close a":"hide"},el:function(){return this.template({message:this.message,i18n:r})},initialize:function(){this.render()},render:function(){return s("body").append(this.$el),this.$el.hide(),this.$messageContainer=this.$(".notificationMessage > span:first-child"),this},show:function(t){return t=n.extend({type:l.WARNING,delay:h},t),this.$messageContainer.text(t.message),this.$messageContainer.removeClass().attr({"class":c[t.type]}),this.$el.slideDown(),t.delay&&n.delay(n.bind(this.hide,this),t.delay),this},hide:function(){return arguments.length&&arguments[0].preventDefault&&arguments[0].preventDefault(),this.$el.slideUp(),this},remove:function(){o.View.prototype.remove.apply(this,arguments)}},{show:function(){return e||(e=new i),e.show.apply(e,arguments)},hide:function(){return e||(e=new i),e.hide.apply(e,arguments)}})}),define("common/view/mixin/epoxyCustomBindingHandlers",["require"],function(t){return{}}),define("common/view/mixin/epoxyCustomBindingFilters",["require"],function(t){return{}}),define("common/view/mixin/epoxyViewMixin",["require","backbone.epoxy","underscore","./epoxyCustomBindingHandlers","./epoxyCustomBindingFilters"],function(t){var e=t("backbone.epoxy"),i=t("underscore"),n=t("./epoxyCustomBindingHandlers"),s=t("./epoxyCustomBindingFilters");return{epoxifyView:function(){var t=this.remove;e.View.mixin(this),t&&(this.remove=t),this.bindingFilters?this.bindingFilters=i.extend({},s,this.bindingFilters):s,this.bindingHandlers?this.bindingHandlers=i.extend({},n,this.bindingHandlers):n},applyEpoxyBindings:function(){this.applyBindings()},removeEpoxyBindings:function(){this.removeBindings()}}}),define("text!tenantImportExport/import/template/importTemplate.htm",[],function(){return'<input name="organization" class="" type="hidden" data-bind="value:organization"/>\n\n<fieldset class="group">\n    <legend class="">\n        <span>{{- i18n[\'import.file.name\'] }}</span>\n    </legend>\n    <label for="uploadFile">\n        <input name="file" class="upload-file" id="uploadFile" type="file"/>\n    </label>\n</fieldset>\n<fieldset class="group">\n    <legend class="">\n        <span>{{- i18n[\'import.options\'] }}</span>\n    </legend>\n    <ul class="list inputSet">\n        <li class="leaf">\n            <div class="control checkBox">\n                <label class="wrap" title="" for="update">{{- i18n[\'import.update\'] }}</label>\n                <input id="update" class="" type="checkbox" value="" name="update" data-bind="checked:update"/>\n            </div>\n            <ul class="list inputSet">\n                <li class="leaf">\n                    <div class="control checkBox">\n                        <label class="wrap" title="">{{- i18n[\'import.skip.user.update\']\n                            }}</label>\n                        <input id="skipUserUpdate" class="" type="checkbox" value="" name="skip-user-update"\n                               data-bind="checked:skipUserUpdate, enabled:update"/>\n                    </div>\n                </li>\n            </ul>\n        </li>\n\n        {{ if (model.includeAuditEvents) { }}\n        <li class="leaf">\n            <div class="control checkBox">\n                <label class="wrap" title="">{{- i18n[\'import.include.audit.events\']}}</label>\n                <input id="includeAuditEvents" class="" type="checkbox" name="include-audit-events"\n                       data-bind="checked:includeAuditEvents"/>\n            </div>\n        </li>\n\n        {{ } if (model.includeAccessEvents) { }}\n        <li class="leaf">\n            <div class="control checkBox">\n                <label class="wrap" title="">{{- i18n[\'import.include.access.events\']}}</label>\n                <input id="includeAccessEvents" class="" type="checkbox" value="" name="include-access-events"\n                       data-bind="checked:includeAccessEvents"/>\n            </div>\n        </li>\n\n        {{ } if (model.includeMonitoringEvents) { }}\n        <li class="leaf">\n            <div class="control checkBox">\n                <label class="wrap" title="">{{- i18n[\'import.include.monitoring.events\'] }}</label>\n                <input id="includeMonitoringEvents" class="" type="checkbox" value="" name="include-monitoring-events"\n                       data-bind="checked:includeMonitoringEvents"/>\n            </div>\n        </li>\n\n        {{ } if (model.includeServerSettings) { }}\n        <li class="leaf">\n            <div class="control checkBox">\n                <label class="wrap">{{- i18n[\'import.include.configuration.settings\']}}</label>\n                <input class="" type="checkbox" value="" name="include-server-settings"\n                       data-bind="checked:includeServerSettings"/>\n            </div>\n        </li>\n        {{ } if (typeof model.skipThemes !== "undefined") { }}\n\n        <li class="leaf">\n            <div class="control checkBox">\n                <label class="wrap" title="">{{- i18n[\'import.include.themes\']}}</label>\n                <input type="checkbox" value=""\n                       data-bind="checked:not(skipThemes)"/>\n                <input class="hidden" id="skip-themes" type="checkbox"  value="" name="skip-themes"\n                       data-bind="checked:skipThemes"/>\n            </div>\n        </li>\n        {{ } }}\n    </ul>\n</fieldset>\n\n<!-- Hack for correct sending of multipart/form-data in IE. -->\n<!-- Here is the fix https://blog.yorkxin.org/posts/2014/02/06/ajax-with-formdata-is-broken-on-ie10-ie11/ -->\n<input type="hidden" name="_dontcare">'}),define("tenantImportExport/import/view/ImportView",["require","css!importExport.css","jquery","underscore","backbone","../model/ImportModel","../model/ImportStateModel","../enum/importPendingStatesEnum","../enum/brokenDependencyStrategyEnum","../../export/view/LoadingDialog","./MergeTenantDialogView","./ImportDependentResourcesDialogView","./ImportWarningsDialogView","tenantImportExport/import/factory/warningsFactory","common/component/notification/Notification","common/view/mixin/epoxyViewMixin","text!tenantImportExport/import/template/importTemplate.htm","bundle!ImportExportBundle","bundle!CommonBundle"],function(t){"use strict";function e(){var t=this.stateModel.get("warnings");return a.map(t,function(t){return v(t)})}function i(t,i){i=i||"warning";var n=e.call(this);"import.finished"!==t||a.isEmpty(n)||this.warningsDialogView.open({items:n}),this.notification.show({delay:!1,message:y[t]||y["import.error.unexpected"],type:i}),this.trigger("import:finished",this.model.get("organization")),this.model.reset(this.type)}function n(){var t=this.stateModel.get("error");t.errorCode===d.BROKEN_DEPS?this.dependentResourcesDialogView.open({items:t.parameters}):t.errorCode===d.TENANT_MISMATCH&&this.mergeTenantDialogView.open({fileTenantId:t.parameters[0],selectedTenantId:this.model.get("organization")})}function s(t,e){return function(i){t.model.set("brokenDependencies",e),t.doImport()}}function o(t){this.model.cancel(),this.stateModel.set("phase",t)}t("css!importExport.css");var r=t("jquery"),a=t("underscore"),l=t("backbone"),h=t("../model/ImportModel"),c=t("../model/ImportStateModel"),d=t("../enum/importPendingStatesEnum"),p=t("../enum/brokenDependencyStrategyEnum"),u=t("../../export/view/LoadingDialog"),m=t("./MergeTenantDialogView"),f=t("./ImportDependentResourcesDialogView"),g=t("./ImportWarningsDialogView"),v=t("tenantImportExport/import/factory/warningsFactory"),b=t("common/component/notification/Notification"),w=t("common/view/mixin/epoxyViewMixin"),x=t("text!tenantImportExport/import/template/importTemplate.htm"),y=t("bundle!ImportExportBundle"),z=t("bundle!CommonBundle"),C=l.View.extend({tagName:"form",className:"import-view",id:"importDataFile",events:{"change input[type='file']":"validateFile","click .checkBox label":"_clickOnCheckbox"},initialize:function(){this.model||(this.model=new h(null,{form:this.el})),this.stateModel=new c,this.loadingDialog=new u({content:z["dialog.overlay.loading"]}),this.mergeTenantDialogView=new m,this.dependentResourcesDialogView=new f,this.warningsDialogView=new g,this.notification=new b,this.listenTo(this.stateModel,"change:phase",this._handleImportPhase,this);var t={delay:!1,message:y["import.error.cancelled"]},e={delay:!1,message:y["import.error.unexpected"]};this.listenTo(this.model,"change",this._onModelChange),this.listenTo(this.model,"error:notFound",a.bind(this.notification.show,this.notification,t)),this.listenTo(this.stateModel,"error:notFound",a.bind(this.notification.show,this.notification,t)),this.listenTo(this.model,"error:internalServerError",a.bind(this.notification.show,this.notification,e)),this.listenTo(this.stateModel,"error:internalServerError",a.bind(this.notification.show,this.notification,e)),this.listenTo(this.model,"error",a.bind(this.loadingDialog.close,this.loadingDialog)),this.listenTo(this.stateModel,"error",a.bind(this.loadingDialog.close,this.loadingDialog)),this.listenTo(this.mergeTenantDialogView,"button:import",function(){this.model.set("mergeOrganization",!0),this.doImport()},this),this.listenTo(this.mergeTenantDialogView,"button:cancel",a.bind(o,this,c.STATE.CANCELLED)),this.listenTo(this.dependentResourcesDialogView,"button:skip",s(this,p.SKIP)),this.listenTo(this.dependentResourcesDialogView,"button:include",s(this,p.INCLUDE)),this.listenTo(this.dependentResourcesDialogView,"button:cancel",a.bind(o,this,c.STATE.CANCELLED)),this.epoxifyView()},render:function(t){return this.type=t.type,this.model.reset(this.type,{organization:t.tenantId}),this.$el.html(a.template(x)({i18n:y,model:this.model.toJSON()})),this.applyEpoxyBindings(),this},validateFile:function(t){this.model.set("fileName",r(t.target).val());var e=r(t.target),i=e.parent();this.model.isValid(!0)?i.removeClass("error"):i.addClass("error")},doImport:function(){var t=this;this.loadingDialog.open(),this.model.isValid(!0)&&this.model.save().always(function(e){t.stateModel.set(e)})},_handleImportPhase:function(){var t=this.stateModel.get("phase");t!==c.STATE.INPROGRESS&&this.loadingDialog.close(),t===c.STATE.READY&&i.call(this,"import.finished","success")||t===c.STATE.FAILED&&i.call(this,this.stateModel.get("error").errorCode)||t===c.STATE.CANCELLED&&i.call(this,"import.error.cancelled")||t===c.STATE.PENDING&&n.call(this)},_clickOnCheckbox:function(t){var e=r(t.target).next();e[0].disabled||(e[0].checked=!e[0].checked,e.trigger("change"))},_onModelChange:function(){this.model.isValid(!0)}});return a.extend(C.prototype,w),C}),define("tenantImportExport/import/view/ImportPageView",["require","backbone","jrs.configs","./ImportView","tenantImportExport/export/enum/exportTypesEnum"],function(t){"use strict";var e=t("backbone"),i=t("jrs.configs"),n=t("./ImportView"),s=t("tenantImportExport/export/enum/exportTypesEnum");return e.View.extend({events:{"click #importButton":"doImport"},initialize:function(){this.importView=new n,this.importView.render({tenantId:i.isProVersion?"organizations":null,type:i.isProVersion?s.SERVER_PRO:s.SERVER_CE}),this.$el.find(".body").append(this.importView.el),this.listenTo(this.importView.model,"validated",function(t){var e=this.$("#importButton"),i=t?null:"disabled";e.attr("disabled",i)},this)},doImport:function(){this.importView.doImport()}})}),define("administer/administerImportMain",["require","!domReady","administer.logging","administer.base","jrs.configs","tenantImportExport/import/view/ImportPageView"],function(t){"use strict";var e=t("!domReady"),i=t("administer.logging"),n=t("administer.base"),s=t("jrs.configs"),o=t("tenantImportExport/import/view/ImportPageView");e(function(){n.urlContext=s.urlContext,i.initialize(),new o({el:document.getElementById("settings")})})});