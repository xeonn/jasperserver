JRS.Export.ShortFormView=function(e,t,i,l,o){var s=navigator.userAgent.toLowerCase().indexOf("msie")>-1;return l.View.extend({events:{"input input[type='text']":"editFileName","change input[type='checkbox']":"setValue","click .checkBox label":"clickOnCheckbox","click #exportButton":"sendParameters"},initialize:function(){i.bindAll(this),this.model.set({everything:!1}),this.fileTemplateId="exportDataFileTemplate",this.optionsTemplateId="exportOptionsTemplatesShort",this.controlsTemplateId="controlButtonsTemplate",this.fileTemplate=o.createTemplate(this.fileTemplateId),this.optionsTemplate=o.createTemplate(this.optionsTemplateId),this.controlsTemplate=o.createTemplate(this.controlsTemplateId)},render:function(e){var i=this.fileTemplate({defaultFileName:this.model.get("fileName")}),l=this.optionsTemplate({includeReportJobs:this.model.get("includeReportJobs"),includeRepositoryPermissions:this.model.get("includeRepositoryPermissions")}),o=this.controlsTemplate();return e&&e.container?(this.undelegateEvents(),this.$el=t(e.container),this.el=this.$el[0],this.$el.find(".body").append(i+l),this.$el.find(".footer").prepend(o),this.delegateEvents()):this.$el.html(i+l+o),s&&this.$el.find("input[type='text']").on("propertychange input",this.editFileName),this},setValue:function(e){var i=t(e.target)[0],l={};l[i.id]=i.checked,this.model.set(l)},editFileName:function(e){var i=t(e.target);i.parent().removeClass("error");var l=this.$el.find("#exportButton").prop("disabled",!1);this.model.once("invalid",function(e,t){i.next().html(t),i.parent().addClass("error"),l.prop("disabled",!0)}),this.model.set("fileName",i.val(),{validate:!0})},sendParameters:function(){this.model.isValid()&&this.isValid()&&this.model.save()},clickOnCheckbox:function(e){var i=t(e.target).next();i[0].disabled||(i[0].checked=!i[0].checked,i.trigger("change"))},isValid:function(){return!this.$el.find(".error").length},prepareToShow:function(){this.$el.find("input[type='text']").val(this.model.defaults.fileName).parent().removeClass("error"),this.$el.find("#exportButton").prop("disabled",!1),this.$el.find("#includeReportJobs").prop("disabled",!this.model.get("includeReportJobs")).prop("checked",!!this.model.get("includeReportJobs")),this.model.set({fileName:this.model.defaults.fileName})}})}(JRS.Export,jQuery,_,Backbone,jaspersoft.components.templateEngine);