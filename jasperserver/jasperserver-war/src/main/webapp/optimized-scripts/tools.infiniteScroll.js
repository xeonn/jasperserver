var InfiniteScroll=function(t){this._scroll=t.scroll,this._id=t.id,this._loadFactor=t.loadFactor?t.loadFactor:.95,this._contentId=t.contentId?t.contentId:void 0,this._lastContentHeight=0,this._loading=!1,this._control=this._scroll?this._scroll.parent:$(this._id),this._content=this._scroll?this._scroll.element:this._contentId?$(this._contentId):this._control.childElements()[0],this._eventType=isSupportsTouch()?"touchmove":"scroll",this._control.observe(this._eventType,this._onScrollHandler.bind(this))};InfiniteScroll.addMethod("destroy",function(){this._control&&this._control.stopObserving(this._eventType,this._handler)}),InfiniteScroll.addMethod("_onScrollHandler",function(){var t=this._scroll?-1*this._scroll.y:this._control.scrollTop,i=this._content.getHeight(),o=this._control.getHeight();i!=this._lastContentHeight&&(this._loading=!1);var s=!this._loading&&0!=i;s=this._scroll?s&&this._scroll.isBottom():s&&(o+t)/i>this._loadFactor,s&&(this._loading=!0,this._lastContentHeight=i,isIPad()&&this.wait(),this.onLoad())}),InfiniteScroll.addMethod("onLoad",doNothing),InfiniteScroll.addMethod("reset",function(){isIPad()?this._scroll.reset():this._control.scrollTop=0,this._loading=!1}),InfiniteScroll.addMethod("wait",function(){if(!this._waitIndicator){this._waitIndicator=new Element("div",{"class":"dimmer resultsOverlay"});var t=this._control.getDimensions(),i=this._control.positionedOffset();this._waitIndicator.setStyle({zIndex:"4000",top:i.top+"px",left:i.left+"px",height:t.height+"px",width:t.width+"px"}),this._control.insert({after:this._waitIndicator})}this._waitIndicator.show()}),InfiniteScroll.addMethod("stopWaiting",function(){this._waitIndicator&&this._waitIndicator.hide()});