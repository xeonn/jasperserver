JRS.Export.FormModel=function(e,t,r,s,i,n){return s.Model.extend(i).extend({defaults:{roles:null,users:null,uris:null,fileName:"export.zip",everything:!0,includeSystemProperties:!1,userForRoles:!1,rolesForUser:!1,includeAccessEvents:!1,includeAuditEvents:!1,includeMonitoringEvents:!1,includeRepositoryPermissions:!0,includeReportJobs:!0,state:r.extend(n.instance({urlTemplate:"rest_v2/export/{id}/state"}),i)},initialize:function(){r.bindAll(this)},url:function(){return"rest_v2/export"},save:function(){var e=new s.Model;e.url=this.url,e.save(this.prepareServerObject(),{success:this.updateState,error:this.defaultErrorDelegator})},isAcceptable:function(){var e=this.prepareServerObject();return e.uris||e.roles||e.users||r.filter(e.parameters,function(e){return"role-users"!==e&&"users-roles"!==e}).length},prepareServerObject:function(){return{roles:r.isArray(this.get("roles"))&&this.get("roles").length?this.get("roles"):null,users:r.isArray(this.get("users"))&&this.get("users").length?this.get("users"):null,uris:r.clone(this.get("uris")),parameters:this.getConvertedParameters()}},validate:function(t){return t.fileName.length?t.fileName.length>256?e.i18n["file.name.too.long"]:/[\/\\?%\*:|"<>]+/.test(t.fileName)?e.i18n["file.name.not.valid"]:void 0:e.i18n["file.name.empty"]},updateState:function(e){var t=this.get("state");t.get("phase")===n.NOT_STARTED&&(t.set({id:e.get("id")}),t.name=this.get("fileName")),t.set({phase:e.get("phase"),message:e.get("message")})},getConvertedParameters:function(){var e=this,t=this.get("uris");t=t&&t.length;var s=this.get("everything"),i=r(this.attributes).chain().keys().filter(function(t){return"roles"!==t&&"users"!==t&&"roles"!==t&&"uris"!=t&&"state"!=t&&"fileName"!=t&&"hasReports"!=t&&e.get(t)}).filter(function(e){return s?s:"includeAccessEvents"!=e}).filter(function(e){return t?t:"includeRepositoryPermissions"!=e&&"includeReportJobs"!=e}).map(function(e){return"userForRoles"===e?"role-users":"rolesForUser"===e?"users-roles":"includeSystemProperties"===e?"include-server-settings":"includeAccessEvents"===e?"include-access-events":"includeAuditEvents"===e?"include-audit-events":"includeRepositoryPermissions"===e?"repository-permissions":"includeReportJobs"===e?"report-jobs":"includeMonitoringEvents"===e?"include-monitoring-events":e}).value();return i?i:[]}})}(__jrsConfigs__.Export,jQuery,_,Backbone,JRS.Export.ServerErrorTrait,jaspersoft.components.State);