define(["require","jquery","underscore","common/component/dialog/Dialog","./ExportView","bundle!CommonBundle","bundle!ImportExportBundle","tenantImportExport/export/enum/exportTypesEnum"],function(t){function e(t){return i.isArray(t)?i.pluck(t,"URIString"):[t.URIString]}function o(t){return i.isArray(t)||(t=[t]),!!i.reduce(t,function(t,e){return t||!e.resourceType||e.resourceType.indexOf("ReportUnit")+1||e.resourceType.indexOf("ReportOptions")+1},!1)}var i=(t("jquery"),t("underscore")),n=t("common/component/dialog/Dialog"),r=t("./ExportView"),s=t("bundle!CommonBundle"),p=t("bundle!ImportExportBundle"),l=t("tenantImportExport/export/enum/exportTypesEnum");return n.extend({constructor:function(t){t||(t={}),this.options=t,n.prototype.constructor.call(this,{model:this.model,resizable:!0,modal:!0,content:"",buttons:[{label:s["button.export"],action:"export",primary:!0},{label:s["button.cancel"],action:"cancel",primary:!1}]}),this.on("button:export",i.bind(this._onExportButtonClick,this)),this.on("button:cancel",i.bind(this._closeExportDialog,this))},initialize:function(t){this.exportView=new r,this.listenTo(this.exportView.model,"validated",function(t){t?this.buttons.enable("export"):this.buttons.disable("export")},this),n.prototype.initialize.apply(this,arguments)},openRepoDialog:function(t){var i={type:l.REPOSITORY},n=" "+p["export.dialog.repository.title"];this.addCssClasses("repository-export-dialog"),this._openExportDialog(i,n),this.exportView.model.set({uris:e(t),includeScheduledReportJobs:o(t)})},openTenantDialog:function(t){var e=" "+t.name,o=t.isRoot()?l.ROOT_TENANT:l.TENANT,i={type:o,tenantId:t.id};this.addCssClasses("tenant-export-dialog"),this._openExportDialog(i,e)},fieldIsValid:function(){},fieldIsInvalid:function(t){},_onExportButtonClick:function(){this.exportView.doExport(),this._closeExportDialog()},_closeExportDialog:function(){this.$el.css({width:this.width}),this.close()},_openExportDialog:function(t,e){var o=p["export.dialog.title"]+(e?e:"");this.setContent(this.exportView.render(t).$el),this.setTitle(o),this.exportView.applyEpoxyBindings(),this.exportView.delegateEvents(),n.prototype.open.apply(this,arguments),this.$el.css({minHeight:this.$el.outerHeight()}),this.width=this.$el.outerWidth()}})});