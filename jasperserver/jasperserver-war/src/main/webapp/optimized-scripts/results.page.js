function isMacOS(){return isOS("mac")}function isWindowsOS(){return isOS("win")}function isLinuxOS(){return isOS("linux")}function isOS(e){return navigator.appVersion.toLowerCase().include(e)}function isSupportsTouch(){return isIPad()||isAndroid()}function isMozilla(){return"Netscape"===navigator.appName}function isFirefox(){return navigator.userAgent.toLowerCase().include("firefox")}function isWebKitEngine(){return Prototype.Browser.WebKit}function isChrome(){return navigator.userAgent.toLowerCase().include("chrome")}function isIPad(){return"iPad"==navigator.platform}function isAndroid(){return navigator.userAgent.toLowerCase().include("android")}function isIE(){return"Microsoft Internet Explorer"===navigator.appName||navigator.userAgent.indexOf("Trident/")>=0}function isIE6(){return isIEVersion(6)}function isIE7(){return isIEVersion(7)}function isIE8(){return isIEVersion(8)}function isIE9(){return isIEVersion(9)}function isIE10(){return isIEVersion(10)}function isIE11(){return isIEVersion(11)}function isIEVersion7Upwards(){return getIEVersion()>=7}function isIEVersion(e){return getIEVersion()===e}function getIEVersion(){var e=0;if(getIEVersion.version>=0)return getIEVersion.version;if(isIE())if("Netscape"===navigator.appName){var t=navigator.userAgent,i=new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})");null!=i.exec(t)&&(e=parseFloat(RegExp.$1))}else{var n=navigator.appVersion.split("MSIE")[1];e=parseFloat(n)}return getIEVersion.version=e,e}function doNothing(){}function addDataToForm(e,t){var i=function(t,i){var n=jQuery("<input>").attr("type","hidden").attr("name",t).val(i);jQuery(e).append(jQuery(n))};_.each(t,function(e,t){_.isArray(e)?_.each(e,function(e){i(t,e)}):i(t,e)})}function updateYearMonth(e,t,i){return e&&(e.setFullYear(t),e.setMonth(i),e.getMonth()!==i&&e.setMonth(i)),e}function getTZOffset(e,t){if(!e)return 0;var i,n={"africa/abidjan":{utc:0,utc_dst:0},"africa/accra":{utc:0,utc_dst:0},"africa/addis_ababa":{utc:3,utc_dst:3},"africa/algiers":{utc:1,utc_dst:1},"africa/asmara":{utc:3,utc_dst:3},"africa/asmera":{utc:3,utc_dst:3},"africa/bamako":{utc:0,utc_dst:0},"africa/bangui":{utc:1,utc_dst:1},"africa/banjul":{utc:0,utc_dst:0},"africa/bissau":{utc:0,utc_dst:0},"africa/blantyre":{utc:2,utc_dst:2},"africa/brazzaville":{utc:1,utc_dst:1},"africa/bujumbura":{utc:2,utc_dst:2},"africa/cairo":{utc:2,utc_dst:2},"africa/casablanca":{utc:0,utc_dst:1},"africa/ceuta":{utc:1,utc_dst:2},"africa/conakry":{utc:0,utc_dst:0},"africa/dakar":{utc:0,utc_dst:0},"africa/dar_es_salaam":{utc:3,utc_dst:3},"africa/djibouti":{utc:3,utc_dst:3},"africa/douala":{utc:1,utc_dst:1},"africa/el_aaiun":{utc:0,utc_dst:0},"africa/freetown":{utc:0,utc_dst:0},"africa/gaborone":{utc:2,utc_dst:2},"africa/harare":{utc:2,utc_dst:2},"africa/johannesburg":{utc:2,utc_dst:2},"africa/juba":{utc:3,utc_dst:3},"africa/kampala":{utc:3,utc_dst:3},"africa/khartoum":{utc:3,utc_dst:3},"africa/kigali":{utc:2,utc_dst:2},"africa/kinshasa":{utc:1,utc_dst:1},"africa/lagos":{utc:1,utc_dst:1},"africa/libreville":{utc:1,utc_dst:1},"africa/lome":{utc:0,utc_dst:0},"africa/luanda":{utc:1,utc_dst:1},"africa/lubumbashi":{utc:2,utc_dst:2},"africa/lusaka":{utc:2,utc_dst:2},"africa/malabo":{utc:1,utc_dst:1},"africa/maputo":{utc:2,utc_dst:2},"africa/maseru":{utc:2,utc_dst:2},"africa/mbabane":{utc:2,utc_dst:2},"africa/mogadishu":{utc:3,utc_dst:3},"africa/monrovia":{utc:0,utc_dst:0},"africa/nairobi":{utc:3,utc_dst:3},"africa/ndjamena":{utc:1,utc_dst:1},"africa/niamey":{utc:1,utc_dst:1},"africa/nouakchott":{utc:0,utc_dst:0},"africa/ouagadougou":{utc:0,utc_dst:0},"africa/porto-novo":{utc:1,utc_dst:1},"africa/sao_tome":{utc:0,utc_dst:0},"africa/timbuktu":{utc:0,utc_dst:0},"africa/tripoli":{utc:2,utc_dst:2},"africa/tunis":{utc:1,utc_dst:1},"africa/windhoek":{utc:1,utc_dst:2},akst9akdt:{utc:-9,utc_dst:-8},"america/adak":{utc:-10,utc_dst:-9},"america/anchorage":{utc:-9,utc_dst:-8},"america/anguilla":{utc:-4,utc_dst:-4},"america/antigua":{utc:-4,utc_dst:-4},"america/araguaina":{utc:-3,utc_dst:-3},"america/argentina/buenos_aires":{utc:-3,utc_dst:-3},"america/argentina/catamarca":{utc:-3,utc_dst:-3},"america/argentina/comodrivadavia":{utc:-3,utc_dst:-3},"america/argentina/cordoba":{utc:-3,utc_dst:-3},"america/argentina/jujuy":{utc:-3,utc_dst:-3},"america/argentina/la_rioja":{utc:-3,utc_dst:-3},"america/argentina/mendoza":{utc:-3,utc_dst:-3},"america/argentina/rio_gallegos":{utc:-3,utc_dst:-3},"america/argentina/salta":{utc:-3,utc_dst:-3},"america/argentina/san_juan":{utc:-3,utc_dst:-3},"america/argentina/san_luis":{utc:-3,utc_dst:-3},"america/argentina/tucuman":{utc:-3,utc_dst:-3},"america/argentina/ushuaia":{utc:-3,utc_dst:-3},"america/aruba":{utc:-4,utc_dst:-4},"america/asuncion":{utc:-4,utc_dst:-3},"america/atikokan":{utc:-5,utc_dst:-5},"america/atka":{utc:-10,utc_dst:-9},"america/bahia":{utc:-3,utc_dst:-2},"america/bahia_banderas":{utc:-6,utc_dst:-5},"america/barbados":{utc:-4,utc_dst:-4},"america/belem":{utc:-3,utc_dst:-3},"america/belize":{utc:-6,utc_dst:-6},"america/blanc-sablon":{utc:-4,utc_dst:-4},"america/boa_vista":{utc:-4,utc_dst:-4},"america/bogota":{utc:-5,utc_dst:-5},"america/boise":{utc:-7,utc_dst:-6},"america/buenos_aires":{utc:-3,utc_dst:-3},"america/cambridge_bay":{utc:-7,utc_dst:-6},"america/campo_grande":{utc:-4,utc_dst:-3},"america/cancun":{utc:-6,utc_dst:-5},"america/caracas":{utc:-4.5,utc_dst:-4.5},"america/catamarca":{utc:-3,utc_dst:-3},"america/cayenne":{utc:-3,utc_dst:-3},"america/cayman":{utc:-5,utc_dst:-5},"america/chicago":{utc:-6,utc_dst:-5},"america/chihuahua":{utc:-7,utc_dst:-6},"america/coral_harbour":{utc:-5,utc_dst:-5},"america/cordoba":{utc:-3,utc_dst:-3},"america/costa_rica":{utc:-6,utc_dst:-6},"america/creston":{utc:-7,utc_dst:-7},"america/cuiaba":{utc:-4,utc_dst:-3},"america/curacao":{utc:-4,utc_dst:-4},"america/danmarkshavn":{utc:0,utc_dst:0},"america/dawson":{utc:-8,utc_dst:-7},"america/dawson_creek":{utc:-7,utc_dst:-7},"america/denver":{utc:-7,utc_dst:-6},"america/detroit":{utc:-5,utc_dst:-4},"america/dominica":{utc:-4,utc_dst:-4},"america/edmonton":{utc:-7,utc_dst:-6},"america/eirunepe":{utc:-4,utc_dst:-4},"america/el_salvador":{utc:-6,utc_dst:-6},"america/ensenada":{utc:-8,utc_dst:-7},"america/fort_wayne":{utc:-5,utc_dst:-4},"america/fortaleza":{utc:-3,utc_dst:-3},"america/glace_bay":{utc:-4,utc_dst:-3},"america/godthab":{utc:-3,utc_dst:-2},"america/goose_bay":{utc:-4,utc_dst:-3},"america/grand_turk":{utc:-5,utc_dst:-4},"america/grenada":{utc:-4,utc_dst:-4},"america/guadeloupe":{utc:-4,utc_dst:-4},"america/guatemala":{utc:-6,utc_dst:-6},"america/guayaquil":{utc:-5,utc_dst:-5},"america/guyana":{utc:-4,utc_dst:-4},"america/halifax":{utc:-4,utc_dst:-3},"america/havana":{utc:-5,utc_dst:-4},"america/hermosillo":{utc:-7,utc_dst:-7},"america/indiana/indianapolis":{utc:-5,utc_dst:-4},"america/indiana/knox":{utc:-6,utc_dst:-5},"america/indiana/marengo":{utc:-5,utc_dst:-4},"america/indiana/petersburg":{utc:-5,utc_dst:-4},"america/indiana/tell_city":{utc:-6,utc_dst:-5},"america/indiana/vevay":{utc:-5,utc_dst:-4},"america/indiana/vincennes":{utc:-5,utc_dst:-4},"america/indiana/winamac":{utc:-5,utc_dst:-4},"america/indianapolis":{utc:-5,utc_dst:-4},"america/inuvik":{utc:-7,utc_dst:-6},"america/iqaluit":{utc:-5,utc_dst:-4},"america/jamaica":{utc:-5,utc_dst:-5},"america/jujuy":{utc:-3,utc_dst:-3},"america/juneau":{utc:-9,utc_dst:-8},"america/kentucky/louisville":{utc:-5,utc_dst:-4},"america/kentucky/monticello":{utc:-5,utc_dst:-4},"america/knox_in":{utc:-6,utc_dst:-5},"america/kralendijk":{utc:-4,utc_dst:-4},"america/la_paz":{utc:-4,utc_dst:-4},"america/lima":{utc:-5,utc_dst:-5},"america/los_angeles":{utc:-8,utc_dst:-7},"america/louisville":{utc:-5,utc_dst:-4},"america/lower_princes":{utc:-4,utc_dst:-4},"america/maceio":{utc:-3,utc_dst:-3},"america/managua":{utc:-6,utc_dst:-6},"america/manaus":{utc:-4,utc_dst:-4},"america/marigot":{utc:-4,utc_dst:-4},"america/martinique":{utc:-4,utc_dst:-4},"america/matamoros":{utc:-6,utc_dst:-5},"america/mazatlan":{utc:-7,utc_dst:-6},"america/mendoza":{utc:-3,utc_dst:-3},"america/menominee":{utc:-6,utc_dst:-5},"america/merida":{utc:-6,utc_dst:-5},"america/metlakatla":{utc:-8,utc_dst:-8},"america/mexico_city":{utc:-6,utc_dst:-5},"america/miquelon":{utc:-3,utc_dst:-2},"america/moncton":{utc:-4,utc_dst:-3},"america/monterrey":{utc:-6,utc_dst:-5},"america/montevideo":{utc:-3,utc_dst:-2},"america/montreal":{utc:-5,utc_dst:-4},"america/montserrat":{utc:-4,utc_dst:-4},"america/nassau":{utc:-5,utc_dst:-4},"america/new_york":{utc:-5,utc_dst:-4},"america/nipigon":{utc:-5,utc_dst:-4},"america/nome":{utc:-9,utc_dst:-8},"america/noronha":{utc:-2,utc_dst:-2},"america/north_dakota/beulah":{utc:-6,utc_dst:-5},"america/north_dakota/center":{utc:-6,utc_dst:-5},"america/north_dakota/new_salem":{utc:-6,utc_dst:-5},"america/ojinaga":{utc:-7,utc_dst:-6},"america/panama":{utc:-5,utc_dst:-5},"america/pangnirtung":{utc:-5,utc_dst:-4},"america/paramaribo":{utc:-3,utc_dst:-3},"america/phoenix":{utc:-7,utc_dst:-7},"america/port_of_spain":{utc:-4,utc_dst:-4},"america/port-au-prince":{utc:-5,utc_dst:-4},"america/porto_acre":{utc:-4,utc_dst:-4},"america/porto_velho":{utc:-4,utc_dst:-4},"america/puerto_rico":{utc:-4,utc_dst:-4},"america/rainy_river":{utc:-6,utc_dst:-5},"america/rankin_inlet":{utc:-6,utc_dst:-5},"america/recife":{utc:-3,utc_dst:-3},"america/regina":{utc:-6,utc_dst:-6},"america/resolute":{utc:-6,utc_dst:-5},"america/rio_branco":{utc:-4,utc_dst:-4},"america/rosario":{utc:-3,utc_dst:-3},"america/santa_isabel":{utc:-8,utc_dst:-7},"america/santarem":{utc:-3,utc_dst:-3},"america/santiago":{utc:-4,utc_dst:-3},"america/santo_domingo":{utc:-4,utc_dst:-4},"america/sao_paulo":{utc:-3,utc_dst:-2},"america/scoresbysund":{utc:-1,utc_dst:0},"america/shiprock":{utc:-7,utc_dst:-6},"america/sitka":{utc:-9,utc_dst:-8},"america/st_barthelemy":{utc:-4,utc_dst:-4},"america/st_johns":{utc:-3.5,utc_dst:-2.5},"america/st_kitts":{utc:-4,utc_dst:-4},"america/st_lucia":{utc:-4,utc_dst:-4},"america/st_thomas":{utc:-4,utc_dst:-4},"america/st_vincent":{utc:-4,utc_dst:-4},"america/swift_current":{utc:-6,utc_dst:-6},"america/tegucigalpa":{utc:-6,utc_dst:-6},"america/thule":{utc:-4,utc_dst:-3},"america/thunder_bay":{utc:-5,utc_dst:-4},"america/tijuana":{utc:-8,utc_dst:-7},"america/toronto":{utc:-5,utc_dst:-4},"america/tortola":{utc:-4,utc_dst:-4},"america/vancouver":{utc:-8,utc_dst:-7},"america/virgin":{utc:-4,utc_dst:-4},"america/whitehorse":{utc:-8,utc_dst:-7},"america/winnipeg":{utc:-6,utc_dst:-5},"america/yakutat":{utc:-9,utc_dst:-8},"america/yellowknife":{utc:-7,utc_dst:-6},"antarctica/casey":{utc:11,utc_dst:8},"antarctica/davis":{utc:5,utc_dst:7},"antarctica/dumontdurville":{utc:10,utc_dst:10},"antarctica/macquarie":{utc:11,utc_dst:11},"antarctica/mawson":{utc:5,utc_dst:5},"antarctica/mcmurdo":{utc:12,utc_dst:13},"antarctica/palmer":{utc:-4,utc_dst:-3},"antarctica/rothera":{utc:-3,utc_dst:-3},"antarctica/south_pole":{utc:12,utc_dst:13},"antarctica/syowa":{utc:3,utc_dst:3},"antarctica/vostok":{utc:6,utc_dst:6},"arctic/longyearbyen":{utc:1,utc_dst:2},"asia/aden":{utc:3,utc_dst:3},"asia/almaty":{utc:6,utc_dst:6},"asia/amman":{utc:2,utc_dst:3},"asia/anadyr":{utc:12,utc_dst:12},"asia/aqtau":{utc:5,utc_dst:5},"asia/aqtobe":{utc:5,utc_dst:5},"asia/ashgabat":{utc:5,utc_dst:5},"asia/ashkhabad":{utc:5,utc_dst:5},"asia/baghdad":{utc:3,utc_dst:3},"asia/bahrain":{utc:3,utc_dst:3},"asia/baku":{utc:4,utc_dst:5},"asia/bangkok":{utc:7,utc_dst:7},"asia/beirut":{utc:2,utc_dst:3},"asia/bishkek":{utc:6,utc_dst:6},"asia/brunei":{utc:8,utc_dst:8},"asia/calcutta":{utc:5.5,utc_dst:5.5},"asia/choibalsan":{utc:8,utc_dst:8},"asia/chongqing":{utc:8,utc_dst:8},"asia/chungking":{utc:8,utc_dst:8},"asia/colombo":{utc:5.5,utc_dst:5.5},"asia/dacca":{utc:6,utc_dst:6},"asia/damascus":{utc:2,utc_dst:3},"asia/dhaka":{utc:6,utc_dst:6},"asia/dili":{utc:9,utc_dst:9},"asia/dubai":{utc:4,utc_dst:4},"asia/dushanbe":{utc:5,utc_dst:5},"asia/gaza":{utc:2,utc_dst:3},"asia/harbin":{utc:8,utc_dst:8},"asia/hebron":{utc:2,utc_dst:3},"asia/ho_chi_minh":{utc:7,utc_dst:7},"asia/hong_kong":{utc:8,utc_dst:8},"asia/hovd":{utc:7,utc_dst:7},"asia/irkutsk":{utc:9,utc_dst:9},"asia/istanbul":{utc:2,utc_dst:3},"asia/jakarta":{utc:7,utc_dst:7},"asia/jayapura":{utc:9,utc_dst:9},"asia/jerusalem":{utc:2,utc_dst:3},"asia/kabul":{utc:4.5,utc_dst:4.5},"asia/kamchatka":{utc:12,utc_dst:12},"asia/karachi":{utc:5,utc_dst:5},"asia/kashgar":{utc:8,utc_dst:8},"asia/kathmandu":{utc:5.75,utc_dst:5.75},"asia/katmandu":{utc:5.75,utc_dst:5.75},"asia/kolkata":{utc:5.5,utc_dst:5.5},"asia/krasnoyarsk":{utc:8,utc_dst:8},"asia/kuala_lumpur":{utc:8,utc_dst:8},"asia/kuching":{utc:8,utc_dst:8},"asia/kuwait":{utc:3,utc_dst:3},"asia/macao":{utc:8,utc_dst:8},"asia/macau":{utc:8,utc_dst:8},"asia/magadan":{utc:12,utc_dst:12},"asia/makassar":{utc:8,utc_dst:8},"asia/manila":{utc:8,utc_dst:8},"asia/muscat":{utc:4,utc_dst:4},"asia/nicosia":{utc:2,utc_dst:3},"asia/novokuznetsk":{utc:7,utc_dst:7},"asia/novosibirsk":{utc:7,utc_dst:7},"asia/omsk":{utc:7,utc_dst:7},"asia/oral":{utc:5,utc_dst:5},"asia/phnom_penh":{utc:7,utc_dst:7},"asia/pontianak":{utc:7,utc_dst:7},"asia/pyongyang":{utc:9,utc_dst:9},"asia/qatar":{utc:3,utc_dst:3},"asia/qyzylorda":{utc:6,utc_dst:6},"asia/rangoon":{utc:6.5,utc_dst:6.5},"asia/riyadh":{utc:3,utc_dst:3},"asia/saigon":{utc:7,utc_dst:7},"asia/sakhalin":{utc:11,utc_dst:11},"asia/samarkand":{utc:5,utc_dst:5},"asia/seoul":{utc:9,utc_dst:9},"asia/shanghai":{utc:8,utc_dst:8},"asia/singapore":{utc:8,utc_dst:8},"asia/taipei":{utc:8,utc_dst:8},"asia/tashkent":{utc:5,utc_dst:5},"asia/tbilisi":{utc:4,utc_dst:4},"asia/tehran":{utc:3.5,utc_dst:4.5},"asia/tel_aviv":{utc:2,utc_dst:3},"asia/thimbu":{utc:6,utc_dst:6},"asia/thimphu":{utc:6,utc_dst:6},"asia/tokyo":{utc:9,utc_dst:9},"asia/ujung_pandang":{utc:8,utc_dst:8},"asia/ulaanbaatar":{utc:8,utc_dst:8},"asia/ulan_bator":{utc:8,utc_dst:8},"asia/urumqi":{utc:8,utc_dst:8},"asia/vientiane":{utc:7,utc_dst:7},"asia/vladivostok":{utc:11,utc_dst:11},"asia/yakutsk":{utc:10,utc_dst:10},"asia/yekaterinburg":{utc:6,utc_dst:6},"asia/yerevan":{utc:4,utc_dst:4},"atlantic/azores":{utc:-1,utc_dst:0},"atlantic/bermuda":{utc:-4,utc_dst:-3},"atlantic/canary":{utc:0,utc_dst:1},"atlantic/cape_verde":{utc:-1,utc_dst:-1},"atlantic/faeroe":{utc:0,utc_dst:1},"atlantic/faroe":{utc:0,utc_dst:1},"atlantic/jan_mayen":{utc:1,utc_dst:2},"atlantic/madeira":{utc:0,utc_dst:1},"atlantic/reykjavik":{utc:0,utc_dst:0},"atlantic/south_georgia":{utc:-2,utc_dst:-2},"atlantic/st_helena":{utc:0,utc_dst:0},"atlantic/stanley":{utc:-3,utc_dst:-3},"australia/act":{utc:10,utc_dst:11},"australia/adelaide":{utc:9.5,utc_dst:10.5},"australia/brisbane":{utc:10,utc_dst:10},"australia/broken_hill":{utc:9.5,utc_dst:10.5},"australia/canberra":{utc:10,utc_dst:11},"australia/currie":{utc:10,utc_dst:11},"australia/darwin":{utc:9.5,utc_dst:9.5},"australia/eucla":{utc:8.75,utc_dst:8.75},"australia/hobart":{utc:10,utc_dst:11},"australia/lhi":{utc:10.5,utc_dst:11},"australia/lindeman":{utc:10,utc_dst:10},"australia/lord_howe":{utc:10.5,utc_dst:11},"australia/melbourne":{utc:10,utc_dst:11},"australia/north":{utc:9.5,utc_dst:9.5},"australia/nsw":{utc:10,utc_dst:11},"australia/perth":{utc:8,utc_dst:8},"australia/queensland":{utc:10,utc_dst:10},"australia/south":{utc:9.5,utc_dst:10.5},"australia/sydney":{utc:10,utc_dst:11},"australia/tasmania":{utc:10,utc_dst:11},"australia/victoria":{utc:10,utc_dst:11},"australia/west":{utc:8,utc_dst:8},"australia/yancowinna":{utc:9.5,utc_dst:10.5},"brazil/acre":{utc:-4,utc_dst:-4},"brazil/denoronha":{utc:-2,utc_dst:-2},"brazil/east":{utc:-3,utc_dst:-2},"brazil/west":{utc:-4,utc_dst:-4},"canada/atlantic":{utc:-4,utc_dst:-3},"canada/central":{utc:-6,utc_dst:-5},"canada/eastern":{utc:-5,utc_dst:-4},"canada/east-saskatchewan":{utc:-6,utc_dst:-6},"canada/mountain":{utc:-7,utc_dst:-6},"canada/newfoundland":{utc:-3.5,utc_dst:-2.5},"canada/pacific":{utc:-8,utc_dst:-7},"canada/saskatchewan":{utc:-6,utc_dst:-6},"canada/yukon":{utc:-8,utc_dst:-7},cet:{utc:1,utc_dst:2},"chile/continental":{utc:-4,utc_dst:-3},"chile/easterisland":{utc:-6,utc_dst:-5},cst6cdt:{utc:-6,utc_dst:-5},cuba:{utc:-5,utc_dst:-4},eet:{utc:2,utc_dst:3},egypt:{utc:2,utc_dst:2},eire:{utc:0,utc_dst:1},est:{utc:-5,utc_dst:-5},est5edt:{utc:-5,utc_dst:-4},"etc/gmt":{utc:0,utc_dst:0},"etc/gmt+0":{utc:0,utc_dst:0},"etc/uct":{utc:0,utc_dst:0},"etc/universal":{utc:0,utc_dst:0},"etc/utc":{utc:0,utc_dst:0},"etc/zulu":{utc:0,utc_dst:0},"europe/amsterdam":{utc:1,utc_dst:2},"europe/andorra":{utc:1,utc_dst:2},"europe/athens":{utc:2,utc_dst:3},"europe/belfast":{utc:0,utc_dst:1},"europe/belgrade":{utc:1,utc_dst:2},"europe/berlin":{utc:1,utc_dst:2},"europe/bratislava":{utc:1,utc_dst:2},"europe/brussels":{utc:1,utc_dst:2},"europe/bucharest":{utc:2,utc_dst:3},"europe/budapest":{utc:1,utc_dst:2},"europe/chisinau":{utc:2,utc_dst:3},"europe/copenhagen":{utc:1,utc_dst:2},"europe/dublin":{utc:0,utc_dst:1},"europe/gibraltar":{utc:1,utc_dst:2},"europe/guernsey":{utc:0,utc_dst:1},"europe/helsinki":{utc:2,utc_dst:3},"europe/isle_of_man":{utc:0,utc_dst:1},"europe/istanbul":{utc:2,utc_dst:3},"europe/jersey":{utc:0,utc_dst:1},"europe/kaliningrad":{utc:3,utc_dst:3},"europe/kiev":{utc:2,utc_dst:3},"europe/lisbon":{utc:0,utc_dst:1},"europe/ljubljana":{utc:1,utc_dst:2},"europe/london":{utc:0,utc_dst:1},"europe/luxembourg":{utc:1,utc_dst:2},"europe/madrid":{utc:1,utc_dst:2},"europe/malta":{utc:1,utc_dst:2},"europe/mariehamn":{utc:2,utc_dst:3},"europe/minsk":{utc:3,utc_dst:3},"europe/monaco":{utc:1,utc_dst:2},"europe/moscow":{utc:4,utc_dst:4},"europe/nicosia":{utc:2,utc_dst:3},"europe/oslo":{utc:1,utc_dst:2},"europe/paris":{utc:1,utc_dst:2},"europe/podgorica":{utc:1,utc_dst:2},"europe/prague":{utc:1,utc_dst:2},"europe/riga":{utc:2,utc_dst:3},"europe/rome":{utc:1,utc_dst:2},"europe/samara":{utc:4,utc_dst:4},"europe/san_marino":{utc:1,utc_dst:2},"europe/sarajevo":{utc:1,utc_dst:2},"europe/simferopol":{utc:2,utc_dst:3},"europe/skopje":{utc:1,utc_dst:2},"europe/sofia":{utc:2,utc_dst:3},"europe/stockholm":{utc:1,utc_dst:2},"europe/tallinn":{utc:2,utc_dst:3},"europe/tirane":{utc:1,utc_dst:2},"europe/tiraspol":{utc:2,utc_dst:3},"europe/uzhgorod":{utc:2,utc_dst:3},"europe/vaduz":{utc:1,utc_dst:2},"europe/vatican":{utc:1,utc_dst:2},"europe/vienna":{utc:1,utc_dst:2},"europe/vilnius":{utc:2,utc_dst:3},"europe/volgograd":{utc:4,utc_dst:4},"europe/warsaw":{utc:1,utc_dst:2},"europe/zagreb":{utc:1,utc_dst:2},"europe/zaporozhye":{utc:2,utc_dst:3},"europe/zurich":{utc:1,utc_dst:2},gb:{utc:0,utc_dst:1},"gb-eire":{utc:0,utc_dst:1},gmt:{utc:0,utc_dst:0},"gmt+0":{utc:0,utc_dst:0},gmt0:{utc:0,utc_dst:0},"gmt-0":{utc:0,utc_dst:0},greenwich:{utc:0,utc_dst:0},hongkong:{utc:8,utc_dst:8},hst:{utc:-10,utc_dst:-10},iceland:{utc:0,utc_dst:0},"indian/antananarivo":{utc:3,utc_dst:3},"indian/chagos":{utc:6,utc_dst:6},"indian/christmas":{utc:7,utc_dst:7},"indian/cocos":{utc:6.5,utc_dst:6.5},"indian/comoro":{utc:3,utc_dst:3},"indian/kerguelen":{utc:5,utc_dst:5},"indian/mahe":{utc:4,utc_dst:4},"indian/maldives":{utc:5,utc_dst:5},"indian/mauritius":{utc:4,utc_dst:4},"indian/mayotte":{utc:3,utc_dst:3},"indian/reunion":{utc:4,utc_dst:4},iran:{utc:3.5,utc_dst:4.5},israel:{utc:2,utc_dst:3},jamaica:{utc:-5,utc_dst:-5},japan:{utc:9,utc_dst:9},"jst-9":{utc:9,utc_dst:9},kwajalein:{utc:12,utc_dst:12},libya:{utc:2,utc_dst:2},met:{utc:1,utc_dst:2},"mexico/bajanorte":{utc:-8,utc_dst:-7},"mexico/bajasur":{utc:-7,utc_dst:-6},"mexico/general":{utc:-6,utc_dst:-5},mst:{utc:-7,utc_dst:-7},mst7mdt:{utc:-7,utc_dst:-6},navajo:{utc:-7,utc_dst:-6},nz:{utc:12,utc_dst:13},"nz-chat":{utc:12.75,utc_dst:13.75},"pacific/apia":{utc:13,utc_dst:14},"pacific/auckland":{utc:12,utc_dst:13},"pacific/chatham":{utc:12.75,utc_dst:13.75},"pacific/chuuk":{utc:10,utc_dst:10},"pacific/easter":{utc:-6,utc_dst:-5},"pacific/efate":{utc:11,utc_dst:11},"pacific/enderbury":{utc:13,utc_dst:13},"pacific/fakaofo":{utc:13,utc_dst:13},"pacific/fiji":{utc:12,utc_dst:13},"pacific/funafuti":{utc:12,utc_dst:12},"pacific/galapagos":{utc:-6,utc_dst:-6},"pacific/gambier":{utc:-9,utc_dst:-9},"pacific/guadalcanal":{utc:11,utc_dst:11},"pacific/guam":{utc:10,utc_dst:10},"pacific/honolulu":{utc:-10,utc_dst:-10},"pacific/johnston":{utc:-10,utc_dst:-10},"pacific/kiritimati":{utc:14,utc_dst:14},"pacific/kosrae":{utc:11,utc_dst:11},"pacific/kwajalein":{utc:12,utc_dst:12},"pacific/majuro":{utc:12,utc_dst:12},"pacific/marquesas":{utc:-9.5,utc_dst:-9.5},"pacific/midway":{utc:-11,utc_dst:-11},"pacific/nauru":{utc:12,utc_dst:12},"pacific/niue":{utc:-11,utc_dst:-11},"pacific/norfolk":{utc:11.5,utc_dst:11.5},"pacific/noumea":{utc:11,utc_dst:11},"pacific/pago_pago":{utc:-11,utc_dst:-11},"pacific/palau":{utc:9,utc_dst:9},"pacific/pitcairn":{utc:-8,utc_dst:-8},"pacific/pohnpei":{utc:11,utc_dst:11},"pacific/ponape":{utc:11,utc_dst:11},"pacific/port_moresby":{utc:10,utc_dst:10},"pacific/rarotonga":{utc:-10,utc_dst:-10},"pacific/saipan":{utc:10,utc_dst:10},"pacific/samoa":{utc:-11,utc_dst:-11},"pacific/tahiti":{utc:-10,utc_dst:-10},"pacific/tarawa":{utc:12,utc_dst:12},"pacific/tongatapu":{utc:13,utc_dst:13},"pacific/truk":{utc:10,utc_dst:10},"pacific/wake":{utc:12,utc_dst:12},"pacific/wallis":{utc:12,utc_dst:12},"pacific/yap":{utc:10,utc_dst:10},poland:{utc:1,utc_dst:2},portugal:{utc:0,utc_dst:1},prc:{utc:8,utc_dst:8},pst8pdt:{utc:-8,utc_dst:-7},roc:{utc:8,utc_dst:8},rok:{utc:9,utc_dst:9},singapore:{utc:8,utc_dst:8},turkey:{utc:2,utc_dst:3},uct:{utc:0,utc_dst:0},universal:{utc:0,utc_dst:0},"us/alaska":{utc:-9,utc_dst:-8},"us/aleutian":{utc:-10,utc_dst:-9},"us/arizona":{utc:-7,utc_dst:-7},"us/central":{utc:-6,utc_dst:-5},"us/eastern":{utc:-5,utc_dst:-4},"us/east-indiana":{utc:-5,utc_dst:-4},"us/hawaii":{utc:-10,utc_dst:-10},"us/indiana-starke":{utc:-6,utc_dst:-5},"us/michigan":{utc:-5,utc_dst:-4},"us/mountain":{utc:-7,utc_dst:-6},"us/pacific":{utc:-8,utc_dst:-7},"us/pacific-new":{utc:-8,utc_dst:-7},"us/samoa":{utc:-11,utc_dst:-11},utc:{utc:0,utc_dst:0},wet:{utc:0,utc_dst:1},"w-su":{utc:4,utc_dst:4},zulu:{utc:0,utc_dst:0}};if(e=e.toLowerCase(),"undefined"==typeof n[e])return 0;i=n[e].utc;var o=require("moment");return o(t).isDST()&&(i=n[e].utc_dst),i}function exists(e){return!Object.isUndefined(e)}function isArray(e){return Object.isArray(e)}function isNumber(e){return Object.isNumber(e)}function isNotNullORUndefined(e){return"undefined"!=typeof e&&null!=e}function hasDisabledAttributeSet(e){var t=e.getAttribute("disabled");return isNotNullORUndefined(t)?"0"==t||"false"==t||""==t?!1:!0:!1}function getParentDiv(e){return e.up("div")}function getParentRow(){return elem.up("tr")}function getParentCell(){return elem.up("td")}function getParentTable(){return elem.up("table")}function getAbsoluteParent(e){for(var t=e;!t.style||"absolute"!==t.style.position;){if("body"===t.tagName.toLowerCase())return null;t=t.up()}return t}function getElementWithIdAndTagAndParent(e,t,i){for(var n=i.getElementsByTagName(t),o=0;o<n.length;o++)if(n[o].getAttribute("id")===e)return n[o];return null}function getClosestAncestor(e,t){for(var i;!i;)if(i=$(e).up(t),!i&&(e=e.parentNode,!e||"DIV"!==e.tagName))return null;return i}function isDescendantOf(e,t){for(;"BODY"!=e.tagName;){if(e==t)return!0;e=e.parentNode}return!1}function getCellIndex(e){return e.cellIndex}function getRowIndex(e){return e.rowIndex}function isDisabled(e){if(!e.readAttribute)return!1;if(Draggables&&Draggables.activeDraggable&&Draggables.activeDraggable.dragging&&matchAny(Draggables.activeDraggable.element,[".sizer.dragging"],!1))return!1;var t=!!e.readAttribute("disabled")||e.ancestors().any(function(e){return e.readAttribute("disabled")}),i=matchAny(e,[".disabled"],!0);return t||i}function matchAny(e,t,i){if(!e)return null;for(var n=0;n<t.length;++n)if(e.match&&e.match(t[n]))return e;if(i)for(var n=0;n<t.length;++n){var o=e.up&&e.up(t[n]);if(o)return o}return null}function matchMeOrUp(e,t){for(var i;e&&!i;)i=e.match&&e.match(t)&&e,e=e.parentNode;return i}function stylesMatch(e,t,i){return $(e).getStyle(i)===$(t).getStyle(i)}function getNextMatchingSibling(e,t){for(;e=e.nextSibling;)if(e.match&&e.match(t))return e;return null}function getNextNonMatchingSibling(e,t){for(;e=e.nextSibling;)if(e.match&&!e.match(t))return e;return null}function getPreviousMatchingSibling(e,t){for(;e=e.previousSibling;)if(e.match&&e.match(t))return e;return null}function getPreviousNonMatchingSibling(e,t){for(;e=e.previousSibling;)if(e.match&&!e.match(t))return e;return null}function getAbsoluteOffsets(e){for(var t=e.offsetLeft,i=e.offsetTop,n=e.offsetParent;"BODY"!=n.tagName.toUpperCase()&&"absolute"!=n.style.position;){var t=t+n.offsetLeft,i=i+n.offsetTop;n=n.offsetParent}return"absolute"==n.style.position&&(t+=n.offsetLeft,i+=n.offsetTop),isIE()&&(i+=1),new Array(t,i,t+e.offsetWidth,i+e.offsetHeight)}function getAbsoluteTopOffset(e){for(var t=e.offsetTop,i=e.offsetParent;"BODY"!=i.tagName.toUpperCase()&&"absolute"!=i.style.position;){var t=t+i.offsetTop;i=i.offsetParent}return"absolute"==i.style.position&&(t+=i.offsetTop),isIE()&&(t+=1),t}function getBoxOffsets(e,t){var i=$(e).cumulativeOffset(),n=i[0],o=i[1];if(t){var s=$(e).cumulativeScrollOffset();n-=s[0],o-=s[1]}return new Array(n,o)}function getInnerText(e){return isNotNullORUndefined(e.innerText)?e.innerText:e.textContent}function isPointOverlayingObject(e,t,i){return Position.within(i,e,t)}function boxesOverlap(e,t,i,n,o,s,r,a){return!(t>a||s>n||e>r||o>i)}function boxesOverlapVertically(e,t,i,n){return!(e>=n||i>=t)}function boxesOverlapHorizontally(e,t,i,n){return!(e>=n||i>=t)}function getOuterHeight(e){return e.clientHeight?new Number(e.getStyle("height").replace(/[^\d\.]/g,""))+getBufferHeight(e,!0):0}function getOuterWidth(e){return e.clientWidth?new Number(e.getStyle("width").replace(/[^\d\.]/g,""))+getBufferWidth(e,!0):0}function getBufferHeight(e,t){if(!e.visible())return 0;var i=0,n=/[^\d\.]/g;if(t){var o=e.getStyle("marginTop"),s=e.getStyle("marginBottom");o=null==o?"0px":o,s=null==s?"0px":s,o=o.replace(n,""),s=s.replace(n,""),i=new Number(o).ceil()+new Number(s).ceil()}return i+=new Number(e.getStyle("borderBottomWidth").replace(n,"")).ceil()+new Number(e.getStyle("borderTopWidth").replace(n,"")).ceil()+new Number(e.getStyle("paddingTop").replace(n,"")).ceil()+new Number(e.getStyle("paddingBottom").replace(n,"")).ceil()}function getBufferWidth(e,t){if(!e.visible())return 0;var i=0,n=/[^\d\.]/g;if(t){var o=e.getStyle("marginLeft"),s=e.getStyle("marginRight");o=null==o?"0px":o,s=null==s?"0px":s,o=o.replace(n,""),s=s.replace(n,""),i=new Number(o).ceil()+new Number(s).ceil()}return i+=new Number(e.getStyle("borderLeftWidth").replace(n,"")).ceil()+new Number(e.getStyle("borderRightWidth").replace(n,"")).ceil()+new Number(e.getStyle("paddingLeft").replace(n,"")).ceil()+new Number(e.getStyle("paddingRight").replace(n,"")).ceil()}function getDimensionInPx(e,t){var i={left:"width",right:"width",width:"width",top:"height",bottom:"height",height:"height"},n=e.getStyle(t);if(n.include("%")){var o=e.parentNode,s=o.getStyle(i[t]);if(!s.include("px"))throw"cannot convert to px , because parent dimension not measured in px";return parseInt(n)*parseInt(s)/100}if(n.include("px"))return parseInt(n);throw"cannot convert to px, because unit is neither px or %"}function getActualDimension(e,t){var i={width:"clientWidth",height:"clientHeight"};return e[i[t]]}function purgeChildElements(e){try{var t=e&&e.children;if(!t)return;for(var i=0,n=t.length;n>i;i++)purge(t[i]),purgeChildElements(t[i]),t[i]=null,t[i]=e.removeChild(t[i]);return 0==e.children.length}catch(o){}}function purge(e){var t,i,n,o=e.attributes;if(o)for(i=o.length,t=0;i>t;t+=1)n=o[t].name,"function"==typeof e[n]&&(e[n]=null);if(o=e.childNodes)for(i=o.length,t=0;i>t;t+=1)purge(e.childNodes[t])}function getCaret(e){if(!e)return 0;if(e.selectionStart)return e.selectionStart;if(document.selection){e.focus();var t=document.selection.createRange();if(null==t)return 0;var i=e.createTextRange(),n=i.duplicate();return i.moveToBookmark(t.getBookmark()),n.setEndPoint("EndToStart",i),n.text.length}return 0}function isAlmostInView(e,t){var i=parseInt(getBoxOffsets(e)[1]),n=$(e).cumulativeScrollOffset()[1],o=getWindowHeight();return n+o+t>i}function getTouchedElement(e){var t=e.changedTouches;return t&&t.length>0?$(document.elementFromPoint(t[0].clientX,t[0].clientY)):e.element()}function centerLayer(e){e.style.left=parseInt((getWindowWidth()-parseInt(e.clientWidth))/2+getScrollLeft())+"px",e.style.top=parseInt((getWindowHeight()-parseInt(e.clientHeight))/2+getScrollTop())+"px"}function centerElement(e,t){if(e){if(e.jquery&&(e=$(e.get(0))),t.horz){if(!e.hasClassName("centered_horz"))throw"Element's className "+e.className+" must include 'centered_horz' for function centerLayer to work with these arguments";var i=e.getWidth()||e.getStyle("min-width");if(i){var n=parseInt(i),o=n+getBufferWidth(e,!0),s=e.up().getWidth();s>o&&(e.style.marginLeft=-(n/2)+"px",e.style.left="50%")}}if(t.vert){if(!e.hasClassName("centered_vert"))throw"Element's className "+e.className+" must include 'centered_vert' for function centerLayer to work with these arguments";var r=e.getHeight()||e.getStyle("min-height");if(r){var a=parseInt(r),l=a+getBufferHeight(e,!0),c=e.up().getHeight();c>l&&(e.style.marginTop=-(a/2)+"px",e.style.top="50%")}}}}function parseFunc(e,t){var i=e.className,n=i.indexOf(t);if(n>-1){var o=i.substring(n).split(" ");if(o.length>0){var s=o[0].replace(t,"");return"function"==typeof window[s]?window[s]:null}}return null}function cascadeElement(e,t){var i=parseInt(e.getStyle("width")),n=i+getBufferWidth(e,!0),o=e.up().getWidth(),s=-(t.horzOffset*t.number/2)+t.position*t.horzOffset;o>n&&(e.style.left=(o-n)/2+s+"px");var r=parseInt(e.getStyle("height")),a=r+getBufferHeight(e,!0),l=e.up().getHeight(),c=-(t.vertOffset*t.number/2)+t.position*t.vertOffset;l>a&&(e.style.top=(l-a)/2+c+"px")}function fitObjectIntoScreen(e,t,i,n,o){var s=parseInt(t?t:e.offsetLeft),r=parseInt(i?i:e.offsetTop),a=parseInt(n?n:e.clientWidth),l=parseInt(o?o:e.clientHeight),c=getScrollLeft(),u=getScrollTop(),d=getWindowWidth(),h=getWindowHeight();a+=20,l+=20,r+l>u+h&&(r=u+h-l),u>r&&(r=u),s+a>c+d&&(s=c+d-a),c>s&&(s=c),e.style.left=s+"px",e.style.top=r+"px"}function setWidthStyleByReflection(e,t){e=t?$(e).select(t)[0]:e,e&&(e.style.width=(e.clientWidth||e.offsetWidth)+"px")}function focusOn(e){$(e).focus()}function selectAndFocusOn(e){var t=$(e);t.select(),t.focus()}function renderHazeLayer(e,t){var i=document.body;return renderOverlay(e,t,i.scrollWidth,i.scrollHeight,"haze")}function renderOverlay(e,t,i,n,o){var s=document.createElement("DIV");return s.className=o,s.style.position="absolute",s.style.left=e,s.style.top=t,s.style.width=i,s.style.height=n,document.body.appendChild(s),s}function removeOverlay(e){e&&e.parentNode&&e.parentNode.removeChild(e),e&&(e=null)}function reParent(e,t){e&&(e.parentNode&&e.parentNode==t||t.appendChild(e))}function getScrollLeftForAbsoluteParent(e){return isIE()?e.scrollLeft:0}function getScrollTopForAbsoluteParent(e){return isIE()?e.scrollTop:0}function renderTransparentIFrame(e,t,i,n){var o=5,s=document.createElement("IFRAME");return s.frameBorder=0,s.style.filter="alpha(opacity=0)",s.style.position="absolute",s.style.left=e-o,s.style.top=t-o,s.style.width=i-2*o,s.style.height=n-2*o,document.body.appendChild(s),s}function pushOverlayObject(e,t,i){var n=getAbsoluteOffsets($(e));pushOverlayObjectAtOffsets(n,t,i)}function pushTotalOverlayObject(e,t){var i=new Array(0,0,document.body.scrollWidth,document.body.scrollHeight);pushOverlayObjectAtOffsets(i,e,t)}function pushOverlayObjectAtOffsets(e,t,i){if(isIE()){var n=renderTransparentIFrame(e[0],e[1],e[2]-e[0],e[3]-e[1]);overlayObjectStack.push(n)}var o=renderOverlay(e[0],e[1],e[2]-e[0],e[3]-e[1],t);i&&(o.style.zIndex=i),overlayObjectStack.push(o)}function popOverlayObject(){if(overlayObjectStack.length>0){var e=overlayObjectStack.pop();removeOverlay(e),isIE()&&overlayObjectStack.length>0&&removeOverlay(overlayObjectStack.pop())}}function popAllOverlayObjects(){for(;overlayObjectStack.length>0;){var e=overlayObjectStack.pop();removeOverlay(e)}}function disableSelection(e){e&&("undefined"!=typeof e.style.KhtmlUserSelect?e.onselectstart=function(e){return e.stopPropagation(),!1
}:"undefined"!=typeof e.onselectstart?e.onselectstart=function(e){return e=e?e:window.event,e.stopPropagation?e.stopPropagation():e.cancelBubble=!0,!1}:"undefined"!=typeof e.style.MozUserSelect&&(e.style.MozUserSelect="-moz-none"),e.style.cursor="default")}function disableSelectionWithoutCursorStyle(e){e&&("undefined"!=typeof e.style.KhtmlUserSelect?e.onselectstart=function(e){return e.stopPropagation(),!1}:"undefined"!=typeof e.onselectstart?e.onselectstart=function(e){return e=e?e:window.event,e.stopPropagation?e.stopPropagation():e.cancelBubble=!0,!1}:"undefined"!=typeof e.style.MozUserSelect&&(e.style.MozUserSelect="-moz-none"))}function enableSelection(e){e&&("undefined"!=typeof e.style.KhtmlUserSelect?e.onselectstart=function(e){return e.stopPropagation(),!0}:"undefined"!=typeof e.onselectstart?e.onselectstart=function(e){return e=e?e:window.event,e.stopPropagation?e.stopPropagation():e.cancelBubble=!0,!0}:"undefined"!=typeof e.style.MozUserSelect&&(e.style.MozUserSelect="text"),e.style.cursor="default")}function setCursor(e){document.body.style.cursor=e}function cursorDefault(){setCursor("default")}function cursorPointer(){setCursor("pointer")}function cursorWait(){setCursor("wait")}function getCellAtColumn(e,t){for(columnCount=0,i=0;i<e.length;i++)if(columnCount+=e.colspan,columnCount>=t)return e[i];return null}function getCellAtRow(e,t,n){for(rowCount=0,i=0;i<e.length;i++){var o=e[i].cells[t];rowCount+=o.rowspan,rowCount>=n}return null}function copyTable(e,t,i,n){var o=n?e:$(e).select("tbody")[0],s=n?t:$(t).select("tbody.copyTo")[0];i&&clearTable(t);try{s.insert(o.innerHTML)}catch(r){}}function copyTableJquery(e,t,i,n){var o=n?e:e.find("tbody:first"),s=n?t:jQuery("tobody.copyTo:first",t);i&&clearTable(t);try{jQuery(s).append(o.html())}catch(r){}}function clearTable(e){if(document.all)for(;e.rows[0];)e.deleteRow(0);else e.innerHTML=""}function getWindowWidth(){var e=jQuery(window).width();return isIE9()&&(e+=17),e}function getWindowHeight(){var e=jQuery(window).height();return isIE9()&&(e+=17),e}function getScrollLeft(){return"number"==typeof window.scrollX?window.scrollX:document.body.scrollLeft}function getScrollTop(){return"number"==typeof window.scrollY?window.scrollY:document.body.scrollTop}function scrollXToMiddle(e){var t=e.scrollWidth-getWindowWidth();t>0&&(e.scrollLeft=t/2)}function launchNewWindow(e){window.open(e)}function getIFrameDocument(e){var t=e.contentWindow||e.contentDocument;return t.document&&(t=t.document),t}function getEvent(e){return e?e:window.event}function popEvent(e){cancelEventBubbling(e?e:event)}function triggerNativeEvent(e,t){var i,n=isIE();t=t||(n?document.documentElement:window),document.createEvent?(i=document.createEvent("Event"),i.initEvent(e,!0,!0),t.dispatchEvent(i)):t.fireEvent("on"+e,document.createEventObject())}function relatedTargetInElementSubtree(e,t){return e.relatedTarget?t===e.relatedTarget?!0:e.relatedTarget.descendantOf(t):!1}function cancelEventBubbling(e){e=getEvent(e),e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation()}function cancelEventAndPreventDefault(e){e.preventDefault(),e.stop()}function enterKeyHit(e){var t=whichKeyHit(e);return 13==t||3==t}function whichKeyHit(e){e=getEvent(e);var t=e.charCode?e.charCode:e.which?e.which:e.keyCode;return t}function isCtrlHeld(e){return e=getEvent(e),!(!e||!e.ctrlKey)}function isShiftHeld(e){return e=getEvent(e),!(!e||!e.shiftKey)}function getEventTarget(e){return e=getEvent(e),e&&(e.target||e.srcElement)}function isNavigationInput(e){e=getEvent(e);var t=e.keyCode?e.keyCode:e.which;return t==Keys.DOM_VK_LEFT||t==Keys.DOM_VK_RIGHT||t==Keys.DOM_VK_TAB||t==Keys.DOM_VK_BACK_SPACE||t==Keys.DOM_VK_ENTER}function verifyIsDigitInput(e){e=getEvent(e);var t=e.keyCode?e.keyCode:e.which;return t>=Keys.DOM_VK_0&&t<=Keys.DOM_VK_9||isNavigationInput(e)}function verifyIsInputNumericGroupSeparator(e){e=getEvent(e);var t=e.keyCode?e.keyCode:e.which,i=String.fromCharCode(t);return i===groupingSeparator}function verifyIsInputNumericDecimalSeparator(e){e=getEvent(e);var t=e.keyCode?e.keyCode:e.which,i=String.fromCharCode(t);return i===decimalSeparator}function numberOfDecimals(e){for(var t=e.length,i=0,n=0;t>n;n++)e.charAt(n)===decimalSeparator&&i++;return i}function macOSKeyboardRightClick(e){var e=getEvent(e);return e.ctrlKey?0==e.button||1==e.button||2==e.button:!1}function macOSMouseRightClick(e){var e=getEvent(e),t=!1;return e=e||window.event,e.which?t=3==e.which:e.button&&(t=2==e.button),t}function isRightClick(e){if(isMacOS()){var t=macOSKeyboardRightClick(e),i=macOSMouseRightClick(e);return t||i}return Event.isRightClick(e)}function isLeftClick(e){return Event.isLeftClick(e)}function isMetaHeld(e,t){var e=getEvent(e);return getEvent(e)?isMacOS()?t?e.altKey:e.metaKey:isCtrlHeld(e):!1}function trim(e){return e.strip()}function startsWith(e,t){return e.startsWith(t)}function getTextAfterUnderscore(e){return getTextAfterSubstring(e,"_")}function getTextBeforeUnderscore(e){return getTextBeforeSubstring(e,"_")}function extractNumber(e){var t=e.match(/\d/g);return t=t.join("")}function getTextAfterSubstring(e,t){var i=e.toLowerCase().indexOf(t.toLowerCase());return-1==i?null:e.substring(i+t.length)}function getTextBeforeSubstring(e,t){var i=e.toLowerCase().indexOf(t.toLowerCase());return-1==i?e:e.substring(0,i)}function removeTrailingSlash(e){var t=e.substring(e.length-1);return"/"==t?e.substring(0,e.length-1):e}function removeTrailingPound(e){var t=e.substring(e.length-1);return"#"==t?e.substring(0,e.length-1):e}function removeChars(e,t){var i=0;for(i;i<t.length;i++)for(;e.indexOf(t[i])>-1;)e=e.replace(t[i],"");return e}function replaceAll(e,t,i){e.gsub(t,i)}function jsHash(){var e=new Array;e.clazz="Hash";for(var t=0;t<arguments.length;t+=2)"undefined"!=typeof arguments[t+1]&&(e[arguments[t]]=arguments[t+1],e.push(arguments[t]));return e}function textCounter(e,t){return e.value.length>t?(e.value=e.value.substring(0,t),!1):!0}function saveAndClear(e,t){e=t,t=""}function escapeString(e,t,i){if(!e||!t||void 0===i||null===i)return e;var n="string"==typeof i||Object.isArray(i)&&i.length<t.length,o=Object.isArray(i)?i.first():i;return Object.isArray(t)?(t.each(function(t,s){var r=n?o:i[s];e=e.replace(t,r)}),e):e.replace(t,o)}function formatString(e){var t,i,n,o=Array.prototype.slice.call(arguments,1),s=[];if(o.length<3){for(var r=0;r<o.length;r++)e=e.replace("{"+r+"}",o[r]);return e}if(t=(e||"").match(/[{]\d+[}]/g),!t)return e;i=e.split(/[{]\d+[}]/);for(var a=0;a<i.length;a+=1)n=a<t.length?o[t[a].slice(1,-1)]:"",s.push(i[a],n);return s.join("")}function removeWhitespacesFromTable(e){return e.replace(/>\s+<\/table/g,"></table").replace(/>\s+<thead/g,"><thead").replace(/>\s+<\/thead/g,"></thead").replace(/>\s+<tbody/g,"><tbody").replace(/>\s+<\/tbody/g,"></tbody").replace(/>\s+<caption/g,"><caption").replace(/>\s+<\/caption/g,"></caption").replace(/>\s+<tr/g,"><tr").replace(/>\s+<\/tr/g,"></tr").replace(/>\s+<th/g,"><th").replace(/>\s+<\/th/g,"></th").replace(/>\s+<td/g,"><td").replace(/>\s+<\/td/g,"></td")}function splitText(e,t){var i={left:"",right:e};return t=parseInt(t,10),_.isNaN(t)?i:0===t?i:(i.left=e.substr(0,t),i.right=e.substr(t),i)}function redirectToUrl(e){if(isIE8()){var t=document.createElement("a");t.href=e,document.body.appendChild(t),t.click()}else window.location.href=e}function checkURLProtocol(e,t){if(!t)return e;if(startsWith(e,"/"))return e;for(var i=new Array("http://","https://","file://","mailto://","ftp://"),n=0;n<i.length;n++)if(startsWith(e,i[n]))return e;return i[0]+e}function getSymbolToAppendNextParam(e){var t=e.substring(e.length-1);return"?"==t||"&"==t?"":e.indexOf("?")>-1?"&":"?"}function showBusyCursor(){theBody.style.cursor="wait"}function restoreDefaultCursor(){theBody.style.cursor=""}function encodeText(e){return encodeURIComponent(encodeURIComponent(e))}function decodeText(e){return decodeURIComponent(e)}function constrain(e,t,i){return e>i?i:t>e?t:e}function deepClone(e){if(null==e)return null;if("object"!=typeof e)return e;var t=Object.isArray(e)?[]:{};for(var i in e)t[i]="object"==typeof e[i]?deepClone(e[i]):e[i];return t}function cloneCustomAttributes(e,t){var i=e?e.attributes:{};for(var n in i){var o=i[n]&&i[n].name;o&&o.startsWith("data")&&$(t).writeAttribute(o,$(e).readAttribute(o))}}function initLog(){log=""}function logIt(e){log=log+"||"+e+"-"+(new Date).getTime()}function debug(e){window.console&&window.console.debug(e)}function startTimer(e){window.console&&window.console.time?console.time(e):timer[e]=+new Date}function stopTimer(e){if(window.console&&window.console.timeEnd)console.timeEnd(e);else if(timer[e]){var t=e+": "+(+new Date-timer[e]);timer[e]=void 0,window.console?console.log(t):window.status=t}}function toBlockNotation(e){return e?e.split(".").map(function(e){return"['"+e+"']"}).join(""):""}function toFunction(theFunction){if("string"!=typeof theFunction)return theFunction;var blockReference=toBlockNotation(theFunction);return eval("window"+blockReference)}function BusyMonitor(e,t){this.waitTime=e,this.theFunction=t,this.timer=null}function InPlaceEditor(e){this.elem=$(e),this.id=e.identify(),this.editing=!1,this.value=getInnerText(e)}function evaluateScripts(e){var t;t=e?$(e):document;var i=t.getElementsByTagName("SCRIPT");if(null!=i)for(var n=0;n<i.length;n++){var o=i[n];o&&o.text&&globalEval(o.text)}}function evaluateScript(e){var t=$(e);t&&t.text&&globalEval(t.text)}function globalEval(e){window.eval.call(window,e)}function loadJSFiles(e){e&&Object.isArray(e)&&e.each(function(e){loadJSFile(e)})}function loadJSFile(e){$(e)&&$(e).parentNode.removeChild($(e));var t=new Element("script");t.setAttribute("id",e),t.setAttribute("type","text/javascript"),t.setAttribute("src",e),$$("head")[0].appendChild(t)}function unloadAllScripts(){var e=document.getElementsByTagName("SCRIPT");if(null!=e)for(var t=0;t<e.length;t++){var i=e[t];i.parentNode.removeChild(i)}}function loadCSSFiles(e,t){e&&Object.isArray(e)&&e.each(function(e){loadCSSFile(e,t)})}function loadCSSFile(e,t){unloadCSSFile(e);var i=new Element("link");i.setAttribute("id",escape(e)),i.setAttribute("rel","stylesheet"),i.setAttribute("type","text/css"),i.setAttribute("href",e),t&&document.body?document.body.appendChild(i):$$("head")[0].insert(i,"bottom")}function unloadCSSFiles(e){e&&Object.isArray(e)&&e.each(function(e){unloadCSSFile(e)})}function unloadCSSFile(e){if($(escape(e)))try{$(escape(e)).parentNode.removeChild($(escape(e)))}catch(t){alert(t)}}function createCSSRule(e){var t=document.createElement("style");t.type="text/css",t.innerHTML=e,document.getElementsByTagName("head")[0].appendChild(t)}function getFirstMatch(e){return $$(e)[0]}function dialogOnMouseDown(e){var t=null!=e?e:window.event;cancelEventDragTarget&&cancelEventDragTarget==getEventTarget(t)||new Dragger(t,[getAbsoluteParent(window.event?t.srcElement:t.target)],!0,!0,2,new DragListener)}function cancelEventDrag(e){cancelEventDragTarget=getEventTarget(e)}function encodeUriParameter(e){return encodeURIComponent(encodeURIComponent(e))}function replaceHTML(e,t){if(isIE())return void(e.innerHTML=t);var e=$(e),i=e.nextSibling,n=e.parentNode;n.removeChild(e),e.innerHTML=t,i?n.insertBefore(e,i):n.appendChild(e)}function gotoDefaultLocation(e){window.location.href="flow.html?_flowId=searchFlow"+(e?"&"+e:"")}function gotoFolderExplorer(e){window.location.href="flow.html?_flowId=searchFlow",document.location="flow.html?_flowId=searchFlow&showFolder="+e}function switchDesign(e){var t=document.location.href,i=t.include("&decorator");"old"===e?i?t=t.replace("main","mainOld"):t+="&decorator=mainOld&confirm=true":i?t=t.replace("mainOld","main"):t+="&decorator=main&confirm=true",redirectToUrl(t)}function showDiv(e){var t=document.getElementById(e),i=(document.body.clientWidth,document.body.clientHeight,t.style.zIndex);t.style.zIndex=-100,t.style.display="block",centerLayer(t),t.style.zIndex=i}function hideDiv(e){var t=document.getElementById(e);return t.style.display="none",!0}function borderImage(e,t){(document.all||document.getElementById)&&(e.style.borderColor=t)}function resetRadio(e){var t=!1;if(e.length)for(var i=0;i<e.length;++i)e[i].checked&&(e[i].checked=!1,t=!0);else e.checked&&(e.checked=!1,t=!0);return t}function launchAboutDlg(){var e=document.getElementById("about");e.style.display="block",centerLayer(e)}function hideAboutDlg(){var e=document.getElementById("about");e.style.display="none"}function unescapeBackslash(e){return e?e.replace(/\\\\/g,"\\"):e}function ajaxIframeDownload(e,t){var i=$("ajax-download-iframe");t&&(i.onload=t.onload),i.src=e}function parseAsDate(e){var t=e.match(/(\d+)/g);return new Date(t[0],t[1]-1,t[2])}function parseAsDateTime(e){var t=e.match(/(\d+)/g);return new Date(t[0],t[1]-1,t[2],t[3],t[4],t[5])}function padNumber(e){var t=String(e);return 1===t.length&&(t="0"+t),t}function toTimestampString(e){return e.getUTCFullYear()+"-"+padNumber(e.getMonth()+1)+"-"+padNumber(e.getDate())+" "+padNumber(e.getHours())+":"+padNumber(e.getMinutes())+":"+padNumber(e.getSeconds())}function isProVersion(){return __jrsConfigs__.isProVersion}function AjaxRequester(e,t,i,n){this.url=e||document.location.toString(),this.params=t,this.xmlhttp=getXMLHTTP();var o=this.processResponse(this);this.xmlhttp.onreadystatechange=o,this.postData=i,this.async=!n,this.requestTime=+new Date}function handleResponse(e){checkForErrors(e)||e.responseHandler(e),ajaxRequestEnded(e),JRS&&JRS.vars&&(JRS.vars.ajax_in_progress=!1),document.getElementById("mainTableContainerOverlay")&&(document.getElementById("mainTableContainerOverlay").className="hidden")}function targettedResponseHandler(e){var t=e.xmlhttp,i=e.params[0],n=e.params[1],o=e.params[2],s=(e.params[3],$(i));if(n)s.innerHTML="",updateUsingResponseSubset(t,n,s);else{var r=t.responseText.trim();if(0===r.indexOf("<div")){var a=r.substring(0,r.indexOf(">")+1),l=r.substring(r.indexOf(">")+1,r.lastIndexOf("</")),c=r.substring(r.lastIndexOf("</")),u=jQuery(a+c);u.text(xssUtil.escape(l)),jQuery(s).html(u)}else jQuery(s).html(r)}invokeCallbacks(o,s)}function cumulativeResponseHandler(e){var t=e.xmlhttp,i=e.params[0],n=e.params[1],o=e.params[2],s=$(i);n?updateUsingResponseSubset(t,n,s):s.insert(t.responseText,{position:"after"}),invokeCallbacks(o)}function rowCopyResponseHandler(e){var t=e.xmlhttp,i=e.params[0],n=e.params[2],o=$(i);if("TABLE"!==o.tagName)return void alert("Ajax Exception: rowCopyResponseHandler will not work for container "+o.tagName);var s=Builder.node("DIV");s.innerHTML=t.responseText,copyTable(s.getElementsByTagName("table")[0],o,!1,!1),invokeCallbacks(n)}function updateUsingResponseSubset(e,t,i){function n(){if(!(u>=c)){var e=jQuery(l.get(u));e.attr("src")?(u++,o(e.attr("data-custname"),e.attr("src"),n)):(u++,s(e.html(),n))}}function o(e,t,i){var n=i||!1,o=document.createElement("script");window.jr_scripts||(window.jr_scripts={}),window.jr_scripts[e]||"jr_jq_min"===e?n&&i():(o.setAttribute("type","text/javascript"),o.readyState?o.onreadystatechange=function(){("loaded"===o.readyState||"complete"===o.readyState)&&(o.onreadystatechange=null,n&&i())}:o.onload=function(){n&&i()},o.src=t,document.getElementsByTagName("head")[0].appendChild(o),window.jr_scripts[e]=t)}function s(e,t){var i=t||!1;if(e){var n=e.match(/^.*((\r\n|\n|\r)|$)/gm);window.eval(n.join("\n")),i&&t()}}var r=jQuery(e.responseText),a=r.filter("#"+t);if("TABLE"==i.tagName&&"TABLE"==$(t).tagName?copyTableJquery(a,i,!0):jQuery(i).append(a.html()),"undefined"!=typeof jQuery){var l=r.filter("script.jasperreports"),c=l.size(),u=0;n()}}function invokeCallbacks(callback,customArg){callback&&("string"==typeof callback?eval(callback):callback(customArg))}function ajaxClobberredUpdate(e,t){t.responseHandler=clobberingResponseHandler,ajaxUpdate(e,t)}function ajaxTargettedUpdate(url,options){var responseHandler;responseHandler=options.mode==AjaxRequester.prototype.CUMULATIVE_UPDATE?cumulativeResponseHandler:options.mode==AjaxRequester.prototype.ROW_COPY_UPDATE?rowCopyResponseHandler:options.mode==AjaxRequester.prototype.EVAL_JSON?evalJSONResponseHandler:targettedResponseHandler,options.responseHandler=function(requester,params){options.preFillAction?"string"==typeof options.preFillAction?eval(options.preFillAction):options.preFillAction(responseHandler(requester,params)):responseHandler(requester,options.params)},ajaxUpdate(url,options)}function ajaxNonReturningUpdate(e,t){t.responseHandler=null,ajaxUpdate(e,t)}function ajaxClobberedFormSubmit(e,t,i){var n=getPostData(e,extraPostData);i.postData=appendPostData(n,extraPostData),i.responseHandler=clobberingResponseHandler,ajaxUpdate(t,i)}function ajaxTargettedFormSubmit(e,t,i){var n=getPostData(e,i.extraPostData);i.postData=appendPostData(n,i.extraPostData),i.responseHandler=targettedResponseHandler,ajaxUpdate(t,i)}function ajaxErrorHandler(){showMessageDialog(ajaxError,ajaxErrorHeader)}function doNothing(){}function ajaxUpdate(e,t){var i=!0,n=new AjaxRequester(e,[t.fillLocation,t.fromLocation,t.callback,t.isAutomaticRefresh],t.postData,t.synchronous);isIPad()&&"adhoc"==JRS.vars.current_flow&&(JRS.vars.ajax_in_progress||(JRS.vars.ajax_in_progress=!0)),i&&(n.busyCursor=!t.silent,n.showLoading=!t.silent&&!t.hideLoader,n.responseHandler=t.responseHandler||doNothing,n.responseHandler!=doNothing&&ajaxRequestStarted(n),t.errorHandler&&(n.errorHandler=t.errorHandler),n.xmlhttp&&(t.postData?n.doPost():n.doGet()))}function checkForErrors(e){var t=e.errorHandler;return t(e.xmlhttp)}function getPostData(e,t){"string"==typeof e&&(e=document.forms[e]);for(var i="",n=0;n<e.elements.length;++n){var o=e.elements[n];!o.name||t&&t[o.name]||(i=appendFormInput(i,o))}return i}function appendPostData(e,t){for(var i in t)e=appendFormValue(e,i,t[i]);return e}function appendFormInput(e,t){if(t.name){var i,n=!1;switch(t.type){case"checkbox":case"radio":n=t.checked,i=t.value;break;case"hidden":case"password":case"text":case"Textarea":n=!0,i=t.value;break;case"select-one":case"select-multiple":i=[];for(var o=0;o<t.options.length;++o){var s=t.options[o];s.selected&&(n=!0,i.push(s.value))}}if(n)if(i.shift)for(;i.length>0;)e=appendFormValue(e,t.name,i.shift());else e=appendFormValue(e,t.name,i)}return e}function appendFormValue(e,t,i){return e.length>0&&(e+="&"),e+=t+"="+encodeURIComponent(i)}function baseErrorHandler(e){if(500==e.status)return showErrorPopup(e.responseText),!0;var t=e.getResponseHeader("LoginRequested");if(t){var i=".";return document.location=i,!0}var n=e.getResponseHeader("JasperServerError");if(n){var o=e.getResponseHeader("SuppressError");if(!o){var s=jQuery(".dashboardViewFrame");if(1==s.length){document.body.innerHTML=e.responseText;var r=jQuery("#"+JRS.fid,window.parent.document);r.removeClass("hidden").show()}else showErrorPopup(e.responseText)}return!0}return!1}function showErrorPopup(e,t){(e&&e.indexOf("sessionAttributeMissingException"))>-1?dialogs.clusterErrorPopup.show(e):dialogs.errorPopup.show(e,!1,t)}function hideErrorPopup(){popOverlayObject();var e=document.getElementById(ERROR_POPUP_DIV);e.style.display="none"}function ajaxRequestStarted(e){++ajax.ajaxRequestCount,e.busyCursor&&(document.body.style.cursor="wait"),!isIPad()&&e.showLoading&&e.startResponseTimer()}function ajaxRequestEnded(e){e.cancelResponseTimer(),ajax.ajaxRequestCount<=1?(document.body.style.cursor="auto",ajax.ajaxRequestCount=0,dialogs.popup.hide($(ajax.LOADING_ID))):ajax.ajaxRequestCount--}function isValidJsonResponse(e){var t=e.getResponseHeader("Content-Type");return 200==e.status&&null!=t&&t.indexOf("application/json")>=0}function getXMLHTTP(){var e,t;if(!t&&!e)try{t=new XMLHttpRequest}catch(i){alert("You need a browser which supports an XMLHttpRequest Object.\nMozilla build 0.9.5 has this Object and IE5 and above, others may do, I don't know, any info jim@jibbering.com")}return t}function moveTo(e,t,i,n){new Effect.Move($(e),{sync:!1,x:t,y:i,mode:"absolute",duration:n?n:.2})}function move(e,t,i,n){new Effect.Move($(e),{sync:!1,x:t,y:i,mode:"relative",duration:n?n:.2})}function moveMany(e,t,i,n){for(var o=[],s=0;s<e.length;++s)o[s]=new Effect.Move(e[s],{sync:!0,x:t,y:i,mode:"relative"});new Effect.Parallel(o,{duration:n?n:1})}function fade(e,t,i){$(e).fade({duration:t?t:1,from:1,to:i?i:0})}function fadeMany(e,t,i){for(var n=[],o=0;o<e.length;++o)n[o]=new Effect.Fade(e[o],{sync:!0,from:1,to:i?i:0});new Effect.Parallel(n,{duration:t?t:1})}function appear(e,t,i){$(e).appear({duration:t?t:1,from:0,to:i?i:1})}function appearMany(e,t,i){for(var n=[],o=0;o<e.length;++o)n[o]=new Effect.Appear(e[o],{sync:!0,from:0,to:i?i:1});new Effect.Parallel(n,{duration:t?t:1})}function pulsate(e,t,i){var n=$(e).identify();Effect.Pulsate(n,{pulses:t?t:5,duration:i?i:2})}function renderImageOverMousePointer(e,t){var e=$(e);return e.show(),e.style.left=t.clientX,e.style.top=t.clientY,e}function JSTooltip(e,t){if(e){if(this.srcElement=e,t&&(this.label=t.label,this.text=t.text,this.offsets=t.offsets,this.showBelow=!!t.showBelow,this.templateId=t.templateId,this.loadTextCallback=t.loadTextCallback,this.loadTextExecuted=!1),this.templateId)this._toAttribute(this.TOOLTIP_TEMPLATE,this.templateId);else{var i=this._fromAttribute(this.TOOLTIP_TEMPLATE);this.templateId=i&&i.length>0?i:this.TOOLTIP_TEMPLATE_ID}this.label?this._toAttribute(this.TOOLTIP_LABEL,this.label):this.label=this._fromAttribute(this.TOOLTIP_LABEL),this.text?this._toAttribute(this.TOOLTIP_TEXT,this.text):this.text=this._fromAttribute(this.TOOLTIP_TEXT),this.label&&(this.label=this._escapeText(this.label)),this.text&&(this.text=this._escapeText(this.text)),this.srcElement.jsTooltip=this,tooltipModule.tooltips.push(this)}}function replaceNbsps(e){var t=new RegExp("&nbsp;","g");return e.replace(t," ")}function fireMenuAction(e){var t=getAsFunction(e);t&&t()}function fireMenuActionWithEvent(e,t){var i,n=toFunction(t);n=n||(i=toFunction("localContext."+t)),n&&(e=_.isArray(e)?e:[e],n.apply(i?localContext:null,e))}function getMenuMouseupFunction(e,t,i,n,o){if(!e)return null;if(t){var s=resolveReservedStringsInArray(t,i,n,o);return function(){fireMenuActionWithEvent(s,e,o)}}return function(){fireMenuAction(e,o)}}function evaluateTest(e,t,i,n,o,s){var r=null!=s?s:!0,a=getAsFunction(e);return a&&(r=a.apply(this,resolveReservedStringsInArray(t,i,n,null)),o&&(r=!r)),r}function resolveReservedStringsInArray(e,t,i,n){return e?e.collect(function(e){return resolveReservedStrings(e,t,i,n)}):[]}function resolveReservedStrings(e,t,i,n){return e==actionModel.RES_SELECTED?actionModel.selObjects:e==actionModel.RES_LABEL?t:e==actionModel.RES_ID?i:e==actionModel.EVENT?n:e}function getRandomId(){var e=Math.round(50*Math.random(10));return"_"+e}function invokeAction(e){var t=repositorySearch.Action["create"+e].call();t.invokeAction()}function invokeFolderAction(e,t){var i=t?t:repositorySearch.model.getContextFolder(),n=repositorySearch.folderActionFactory[e](i);n.invokeAction()}function invokeResourceAction(e,t,i){var n=t?t:repositorySearch.model.getSelectedResources()[0],o=repositorySearch.resourceActionFactory[e](n,i);o.invokeAction()}function invokeBulkAction(e){var t=repositorySearch.model.getSelectedResources(),i=repositorySearch.bulkActionFactory[e](t);i.invokeAction()}function invokeRedirectAction(e){var t=repositorySearch.RedirectAction["create"+e].call();t.invokeAction()}function invokeCreate(e,t){var i=repositorySearch.RedirectAction.createCreateResourceAction(e,t);i.invokeAction()}function isCopyOrMove(){return repositorySearch.CopyMoveController.isCopy()||repositorySearch.CopyMoveController.isMove()}function isFolderCopyOrMove(){return repositorySearch.CopyMoveController.isCopyFolder()||repositorySearch.CopyMoveController.isMoveFolder()}function isResourceCopyOrMove(){return repositorySearch.CopyMoveController.isCopyResource()||repositorySearch.CopyMoveController.isMoveResource()}function canCreateFolder(){var e=repositorySearch.model.getContextFolder();return e&&!e.isOrganizationsRoot()&&e.isEditable()}function canFolderBeDeleted(){var e=repositorySearch.model.getContextFolder();return!(!e||e.isOrganization()||e.isRoot()||e.isPublic()||e.isTemp()||e.isOrganizationsRoot()||!e.isRemovable()||e.isActiveThemeFolder()||e.isThemeRootFolder())}function canFolderBeEdited(e){return e=e?e:repositorySearch.model.getContextFolder(),e&&e.isEditable()}function canFolderBeCopied(e){return e=e?e:repositorySearch.model.getContextFolder(),e&&!e.isOrganization()&&!e.isRoot()&&!e.isOrganizationsRoot()&&e.isReadable()}function canFolderBeCopiedOrMovedToFolder(e){var t=e?e:repositorySearch.model.getContextFolder(),i=isFolderCopyOrMove()&&!t.isOrganizationsRoot()&&canFolderBeEdited(t);if(!i)return!1;var n=repositorySearch.CopyMoveController.object;return t.URI!==n.URI}function canFolderBeMoved(e){return e=e?e:repositorySearch.model.getContextFolder(),!(!e||e.isOrganization()||e.isRoot()||e.isPublic()||e.isTemp()||e.isOrganizationsRoot()||!e.isRemovable()||e.isActiveThemeFolder()||e.isThemeRootFolder())}function canFolderBeExported(e){e=e?e:repositorySearch.model.getContextFolder();var t=e.URI.split("/");return!(t.length>2&&"organizations"===t[t.length-2]&&"org_template"!==t[t.length-1])}function canFolderPermissionsBeAssigned(){var e=repositorySearch.model.getContextFolder();return e&&e.isAdministrable()}function canFolderPropertiesBeShowed(){var e=repositorySearch.model.getContextFolder();return e&&e.isReadable()&&!canFolderPropertiesBeEdited()}function canFolderPropertiesBeEdited(){var e=repositorySearch.model.getContextFolder();return e&&e.isEditable()&&!e.isOrganization()&&!e.isOrganizationsRoot()&&!e.isRoot()}function canResourceBeCreated(){var e=repositorySearch.model.getContextFolder();return e&&!e.isOrganization()&&!e.isRoot()&&!e.isOrganizationsRoot()&&e.isEditable()}function canBeRun(e){return e=e?e:repositorySearch.model.getSelectedResources()[0],e&&e.isReadable()&&repositorySearch.runActionFactory[e.typeSuffix()]&&!repositorySearch.isflowRedirectRunning}function canBeGenerated(){return!1}function canBeConverted(){return!1}function canResourceBeEdited(e){e=e?e:repositorySearch.model.getSelectedResources()[0];var t=repositorySearch.editActionFactory[e.typeSuffix()]||ResourcesUtils.isCustomDataSource(e),i=e&&e.isEditable()&&t;return["DashboardResource"].include(e.typeSuffix())?!1:i}function canBeOpenedInDesigner(e){return e=e?e:repositorySearch.model.getSelectedResources()[0],e&&e.isEditable()&&repositorySearch.openActionFactory[e.typeSuffix()]&&"ContentResource"!==e.typeSuffix()}function canBeOpened(e){return e=e?e:repositorySearch.model.getSelectedResources()[0],e&&e.isEditable()&&repositorySearch.openActionFactory[e.typeSuffix()]&&"ContentResource"===e.typeSuffix()}function canBeRunInBackground(e){return canBeScheduled(e)}function canBeScheduled(e){return e=e?e:repositorySearch.model.getSelectedResources()[0],e&&e.isReadable()&&[repositorySearch.ResourceType.REPORT_UNIT,repositorySearch.ResourceType.ADHOC_REPORT_UNIT,repositorySearch.ResourceType.REPORT_OPTIONS].include(e.resourceType)}function canResourceBeCopied(e){return e=e?e:repositorySearch.model.getSelectedResources()[0],e&&e.isReadable()}function canResourceBeMoved(e){return e=e?e:repositorySearch.model.getSelectedResources()[0],e&&e.isRemovable()}function canResourceBeDeleted(e){return e=repositorySearch.model.getSelectedResources()[0],e&&e.isRemovable()}function canResourcePropertiesBeShowed(){var e=repositorySearch.model.getSelectedResources()[0];return e&&e.isReadable()&&!e.isEditable()}function canResourcePropertiesBeEdited(e){return e=e?e:repositorySearch.model.getSelectedResources()[0],e&&e.isEditable()}function canResourcePermissionsBeAssigned(){var e=repositorySearch.model.getSelectedResources()[0];return e&&e.isAdministrable()}function canAllBeRun(){var e=repositorySearch.model.getSelectedResources(),t=e.detect(function(e){return!canBeRun(e)});return e.length>0&&void 0===t}function canAllBeEdited(){var e=repositorySearch.model.getSelectedResources(),t=e.detect(function(e){return!canResourceBeEdited(e)});return e.length>0&&void 0===t&&!isIPad()}function canAllBeOpened(){var e=repositorySearch.model.getSelectedResources(),t=e.detect(function(e){return!canBeOpenedInDesigner(e)&&!canBeOpened(e)});return e.length>0&&void 0===t}function canAllBeCopied(){var e=repositorySearch.model.getSelectedResources(),t=e.detect(function(e){return!canResourceBeCopied(e)});return e.length>0&&void 0===t}function canAllBeMoved(){var e=repositorySearch.model.getSelectedResources(),t=e.detect(function(e){return!canResourceBeMoved(e)});return e.length>0&&void 0===t}function canAllBeCopiedOrMovedToFolder(e){e=e?e:repositorySearch.model.getContextFolder();var t=isResourceCopyOrMove()&&!e.isOrganizationsRoot()&&canFolderBeEdited(e);if(!t)return!1;var i=repositorySearch.CopyMoveController.isBulkAction()?repositorySearch.CopyMoveController.object:[repositorySearch.CopyMoveController.object],n=i.collect(function(e){return e.parentFolder}),o=!n.uniq().include(e.URI),s=!1;if(e.isThemeRootFolder()||e.isThemeFolder()){var r=null==i.detect(function(e){return!e.resourceType.endsWith(".FileResource")});s=o&&r}else s=o;return s}function canAllBePasted(){return canAllBeCopiedOrMovedToFolder(repositorySearch.model.getSelectedFolder())}function canAllPropertiesBeShowed(){var e=repositorySearch.model.getSelectedResources(),t=e.detect(function(e){return!canResourcePropertiesBeShowed(e)});return e.length>0&&void 0===t}function canAllPropertiesBeEdited(){var e=repositorySearch.model.getSelectedResources(),t=e.detect(function(e){return!canResourcePropertiesBeEdited(e)});return e.length>0&&void 0===t}function canAllBeDeleted(){var e=repositorySearch.model.getSelectedResources(),t=e.detect(function(e){return!canResourceBeDeleted(e)});return e.length>0&&void 0===t}function isThemeFolder(){var e=repositorySearch.model.getContextFolder();return e&&e.isThemeFolder()}function isNonActiveThemeFolder(){var e=repositorySearch.model.getContextFolder();return isThemeFolder()&&!e.isActiveThemeFolder()}function isThemeRootFolder(){var e=repositorySearch.model.getContextFolder();return e&&e.isThemeRootFolder()}function canThemeBeReuploaded(){var e=repositorySearch.model.getContextFolder();return e&&e.isThemeFolder()&&canFolderBeEdited(e)}function isPermissionsChanged(){var e=repositorySearch.dialogsPool.getAllPermissionsDialogs();return e.detect(function(e){return e.isChanged()})}function isPropertiesChanged(){var e=repositorySearch.dialogsPool.getAllPropertiesDialogs();return e.detect(function(e){return e.isChanged()})}function RegExpRepresenter(e){this.charMap={"\\s":" "},this.expressionTokens=this.__parse(e)}define("domReady",[],function(){"use strict";function e(e){var t;for(t=0;t<e.length;t+=1)e[t](c)}function t(){var t=u;l&&t.length&&(u=[],e(t))}function i(){l||(l=!0,r&&clearInterval(r),t())}function n(e){return l?e(c):u.push(e),n}var o,s,r,a="undefined"!=typeof window&&window.document,l=!a,c=a?document:null,u=[];if(a){if(document.addEventListener)document.addEventListener("DOMContentLoaded",i,!1),window.addEventListener("load",i,!1);else if(window.attachEvent){window.attachEvent("onload",i),s=document.createElement("div");try{o=null===window.frameElement}catch(d){}s.doScroll&&o&&window.external&&(r=setInterval(function(){try{s.doScroll(),i()}catch(e){}},30))}"complete"===document.readyState&&i()}return n.version="2.0.1",n.load=function(e,t,i,o){o.isBuild?i(null):n(i)},n}),define("commons.bare.main",["require","prototype","!domReady"],function(e){"use strict";e("prototype"),e("!domReady")}),function(){function e(e,t,i){for(var n=(i||0)-1,o=e?e.length:0;++n<o;)if(e[n]===t)return n;return-1}function t(e,t){for(var i=e.criteria,n=t.criteria,o=-1,s=i.length;++o<s;){var r=i[o],a=n[o];if(r!==a){if(r>a||"undefined"==typeof r)return 1;if(a>r||"undefined"==typeof a)return-1}}return e.index-t.index}function i(e){return"\\"+Ri[e]}function n(){return hi.pop()||[]}function o(e){e.length=0,hi.length<gi&&hi.push(e)}function s(e,t,i){t||(t=0),"undefined"==typeof i&&(i=e?e.length:0);for(var n=-1,o=i-t||0,s=Array(0>o?0:o);++n<o;)s[n]=e[t+n];return s}function r(e){return e instanceof r?e:new a(e)
}function a(e,t){this.__chain__=!!t,this.__wrapped__=e}function l(e){function t(){if(n){var e=s(n);Yi.apply(e,arguments)}if(this instanceof t){var r=u(i.prototype),a=i.apply(r,e||arguments);return B(a)?a:r}return i.apply(o,e||arguments)}var i=e[0],n=e[2],o=e[4];return t}function c(e,t,i,r,a){if(i){var l=i(e);if("undefined"!=typeof l)return l}var u=B(e);if(!u)return e;var d=Bi.call(e);if(!xi[d])return e;var h=on[d];switch(d){case Ei:case wi:return new h(+e);case Ii:case Ai:return new h(e);case Di:return l=h(e.source,vi.exec(e)),l.lastIndex=e.lastIndex,l}var p=rn(e);if(t){var f=!r;r||(r=n()),a||(a=n());for(var m=r.length;m--;)if(r[m]==e)return a[m];l=p?h(e.length):{}}else l=p?s(e):C({},e);return p&&(Ki.call(e,"index")&&(l.index=e.index),Ki.call(e,"input")&&(l.input=e.input)),t?(r.push(e),a.push(l),(p?ot:fn)(e,function(e,n){l[n]=c(e,t,i,r,a)}),f&&(o(r),o(a)),l):l}function u(e){return B(e)?Xi(e):{}}function d(e,t,i){if("function"!=typeof e)return Jt;if("undefined"==typeof t||!("prototype"in e))return e;switch(i){case 1:return function(i){return e.call(t,i)};case 2:return function(i,n){return e.call(t,i,n)};case 3:return function(i,n,o){return e.call(t,i,n,o)};case 4:return function(i,n,o,s){return e.call(t,i,n,o,s)}}return Ut(e,t)}function h(e){function t(){var e=c?a:this;if(o){var g=s(o);Yi.apply(g,arguments)}if((r||p)&&(g||(g=s(arguments)),r&&Yi.apply(g,r),p&&g.length<l))return n|=16,h([i,f?n:-4&n,g,null,a,l]);if(g||(g=arguments),d&&(i=e[m]),this instanceof t){e=u(i.prototype);var v=i.apply(e,g);return B(v)?v:e}return i.apply(e,g)}var i=e[0],n=e[1],o=e[2],r=e[3],a=e[4],l=e[5],c=1&n,d=2&n,p=4&n,f=8&n,m=i;return t}function p(e,t){for(var i=-1,n=T(),o=e?e.length:0,s=[];++i<o;){var r=e[i];n(t,r)<0&&s.push(r)}return s}function f(e,t,i,n){for(var o=(n||0)-1,s=e?e.length:0,r=[];++o<s;){var a=e[o];if(a&&"object"==typeof a&&"number"==typeof a.length&&(rn(a)||I(a))){t||(a=f(a,t,i));var l=-1,c=a.length,u=r.length;for(r.length+=c;++l<c;)r[u++]=a[l]}else i||r.push(a)}return r}function m(e,t,i,n){if(e===t)return 0!==e||1/e==1/t;var o=typeof e,s=typeof t;if(!(e!==e||e&&Ni[o]||t&&Ni[s]))return!1;if(null==e||null==t)return e===t;var a=Bi.call(e),l=Bi.call(t);if(a!=l)return!1;switch(a){case Ei:case wi:return+e==+t;case Ii:return e!=+e?t!=+t:0==e?1/e==1/t:e==+t;case Di:case Ai:return e==String(t)}var c=a==Ti;if(!c){var u=e instanceof r,d=t instanceof r;if(u||d)return m(u?e.__wrapped__:e,d?t.__wrapped__:t,i,n);if(a!=Ci)return!1;var h=e.constructor,p=t.constructor;if(h!=p&&!(H(h)&&h instanceof h&&H(p)&&p instanceof p)&&"constructor"in e&&"constructor"in t)return!1}i||(i=[]),n||(n=[]);for(var f=i.length;f--;)if(i[f]==e)return n[f]==t;var g=!0,v=0;if(i.push(e),n.push(t),c){if(v=t.length,g=v==e.length)for(;v--&&(g=m(e[v],t[v],i,n)););}else pn(t,function(t,o,s){return Ki.call(s,o)?(v++,!(g=Ki.call(e,o)&&m(e[o],t,i,n))&&fi):void 0}),g&&pn(e,function(e,t,i){return Ki.call(i,t)?!(g=--v>-1)&&fi:void 0});return i.pop(),n.pop(),g}function g(e,t,i,n,o){(rn(t)?ot:fn)(t,function(t,s){var r,a,l=t,c=e[s];if(t&&((a=rn(t))||mn(t))){for(var u=n.length;u--;)if(r=n[u]==t){c=o[u];break}if(!r){var d;i&&(l=i(c,t),(d="undefined"!=typeof l)&&(c=l)),d||(c=a?rn(c)?c:[]:mn(c)?c:{}),n.push(t),o.push(c),d||g(c,t,i,n,o)}}else i&&(l=i(c,t),"undefined"==typeof l&&(l=t)),"undefined"!=typeof l&&(c=l);e[s]=c})}function v(e,t){return e+$i(nn()*(t-e+1))}function _(e,t,i){for(var n=-1,o=T(),s=e?e.length:0,r=[],a=i?[]:r;++n<s;){var l=e[n],c=i?i(l,n,e):l;(t?!n||a[a.length-1]!==c:o(a,c)<0)&&(i&&a.push(c),r.push(l))}return r}function y(e){return function(t,i,n){var o={};i=Xt(i,n,3);var s=-1,r=t?t.length:0;if("number"==typeof r)for(;++s<r;){var a=t[s];e(o,a,i(a,s,t),t)}else fn(t,function(t,n,s){e(o,t,i(t,n,s),s)});return o}}function b(e,t,i,n,o,s){var r=2&t,a=16&t,c=32&t;if(!r&&!H(e))throw new TypeError;a&&!i.length&&(t&=-17,a=i=!1),c&&!n.length&&(t&=-33,c=n=!1);var u=1==t||17===t?l:h;return u([e,t,i,n,o,s])}function S(e){return cn[e]}function T(){var t=(t=r.indexOf)===wt?e:t;return t}function E(e){return"function"==typeof e&&zi.test(e)}function w(e){var t,i;return e&&Bi.call(e)==Ci&&(t=e.constructor,!H(t)||t instanceof t)?(pn(e,function(e,t){i=t}),"undefined"==typeof i||Ki.call(e,i)):fi}function M(e){return un[e]}function I(e){return e&&"object"==typeof e&&"number"==typeof e.length&&Bi.call(e)==Si||!1}function C(e){if(!e)return e;for(var t=1,i=arguments.length;i>t;t++){var n=arguments[t];if(n)for(var o in n)e[o]=n[o]}return e}function D(e,t,i,n){return"boolean"!=typeof t&&null!=t&&(n=i,i=t,t=!1),c(e,t,"function"==typeof i&&d(i,n,1))}function A(e,t,i){return c(e,!0,"function"==typeof t&&d(t,i,1))}function x(e){if(!e)return e;for(var t=1,i=arguments.length;i>t;t++){var n=arguments[t];if(n)for(var o in n)"undefined"==typeof e[o]&&(e[o]=n[o])}return e}function N(e){var t=[];return pn(e,function(e,i){H(e)&&t.push(i)}),t.sort()}function R(e,t){return e?Ki.call(e,t):!1}function O(e){for(var t=-1,i=ln(e),n=i.length,o={};++t<n;){var s=i[t];o[e[s]]=s}return o}function L(e){return e===!0||e===!1||e&&"object"==typeof e&&Bi.call(e)==Ei||!1}function k(e){return e&&"object"==typeof e&&Bi.call(e)==wi||!1}function P(e){return e&&1===e.nodeType||!1}function F(e){if(!e)return!0;if(rn(e)||K(e))return!e.length;for(var t in e)if(Ki.call(e,t))return!1;return!0}function U(e,t){return m(e,t)}function j(e){return Ji(e)&&!Qi(parseFloat(e))}function H(e){return"function"==typeof e}function B(e){return!(!e||!Ni[typeof e])}function z(e){return $(e)&&e!=+e}function V(e){return null===e}function $(e){return"number"==typeof e||e&&"object"==typeof e&&Bi.call(e)==Ii||!1}function W(e){return e&&Ni[typeof e]&&Bi.call(e)==Di||!1}function K(e){return"string"==typeof e||e&&"object"==typeof e&&Bi.call(e)==Ai||!1}function Y(e){return"undefined"==typeof e}function q(e){var t=arguments,i=2;if(!B(e))return e;if("number"!=typeof t[2]&&(i=t.length),i>3&&"function"==typeof t[i-2])var r=d(t[--i-1],t[i--],2);else i>2&&"function"==typeof t[i-1]&&(r=t[--i]);for(var a=s(arguments,1,i),l=-1,c=n(),u=n();++l<i;)g(e,a[l],r,c,u);return o(c),o(u),e}function X(e){var t=[];pn(e,function(e,i){t.push(i)}),t=p(t,f(arguments,!0,!1,1));for(var i=-1,n=t.length,o={};++i<n;){var s=t[i];o[s]=e[s]}return o}function G(e){for(var t=-1,i=ln(e),n=i.length,o=Array(n);++t<n;){var s=i[t];o[t]=[s,e[s]]}return o}function J(e){for(var t=-1,i=f(arguments,!0,!1,1),n=i.length,o={};++t<n;){var s=i[t];s in e&&(o[s]=e[s])}return o}function Q(e){for(var t=-1,i=ln(e),n=i.length,o=Array(n);++t<n;)o[t]=e[i[t]];return o}function Z(e,t){var i=T(),n=e?e.length:0,o=!1;return n&&"number"==typeof n?o=i(e,t)>-1:fn(e,function(e){return(o=e===t)&&fi}),o}function et(e,t,i){var n=!0;t=Xt(t,i,3);var o=-1,s=e?e.length:0;if("number"==typeof s)for(;++o<s&&(n=!!t(e[o],o,e)););else fn(e,function(e,i,o){return!(n=!!t(e,i,o))&&fi});return n}function tt(e,t,i){var n=[];t=Xt(t,i,3);var o=-1,s=e?e.length:0;if("number"==typeof s)for(;++o<s;){var r=e[o];t(r,o,e)&&n.push(r)}else fn(e,function(e,i,o){t(e,i,o)&&n.push(e)});return n}function it(e,t,i){t=Xt(t,i,3);var n=-1,o=e?e.length:0;if("number"!=typeof o){var s;return fn(e,function(e,i,n){return t(e,i,n)?(s=e,fi):void 0}),s}for(;++n<o;){var r=e[n];if(t(r,n,e))return r}}function nt(e,t){return yt(e,t,!0)}function ot(e,t,i){var n=-1,o=e?e.length:0;if(t=t&&"undefined"==typeof i?t:d(t,i,3),"number"==typeof o)for(;++n<o&&t(e[n],n,e)!==fi;);else fn(e,t)}function st(e,t){var i=e?e.length:0;if("number"==typeof i)for(;i--&&t(e[i],i,e)!==!1;);else{var n=ln(e);i=n.length,fn(e,function(e,o,s){return o=n?n[--i]:--i,t(s[o],o,s)===!1&&fi})}}function rt(e,t){var i=s(arguments,2),n=-1,o="function"==typeof t,r=e?e.length:0,a=Array("number"==typeof r?r:0);return ot(e,function(e){a[++n]=(o?t:e[t]).apply(e,i)}),a}function at(e,t,i){var n=-1,o=e?e.length:0;if(t=Xt(t,i,3),"number"==typeof o)for(var s=Array(o);++n<o;)s[n]=t(e[n],n,e);else s=[],fn(e,function(e,i,o){s[++n]=t(e,i,o)});return s}function lt(e,t,i){var n=-1/0,o=n;"function"!=typeof t&&i&&i[t]===e&&(t=null);var s=-1,r=e?e.length:0;if(null==t&&"number"==typeof r)for(;++s<r;){var a=e[s];a>o&&(o=a)}else t=Xt(t,i,3),ot(e,function(e,i,s){var r=t(e,i,s);r>n&&(n=r,o=e)});return o}function ct(e,t,i){var n=1/0,o=n;"function"!=typeof t&&i&&i[t]===e&&(t=null);var s=-1,r=e?e.length:0;if(null==t&&"number"==typeof r)for(;++s<r;){var a=e[s];o>a&&(o=a)}else t=Xt(t,i,3),ot(e,function(e,i,s){var r=t(e,i,s);n>r&&(n=r,o=e)});return o}function ut(e,t,i,n){if(!e)return i;var o=arguments.length<3;t=Xt(t,n,4);var s=-1,r=e.length;if("number"==typeof r)for(o&&(i=e[++s]);++s<r;)i=t(i,e[s],s,e);else fn(e,function(e,n,s){i=o?(o=!1,e):t(i,e,n,s)});return i}function dt(e,t,i,n){var o=arguments.length<3;return t=Xt(t,n,4),st(e,function(e,n,s){i=o?(o=!1,e):t(i,e,n,s)}),i}function ht(e,t,i){return t=Xt(t,i,3),tt(e,function(e,i,n){return!t(e,i,n)})}function pt(e,t,i){if(e&&"number"!=typeof e.length&&(e=Q(e)),null==t||i)return e?e[v(0,e.length-1)]:di;var n=ft(e);return n.length=tn(en(0,t),n.length),n}function ft(e){var t=-1,i=e?e.length:0,n=Array("number"==typeof i?i:0);return ot(e,function(e){var i=v(0,++t);n[t]=n[i],n[i]=e}),n}function mt(e){var t=e?e.length:0;return"number"==typeof t?t:ln(e).length}function gt(e,t,i){var n;t=Xt(t,i,3);var o=-1,s=e?e.length:0;if("number"==typeof s)for(;++o<s&&!(n=t(e[o],o,e)););else fn(e,function(e,i,o){return(n=t(e,i,o))&&fi});return!!n}function vt(e,i,n){var o=-1,s=e?e.length:0,r=Array("number"==typeof s?s:0);for(i=Xt(i,n,3),ot(e,function(e,t,n){r[++o]={criteria:[i(e,t,n)],index:o,value:e}}),s=r.length,r.sort(t);s--;)r[s]=r[s].value;return r}function _t(e){return rn(e)?s(e):e&&"number"==typeof e.length?at(e):Q(e)}function yt(e,t,i){return i&&F(t)?di:(i?it:tt)(e,t)}function bt(e){for(var t=-1,i=e?e.length:0,n=[];++t<i;){var o=e[t];o&&n.push(o)}return n}function St(e){return p(e,f(arguments,!0,!0,1))}function Tt(e,t,i){var n=0,o=e?e.length:0;if("number"!=typeof t&&null!=t){var r=-1;for(t=Xt(t,i,3);++r<o&&t(e[r],r,e);)n++}else if(n=t,null==n||i)return e?e[0]:di;return s(e,0,tn(en(0,n),o))}function Et(e,t){return f(e,t)}function wt(t,i,n){if("number"==typeof n){var o=t?t.length:0;n=0>n?en(0,o+n):n||0}else if(n){var s=Nt(t,i);return t[s]===i?s:-1}return e(t,i,n)}function Mt(e,t,i){var n=0,o=e?e.length:0;if("number"!=typeof t&&null!=t){var r=o;for(t=Xt(t,i,3);r--&&t(e[r],r,e);)n++}else n=null==t||i?1:t||n;return s(e,0,tn(en(0,o-n),o))}function It(){for(var e=[],t=-1,i=arguments.length;++t<i;){var n=arguments[t];(rn(n)||I(n))&&e.push(n)}var o=e[0],s=-1,r=T(),a=o?o.length:0,l=[];e:for(;++s<a;)if(n=o[s],r(l,n)<0){for(var t=i;--t;)if(r(e[t],n)<0)continue e;l.push(n)}return l}function Ct(e,t,i){var n=0,o=e?e.length:0;if("number"!=typeof t&&null!=t){var r=o;for(t=Xt(t,i,3);r--&&t(e[r],r,e);)n++}else if(n=t,null==n||i)return e?e[o-1]:di;return s(e,en(0,o-n))}function Dt(e,t,i){var n=e?e.length:0;for("number"==typeof i&&(n=(0>i?en(0,n+i):tn(i,n-1))+1);n--;)if(e[n]===t)return n;return-1}function At(e,t,i){e=+e||0,i=+i||1,null==t&&(t=e,e=0);for(var n=-1,o=en(0,Vi((t-e)/i)),s=Array(o);++n<o;)s[n]=e,e+=i;return s}function xt(e,t,i){if("number"!=typeof t&&null!=t){var n=0,o=-1,r=e?e.length:0;for(t=Xt(t,i,3);++o<r&&t(e[o],o,e);)n++}else n=null==t||i?1:en(0,t);return s(e,n)}function Nt(e,t,i,n){var o=0,s=e?e.length:o;for(i=i?Xt(i,n,1):Jt,t=i(t);s>o;){var r=o+s>>>1;i(e[r])<t?o=r+1:s=r}return o}function Rt(){return _(f(arguments,!0,!0))}function Ot(e,t,i,n){return"boolean"!=typeof t&&null!=t&&(n=i,i="function"!=typeof t&&n&&n[t]===e?null:t,t=!1),null!=i&&(i=Xt(i,n,3)),_(e,t,i)}function Lt(e){return p(e,s(arguments,1))}function kt(){for(var e=-1,t=lt(yn(arguments,"length")),i=Array(0>t?0:t);++e<t;)i[e]=yn(arguments,e);return i}function Pt(e,t){var i=-1,n=e?e.length:0,o={};for(t||!n||rn(e[0])||(t=[]);++i<n;){var s=e[i];t?o[s]=t[i]:s&&(o[s[0]]=s[1])}return o}function Ft(e,t){if(!H(t))throw new TypeError;return function(){return--e<1?t.apply(this,arguments):void 0}}function Ut(e,t){return arguments.length>2?b(e,17,s(arguments,2),null,t):b(e,1,null,null,t)}function jt(e){for(var t=arguments.length>1?f(arguments,!0,!1,1):N(e),i=-1,n=t.length;++i<n;){var o=t[i];e[o]=b(e[o],1,null,null,e)}return e}function Ht(){for(var e=arguments,t=e.length;t--;)if(!H(e[t]))throw new TypeError;return function(){for(var t=arguments,i=e.length;i--;)t=[e[i].apply(this,t)];return t[0]}}function Bt(e,t,i){var n,o,s,r,a,l,c,u=0,d=!1,h=!0;if(!H(e))throw new TypeError;if(t=en(0,t)||0,i===!0){var p=!0;h=!1}else B(i)&&(p=i.leading,d="maxWait"in i&&(en(t,i.maxWait)||0),h="trailing"in i?i.trailing:h);var f=function(){var i=t-(bn()-r);if(0>=i){o&&clearTimeout(o);var d=c;o=l=c=di,d&&(u=bn(),s=e.apply(a,n),l||o||(n=a=null))}else l=setTimeout(f,i)},m=function(){l&&clearTimeout(l),o=l=c=di,(h||d!==t)&&(u=bn(),s=e.apply(a,n),l||o||(n=a=null))};return function(){if(n=arguments,r=bn(),a=this,c=h&&(l||!p),d===!1)var i=p&&!l;else{o||p||(u=r);var g=d-(r-u),v=0>=g;v?(o&&(o=clearTimeout(o)),u=r,s=e.apply(a,n)):o||(o=setTimeout(m,g))}return v&&l?l=clearTimeout(l):l||t===d||(l=setTimeout(f,t)),i&&(v=!0,s=e.apply(a,n)),!v||l||o||(n=a=null),s}}function zt(e){if(!H(e))throw new TypeError;var t=s(arguments,1);return setTimeout(function(){e.apply(di,t)},1)}function Vt(e,t){if(!H(e))throw new TypeError;var i=s(arguments,2);return setTimeout(function(){e.apply(di,i)},t)}function $t(e,t){var i={};return function(){var n=t?t.apply(this,arguments):mi+arguments[0];return Ki.call(i,n)?i[n]:i[n]=e.apply(this,arguments)}}function Wt(e){var t,i;if(!H(e))throw new TypeError;return function(){return t?i:(t=!0,i=e.apply(this,arguments),e=null,i)}}function Kt(e){return b(e,16,s(arguments,1))}function Yt(e,t,i){var n=!0,o=!0;if(!H(e))throw new TypeError;return i===!1?n=!1:B(i)&&(n="leading"in i?i.leading:n,o="trailing"in i?i.trailing:o),i={},i.leading=n,i.maxWait=t,i.trailing=o,Bt(e,t,i)}function qt(e,t){return b(t,16,[e])}function Xt(e,t,i){var n=typeof e;if(null==e||"function"==n)return d(e,t,i);if("object"!=n)return ei(e);var o=ln(e);return function(t){for(var i=o.length,n=!1;i--&&(n=t[o[i]]===e[o[i]]););return n}}function Gt(e){return null==e?"":String(e).replace(hn,S)}function Jt(e){return e}function Qt(e){ot(N(e),function(t){var i=r[t]=e[t];r.prototype[t]=function(){var e=[this.__wrapped__];Yi.apply(e,arguments);var t=i.apply(r,e);return this.__chain__?new a(t,!0):t}})}function Zt(){return Oi._=Hi,this}function ei(e){return function(t){return t[e]}}function ti(e,t){return null==e&&null==t&&(t=1),e=+e||0,null==t?(t=e,e=0):t=+t||0,e+$i(nn()*(t-e+1))}function ii(e,t){if(e){var i=e[t];return H(i)?e[t]():i}}function ni(e,t,n){var o=r,s=o.templateSettings;e=String(e||""),n=x({},n,s);var a=0,l="__p += '",c=n.variable,u=RegExp((n.escape||yi).source+"|"+(n.interpolate||yi).source+"|"+(n.evaluate||yi).source+"|$","g");e.replace(u,function(t,n,o,s,r){return l+=e.slice(a,r).replace(bi,i),n&&(l+="' +\n_.escape("+n+") +\n'"),s&&(l+="';\n"+s+";\n__p += '"),o&&(l+="' +\n((__t = ("+o+")) == null ? '' : __t) +\n'"),a=r+t.length,t}),l+="';\n",c||(c="obj",l="with ("+c+" || {}) {\n"+l+"\n}\n"),l="function("+c+") {\nvar __t, __p = '', __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n"+l+"return __p\n}";try{var d=Function("_","return "+l)(o)}catch(h){throw h.source=l,h}return t?d(t):(d.source=l,d)}function oi(e,t,i){e=(e=+e)>-1?e:0;var n=-1,o=Array(e);for(t=d(t,i,1);++n<e;)o[n]=t(n);return o}function si(e){return null==e?"":String(e).replace(dn,M)}function ri(e){var t=++pi+"";return e?e+t:t}function ai(e){return e=new a(e),e.__chain__=!0,e}function li(e,t){return t(e),e}function ci(){return this.__chain__=!0,this}function ui(){return this.__wrapped__}var di,hi=[],pi=0,fi={},mi=+new Date+"",gi=40,vi=/\w*$/,_i=/<%=([\s\S]+?)%>/g,yi=/($^)/,bi=/['\n\r\t\u2028\u2029\\]/g,Si="[object Arguments]",Ti="[object Array]",Ei="[object Boolean]",wi="[object Date]",Mi="[object Function]",Ii="[object Number]",Ci="[object Object]",Di="[object RegExp]",Ai="[object String]",xi={};xi[Mi]=!1,xi[Si]=xi[Ti]=xi[Ei]=xi[wi]=xi[Ii]=xi[Ci]=xi[Di]=xi[Ai]=!0;var Ni={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1},Ri={"\\":"\\","'":"'","\n":"n","\r":"r","	":"t","\u2028":"u2028","\u2029":"u2029"},Oi=Ni[typeof window]&&window||this,Li=Ni[typeof exports]&&exports&&!exports.nodeType&&exports,ki=Ni[typeof module]&&module&&!module.nodeType&&module,Pi=ki&&ki.exports===Li&&Li,Fi=Ni[typeof global]&&global;!Fi||Fi.global!==Fi&&Fi.window!==Fi||(Oi=Fi);var Ui=[],ji=Object.prototype,Hi=Oi._,Bi=ji.toString,zi=RegExp("^"+String(Bi).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$"),Vi=Math.ceil,$i=Math.floor,Wi=E(Wi=Object.getPrototypeOf)&&Wi,Ki=ji.hasOwnProperty,Yi=Ui.push,qi=ji.propertyIsEnumerable,Xi=E(Xi=Object.create)&&Xi,Gi=E(Gi=Array.isArray)&&Gi,Ji=Oi.isFinite,Qi=Oi.isNaN,Zi=E(Zi=Object.keys)&&Zi,en=Math.max,tn=Math.min,nn=Math.random,on={};on[Ti]=Array,on[Ei]=Boolean,on[wi]=Date,on[Mi]=Function,on[Ci]=Object,on[Ii]=Number,on[Di]=RegExp,on[Ai]=String,a.prototype=r.prototype;var sn={};!function(){var e={0:1,length:1};sn.spliceObjects=(Ui.splice.call(e,0,1),!e[0])}(1),r.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:_i,variable:""},Xi||(u=function(){function e(){}return function(t){if(B(t)){e.prototype=t;var i=new e;e.prototype=null}return i||Oi.Object()}}()),I(arguments)||(I=function(e){return e&&"object"==typeof e&&"number"==typeof e.length&&Ki.call(e,"callee")&&!qi.call(e,"callee")||!1});var rn=Gi||function(e){return e&&"object"==typeof e&&"number"==typeof e.length&&Bi.call(e)==Ti||!1},an=function(e){var t,i=e,n=[];if(!i)return n;if(!Ni[typeof e])return n;for(t in i)Ki.call(i,t)&&n.push(t);return n},ln=Zi?function(e){return B(e)?Zi(e):[]}:an,cn={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"},un=O(cn),dn=RegExp("("+ln(un).join("|")+")","g"),hn=RegExp("["+ln(cn).join("")+"]","g"),pn=function(e,t){var i,n=e,o=n;if(!n)return o;if(!Ni[typeof n])return o;for(i in n)if(t(n[i],i,e)===fi)return o;return o},fn=function(e,t){var i,n=e,o=n;if(!n)return o;if(!Ni[typeof n])return o;for(i in n)if(Ki.call(n,i)&&t(n[i],i,e)===fi)return o;return o};H(/x/)&&(H=function(e){return"function"==typeof e&&Bi.call(e)==Mi});var mn=Wi?function(e){if(!e||Bi.call(e)!=Ci)return!1;var t=e.valueOf,i=E(t)&&(i=Wi(t))&&Wi(i);return i?e==i||Wi(e)==i:w(e)}:w,gn=y(function(e,t,i){Ki.call(e,i)?e[i]++:e[i]=1}),vn=y(function(e,t,i){(Ki.call(e,i)?e[i]:e[i]=[]).push(t)}),_n=y(function(e,t,i){e[i]=t}),yn=at,bn=E(bn=Date.now)&&bn||function(){return(new Date).getTime()};r.after=Ft,r.bind=Ut,r.bindAll=jt,r.chain=ai,r.compact=bt,r.compose=Ht,r.countBy=gn,r.debounce=Bt,r.defaults=x,r.defer=zt,r.delay=Vt,r.difference=St,r.filter=tt,r.flatten=Et,r.forEach=ot,r.functions=N,r.groupBy=vn,r.indexBy=_n,r.initial=Mt,r.intersection=It,r.invert=O,r.invoke=rt,r.keys=ln,r.map=at,r.max=lt,r.memoize=$t,r.merge=q,r.min=ct,r.omit=X,r.once=Wt,r.pairs=G,r.partial=Kt,r.pick=J,r.pluck=yn,r.range=At,r.reject=ht,r.rest=xt,r.shuffle=ft,r.sortBy=vt,r.tap=li,r.throttle=Yt,r.times=oi,r.toArray=_t,r.union=Rt,r.uniq=Ot,r.values=Q,r.where=yt,r.without=Lt,r.wrap=qt,r.zip=kt,r.collect=at,r.drop=xt,r.each=ot,r.extend=C,r.methods=N,r.object=Pt,r.select=tt,r.tail=xt,r.unique=Ot,r.clone=D,r.cloneDeep=A,r.contains=Z,r.escape=Gt,r.every=et,r.find=it,r.has=R,r.identity=Jt,r.indexOf=wt,r.isArguments=I,r.isArray=rn,r.isBoolean=L,r.isDate=k,r.isElement=P,r.isEmpty=F,r.isEqual=U,r.isFinite=j,r.isFunction=H,r.isNaN=z,r.isNull=V,r.isNumber=$,r.isObject=B,r.isRegExp=W,r.isString=K,r.isUndefined=Y,r.lastIndexOf=Dt,r.mixin=Qt,r.noConflict=Zt,r.random=ti,r.reduce=ut,r.reduceRight=dt,r.result=ii,r.size=mt,r.some=gt,r.sortedIndex=Nt,r.template=ni,r.unescape=si,r.uniqueId=ri,r.all=et,r.any=gt,r.detect=it,r.findWhere=nt,r.foldl=ut,r.foldr=dt,r.include=Z,r.inject=ut,r.first=Tt,r.last=Ct,r.sample=pt,r.take=Tt,r.head=Tt,Qt(r),r.VERSION="2.4.1",r.prototype.chain=ci,r.prototype.value=ui,ot(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=Ui[e];r.prototype[e]=function(){var e=this.__wrapped__;return t.apply(e,arguments),sn.spliceObjects||0!==e.length||delete e[0],this}}),ot(["concat","join","slice"],function(e){var t=Ui[e];r.prototype[e]=function(){var e=this.__wrapped__,i=t.apply(e,arguments);return this.__chain__&&(i=new a(i),i.__chain__=!0),i}}),"function"==typeof define&&"object"==typeof define.amd&&define.amd?(Oi._=r,define("lodash.custom",[],function(){return r})):Li&&ki?Pi?(ki.exports=r)._=r:Li._=r:Oi._=r}.call(this),define("common/util/xssUtil",["require"],function(){var e="a,abbr,acronym,address,area,article,aside,b,bdi,bdo,big,blockquote,body,br,caption,center,center,cite,code,col,colgroup,dd,details,dfn,div,dl,dt,em,fieldset,font,footer,form,h1,h2,h3,h4,h5,h6,head,header,hr,html,i,iframe,img,input,label,legend,li,main,map,mark,menu,menuitem,meta,nav,ol,option,p,pre,section,select,small,span,strike,strong,sub,summary,sup,table,tbody,td,textarea,th,thead,title,tr,u,ul,!--",t={"(":"&#40;",")":"&#41;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},i=function(e){return null==e?"":e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")},n=function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(i(n));return t},o=function(){var e,i={"&#111;":"o","&#110;":"n","&amp;":"&"};for(e in t)Object.prototype.hasOwnProperty.call(t,e)&&(i[t[e]]=e);return i}(),s="(?:"+n(t).join("|")+")",r=RegExp(s),a=RegExp(s,"g"),l="(?:\\)|\\()",c=RegExp(l),u=RegExp(l,"g"),d="\\b='(.*?)'",h=RegExp(d),p=RegExp(d,"g"),f='\\b="(.*?)"',m=RegExp(f),g=RegExp(f,"g"),v="<(?!/|"+e.replace(/,/g,"|")+")",_=RegExp(v,"i"),y=RegExp(v,"ig"),b="</(?!"+e.replace(/,/g,"|")+")",S=RegExp(b,"i"),T=RegExp(b,"ig"),E="\\bjavascript:",w=RegExp(E,"i"),M=RegExp(E,"ig"),I="\\bon(\\w+?)=",C=RegExp(I,"i"),D=RegExp(I,"ig"),A=function(e,i){if(e=null==e?"":e,i=i||{},!("string"==typeof e||e instanceof String))return e;if(i.softHTMLEscape){if(e=c.test(e)?e.replace(u,function(e){return t[e]}):e,e=h.test(e)?e.replace(p,"=`$1`").replace(/'/g,"&#39;").replace(/\b=`(.*?)`/g,"='$1'"):e.replace(/'/g,"&#39;"),e=m.test(e)?e.replace(g,"=`$1`").replace(/"/g,"&quot;").replace(/\b=`(.*?)`/g,'="$1"'):e.replace(/"/g,"&quot;"),i.whiteList&&i.whiteList instanceof Array&&i.whiteList.length>0){var n="<(?!/|"+i.whiteList.join("|")+")",o=RegExp(n,"i"),s=RegExp(n,"ig");e=o.test(e)?e.replace(s,"&lt;"):e;var l="</(?!"+i.whiteList.join("|")+")",d=RegExp(l,"i"),f=RegExp(l,"ig");e=d.test(e)?e.replace(f,"&lt;/"):e}else e=_.test(e)?e.replace(y,"&lt;"):e,e=S.test(e)?e.replace(T,"&lt;/"):e;e=w.test(e)?e.replace(M,""):e,e=C.test(e)?e.replace(D,"&#111;&#110;$1="):e}else e=r.test(e)?e.replace(a,function(e){return t[e]}):e;return e},x="(?:"+n(o).join("|")+")",N=RegExp(x,"i"),R=RegExp(x,"ig"),O=function(e){return e=null==e?"":e,("string"==typeof e||e instanceof String)&&N.test(e)?e.replace(R,function(e){return o[e]}):e};return xssUtil={escape:A,unescape:O,noConflict:function(){}},xssUtil}),!function(e,t){"use strict";var i=t.prototype.trim,n=t.prototype.trimRight,o=t.prototype.trimLeft,s=function(e){return 1*e||0},r=function(e,t){if(1>t)return"";for(var i="";t>0;)1&t&&(i+=e),t>>=1,e+=e;return i},a=[].slice,l=function(e){return null==e?"\\s":e.source?e.source:"["+p.escapeRegExp(e)+"]"},c={lt:"<",gt:">",quot:'"',apos:"'",amp:"&"},u={};for(var d in c)u[c[d]]=d;var h=function(){function e(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()}var i=r,n=function(){return n.cache.hasOwnProperty(arguments[0])||(n.cache[arguments[0]]=n.parse(arguments[0])),n.format.call(null,n.cache[arguments[0]],arguments)};return n.format=function(n,o){var s,r,a,l,c,u,d,p=1,f=n.length,m="",g=[];for(r=0;f>r;r++)if(m=e(n[r]),"string"===m)g.push(n[r]);else if("array"===m){if(l=n[r],l[2])for(s=o[p],a=0;a<l[2].length;a++){if(!s.hasOwnProperty(l[2][a]))throw new Error(h('[_.sprintf] property "%s" does not exist',l[2][a]));s=s[l[2][a]]}else s=l[1]?o[l[1]]:o[p++];if(/[^s]/.test(l[8])&&"number"!=e(s))throw new Error(h("[_.sprintf] expecting number but found %s",e(s)));switch(l[8]){case"b":s=s.toString(2);break;case"c":s=t.fromCharCode(s);break;case"d":s=parseInt(s,10);break;case"e":s=l[7]?s.toExponential(l[7]):s.toExponential();break;case"f":s=l[7]?parseFloat(s).toFixed(l[7]):parseFloat(s);break;case"o":s=s.toString(8);break;case"s":s=(s=t(s))&&l[7]?s.substring(0,l[7]):s;break;case"u":s=Math.abs(s);break;case"x":s=s.toString(16);break;case"X":s=s.toString(16).toUpperCase()}s=/[def]/.test(l[8])&&l[3]&&s>=0?"+"+s:s,u=l[4]?"0"==l[4]?"0":l[4].charAt(1):" ",d=l[6]-t(s).length,c=l[6]?i(u,d):"",g.push(l[5]?s+c:c+s)}return g.join("")},n.cache={},n.parse=function(e){for(var t=e,i=[],n=[],o=0;t;){if(null!==(i=/^[^\x25]+/.exec(t)))n.push(i[0]);else if(null!==(i=/^\x25{2}/.exec(t)))n.push("%");else{if(null===(i=/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(t)))throw new Error("[_.sprintf] huh?");if(i[2]){o|=1;var s=[],r=i[2],a=[];if(null===(a=/^([a-z_][a-z_\d]*)/i.exec(r)))throw new Error("[_.sprintf] huh?");for(s.push(a[1]);""!==(r=r.substring(a[0].length));)if(null!==(a=/^\.([a-z_][a-z_\d]*)/i.exec(r)))s.push(a[1]);else{if(null===(a=/^\[(\d+)\]/.exec(r)))throw new Error("[_.sprintf] huh?");s.push(a[1])}i[2]=s}else o|=2;if(3===o)throw new Error("[_.sprintf] mixing positional and named placeholders is not (yet) supported");n.push(i)}t=t.substring(i[0].length)}return n},n}(),p={VERSION:"2.3.0",isBlank:function(e){return null==e&&(e=""),/^\s*$/.test(e)},stripTags:function(e){return null==e?"":t(e).replace(/<\/?[^>]+>/g,"")},capitalize:function(e){return e=null==e?"":t(e),e.charAt(0).toUpperCase()+e.slice(1)},chop:function(e,i){return null==e?[]:(e=t(e),i=~~i,i>0?e.match(new RegExp(".{1,"+i+"}","g")):[e])},clean:function(e){return p.strip(e).replace(/\s+/g," ")},count:function(e,i){return null==e||null==i?0:t(e).split(i).length-1},chars:function(e){return null==e?[]:t(e).split("")},swapCase:function(e){return null==e?"":t(e).replace(/\S/g,function(e){return e===e.toUpperCase()?e.toLowerCase():e.toUpperCase()})},escapeHTML:function(e){return null==e?"":t(e).replace(/[&<>"']/g,function(e){return"&"+u[e]+";"})},unescapeHTML:function(e){return null==e?"":t(e).replace(/\&([^;]+);/g,function(e,i){var n;return i in c?c[i]:(n=i.match(/^#x([\da-fA-F]+)$/))?t.fromCharCode(parseInt(n[1],16)):(n=i.match(/^#(\d+)$/))?t.fromCharCode(~~n[1]):e})},escapeRegExp:function(e){return null==e?"":t(e).replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")},splice:function(e,t,i,n){var o=p.chars(e);return o.splice(~~t,~~i,n),o.join("")},insert:function(e,t,i){return p.splice(e,t,0,i)},include:function(e,i){return""===i?!0:null==e?!1:-1!==t(e).indexOf(i)},join:function(){var e=a.call(arguments),t=e.shift();return null==t&&(t=""),e.join(t)},lines:function(e){return null==e?[]:t(e).split("\n")},reverse:function(e){return p.chars(e).reverse().join("")},startsWith:function(e,i){return""===i?!0:null==e||null==i?!1:(e=t(e),i=t(i),e.length>=i.length&&e.slice(0,i.length)===i)},endsWith:function(e,i){return""===i?!0:null==e||null==i?!1:(e=t(e),i=t(i),e.length>=i.length&&e.slice(e.length-i.length)===i)},succ:function(e){return null==e?"":(e=t(e),e.slice(0,-1)+t.fromCharCode(e.charCodeAt(e.length-1)+1))},titleize:function(e){return null==e?"":t(e).replace(/(?:^|\s)\S/g,function(e){return e.toUpperCase()})},camelize:function(e){return p.trim(e).replace(/[-_\s]+(.)?/g,function(e,t){return t.toUpperCase()})},underscored:function(e){return p.trim(e).replace(/([a-z\d])([A-Z]+)/g,"$1_$2").replace(/[-\s]+/g,"_").toLowerCase()},dasherize:function(e){return p.trim(e).replace(/([A-Z])/g,"-$1").replace(/[-_\s]+/g,"-").toLowerCase()},classify:function(e){return p.titleize(t(e).replace(/_/g," ")).replace(/\s/g,"")},humanize:function(e){return p.capitalize(p.underscored(e).replace(/_id$/,"").replace(/_/g," "))},trim:function(e,n){return null==e?"":!n&&i?i.call(e):(n=l(n),t(e).replace(new RegExp("^"+n+"+|"+n+"+$","g"),""))},ltrim:function(e,i){return null==e?"":!i&&o?o.call(e):(i=l(i),t(e).replace(new RegExp("^"+i+"+"),""))},rtrim:function(e,i){return null==e?"":!i&&n?n.call(e):(i=l(i),t(e).replace(new RegExp(i+"+$"),""))},truncate:function(e,i,n){return null==e?"":(e=t(e),n=n||"...",i=~~i,e.length>i?e.slice(0,i)+n:e)},prune:function(e,i,n){if(null==e)return"";if(e=t(e),i=~~i,n=null!=n?t(n):"...",e.length<=i)return e;var o=function(e){return e.toUpperCase()!==e.toLowerCase()?"A":" "},s=e.slice(0,i+1).replace(/.(?=\W*\w*$)/g,o);return s=s.slice(s.length-2).match(/\w\w/)?s.replace(/\s*\S+$/,""):p.rtrim(s.slice(0,s.length-1)),(s+n).length>e.length?e:e.slice(0,s.length)+n},words:function(e,t){return p.isBlank(e)?[]:p.trim(e,t).split(t||/\s+/)},pad:function(e,i,n,o){e=null==e?"":t(e),i=~~i;var s=0;switch(n?n.length>1&&(n=n.charAt(0)):n=" ",o){case"right":return s=i-e.length,e+r(n,s);case"both":return s=i-e.length,r(n,Math.ceil(s/2))+e+r(n,Math.floor(s/2));default:return s=i-e.length,r(n,s)+e}},lpad:function(e,t,i){return p.pad(e,t,i)},rpad:function(e,t,i){return p.pad(e,t,i,"right")},lrpad:function(e,t,i){return p.pad(e,t,i,"both")},sprintf:h,vsprintf:function(e,t){return t.unshift(e),h.apply(null,t)},toNumber:function(e,i){if(null==e||""==e)return 0;e=t(e);var n=s(s(e).toFixed(~~i));return 0!==n||e.match(/^0+$/)?n:Number.NaN},numberFormat:function(e,t,i,n){if(isNaN(e)||null==e)return"";e=e.toFixed(~~t),n=n||",";var o=e.split("."),s=o[0],r=o[1]?(i||".")+o[1]:"";return s.replace(/(\d)(?=(?:\d{3})+$)/g,"$1"+n)+r},strRight:function(e,i){if(null==e)return"";e=t(e),i=null!=i?t(i):i;var n=i?e.indexOf(i):-1;return~n?e.slice(n+i.length,e.length):e},strRightBack:function(e,i){if(null==e)return"";e=t(e),i=null!=i?t(i):i;var n=i?e.lastIndexOf(i):-1;return~n?e.slice(n+i.length,e.length):e},strLeft:function(e,i){if(null==e)return"";e=t(e),i=null!=i?t(i):i;var n=i?e.indexOf(i):-1;return~n?e.slice(0,n):e},strLeftBack:function(e,t){if(null==e)return"";e+="",t=null!=t?""+t:t;var i=e.lastIndexOf(t);return~i?e.slice(0,i):e},toSentence:function(e,t,i,n){t=t||", ",i=i||" and ";var o=e.slice(),s=o.pop();return e.length>2&&n&&(i=p.rtrim(t)+i),o.length?o.join(t)+i+s:s},toSentenceSerial:function(){var e=a.call(arguments);return e[3]=!0,p.toSentence.apply(p,e)},slugify:function(e){if(null==e)return"";var i="ąàáäâãåæćęèéëêìíïîłńòóöôõøùúüûñçżź",n="aaaaaaaaceeeeeiiiilnoooooouuuunczz",o=new RegExp(l(i),"g");return e=t(e).toLowerCase().replace(o,function(e){var t=i.indexOf(e);return n.charAt(t)||"-"}),p.dasherize(e.replace(/[^\w\s-]/g,""))},surround:function(e,t){return[t,e,t].join("")},quote:function(e){return p.surround(e,'"')},exports:function(){var e={};for(var t in this)this.hasOwnProperty(t)&&!t.match(/^(?:include|contains|reverse)$/)&&(e[t]=this[t]);return e},repeat:function(e,i,n){if(null==e)return"";if(i=~~i,null==n)return r(t(e),i);for(var o=[];i>0;o[--i]=e);return o.join(n)},levenshtein:function(e,i){if(null==e&&null==i)return 0;if(null==e)return t(i).length;if(null==i)return t(e).length;e=t(e),i=t(i);for(var n,o,s=[],r=0;r<=i.length;r++)for(var a=0;a<=e.length;a++)o=r&&a?e.charAt(a-1)===i.charAt(r-1)?n:Math.min(s[a],s[a-1],n)+1:r+a,n=s[a],s[a]=o;return s.pop()}};p.strip=p.trim,p.lstrip=p.ltrim,p.rstrip=p.rtrim,p.center=p.lrpad,p.rjust=p.lpad,p.ljust=p.rpad,p.contains=p.include,p.q=p.quote,"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(module.exports=p),exports._s=p):"function"==typeof define&&define.amd?define("underscore.string",[],function(){return p}):(e._=e._||{},e._.string=e._.str=p)}(this,String),define("underscore",["require","lodash.custom","common/util/xssUtil","underscore.string"],function(e){"use strict";var t=e("lodash.custom"),i=e("common/util/xssUtil");t.str=e("underscore.string"),t.templateSettings={evaluate:/\{\{([\s\S]+?)\}\}/g,interpolate:/\{\{=([\s\S]+?)\}\}/g,escape:/\{\{-([\s\S]+?)\}\}/g},t.mixin(t.str.exports()),t.xssEscape=i.escape;var n=t.template;return t.template=function(e,i,o){var s=t.templateSettings,r=/($^)/;e=String(e||""),o=t.defaults({},o,s);var a=RegExp((o.escape||r).source+"|$","g");return e=e.replace(a,"{{ print(_.xssEscape($1)); }}"),n.call(t,e,i,o)
},t});var log="";Function.prototype.addMethod=function(e,t){return this.prototype[e]=t,this},Function.prototype.addVar=function(e,t){return this.prototype[e]=t,this},Function.prototype.compose=function(e){var t=this;return function(){return t.call(this,e.apply(this,arguments))}};var overlayObjectStack=new Array;"function"!=typeof String.prototype.trim&&(String.prototype.trim=function(){return this.strip()});var timer={},inspect=function(e){var t=[];for(var i in e)e.hasOwnProperty(i)&&t.push(i+" = "+e[i]);return t.join("\n")},getAsFunction=function(e){return toFunction(e)||toFunction("localContext."+e)};BusyMonitor.prototype.run=function(){var e=arguments;null!=this.timer&&clearTimeout(this.timer);var t=function(){this.theFunction.apply(null,e)};this.timer=setTimeout(t.bind(this),this.waitTime)},BusyMonitor.prototype.cancel=function(){this.timer&&clearTimeout(this.timer)},InPlaceEditor.prototype.makeEditable=function(e){var t=this,i=this.elem.id+"Input",n=this.value,o=Builder.node("input",{className:"control input text",id:i,value:n});this.elem.update(o),this.editing=!0;var s=jQuery("#"+i);if(isIE()){var r=!1;s.hover(function(){!r&&n&&n===this.value&&(this.select(),this.focus(),r=!0)},function(){})}if(s.focus(),s.select(),e){if(e.blur&&($(i).onblur=function(i){i=i?i:window.event;var n=e.blur,o=getAsFunction(n);o.call(t,i)}),(e.onEnter||e.onTab)&&($(i).onkeypress=function(i){var n=null,o=null;i=i?i:window.event,enterKeyHit(i)?(n=e.onEnter,o=getAsFunction(n),o.call(t,i)):i.keyCode==Event.KEY_TAB&&(n=e.onTab,o=getAsFunction(n),o.call(t,i))}),e.onMouseup){var a=function(n){if(n=n?n:window.event,$(Event.element(n))!=$(i)){var o=e.onMouseup,s=getAsFunction(o);s.call(t,n)}};isIPad()?document.body.ontouchend=a:document.body.onmousedown=a}e.onEsc&&(document.body.onkeydown=function(i){if(i=i?i:window.event,i.keyCode==Event.KEY_ESC){var n=e.onEsc,o=getAsFunction(n);o.call(t,i)}})}},InPlaceEditor.prototype.makeNonEditable=function(){if(this.elem&&this.elem.firstDescendant()&&this.editing){var e=this.elem.firstDescendant().value;this.elem.update(xssUtil.escape(e)),this.editing=!1}},InPlaceEditor.prototype.revertEdit=function(){this.elem.update(this.value),this.editing=!1};var cancelEventDragTarget=null;String.prototype.times=function(e){return 1>e?"":new Array(e+1).join(this)};var tracer={nativeCodeEx:/\[native code\]/,indentCount:-4,tracing:[],traceMe:function(e,t){var i=function(){var i=+new Date,n=" ".times(tracer.indentCount+=4);console.info(n+t+"("+Array.prototype.slice.call(arguments).join(", ")+")");var o=e.apply(this,arguments);return console.info(n+t,"-> ",o,"(",new Date-i,"ms",")"),tracer.indentCount-=4,o};i.traceOff=e;for(var n in e)i[n]=e[n];return console.log("tracing "+t),i},traceAll:function(e,t){if(e!=window&&("object"==typeof e||"function"==typeof e))for(var i in e)if(e.hasOwnProperty(i)&&e[i]!=e){var n=e[i];"function"==typeof n&&(this==e||n.traceOff||this.nativeCodeEx.test(n)||(e[i]=this.traceMe(e[i],i),this.tracing.push({obj:e,methodName:i}))),t&&this.traceAll(n,!0)}},untraceAll:function(){for(var e=0;e<this.tracing.length;++e){var t=this.tracing[e];t.obj[t.methodName]=t.obj[t.methodName].traceOff}console.log("tracing disabled"),tracer.tracing=[]}},ValidationModule={validate:function(e,t){var i=this;if(!isArray(e))return this.validateEntry(e,t);var n=!0;return _.each(e,function(e){n=i.validateEntry(e,t)&&n}),n},validateEntry:function(e,t){if(e.validator)return this.validateLegacy(e,t);if(!e.selector){var i=this._validateElement(e.element,e,t);return null==i}for(var n=jQuery(e.element).find(e.selector),o=!0,s=0;s<n.length;s++){var i=this._validateElement(n[s],e,t);o=o&&null==i}return o},_validateElement:function(e,t,i){var n;if(t.method)n=this._runValidatorOnElement(t.method,e,t.messages,t.options);else for(var o=t.validators,s=0;s<o.length;s++){var r=o[s];if(n=this._runValidatorOnElement(r.method,e,r.messages,r.options),null!=n)break}return i!==!1&&(n?this.showError(e,n):this.hideError(e)),n},_runValidatorOnElement:function(e,t,i,n){_.isString(e)&&(e=this.methods[e]);var o=e.call(this,t.value,i,n);return _.isObject(o)?o.isValid?null:o.errorMessage:o},attachOnEvent:function(e,t){_.isArray(t)||(t=[t]),_.each(t,function(t){jQuery(t.element).on(e,function(){ValidationModule.validateEntry(t)})})},_getMessage:function(e,t,i,n){(_.isArray(i)||void 0===i)&&(n=i,i=this.defaultMessages);var o=null;return t&&(o=t[e]),!o&&i&&(o=i[e]),o&&n&&(o=this.fillPlaceholders(o,n)),o||e},fillPlaceholders:function(e,t){for(var i=0;i<t.length;i++)e=e.replace("{"+i+"}",t[i]);return e},defaultMessages:{mandatory:"Field is mandatory",tooSmall:"Value is too small, at least {0} required",tooBig:"Value is too big, at most {0} allowed",tooShort:"Value is too short, at least {0} characters required",tooLong:"Value is too long, at most {0} characters allowed",wordInvalidChars:"Value should contain only word characters (letters, digits and underscore)",shouldStartWithLetter:"Value should start with letter"},methods:{mandatory:function(e,t){return jQuery.trim(e)?null:this._getMessage("mandatory",t)},minMax:function(e,t,i){var n=jQuery.trim(e);if(!n)return null;var n=parseFloat(n);return isNaN(n)?this._getMessage("notANumber",t):void 0!==i.min&&n<i.min?this._getMessage("tooSmall",t,[i.min]):void 0!==i.max&&n>i.max?this._getMessage("tooBig",t,[i.max]):void 0},minMaxLength:function(e,t,i){return i.minLength&&e.length<i.minLength?this._getMessage("tooShort",t,[i.minLength]):i.maxLength&&e.length>i.maxLength?this._getMessage("tooLong",t,[i.maxLength]):void 0},resourceIdChars:function(e,t){if(!localContext||!localContext.initOptions||!localContext.initOptions.resourceIdNotSupportedSymbols)throw"There is no resourceIdNotSupportedSymbols property in init options.";return new RegExp(localContext.initOptions.resourceIdNotSupportedSymbols,"g").test(e)?this._getMessage("resourceIdInvalidChars",t):void 0},wordChars:function(e,t){return e.search(/\W/)>=0?this._getMessage("wordInvalidChars",t):void 0},startsWithLetter:function(e,t){return e.substr(0,1).match(/[A-Za-z]/)?void 0:this._getMessage("shouldStartWithLetter",t)},isDecimal:function(e){return _.isNumber(e)||_.isString(e)&&!isNaN(Number(e))?null:"defaultErrorMessage"},isInteger:function(e){return _.isNumber(e)||_.isString(e)&&/^[-+]?\d+$/.test(e)?null:"defaultErrorMessage"}},validateLegacy:function(e,t){var i=!0,n=[];return e=isArray(e)?e:[e],t=t!==!1,e.each(function(e){var o=e.validator.call(ValidationModule,e.element.getValue());o.isValid?e.onValid&&e.onValid(e):e.onInvalid&&e.onInvalid(e),o.isValid||n.include(e.element)?n.include(e.element)||t&&ValidationModule.hideError(e.element):(n.push(e.element),t&&ValidationModule.showError(e.element,o.errorMessage),i=!1)}),i},_showMessage:function(e,t,i,n){var o=e.validatorMessageContainer||e.parentNode,s=$(o).select(n)[0];s=s||$(o).select(layoutModule.MESSAGE_PATTERN)[0],s||(s=document.createElement("span"),o.appendChild(s)),s.className="";for(var r=n.split("."),a=0;a<r.length;a++)s.addClassName(r[a].trim());0==s.children.length?s.update(t):s.children[0].update(t),o.addClassName(i)},showError:function(e,t,i){if(this._showMessage(e,t,layoutModule.ERROR_CLASS,layoutModule.MESSAGE_WARNING_PATTERN),i){var n=e.validatorMessageContainer||e.parentNode,o=$(n).select(layoutModule.DETAILS_PATTERN)[0];o&&o.stopObserving("click").observe("click",function(){dialogs.errorPopup.show(i,!0)}.bindAsEventListener(this))}},showSuccess:function(e,t){this._showMessage(e,t,layoutModule.SUCCESS_CLASS,layoutModule.MESSAGE_SUCCESS_PATTERN)},hideError:function(e){var t=e.validatorMessageContainer||e.parentNode;$(t).removeClassName(layoutModule.ERROR_CLASS)},hideSuccess:function(e){var t=e.validatorMessageContainer||e.parentNode;$(t).removeClassName(layoutModule.SUCCESS_CLASS)}},ClassNameBuilder=function(e){return this.element=$(e),this.element.classNameBuilder?this.element.classNameBuilder:(this.names=this.element.className.split(" "),this.names=this.names.compact().uniq(),void(this.element.classNameBuilder=this))};ClassNameBuilder.addMethod("add",function(e){var t=[];if(Object.isString(e))t=e.split(" ");else{if(!isArray(e))return this;t=e}return t.each(function(e){this.names.include(e)||this.names.push(e)}.bind(this)),this}).addMethod("remove",function(e){return this.names=this.names.without(e),this}).addMethod("clean",function(){return this.names=[],this}).addMethod("toClassName",function(){return this.element.className=this.names.join(" "),this.element.className});var JSCookie=function(e,t,i){if(!Object.isString(e))throw"Invalid name";this.name=e,this.value=t,Object.isUndefined(t)?this.value=this._getCookies()[e]:this._setCookie(this.name,this.value,i)};JSCookie.addVar("daysToExpiration",30),JSCookie.addVar("getCookieTemplate",function(){return _.template("{{- name}}={{- value}}; expires={{- expires}}; path=/;")}),JSCookie.addMethod("_getCookies",function(){var e={};return document.cookie.split(";").invoke("strip").each(function(t){var i=t.split("=");e[i[0].strip()]=decodeURI(i[1])}),e}),JSCookie.addMethod("set",function(e,t){this.value=e,this._setCookie(this.name,this.value,t)}),JSCookie.addMethod("get",function(){return this.value}),JSCookie.addMethod("_setCookie",function(e,t,i){document.cookie=this.getCookieTemplate()({name:e,value:encodeURI(new String(t)),expires:this._getExpiresDate(i).toGMTString()})}),JSCookie.addMethod("_getExpiresDate",function(e){var t=new Date;return t.setTime(t.getTime()+(e?e:24*this.daysToExpiration*60*60*1e3)),t});var sessionManager={RESET_SESSION_MIN_TIME:1e3,resetSession:function(e){var t=(new Date).getTime();if(!(this._lastSessionResetTime&&t-this._lastSessionResetTime<this.RESET_SESSION_MIN_TIME)){this._lastSessionResetTime=t;var i=buildActionUrl({flowExecutionKey:e,eventId:"resetSession"}),n={errorHandler:this.errorHandler};ajaxNonReturningUpdate(i,n)}},errorHandler:function(e){var t=e.getResponseHeader("LoginRequested");return t?(document.location=urlContext,!0):void 0}},buildActionUrl=function(e){if(e){var t=deepClone(e);return $w("flowId flowExecutionKey eventId").each(function(e){t[e]&&(t["_"+e]=t[e],delete t[e])}),"flow.html?"+Object.toQueryString(t)}},pageDimmer={DOM_ID:"#pageDimmer",show:function(e){if(jQuery(this.DOM_ID).removeClass("hidden"),e&&e.match(layoutModule.DIALOG_PATTERN)){var t=e.getStyle("zIndex");t=t?parseInt(t,10):0,t>0&&this.setZindex(t-1)}},hide:function(){jQuery(this.DOM_ID).addClass("hidden")},setZindex:function(e){jQuery(this.DOM_ID).css({zIndex:e})}},fileSender={};fileSender.upload=function(e,t,i,n){return fileSender.uploadMultiple([e],t,i,n)},fileSender.uploadMultiple=function(e,t,i,n){for(var o=Builder.node("FORM",{action:"flow.html?_flowId="+t,method:"post",enctype:"multipart/form-data"}),s=0;s<e.length;s++){var r=e[s],a=r.cloneNode(!0);r.writeAttribute("id",null),r.addClassName("hidden"),o.file&&o.file.remove(),fileSender.moveEventHandlers(r,a),r.insert({after:a}),r.remove(),o.insert(r);for(var l in i){var c=Builder.node("INPUT",{type:"hidden",name:l,value:i[l]});o.insert(c)}}return o.addClassName("hidden"),document.body.insert(o),fileSender.submit(o,{onStart:null,onComplete:n}),o.submit(),o},fileSender.moveEventHandlers=function(e,t){var i=Event.cache,n=fileSender.getUniqueElementID(e),o=i[n];delete i[n],o&&(_.each(o,function(e,i){"element"!==i&&_.each(e,function(e){t.observe(i,e.handler)})}),o=null)},fileSender.getUniqueElementID=function(e){return e===window?0:"uniqueID"in document.createElement("div")?e==document?1:e.uniqueID:("undefined"==typeof e._prototypeUID&&(e._prototypeUID=Element.Storage.UID++),e._prototypeUID)},fileSender.frame=function(e){var t="f"+Math.floor(99999*Math.random()),i=$("ajax-upload-iframe").cloneNode(!0);i.writeAttribute("id",t),i.writeAttribute("name",t),document.body.insert(i);var n=function(){fileSender.loaded(t)};return i.observe("load",n),e&&"function"==typeof e.onComplete&&(i.onComplete=e.onComplete),t},fileSender.form=function(e,t){e.setAttribute("target",t)},fileSender.submit=function(e,t){return fileSender.form(e,fileSender.frame(t)),t&&"function"==typeof t.onStart?t.onStart():!0},fileSender.loaded=function(e){var t,i=document.getElementById(e);t=i.contentDocument?i.contentDocument:i.contentWindow?i.contentWindow.document:window.frames[e].document,"about:blank"!=t.location.href&&(fileSender.sessionTimeoutHandler(t)||"function"==typeof i.onComplete&&i.onComplete(t.body.innerHTML))},fileSender.sessionTimeoutHandler=function(e){for(var t=e.getElementsByTagName("meta"),i=0;i<t.length;i++)if("pageHeading"==t[i].name&&"LOGIN PAGE"==t[i].content)return document.location=".",!0;return!1},Keys=new Object,Keys.DOM_VK_BACK_SPACE=8,Keys.DOM_VK_ENTER=13,Keys.DOM_VK_PAGE_UP=33,Keys.DOM_VK_DOWN=40,Keys.DOM_VK_INSERT=45,Keys.DOM_VK_DELETE=46,Keys.DOM_VK_0=48,Keys.DOM_VK_9=57,Keys.DOM_VK_NUMPAD0=96,Keys.DOM_VK_NUMPAD9=105,Keys.DOM_VK_DECIMAL=110,Keys.DOM_VK_COMMA=188,Keys.DOM_VK_PERIOD=190,Keys.DOM_VK_CANCEL=3,Keys.DOM_VK_HELP=6,Keys.DOM_VK_TAB=9,Keys.DOM_VK_CLEAR=12,Keys.DOM_VK_RETURN=13,Keys.DOM_VK_SHIFT=16,Keys.DOM_VK_CONTROL=17,Keys.DOM_VK_ALT=18,Keys.DOM_VK_PAUSE=19,Keys.DOM_VK_CAPS_LOCK=20,Keys.DOM_VK_ESCAPE=27,Keys.DOM_VK_SPACE=32,Keys.DOM_VK_PAGE_DOWN=34,Keys.DOM_VK_END=35,Keys.DOM_VK_HOME=36,Keys.DOM_VK_LEFT=37,Keys.DOM_VK_UP=38,Keys.DOM_VK_RIGHT=39,Keys.DOM_VK_PRINTSCREEN=44,Keys.DOM_VK_1=49,Keys.DOM_VK_2=50,Keys.DOM_VK_3=51,Keys.DOM_VK_4=52,Keys.DOM_VK_5=53,Keys.DOM_VK_6=54,Keys.DOM_VK_7=55,Keys.DOM_VK_8=56,Keys.DOM_VK_SEMICOLON=59,Keys.DOM_VK_EQUALS=61,Keys.DOM_VK_A=65,Keys.DOM_VK_B=66,Keys.DOM_VK_C=67,Keys.DOM_VK_D=68,Keys.DOM_VK_E=69,Keys.DOM_VK_F=70,Keys.DOM_VK_G=71,Keys.DOM_VK_H=72,Keys.DOM_VK_I=73,Keys.DOM_VK_J=74,Keys.DOM_VK_K=75,Keys.DOM_VK_L=76,Keys.DOM_VK_M=77,Keys.DOM_VK_N=78,Keys.DOM_VK_O=79,Keys.DOM_VK_P=80,Keys.DOM_VK_Q=81,Keys.DOM_VK_R=82,Keys.DOM_VK_S=83,Keys.DOM_VK_T=84,Keys.DOM_VK_U=85,Keys.DOM_VK_V=86,Keys.DOM_VK_W=87,Keys.DOM_VK_X=88,Keys.DOM_VK_Y=89,Keys.DOM_VK_Z=90,Keys.DOM_VK_CONTEXT_MENU=93,Keys.DOM_VK_NUMPAD1=97,Keys.DOM_VK_NUMPAD2=98,Keys.DOM_VK_NUMPAD3=99,Keys.DOM_VK_NUMPAD4=100,Keys.DOM_VK_NUMPAD5=101,Keys.DOM_VK_NUMPAD6=102,Keys.DOM_VK_NUMPAD7=103,Keys.DOM_VK_NUMPAD8=104,Keys.DOM_VK_MULTIPLY=106,Keys.DOM_VK_ADD=107,Keys.DOM_VK_SEPARATOR=108,Keys.DOM_VK_SUBTRACT=109,Keys.DOM_VK_SUBTRACT_UNDERSCORE_IE=189,Keys.DOM_VK_DIVIDE=111,Keys.DOM_VK_F1=112,Keys.DOM_VK_F2=113,Keys.DOM_VK_F3=114,Keys.DOM_VK_F4=115,Keys.DOM_VK_F5=116,Keys.DOM_VK_F6=117,Keys.DOM_VK_F7=118,Keys.DOM_VK_F8=119,Keys.DOM_VK_F9=120,Keys.DOM_VK_F10=121,Keys.DOM_VK_F11=122,Keys.DOM_VK_F12=123,Keys.DOM_VK_F13=124,Keys.DOM_VK_F14=125,Keys.DOM_VK_F15=126,Keys.DOM_VK_F16=127,Keys.DOM_VK_F17=128,Keys.DOM_VK_F18=129,Keys.DOM_VK_F19=130,Keys.DOM_VK_F20=131,Keys.DOM_VK_F21=132,Keys.DOM_VK_F22=133,Keys.DOM_VK_F23=134,Keys.DOM_VK_F24=135,Keys.DOM_VK_NUM_LOCK=144,Keys.DOM_VK_SCROLL_LOCK=145,Keys.DOM_VK_SLASH=191,Keys.DOM_VK_BACK_QUOTE=192,Keys.DOM_VK_OPEN_BRACKET=219,Keys.DOM_VK_BACK_SLASH=220,Keys.DOM_VK_CLOSE_BRACKET=221,Keys.DOM_VK_QUOTE=222,Keys.DOM_VK_META=224,compileTemplate=function(e){if(e){var t=_.templateSettings;_.templateSettings={evaluate:/\{\{([\s\S]+?)\}\}/g,interpolate:/\{\{=([\s\S]+?)\}\}/g,escape:/\{\{-([\s\S]+?)\}\}/g};var i=_.template(jQuery(e).html());return _.templateSettings=t,i}},define("utils.common",["prototype","jquery","underscore"],function(e){return function(){var t;return t||e.jQuery}}(this));var Builder={NODEMAP:{AREA:"map",CAPTION:"table",COL:"table",COLGROUP:"table",LEGEND:"fieldset",OPTGROUP:"select",OPTION:"select",PARAM:"object",TBODY:"table",TD:"table",TFOOT:"table",TH:"table",THEAD:"table",TR:"table"},node:function(e){e=e.toUpperCase();var t=this.NODEMAP[e]||"div",i=document.createElement(t);try{i.innerHTML="<"+e+"></"+e+">"}catch(n){}var o=i.firstChild||null;if(o&&o.tagName.toUpperCase()!=e&&(o=o.getElementsByTagName(e)[0]),o||(o=document.createElement(e)),o){if(arguments[1])if(this._isStringOrNumber(arguments[1])||arguments[1]instanceof Array||arguments[1].tagName)this._children(o,arguments[1]);else{var s=this._attributes(arguments[1]);if(s.length){try{i.innerHTML="<"+e+" "+s+"></"+e+">"}catch(n){}if(o=i.firstChild||null,!o){o=document.createElement(e);for(attr in arguments[1])o["class"==attr?"className":attr]=arguments[1][attr]}o.tagName.toUpperCase()!=e&&(o=i.getElementsByTagName(e)[0])}}return arguments[2]&&this._children(o,arguments[2]),$(o)}},_text:function(e){return document.createTextNode(e)},ATTR_MAP:{className:"class",htmlFor:"for"},_attributes:function(e){var t=[];for(attribute in e)t.push((attribute in this.ATTR_MAP?this.ATTR_MAP[attribute]:attribute)+'="'+e[attribute].toString().escapeHTML().gsub(/"/,"&quot;")+'"');return t.join(" ")},_children:function(e,t){return t.tagName?void e.appendChild(t):void("object"==typeof t?t.flatten().each(function(t){"object"==typeof t?e.appendChild(t):Builder._isStringOrNumber(t)&&e.appendChild(Builder._text(t))}):Builder._isStringOrNumber(t)&&e.appendChild(Builder._text(t)))},_isStringOrNumber:function(e){return"string"==typeof e||"number"==typeof e},build:function(e){var t=this.node("div");return $(t).update(e.strip()),t.down()},dump:function(e){"object"!=typeof e&&"function"!=typeof e&&(e=window);var t="A ABBR ACRONYM ADDRESS APPLET AREA B BASE BASEFONT BDO BIG BLOCKQUOTE BODY BR BUTTON CAPTION CENTER CITE CODE COL COLGROUP DD DEL DFN DIR DIV DL DT EM FIELDSET FONT FORM FRAME FRAMESET H1 H2 H3 H4 H5 H6 HEAD HR HTML I IFRAME IMG INPUT INS ISINDEX KBD LABEL LEGEND LI LINK MAP MENU META NOFRAMES NOSCRIPT OBJECT OL OPTGROUP OPTION P PARAM PRE Q S SAMP SCRIPT SELECT SMALL SPAN STRIKE STRONG STYLE SUB SUP TABLE TBODY TD TEXTAREA TFOOT TH THEAD TITLE TR TT U UL VAR".split(/\s+/);t.each(function(t){e[t]=function(){return Builder.node.apply(Builder,[t].concat($A(arguments)))}})}};define("builder",["prototype"],function(e){return function(){var t;return t||e.Builder}}(this)),define("jrs.configs",[],function(){return"undefined"!=typeof __jrsConfigs__?__jrsConfigs__:{contextPath:"",userLocale:"en"}}),define("jquery.ui",["require","jquery"],function(e){var t=e("jquery");return function(e,t){function i(t,i){var o,s,r,a=t.nodeName.toLowerCase();return"area"===a?(o=t.parentNode,s=o.name,t.href&&s&&"map"===o.nodeName.toLowerCase()?(r=e("img[usemap=#"+s+"]")[0],!!r&&n(r)):!1):(/input|select|textarea|button|object/.test(a)?!t.disabled:"a"===a?t.href||i:i)&&n(t)}function n(t){return e.expr.filters.visible(t)&&!e(t).parents().addBack().filter(function(){return"hidden"===e.css(this,"visibility")}).length}var o=0,s=/^ui-id-\d+$/;e.ui=e.ui||{},e.extend(e.ui,{version:"@VERSION",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({focus:function(t){return function(i,n){return"number"==typeof i?this.each(function(){var t=this;setTimeout(function(){e(t).focus(),n&&n.call(t)},i)}):t.apply(this,arguments)}}(e.fn.focus),scrollParent:function(){var t;return t=e.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(e.css(this,"position"))&&/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!t.length?e(document):t},zIndex:function(i){if(i!==t)return this.css("zIndex",i);if(this.length)for(var n,o,s=e(this[0]);s.length&&s[0]!==document;){if(n=s.css("position"),("absolute"===n||"relative"===n||"fixed"===n)&&(o=parseInt(s.css("zIndex"),10),!isNaN(o)&&0!==o))return o;s=s.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++o)})},removeUniqueId:function(){return this.each(function(){s.test(this.id)&&e(this).removeAttr("id")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(i){return!!e.data(i,t)}}):function(t,i,n){return!!e.data(t,n[3])},focusable:function(t){return i(t,!isNaN(e.attr(t,"tabindex")))},tabbable:function(t){var n=e.attr(t,"tabindex"),o=isNaN(n);return(o||n>=0)&&i(t,!o)}}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(i,n){function o(t,i,n,o){return e.each(s,function(){i-=parseFloat(e.css(t,"padding"+this))||0,n&&(i-=parseFloat(e.css(t,"border"+this+"Width"))||0),o&&(i-=parseFloat(e.css(t,"margin"+this))||0)}),i}var s="Width"===n?["Left","Right"]:["Top","Bottom"],r=n.toLowerCase(),a={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+n]=function(i){return i===t?a["inner"+n].call(this):this.each(function(){e(this).css(r,o(this,i)+"px")})},e.fn["outer"+n]=function(t,i){return"number"!=typeof t?a["outer"+n].call(this,t):this.each(function(){e(this).css(r,o(this,t,!0,i)+"px")})}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(e.fn.removeData=function(t){return function(i){return arguments.length?t.call(this,e.camelCase(i)):t.call(this)}}(e.fn.removeData)),e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),e.support.selectstart="onselectstart"in document.createElement("div"),e.fn.extend({disableSelection:function(){return this.bind((e.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(e){e.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),e.extend(e.ui,{plugin:{add:function(t,i,n){var o,s=e.ui[t].prototype;for(o in n)s.plugins[o]=s.plugins[o]||[],s.plugins[o].push([i,n[o]])},call:function(e,t,i){var n,o=e.plugins[t];if(o&&e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType)for(n=0;n<o.length;n++)e.options[o[n][0]]&&o[n][1].apply(e.element,i)}},hasScroll:function(t,i){if("hidden"===e(t).css("overflow"))return!1;var n=i&&"left"===i?"scrollLeft":"scrollTop",o=!1;return t[n]>0?!0:(t[n]=1,o=t[n]>0,t[n]=0,o)}})}(t),function(e,t){var i=0,n=Array.prototype.slice,o=e.cleanData;e.cleanData=function(t){for(var i,n=0;null!=(i=t[n]);n++)try{e(i).triggerHandler("remove")}catch(s){}o(t)},e.widget=function(t,i,n){var o,s,r,a,l={},c=t.split(".")[0];t=t.split(".")[1],o=c+"-"+t,n||(n=i,i=e.Widget),e.expr[":"][o.toLowerCase()]=function(t){return!!e.data(t,o)},e[c]=e[c]||{},s=e[c][t],r=e[c][t]=function(e,t){return this._createWidget?void(arguments.length&&this._createWidget(e,t)):new r(e,t)},e.extend(r,s,{version:n.version,_proto:e.extend({},n),_childConstructors:[]}),a=new i,a.options=e.widget.extend({},a.options),e.each(n,function(t,n){return e.isFunction(n)?void(l[t]=function(){var e=function(){return i.prototype[t].apply(this,arguments)},o=function(e){return i.prototype[t].apply(this,e)};return function(){var t,i=this._super,s=this._superApply;return this._super=e,this._superApply=o,t=n.apply(this,arguments),this._super=i,this._superApply=s,t}}()):void(l[t]=n)}),r.prototype=e.widget.extend(a,{widgetEventPrefix:s?a.widgetEventPrefix||t:t},l,{constructor:r,namespace:c,widgetName:t,widgetFullName:o}),s?(e.each(s._childConstructors,function(t,i){var n=i.prototype;e.widget(n.namespace+"."+n.widgetName,r,i._proto)}),delete s._childConstructors):i._childConstructors.push(r),e.widget.bridge(t,r)},e.widget.extend=function(i){for(var o,s,r=n.call(arguments,1),a=0,l=r.length;l>a;a++)for(o in r[a])s=r[a][o],r[a].hasOwnProperty(o)&&s!==t&&(i[o]=e.isPlainObject(s)?e.isPlainObject(i[o])?e.widget.extend({},i[o],s):e.widget.extend({},s):s);return i},e.widget.bridge=function(i,o){var s=o.prototype.widgetFullName||i;e.fn[i]=function(r){var a="string"==typeof r,l=n.call(arguments,1),c=this;return r=!a&&l.length?e.widget.extend.apply(null,[r].concat(l)):r,this.each(a?function(){var n,o=e.data(this,s);return o?e.isFunction(o[r])&&"_"!==r.charAt(0)?(n=o[r].apply(o,l),n!==o&&n!==t?(c=n&&n.jquery?c.pushStack(n.get()):n,!1):void 0):e.error("no such method '"+r+"' for "+i+" widget instance"):e.error("cannot call methods on "+i+" prior to initialization; attempted to call method '"+r+"'")}:function(){var t=e.data(this,s);t?t.option(r||{})._init():e.data(this,s,new o(r,this))}),c}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,n){n=e(n||this.defaultElement||this)[0],this.element=e(n),this.uuid=i++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this.bindings=e(),this.hoverable=e(),this.focusable=e(),n!==this&&(e.data(n,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===n&&this.destroy()}}),this.document=e(n.style?n.ownerDocument:n.document||n),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(i,n){var o,s,r,a=i;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof i)if(a={},o=i.split("."),i=o.shift(),o.length){for(s=a[i]=e.widget.extend({},this.options[i]),r=0;r<o.length-1;r++)s[o[r]]=s[o[r]]||{},s=s[o[r]];if(i=o.pop(),1===arguments.length)return s[i]===t?null:s[i];s[i]=n}else{if(1===arguments.length)return this.options[i]===t?null:this.options[i];a[i]=n}return this._setOptions(a),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!t).attr("aria-disabled",t),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(t,i,n){var o,s=this;"boolean"!=typeof t&&(n=i,i=t,t=!1),n?(i=o=e(i),this.bindings=this.bindings.add(i)):(n=i,i=this.element,o=this.widget()),e.each(n,function(n,r){function a(){return t||s.options.disabled!==!0&&!e(this).hasClass("ui-state-disabled")?("string"==typeof r?s[r]:r).apply(s,arguments):void 0}"string"!=typeof r&&(a.guid=r.guid=r.guid||a.guid||e.guid++);var l=n.match(/^(\w+)\s*(.*)$/),c=l[1]+s.eventNamespace,u=l[2];u?o.delegate(u,c,a):i.bind(c,a)})},_off:function(e,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(t).undelegate(t)},_delay:function(e,t){function i(){return("string"==typeof e?n[e]:e).apply(n,arguments)}var n=this;return setTimeout(i,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,i,n){var o,s,r=this.options[t];if(n=n||{},i=e.Event(i),i.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),i.target=this.element[0],s=i.originalEvent)for(o in s)o in i||(i[o]=s[o]);return this.element.trigger(i,n),!(e.isFunction(r)&&r.apply(this.element[0],[i].concat(n))===!1||i.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,i){e.Widget.prototype["_"+t]=function(n,o,s){"string"==typeof o&&(o={effect:o});var r,a=o?o===!0||"number"==typeof o?i:o.effect||i:t;o=o||{},"number"==typeof o&&(o={duration:o}),r=!e.isEmptyObject(o),o.complete=s,o.delay&&n.delay(o.delay),r&&e.effects&&e.effects.effect[a]?n[t](o):a!==t&&n[a]?n[a](o.duration,o.easing,s):n.queue(function(i){e(this)[t](),s&&s.call(n[0]),i()})}})}(t),function(e){var t=!1;e(document).mouseup(function(){t=!1}),e.widget("ui.mouse",{version:"@VERSION",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(i){return!0===e.data(i.target,t.widgetName+".preventClickEvent")?(e.removeData(i.target,t.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(i){if(!t){this._mouseStarted&&this._mouseUp(i),this._mouseDownEvent=i;var n=this,o=1===i.which,s="string"==typeof this.options.cancel&&i.target.nodeName?e(i.target).closest(this.options.cancel).length:!1;return o&&!s&&this._mouseCapture(i)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){n.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(i)&&this._mouseDelayMet(i)&&(this._mouseStarted=this._mouseStart(i)!==!1,!this._mouseStarted)?(i.preventDefault(),!0):(!0===e.data(i.target,this.widgetName+".preventClickEvent")&&e.removeData(i.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return n._mouseMove(e)},this._mouseUpDelegate=function(e){return n._mouseUp(e)},e(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),i.preventDefault(),t=!0,!0)):!0}},_mouseMove:function(t){return e.ui.ie&&(!document.documentMode||document.documentMode<9)&&!t.button?this._mouseUp(t):this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(t){return e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(t),function(e){e.widget("ui.draggable",e.ui.mouse,{version:"@VERSION",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"!==this.options.helper||/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy()
},_mouseCapture:function(t){var i=this.options;return this.helper||i.disabled||e(t.target).closest(".ui-resizable-handle").length>0?!1:(this.handle=this._getHandle(t),this.handle?(e(i.iframeFix===!0?"iframe":i.iframeFix).each(function(){e("<div class='ui-draggable-iframeFix' style='background: #fff;'></div>").css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(e(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(t){var i=this.options;return this.helper=this._createHelper(t),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offsetParent=this.helper.offsetParent(),this.offsetParentCssPosition=this.offsetParent.css("position"),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},this.offset.scroll=!1,e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),this._setContainment(),this._trigger("start",t)===!1?(this._clear(),!1):(this._cacheHelperProportions(),e.ui.ddmanager&&!i.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this._mouseDrag(t,!0),e.ui.ddmanager&&e.ui.ddmanager.dragStart(this,t),!0)},_mouseDrag:function(t,i){if("fixed"===this.offsetParentCssPosition&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),!i){var n=this._uiHash();if(this._trigger("drag",t,n)===!1)return this._mouseUp({}),!1;this.position=n.position}return this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var i=this,n=!1;return e.ui.ddmanager&&!this.options.dropBehaviour&&(n=e.ui.ddmanager.drop(this,t)),this.dropped&&(n=this.dropped,this.dropped=!1),"original"!==this.options.helper||e.contains(this.element[0].ownerDocument,this.element[0])?("invalid"===this.options.revert&&!n||"valid"===this.options.revert&&n||this.options.revert===!0||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,n)?e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){i._trigger("stop",t)!==!1&&i._clear()}):this._trigger("stop",t)!==!1&&this._clear(),!1):!1},_mouseUp:function(t){return e("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),e.ui.ddmanager&&e.ui.ddmanager.dragStop(this,t),e.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(t){return this.options.handle?!!e(t.target).closest(this.element.find(this.options.handle)).length:!0},_createHelper:function(t){var i=this.options,n=e.isFunction(i.helper)?e(i.helper.apply(this.element[0],[t])):"clone"===i.helper?this.element.clone().removeAttr("id"):this.element;return n.parents("body").length||n.appendTo("parent"===i.appendTo?this.element[0].parentNode:i.appendTo),n[0]===this.element[0]||/(fixed|absolute)/.test(n.css("position"))||n.css("position","absolute"),n},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){var t=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&e.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var e=this.element.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,i,n,o=this.options;return o.containment?"window"===o.containment?void(this.containment=[e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,e(window).scrollLeft()+e(window).width()-this.helperProportions.width-this.margins.left,e(window).scrollTop()+(e(window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):"document"===o.containment?void(this.containment=[0,0,e(document).width()-this.helperProportions.width-this.margins.left,(e(document).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):o.containment.constructor===Array?void(this.containment=o.containment):("parent"===o.containment&&(o.containment=this.helper[0].parentNode),i=e(o.containment),n=i[0],void(n&&(t="hidden"!==i.css("overflow"),this.containment=[(parseInt(i.css("borderLeftWidth"),10)||0)+(parseInt(i.css("paddingLeft"),10)||0),(parseInt(i.css("borderTopWidth"),10)||0)+(parseInt(i.css("paddingTop"),10)||0),(t?Math.max(n.scrollWidth,n.offsetWidth):n.offsetWidth)-(parseInt(i.css("borderRightWidth"),10)||0)-(parseInt(i.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(t?Math.max(n.scrollHeight,n.offsetHeight):n.offsetHeight)-(parseInt(i.css("borderBottomWidth"),10)||0)-(parseInt(i.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=i))):void(this.containment=null)},_convertPositionTo:function(t,i){i||(i=this.position);var n="absolute"===t?1:-1,o="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent;return this.offset.scroll||(this.offset.scroll={top:o.scrollTop(),left:o.scrollLeft()}),{top:i.top+this.offset.relative.top*n+this.offset.parent.top*n-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():this.offset.scroll.top)*n,left:i.left+this.offset.relative.left*n+this.offset.parent.left*n-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)*n}},_generatePosition:function(t){var i,n,o,s,r=this.options,a="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,l=t.pageX,c=t.pageY;return this.offset.scroll||(this.offset.scroll={top:a.scrollTop(),left:a.scrollLeft()}),this.originalPosition&&(this.containment&&(this.relative_container?(n=this.relative_container.offset(),i=[this.containment[0]+n.left,this.containment[1]+n.top,this.containment[2]+n.left,this.containment[3]+n.top]):i=this.containment,t.pageX-this.offset.click.left<i[0]&&(l=i[0]+this.offset.click.left),t.pageY-this.offset.click.top<i[1]&&(c=i[1]+this.offset.click.top),t.pageX-this.offset.click.left>i[2]&&(l=i[2]+this.offset.click.left),t.pageY-this.offset.click.top>i[3]&&(c=i[3]+this.offset.click.top)),r.grid&&(o=r.grid[1]?this.originalPageY+Math.round((c-this.originalPageY)/r.grid[1])*r.grid[1]:this.originalPageY,c=i?o-this.offset.click.top>=i[1]||o-this.offset.click.top>i[3]?o:o-this.offset.click.top>=i[1]?o-r.grid[1]:o+r.grid[1]:o,s=r.grid[0]?this.originalPageX+Math.round((l-this.originalPageX)/r.grid[0])*r.grid[0]:this.originalPageX,l=i?s-this.offset.click.left>=i[0]||s-this.offset.click.left>i[2]?s:s-this.offset.click.left>=i[0]?s-r.grid[0]:s+r.grid[0]:s)),{top:c-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():this.offset.scroll.top),left:l-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(t,i,n){return n=n||this._uiHash(),e.ui.plugin.call(this,t,[i,n]),"drag"===t&&(this.positionAbs=this._convertPositionTo("absolute")),e.Widget.prototype._trigger.call(this,t,i,n)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),e.ui.plugin.add("draggable","connectToSortable",{start:function(t,i){var n=e(this).data("ui-draggable"),o=n.options,s=e.extend({},i,{item:n.element});n.sortables=[],e(o.connectToSortable).each(function(){var i=e.data(this,"ui-sortable");i&&!i.options.disabled&&(n.sortables.push({instance:i,shouldRevert:i.options.revert}),i.refreshPositions(),i._trigger("activate",t,s))})},stop:function(t,i){var n=e(this).data("ui-draggable"),o=e.extend({},i,{item:n.element});e.each(n.sortables,function(){this.instance.isOver?(this.instance.isOver=0,n.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=this.shouldRevert),this.instance._mouseStop(t),this.instance.options.helper=this.instance.options._helper,"original"===n.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",t,o))})},drag:function(t,i){var n=e(this).data("ui-draggable"),o=this;e.each(n.sortables,function(){var s=!1,r=this;this.instance.positionAbs=n.positionAbs,this.instance.helperProportions=n.helperProportions,this.instance.offset.click=n.offset.click,this.instance._intersectsWith(this.instance.containerCache)&&(s=!0,e.each(n.sortables,function(){return this.instance.positionAbs=n.positionAbs,this.instance.helperProportions=n.helperProportions,this.instance.offset.click=n.offset.click,this!==r&&this.instance._intersectsWith(this.instance.containerCache)&&e.contains(r.instance.element[0],this.instance.element[0])&&(s=!1),s})),s?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=e(o).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return i.helper[0]},t.target=this.instance.currentItem[0],this.instance._mouseCapture(t,!0),this.instance._mouseStart(t,!0,!0),this.instance.offset.click.top=n.offset.click.top,this.instance.offset.click.left=n.offset.click.left,this.instance.offset.parent.left-=n.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=n.offset.parent.top-this.instance.offset.parent.top,n._trigger("toSortable",t),n.dropped=this.instance.element,n.currentItem=n.element,this.instance.fromOutside=n),this.instance.currentItem&&this.instance._mouseDrag(t)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",t,this.instance._uiHash(this.instance)),this.instance._mouseStop(t,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),n._trigger("fromSortable",t),n.dropped=!1)})}}),e.ui.plugin.add("draggable","cursor",{start:function(){var t=e("body"),i=e(this).data("ui-draggable").options;t.css("cursor")&&(i._cursor=t.css("cursor")),t.css("cursor",i.cursor)},stop:function(){var t=e(this).data("ui-draggable").options;t._cursor&&e("body").css("cursor",t._cursor)}}),e.ui.plugin.add("draggable","opacity",{start:function(t,i){var n=e(i.helper),o=e(this).data("ui-draggable").options;n.css("opacity")&&(o._opacity=n.css("opacity")),n.css("opacity",o.opacity)},stop:function(t,i){var n=e(this).data("ui-draggable").options;n._opacity&&e(i.helper).css("opacity",n._opacity)}}),e.ui.plugin.add("draggable","scroll",{start:function(){var t=e(this).data("ui-draggable");t.scrollParent[0]!==document&&"HTML"!==t.scrollParent[0].tagName&&(t.overflowOffset=t.scrollParent.offset())},drag:function(t){var i=e(this).data("ui-draggable"),n=i.options,o=!1;i.scrollParent[0]!==document&&"HTML"!==i.scrollParent[0].tagName?(n.axis&&"x"===n.axis||(i.overflowOffset.top+i.scrollParent[0].offsetHeight-t.pageY<n.scrollSensitivity?i.scrollParent[0].scrollTop=o=i.scrollParent[0].scrollTop+n.scrollSpeed:t.pageY-i.overflowOffset.top<n.scrollSensitivity&&(i.scrollParent[0].scrollTop=o=i.scrollParent[0].scrollTop-n.scrollSpeed)),n.axis&&"y"===n.axis||(i.overflowOffset.left+i.scrollParent[0].offsetWidth-t.pageX<n.scrollSensitivity?i.scrollParent[0].scrollLeft=o=i.scrollParent[0].scrollLeft+n.scrollSpeed:t.pageX-i.overflowOffset.left<n.scrollSensitivity&&(i.scrollParent[0].scrollLeft=o=i.scrollParent[0].scrollLeft-n.scrollSpeed))):(n.axis&&"x"===n.axis||(t.pageY-e(document).scrollTop()<n.scrollSensitivity?o=e(document).scrollTop(e(document).scrollTop()-n.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<n.scrollSensitivity&&(o=e(document).scrollTop(e(document).scrollTop()+n.scrollSpeed))),n.axis&&"y"===n.axis||(t.pageX-e(document).scrollLeft()<n.scrollSensitivity?o=e(document).scrollLeft(e(document).scrollLeft()-n.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<n.scrollSensitivity&&(o=e(document).scrollLeft(e(document).scrollLeft()+n.scrollSpeed)))),o!==!1&&e.ui.ddmanager&&!n.dropBehaviour&&e.ui.ddmanager.prepareOffsets(i,t)}}),e.ui.plugin.add("draggable","snap",{start:function(){var t=e(this).data("ui-draggable"),i=t.options;t.snapElements=[],e(i.snap.constructor!==String?i.snap.items||":data(ui-draggable)":i.snap).each(function(){var i=e(this),n=i.offset();this!==t.element[0]&&t.snapElements.push({item:this,width:i.outerWidth(),height:i.outerHeight(),top:n.top,left:n.left})})},drag:function(t,i){var n,o,s,r,a,l,c,u,d,h,p=e(this).data("ui-draggable"),f=p.options,m=f.snapTolerance,g=i.offset.left,v=g+p.helperProportions.width,_=i.offset.top,y=_+p.helperProportions.height;for(d=p.snapElements.length-1;d>=0;d--)a=p.snapElements[d].left,l=a+p.snapElements[d].width,c=p.snapElements[d].top,u=c+p.snapElements[d].height,a-m>v||g>l+m||c-m>y||_>u+m||!e.contains(p.snapElements[d].item.ownerDocument,p.snapElements[d].item)?(p.snapElements[d].snapping&&p.options.snap.release&&p.options.snap.release.call(p.element,t,e.extend(p._uiHash(),{snapItem:p.snapElements[d].item})),p.snapElements[d].snapping=!1):("inner"!==f.snapMode&&(n=Math.abs(c-y)<=m,o=Math.abs(u-_)<=m,s=Math.abs(a-v)<=m,r=Math.abs(l-g)<=m,n&&(i.position.top=p._convertPositionTo("relative",{top:c-p.helperProportions.height,left:0}).top-p.margins.top),o&&(i.position.top=p._convertPositionTo("relative",{top:u,left:0}).top-p.margins.top),s&&(i.position.left=p._convertPositionTo("relative",{top:0,left:a-p.helperProportions.width}).left-p.margins.left),r&&(i.position.left=p._convertPositionTo("relative",{top:0,left:l}).left-p.margins.left)),h=n||o||s||r,"outer"!==f.snapMode&&(n=Math.abs(c-_)<=m,o=Math.abs(u-y)<=m,s=Math.abs(a-g)<=m,r=Math.abs(l-v)<=m,n&&(i.position.top=p._convertPositionTo("relative",{top:c,left:0}).top-p.margins.top),o&&(i.position.top=p._convertPositionTo("relative",{top:u-p.helperProportions.height,left:0}).top-p.margins.top),s&&(i.position.left=p._convertPositionTo("relative",{top:0,left:a}).left-p.margins.left),r&&(i.position.left=p._convertPositionTo("relative",{top:0,left:l-p.helperProportions.width}).left-p.margins.left)),!p.snapElements[d].snapping&&(n||o||s||r||h)&&p.options.snap.snap&&p.options.snap.snap.call(p.element,t,e.extend(p._uiHash(),{snapItem:p.snapElements[d].item})),p.snapElements[d].snapping=n||o||s||r||h)}}),e.ui.plugin.add("draggable","stack",{start:function(){var t,i=this.data("ui-draggable").options,n=e.makeArray(e(i.stack)).sort(function(t,i){return(parseInt(e(t).css("zIndex"),10)||0)-(parseInt(e(i).css("zIndex"),10)||0)});n.length&&(t=parseInt(e(n[0]).css("zIndex"),10)||0,e(n).each(function(i){e(this).css("zIndex",t+i)}),this.css("zIndex",t+n.length))}}),e.ui.plugin.add("draggable","zIndex",{start:function(t,i){var n=e(i.helper),o=e(this).data("ui-draggable").options;n.css("zIndex")&&(o._zIndex=n.css("zIndex")),n.css("zIndex",o.zIndex)},stop:function(t,i){var n=e(this).data("ui-draggable").options;n._zIndex&&e(i.helper).css("zIndex",n._zIndex)}})}(t),function(e){function t(e,t,i){return e>t&&t+i>e}e.widget("ui.droppable",{version:"@VERSION",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var t,i=this.options,n=i.accept;this.isover=!1,this.isout=!0,this.accept=e.isFunction(n)?n:function(e){return e.is(n)},this.proportions=function(){return arguments.length?void(t=arguments[0]):t?t:t={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight}},e.ui.ddmanager.droppables[i.scope]=e.ui.ddmanager.droppables[i.scope]||[],e.ui.ddmanager.droppables[i.scope].push(this),i.addClasses&&this.element.addClass("ui-droppable")},_destroy:function(){for(var t=0,i=e.ui.ddmanager.droppables[this.options.scope];t<i.length;t++)i[t]===this&&i.splice(t,1);this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(t,i){"accept"===t&&(this.accept=e.isFunction(i)?i:function(e){return e.is(i)}),e.Widget.prototype._setOption.apply(this,arguments)},_activate:function(t){var i=e.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),i&&this._trigger("activate",t,this.ui(i))},_deactivate:function(t){var i=e.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),i&&this._trigger("deactivate",t,this.ui(i))},_over:function(t){var i=e.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!==this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",t,this.ui(i)))},_out:function(t){var i=e.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!==this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",t,this.ui(i)))},_drop:function(t,i){var n=i||e.ui.ddmanager.current,o=!1;return n&&(n.currentItem||n.element)[0]!==this.element[0]?(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var t=e.data(this,"ui-droppable");return t.options.greedy&&!t.options.disabled&&t.options.scope===n.options.scope&&t.accept.call(t.element[0],n.currentItem||n.element)&&e.ui.intersect(n,e.extend(t,{offset:t.element.offset()}),t.options.tolerance)?(o=!0,!1):void 0}),o?!1:this.accept.call(this.element[0],n.currentItem||n.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",t,this.ui(n)),this.element):!1):!1},ui:function(e){return{draggable:e.currentItem||e.element,helper:e.helper,position:e.position,offset:e.positionAbs}}}),e.ui.intersect=function(e,i,n){if(!i.offset)return!1;var o,s,r=(e.positionAbs||e.position.absolute).left,a=(e.positionAbs||e.position.absolute).top,l=r+e.helperProportions.width,c=a+e.helperProportions.height,u=i.offset.left,d=i.offset.top,h=u+i.proportions().width,p=d+i.proportions().height;switch(n){case"fit":return r>=u&&h>=l&&a>=d&&p>=c;case"intersect":return u<r+e.helperProportions.width/2&&l-e.helperProportions.width/2<h&&d<a+e.helperProportions.height/2&&c-e.helperProportions.height/2<p;case"pointer":return o=(e.positionAbs||e.position.absolute).left+(e.clickOffset||e.offset.click).left,s=(e.positionAbs||e.position.absolute).top+(e.clickOffset||e.offset.click).top,t(s,d,i.proportions().height)&&t(o,u,i.proportions().width);case"touch":return(a>=d&&p>=a||c>=d&&p>=c||d>a&&c>p)&&(r>=u&&h>=r||l>=u&&h>=l||u>r&&l>h);default:return!1}},e.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(t,i){var n,o,s=e.ui.ddmanager.droppables[t.options.scope]||[],r=i?i.type:null,a=(t.currentItem||t.element).find(":data(ui-droppable)").addBack();e:for(n=0;n<s.length;n++)if(!(s[n].options.disabled||t&&!s[n].accept.call(s[n].element[0],t.currentItem||t.element))){for(o=0;o<a.length;o++)if(a[o]===s[n].element[0]){s[n].proportions().height=0;continue e}s[n].visible="none"!==s[n].element.css("display"),s[n].visible&&("mousedown"===r&&s[n]._activate.call(s[n],i),s[n].offset=s[n].element.offset(),s[n].proportions({width:s[n].element[0].offsetWidth,height:s[n].element[0].offsetHeight}))}},drop:function(t,i){var n=!1;return e.each((e.ui.ddmanager.droppables[t.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&e.ui.intersect(t,this,this.options.tolerance)&&(n=this._drop.call(this,i)||n),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],t.currentItem||t.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,i)))}),n},dragStart:function(t,i){t.element.parentsUntil("body").bind("scroll.droppable",function(){t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,i)})},drag:function(t,i){t.options.refreshPositions&&e.ui.ddmanager.prepareOffsets(t,i),e.each(e.ui.ddmanager.droppables[t.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var n,o,s,r=e.ui.intersect(t,this,this.options.tolerance),a=!r&&this.isover?"isout":r&&!this.isover?"isover":null;a&&(this.options.greedy&&(o=this.options.scope,s=this.element.parents(":data(ui-droppable)").filter(function(){return e.data(this,"ui-droppable").options.scope===o}),s.length&&(n=e.data(s[0],"ui-droppable"),n.greedyChild="isover"===a)),n&&"isover"===a&&(n.isover=!1,n.isout=!0,n._out.call(n,i)),this[a]=!0,this["isout"===a?"isover":"isout"]=!1,this["isover"===a?"_over":"_out"].call(this,i),n&&"isout"===a&&(n.isout=!1,n.isover=!0,n._over.call(n,i)))}})},dragStop:function(t,i){t.element.parentsUntil("body").unbind("scroll.droppable"),t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,i)}}}(t),function(e){function t(e){return parseInt(e,10)||0}function i(e){return!isNaN(parseInt(e,10))}e.widget("ui.resizable",e.ui.mouse,{version:"@VERSION",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_create:function(){function t(e){return a._mouseDown(e)}var i,n,o,s,r,a=this,l=this.options;if(this.element.addClass("ui-resizable"),e.extend(this,{_aspectRatio:!!l.aspectRatio,aspectRatio:l.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:l.helper||l.ghost||l.animate?l.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(e("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.data("ui-resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=l.handles||(e(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),i=this.handles.split(","),this.handles={},n=0;n<i.length;n++)o=e.trim(i[n]),r="ui-resizable-"+o,s=e("<div class='ui-resizable-handle "+r+"'></div>"),s.css({zIndex:l.zIndex}),"se"===o&&s.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[o]=".ui-resizable-"+o,this.element.append(s);this._renderAxis=function(t){var i,n,o,s;t=t||this.element;for(i in this.handles)this.handles[i].constructor===String&&(this.handles[i]=e(this.handles[i]+":last",this.element).show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)&&(n=e(this.handles[i],this.element),s=/sw|ne|nw|se|n|s/.test(i)?n.outerHeight():n.outerWidth(),o=["padding",/ne|nw|n/.test(i)?"Top":/se|sw|s/.test(i)?"Bottom":/^e$/.test(i)?"Right":"Left"].join(""),t.css(o,s),this._proportionallyResize()),e(this.handles[i]).length},this._renderAxis(this.element),this._handles=e(".ui-resizable-handle",this.element);for(n in this.handles)this._handles=this._handles.add(this.handles[n]);if(this._handles.disableSelection(),this._handles.mouseover(function(){a.resizing||(this.className&&(s=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),a.axis=s&&s[1]?s[1]:"se")}),l.autoHide&&(this._handles.hide(),e(this.element).addClass("ui-resizable-autohide").mouseenter(function(){l.disabled||(e(this).removeClass("ui-resizable-autohide"),a._handles.show())}).mouseleave(function(){l.disabled||a.resizing||(e(this).addClass("ui-resizable-autohide"),a._handles.hide())})),this._mouseInit(),l.handles.constructor!==String)for(n in l.handles)o=l.handles[n],o instanceof e&&o.bind("mousedown."+this.widgetName,t)},_destroy:function(){this._mouseDestroy();var t,i=function(t){e(t).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(i(this.element),t=this.element,this.originalElement.css({position:t.css("position"),width:t.outerWidth(),height:t.outerHeight(),top:t.css("top"),left:t.css("left")}).insertAfter(t),t.remove()),this.originalElement.css("resize",this.originalResizeStyle),i(this.originalElement),this},_mouseCapture:function(t){var i,n,o=!1;for(i in this.handles)n=e(this.handles[i])[0],(n===t.target||e.contains(n,t.target))&&(o=!0);return!this.options.disabled&&o},_mouseStart:function(i){var n,o,s,r=this.options,a=this.element.position(),l=this.element;return this.resizing=!0,/absolute/.test(l.css("position"))?l.css({position:"absolute",top:l.css("top"),left:l.css("left")}):l.is(".ui-draggable")&&l.css({position:"absolute",top:a.top,left:a.left}),this._renderProxy(),n=t(this.helper.css("left")),o=t(this.helper.css("top")),r.containment&&(n+=e(r.containment).scrollLeft()||0,o+=e(r.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:n,top:o},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:l.width(),height:l.height()},this.originalSize=this._helper?{width:l.outerWidth(),height:l.outerHeight()}:{width:l.width(),height:l.height()},this.originalPosition={left:n,top:o},this.sizeDiff={width:l.outerWidth()-l.width(),height:l.outerHeight()-l.height()},this.originalMousePosition={left:i.pageX,top:i.pageY},this.aspectRatio="number"==typeof r.aspectRatio?r.aspectRatio:this.originalSize.width/this.originalSize.height||1,s=e(".ui-resizable-"+this.axis).css("cursor"),e("body").css("cursor","auto"===s?this.axis+"-resize":s),l.addClass("ui-resizable-resizing"),this._propagate("start",i),!0},_mouseDrag:function(t){var i,n=this.helper,o={},s=this.originalMousePosition,r=this.axis,a=this.position.top,l=this.position.left,c=this.size.width,u=this.size.height,d=t.pageX-s.left||0,h=t.pageY-s.top||0,p=this._change[r];return p?(i=p.apply(this,[t,d,h]),this._updateVirtualBoundaries(t.shiftKey),(this._aspectRatio||t.shiftKey)&&(i=this._updateRatio(i,t)),i=this._respectSize(i,t),this._updateCache(i),this._propagate("resize",t),this.position.top!==a&&(o.top=this.position.top+"px"),this.position.left!==l&&(o.left=this.position.left+"px"),this.size.width!==c&&(o.width=this.size.width+"px"),this.size.height!==u&&(o.height=this.size.height+"px"),n.css(o),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),e.isEmptyObject(o)||this._trigger("resize",t,this.ui()),!1):!1},_mouseStop:function(t){this.resizing=!1;var i,n,o,s,r,a,l,c=this.options,u=this;return this._helper&&(i=this._proportionallyResizeElements,n=i.length&&/textarea/i.test(i[0].nodeName),o=n&&e.ui.hasScroll(i[0],"left")?0:u.sizeDiff.height,s=n?0:u.sizeDiff.width,r={width:u.helper.width()-s,height:u.helper.height()-o},a=parseInt(u.element.css("left"),10)+(u.position.left-u.originalPosition.left)||null,l=parseInt(u.element.css("top"),10)+(u.position.top-u.originalPosition.top)||null,c.animate||this.element.css(e.extend(r,{top:l,left:a})),u.helper.height(u.size.height),u.helper.width(u.size.width),this._helper&&!c.animate&&this._proportionallyResize()),e("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",t),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(e){var t,n,o,s,r,a=this.options;r={minWidth:i(a.minWidth)?a.minWidth:0,maxWidth:i(a.maxWidth)?a.maxWidth:1/0,minHeight:i(a.minHeight)?a.minHeight:0,maxHeight:i(a.maxHeight)?a.maxHeight:1/0},(this._aspectRatio||e)&&(t=r.minHeight*this.aspectRatio,o=r.minWidth/this.aspectRatio,n=r.maxHeight*this.aspectRatio,s=r.maxWidth/this.aspectRatio,t>r.minWidth&&(r.minWidth=t),o>r.minHeight&&(r.minHeight=o),n<r.maxWidth&&(r.maxWidth=n),s<r.maxHeight&&(r.maxHeight=s)),this._vBoundaries=r},_updateCache:function(e){this.offset=this.helper.offset(),i(e.left)&&(this.position.left=e.left),i(e.top)&&(this.position.top=e.top),i(e.height)&&(this.size.height=e.height),i(e.width)&&(this.size.width=e.width)},_updateRatio:function(e){var t=this.position,n=this.size,o=this.axis;return i(e.height)?e.width=e.height*this.aspectRatio:i(e.width)&&(e.height=e.width/this.aspectRatio),"sw"===o&&(e.left=t.left+(n.width-e.width),e.top=null),"nw"===o&&(e.top=t.top+(n.height-e.height),e.left=t.left+(n.width-e.width)),e},_respectSize:function(e){var t=this._vBoundaries,n=this.axis,o=i(e.width)&&t.maxWidth&&t.maxWidth<e.width,s=i(e.height)&&t.maxHeight&&t.maxHeight<e.height,r=i(e.width)&&t.minWidth&&t.minWidth>e.width,a=i(e.height)&&t.minHeight&&t.minHeight>e.height,l=this.originalPosition.left+this.originalSize.width,c=this.position.top+this.size.height,u=/sw|nw|w/.test(n),d=/nw|ne|n/.test(n);
return r&&(e.width=t.minWidth),a&&(e.height=t.minHeight),o&&(e.width=t.maxWidth),s&&(e.height=t.maxHeight),r&&u&&(e.left=l-t.minWidth),o&&u&&(e.left=l-t.maxWidth),a&&d&&(e.top=c-t.minHeight),s&&d&&(e.top=c-t.maxHeight),e.width||e.height||e.left||!e.top?e.width||e.height||e.top||!e.left||(e.left=null):e.top=null,e},_proportionallyResize:function(){if(this._proportionallyResizeElements.length){var e,t,i,n,o,s=this.helper||this.element;for(e=0;e<this._proportionallyResizeElements.length;e++){if(o=this._proportionallyResizeElements[e],!this.borderDif)for(this.borderDif=[],i=[o.css("borderTopWidth"),o.css("borderRightWidth"),o.css("borderBottomWidth"),o.css("borderLeftWidth")],n=[o.css("paddingTop"),o.css("paddingRight"),o.css("paddingBottom"),o.css("paddingLeft")],t=0;t<i.length;t++)this.borderDif[t]=(parseInt(i[t],10)||0)+(parseInt(n[t],10)||0);o.css({height:s.height()-this.borderDif[0]-this.borderDif[2]||0,width:s.width()-this.borderDif[1]-this.borderDif[3]||0})}}},_renderProxy:function(){var t=this.element,i=this.options;this.elementOffset=t.offset(),this._helper?(this.helper=this.helper||e("<div style='overflow:hidden;'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++i.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(e,t){return{width:this.originalSize.width+t}},w:function(e,t){var i=this.originalSize,n=this.originalPosition;return{left:n.left+t,width:i.width-t}},n:function(e,t,i){var n=this.originalSize,o=this.originalPosition;return{top:o.top+i,height:n.height-i}},s:function(e,t,i){return{height:this.originalSize.height+i}},se:function(t,i,n){return e.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,i,n]))},sw:function(t,i,n){return e.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,i,n]))},ne:function(t,i,n){return e.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,i,n]))},nw:function(t,i,n){return e.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,i,n]))}},_propagate:function(t,i){e.ui.plugin.call(this,t,[i,this.ui()]),"resize"!==t&&this._trigger(t,i,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),e.ui.plugin.add("resizable","animate",{stop:function(t){var i=e(this).data("ui-resizable"),n=i.options,o=i._proportionallyResizeElements,s=o.length&&/textarea/i.test(o[0].nodeName),r=s&&e.ui.hasScroll(o[0],"left")?0:i.sizeDiff.height,a=s?0:i.sizeDiff.width,l={width:i.size.width-a,height:i.size.height-r},c=parseInt(i.element.css("left"),10)+(i.position.left-i.originalPosition.left)||null,u=parseInt(i.element.css("top"),10)+(i.position.top-i.originalPosition.top)||null;i.element.animate(e.extend(l,u&&c?{top:u,left:c}:{}),{duration:n.animateDuration,easing:n.animateEasing,step:function(){var n={width:parseInt(i.element.css("width"),10),height:parseInt(i.element.css("height"),10),top:parseInt(i.element.css("top"),10),left:parseInt(i.element.css("left"),10)};o&&o.length&&e(o[0]).css({width:n.width,height:n.height}),i._updateCache(n),i._propagate("resize",t)}})}}),e.ui.plugin.add("resizable","containment",{start:function(){var i,n,o,s,r,a,l,c=e(this).data("ui-resizable"),u=c.options,d=c.element,h=u.containment,p=h instanceof e?h.get(0):/parent/.test(h)?d.parent().get(0):h;p&&(c.containerElement=e(p),/document/.test(h)||h===document?(c.containerOffset={left:0,top:0},c.containerPosition={left:0,top:0},c.parentData={element:e(document),left:0,top:0,width:e(document).width(),height:e(document).height()||document.body.parentNode.scrollHeight}):(i=e(p),n=[],e(["Top","Right","Left","Bottom"]).each(function(e,o){n[e]=t(i.css("padding"+o))}),c.containerOffset=i.offset(),c.containerPosition=i.position(),c.containerSize={height:i.innerHeight()-n[3],width:i.innerWidth()-n[1]},o=c.containerOffset,s=c.containerSize.height,r=c.containerSize.width,a=e.ui.hasScroll(p,"left")?p.scrollWidth:r,l=e.ui.hasScroll(p)?p.scrollHeight:s,c.parentData={element:p,left:o.left,top:o.top,width:a,height:l}))},resize:function(t){var i,n,o,s,r=e(this).data("ui-resizable"),a=r.options,l=r.containerOffset,c=r.position,u=r._aspectRatio||t.shiftKey,d={top:0,left:0},h=r.containerElement;h[0]!==document&&/static/.test(h.css("position"))&&(d=l),c.left<(r._helper?l.left:0)&&(r.size.width=r.size.width+(r._helper?r.position.left-l.left:r.position.left-d.left),u&&(r.size.height=r.size.width/r.aspectRatio),r.position.left=a.helper?l.left:0),c.top<(r._helper?l.top:0)&&(r.size.height=r.size.height+(r._helper?r.position.top-l.top:r.position.top),u&&(r.size.width=r.size.height*r.aspectRatio),r.position.top=r._helper?l.top:0),r.offset.left=r.parentData.left+r.position.left,r.offset.top=r.parentData.top+r.position.top,i=Math.abs((r._helper?r.offset.left-d.left:r.offset.left-d.left)+r.sizeDiff.width),n=Math.abs((r._helper?r.offset.top-d.top:r.offset.top-l.top)+r.sizeDiff.height),o=r.containerElement.get(0)===r.element.parent().get(0),s=/relative|absolute/.test(r.containerElement.css("position")),o&&s&&(i-=Math.abs(r.parentData.left)),i+r.size.width>=r.parentData.width&&(r.size.width=r.parentData.width-i,u&&(r.size.height=r.size.width/r.aspectRatio)),n+r.size.height>=r.parentData.height&&(r.size.height=r.parentData.height-n,u&&(r.size.width=r.size.height*r.aspectRatio))},stop:function(){var t=e(this).data("ui-resizable"),i=t.options,n=t.containerOffset,o=t.containerPosition,s=t.containerElement,r=e(t.helper),a=r.offset(),l=r.outerWidth()-t.sizeDiff.width,c=r.outerHeight()-t.sizeDiff.height;t._helper&&!i.animate&&/relative/.test(s.css("position"))&&e(this).css({left:a.left-o.left-n.left,width:l,height:c}),t._helper&&!i.animate&&/static/.test(s.css("position"))&&e(this).css({left:a.left-o.left-n.left,width:l,height:c})}}),e.ui.plugin.add("resizable","alsoResize",{start:function(){var t=e(this).data("ui-resizable"),i=t.options,n=function(t){e(t).each(function(){var t=e(this);t.data("ui-resizable-alsoresize",{width:parseInt(t.width(),10),height:parseInt(t.height(),10),left:parseInt(t.css("left"),10),top:parseInt(t.css("top"),10)})})};"object"!=typeof i.alsoResize||i.alsoResize.parentNode?n(i.alsoResize):i.alsoResize.length?(i.alsoResize=i.alsoResize[0],n(i.alsoResize)):e.each(i.alsoResize,function(e){n(e)})},resize:function(t,i){var n=e(this).data("ui-resizable"),o=n.options,s=n.originalSize,r=n.originalPosition,a={height:n.size.height-s.height||0,width:n.size.width-s.width||0,top:n.position.top-r.top||0,left:n.position.left-r.left||0},l=function(t,n){e(t).each(function(){var t=e(this),o=e(this).data("ui-resizable-alsoresize"),s={},r=n&&n.length?n:t.parents(i.originalElement[0]).length?["width","height"]:["width","height","top","left"];e.each(r,function(e,t){var i=(o[t]||0)+(a[t]||0);i&&i>=0&&(s[t]=i||null)}),t.css(s)})};"object"!=typeof o.alsoResize||o.alsoResize.nodeType?l(o.alsoResize):e.each(o.alsoResize,function(e,t){l(e,t)})},stop:function(){e(this).removeData("resizable-alsoresize")}}),e.ui.plugin.add("resizable","ghost",{start:function(){var t=e(this).data("ui-resizable"),i=t.options,n=t.size;t.ghost=t.originalElement.clone(),t.ghost.css({opacity:.25,display:"block",position:"relative",height:n.height,width:n.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof i.ghost?i.ghost:""),t.ghost.appendTo(t.helper)},resize:function(){var t=e(this).data("ui-resizable");t.ghost&&t.ghost.css({position:"relative",height:t.size.height,width:t.size.width})},stop:function(){var t=e(this).data("ui-resizable");t.ghost&&t.helper&&t.helper.get(0).removeChild(t.ghost.get(0))}}),e.ui.plugin.add("resizable","grid",{resize:function(){var t=e(this).data("ui-resizable"),i=t.options,n=t.size,o=t.originalSize,s=t.originalPosition,r=t.axis,a="number"==typeof i.grid?[i.grid,i.grid]:i.grid,l=a[0]||1,c=a[1]||1,u=Math.round((n.width-o.width)/l)*l,d=Math.round((n.height-o.height)/c)*c,h=o.width+u,p=o.height+d,f=i.maxWidth&&i.maxWidth<h,m=i.maxHeight&&i.maxHeight<p,g=i.minWidth&&i.minWidth>h,v=i.minHeight&&i.minHeight>p;i.grid=a,g&&(h+=l),v&&(p+=c),f&&(h-=l),m&&(p-=c),/^(se|s|e)$/.test(r)?(t.size.width=h,t.size.height=p):/^(ne)$/.test(r)?(t.size.width=h,t.size.height=p,t.position.top=s.top-d):/^(sw)$/.test(r)?(t.size.width=h,t.size.height=p,t.position.left=s.left-u):(p-c>0?(t.size.height=p,t.position.top=s.top-d):(t.size.height=c,t.position.top=s.top+o.height-c),h-l>0?(t.size.width=h,t.position.left=s.left-u):(t.size.width=l,t.position.left=s.left+o.width-l))}})}(t),function(e){e.widget("ui.selectable",e.ui.mouse,{version:"@VERSION",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var t,i=this;this.element.addClass("ui-selectable"),this.dragged=!1,this.refresh=function(){t=e(i.options.filter,i.element[0]),t.addClass("ui-selectee"),t.each(function(){var t=e(this),i=t.offset();e.data(this,"selectable-item",{element:this,$element:t,left:i.left,top:i.top,right:i.left+t.outerWidth(),bottom:i.top+t.outerHeight(),startselected:!1,selected:t.hasClass("ui-selected"),selecting:t.hasClass("ui-selecting"),unselecting:t.hasClass("ui-unselecting")})})},this.refresh(),this.selectees=t.addClass("ui-selectee"),this._mouseInit(),this.helper=e("<div class='ui-selectable-helper'></div>")},_destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled"),this._mouseDestroy()},_mouseStart:function(t){var i=this,n=this.options;this.opos=[t.pageX,t.pageY],this.options.disabled||(this.selectees=e(n.filter,this.element[0]),this._trigger("start",t),e(n.appendTo).append(this.helper),this.helper.css({left:t.pageX,top:t.pageY,width:0,height:0}),n.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var n=e.data(this,"selectable-item");n.startselected=!0,t.metaKey||t.ctrlKey||(n.$element.removeClass("ui-selected"),n.selected=!1,n.$element.addClass("ui-unselecting"),n.unselecting=!0,i._trigger("unselecting",t,{unselecting:n.element}))}),e(t.target).parents().addBack().each(function(){var n,o=e.data(this,"selectable-item");return o?(n=!t.metaKey&&!t.ctrlKey||!o.$element.hasClass("ui-selected"),o.$element.removeClass(n?"ui-unselecting":"ui-selected").addClass(n?"ui-selecting":"ui-unselecting"),o.unselecting=!n,o.selecting=n,o.selected=n,n?i._trigger("selecting",t,{selecting:o.element}):i._trigger("unselecting",t,{unselecting:o.element}),!1):void 0}))},_mouseDrag:function(t){if(this.dragged=!0,!this.options.disabled){var i,n=this,o=this.options,s=this.opos[0],r=this.opos[1],a=t.pageX,l=t.pageY;return s>a&&(i=a,a=s,s=i),r>l&&(i=l,l=r,r=i),this.helper.css({left:s,top:r,width:a-s,height:l-r}),this.selectees.each(function(){var i=e.data(this,"selectable-item"),c=!1;i&&i.element!==n.element[0]&&("touch"===o.tolerance?c=!(i.left>a||i.right<s||i.top>l||i.bottom<r):"fit"===o.tolerance&&(c=i.left>s&&i.right<a&&i.top>r&&i.bottom<l),c?(i.selected&&(i.$element.removeClass("ui-selected"),i.selected=!1),i.unselecting&&(i.$element.removeClass("ui-unselecting"),i.unselecting=!1),i.selecting||(i.$element.addClass("ui-selecting"),i.selecting=!0,n._trigger("selecting",t,{selecting:i.element}))):(i.selecting&&((t.metaKey||t.ctrlKey)&&i.startselected?(i.$element.removeClass("ui-selecting"),i.selecting=!1,i.$element.addClass("ui-selected"),i.selected=!0):(i.$element.removeClass("ui-selecting"),i.selecting=!1,i.startselected&&(i.$element.addClass("ui-unselecting"),i.unselecting=!0),n._trigger("unselecting",t,{unselecting:i.element}))),i.selected&&(t.metaKey||t.ctrlKey||i.startselected||(i.$element.removeClass("ui-selected"),i.selected=!1,i.$element.addClass("ui-unselecting"),i.unselecting=!0,n._trigger("unselecting",t,{unselecting:i.element})))))}),!1}},_mouseStop:function(t){var i=this;return this.dragged=!1,e(".ui-unselecting",this.element[0]).each(function(){var n=e.data(this,"selectable-item");n.$element.removeClass("ui-unselecting"),n.unselecting=!1,n.startselected=!1,i._trigger("unselected",t,{unselected:n.element})}),e(".ui-selecting",this.element[0]).each(function(){var n=e.data(this,"selectable-item");n.$element.removeClass("ui-selecting").addClass("ui-selected"),n.selecting=!1,n.selected=!0,n.startselected=!0,i._trigger("selected",t,{selected:n.element})}),this._trigger("stop",t),this.helper.remove(),!1}})}(t),function(e){function t(e,t,i){return e>t&&t+i>e}function i(e){return/left|right/.test(e.css("float"))||/inline|table-cell/.test(e.css("display"))}e.widget("ui.sortable",e.ui.mouse,{version:"@VERSION",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_create:function(){var e=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=this.items.length?"x"===e.axis||i(this.items[0].item):!1,this.offset=this.element.offset(),this._mouseInit(),this.ready=!0},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var e=this.items.length-1;e>=0;e--)this.items[e].item.removeData(this.widgetName+"-item");return this},_setOption:function(t,i){"disabled"===t?(this.options[t]=i,this.widget().toggleClass("ui-sortable-disabled",!!i)):e.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(t,i){var n=null,o=!1,s=this;return this.reverting?!1:this.options.disabled||"static"===this.options.type?!1:(this._refreshItems(t),e(t.target).parents().each(function(){return e.data(this,s.widgetName+"-item")===s?(n=e(this),!1):void 0}),e.data(t.target,s.widgetName+"-item")===s&&(n=e(t.target)),n&&(!this.options.handle||i||(e(this.options.handle,n).find("*").addBack().each(function(){this===t.target&&(o=!0)}),o))?(this.currentItem=n,this._removeCurrentsFromItems(),!0):!1)},_mouseStart:function(t,i,n){var o,s,r=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,r.cursorAt&&this._adjustOffsetFromHelper(r.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),r.containment&&this._setContainment(),r.cursor&&"auto"!==r.cursor&&(s=this.document.find("body"),this.storedCursor=s.css("cursor"),s.css("cursor",r.cursor),this.storedStylesheet=e("<style>*{ cursor: "+r.cursor+" !important; }</style>").appendTo(s)),r.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",r.opacity)),r.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",r.zIndex)),this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!n)for(o=this.containers.length-1;o>=0;o--)this.containers[o]._trigger("activate",t,this._uiHash(this));return e.ui.ddmanager&&(e.ui.ddmanager.current=this),e.ui.ddmanager&&!r.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){var i,n,o,s,r=this.options,a=!1;for(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<r.scrollSensitivity?this.scrollParent[0].scrollTop=a=this.scrollParent[0].scrollTop+r.scrollSpeed:t.pageY-this.overflowOffset.top<r.scrollSensitivity&&(this.scrollParent[0].scrollTop=a=this.scrollParent[0].scrollTop-r.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<r.scrollSensitivity?this.scrollParent[0].scrollLeft=a=this.scrollParent[0].scrollLeft+r.scrollSpeed:t.pageX-this.overflowOffset.left<r.scrollSensitivity&&(this.scrollParent[0].scrollLeft=a=this.scrollParent[0].scrollLeft-r.scrollSpeed)):(t.pageY-e(document).scrollTop()<r.scrollSensitivity?a=e(document).scrollTop(e(document).scrollTop()-r.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<r.scrollSensitivity&&(a=e(document).scrollTop(e(document).scrollTop()+r.scrollSpeed)),t.pageX-e(document).scrollLeft()<r.scrollSensitivity?a=e(document).scrollLeft(e(document).scrollLeft()-r.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<r.scrollSensitivity&&(a=e(document).scrollLeft(e(document).scrollLeft()+r.scrollSpeed))),a!==!1&&e.ui.ddmanager&&!r.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),i=this.items.length-1;i>=0;i--)if(n=this.items[i],o=n.item[0],s=this._intersectsWithPointer(n),s&&n.instance===this.currentContainer&&o!==this.currentItem[0]&&this.placeholder[1===s?"next":"prev"]()[0]!==o&&!e.contains(this.placeholder[0],o)&&("semi-dynamic"===this.options.type?!e.contains(this.element[0],o):!0)){if(this.direction=1===s?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(n))break;this._rearrange(t,n),this._trigger("change",t,this._uiHash());break}return this._contactContainers(t),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,i){if(t){if(e.ui.ddmanager&&!this.options.dropBehaviour&&e.ui.ddmanager.drop(this,t),this.options.revert){var n=this,o=this.placeholder.offset(),s=this.options.axis,r={};s&&"x"!==s||(r.left=o.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollLeft)),s&&"y"!==s||(r.top=o.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,e(this.helper).animate(r,parseInt(this.options.revert,10)||500,function(){n._clear(t)})}else this._clear(t,i);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var t=this.containers.length-1;t>=0;t--)this.containers[t]._trigger("deactivate",null,this._uiHash(this)),this.containers[t].containerCache.over&&(this.containers[t]._trigger("out",null,this._uiHash(this)),this.containers[t].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),e.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?e(this.domPosition.prev).after(this.currentItem):e(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(t){var i=this._getItemsAsjQuery(t&&t.connected),n=[];return t=t||{},e(i).each(function(){var i=(e(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[\-=_](.+)/);i&&n.push((t.key||i[1]+"[]")+"="+(t.key&&t.expression?i[1]:i[2]))}),!n.length&&t.key&&n.push(t.key+"="),n.join("&")},toArray:function(t){var i=this._getItemsAsjQuery(t&&t.connected),n=[];return t=t||{},i.each(function(){n.push(e(t.item||this).attr(t.attribute||"id")||"")}),n},_intersectsWith:function(e){var t=this.positionAbs.left,i=t+this.helperProportions.width,n=this.positionAbs.top,o=n+this.helperProportions.height,s=e.left,r=s+e.width,a=e.top,l=a+e.height,c=this.offset.click.top,u=this.offset.click.left,d="x"===this.options.axis||n+c>a&&l>n+c,h="y"===this.options.axis||t+u>s&&r>t+u,p=d&&h;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>e[this.floating?"width":"height"]?p:s<t+this.helperProportions.width/2&&i-this.helperProportions.width/2<r&&a<n+this.helperProportions.height/2&&o-this.helperProportions.height/2<l},_intersectsWithPointer:function(e){var i="x"===this.options.axis||t(this.positionAbs.top+this.offset.click.top,e.top,e.height),n="y"===this.options.axis||t(this.positionAbs.left+this.offset.click.left,e.left,e.width),o=i&&n,s=this._getDragVerticalDirection(),r=this._getDragHorizontalDirection();return o?this.floating?r&&"right"===r||"down"===s?2:1:s&&("down"===s?2:1):!1},_intersectsWithSides:function(e){var i=t(this.positionAbs.top+this.offset.click.top,e.top+e.height/2,e.height),n=t(this.positionAbs.left+this.offset.click.left,e.left+e.width/2,e.width),o=this._getDragVerticalDirection(),s=this._getDragHorizontalDirection();return this.floating&&s?"right"===s&&n||"left"===s&&!n:o&&("down"===o&&i||"up"===o&&!i)},_getDragVerticalDirection:function(){var e=this.positionAbs.top-this.lastPositionAbs.top;return 0!==e&&(e>0?"down":"up")},_getDragHorizontalDirection:function(){var e=this.positionAbs.left-this.lastPositionAbs.left;return 0!==e&&(e>0?"right":"left")},refresh:function(e){return this._refreshItems(e),this.refreshPositions(),this},_connectWith:function(){var e=this.options;return e.connectWith.constructor===String?[e.connectWith]:e.connectWith},_getItemsAsjQuery:function(t){function i(){a.push(this)}var n,o,s,r,a=[],l=[],c=this._connectWith();if(c&&t)for(n=c.length-1;n>=0;n--)for(s=e(c[n]),o=s.length-1;o>=0;o--)r=e.data(s[o],this.widgetFullName),r&&r!==this&&!r.options.disabled&&l.push([e.isFunction(r.options.items)?r.options.items.call(r.element):e(r.options.items,r.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),r]);for(l.push([e.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):e(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),n=l.length-1;n>=0;n--)l[n][0].each(i);return e(a)},_removeCurrentsFromItems:function(){var t=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=e.grep(this.items,function(e){for(var i=0;i<t.length;i++)if(t[i]===e.item[0])return!1;return!0})},_refreshItems:function(t){this.items=[],this.containers=[this];var i,n,o,s,r,a,l,c,u=this.items,d=[[e.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):e(this.options.items,this.element),this]],h=this._connectWith();if(h&&this.ready)for(i=h.length-1;i>=0;i--)for(o=e(h[i]),n=o.length-1;n>=0;n--)s=e.data(o[n],this.widgetFullName),s&&s!==this&&!s.options.disabled&&(d.push([e.isFunction(s.options.items)?s.options.items.call(s.element[0],t,{item:this.currentItem}):e(s.options.items,s.element),s]),this.containers.push(s));for(i=d.length-1;i>=0;i--)for(r=d[i][1],a=d[i][0],n=0,c=a.length;c>n;n++)l=e(a[n]),l.data(this.widgetName+"-item",r),u.push({item:l,instance:r,width:0,height:0,left:0,top:0})},refreshPositions:function(t){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var i,n,o,s;for(i=this.items.length-1;i>=0;i--)n=this.items[i],n.instance!==this.currentContainer&&this.currentContainer&&n.item[0]!==this.currentItem[0]||(o=this.options.toleranceElement?e(this.options.toleranceElement,n.item):n.item,t||(n.width=o.outerWidth(),n.height=o.outerHeight()),s=o.offset(),n.left=s.left,n.top=s.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(i=this.containers.length-1;i>=0;i--)s=this.containers[i].element.offset(),this.containers[i].containerCache.left=s.left,this.containers[i].containerCache.top=s.top,this.containers[i].containerCache.width=this.containers[i].element.outerWidth(),this.containers[i].containerCache.height=this.containers[i].element.outerHeight();return this},_createPlaceholder:function(t){t=t||this;var i,n=t.options;n.placeholder&&n.placeholder.constructor!==String||(i=n.placeholder,n.placeholder={element:function(){var n=t.currentItem[0].nodeName.toLowerCase(),o=e("<"+n+">",t.document[0]).addClass(i||t.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");return"tr"===n?t.currentItem.children().each(function(){e("<td>&#160;</td>",t.document[0]).attr("colspan",e(this).attr("colspan")||1).appendTo(o)}):"img"===n&&o.attr("src",t.currentItem.attr("src")),i||o.css("visibility","hidden"),o},update:function(e,o){(!i||n.forcePlaceholderSize)&&(o.height()||o.height(t.currentItem.innerHeight()-parseInt(t.currentItem.css("paddingTop")||0,10)-parseInt(t.currentItem.css("paddingBottom")||0,10)),o.width()||o.width(t.currentItem.innerWidth()-parseInt(t.currentItem.css("paddingLeft")||0,10)-parseInt(t.currentItem.css("paddingRight")||0,10)))}}),t.placeholder=e(n.placeholder.element.call(t.element,t.currentItem)),t.currentItem.after(t.placeholder),n.placeholder.update(t,t.placeholder)},_contactContainers:function(n){var o,s,r,a,l,c,u,d,h,p,f=null,m=null;for(o=this.containers.length-1;o>=0;o--)if(!e.contains(this.currentItem[0],this.containers[o].element[0]))if(this._intersectsWith(this.containers[o].containerCache)){if(f&&e.contains(this.containers[o].element[0],f.element[0]))continue;f=this.containers[o],m=o}else this.containers[o].containerCache.over&&(this.containers[o]._trigger("out",n,this._uiHash(this)),this.containers[o].containerCache.over=0);if(f)if(1===this.containers.length)this.containers[m].containerCache.over||(this.containers[m]._trigger("over",n,this._uiHash(this)),this.containers[m].containerCache.over=1);else{for(r=1e4,a=null,p=f.floating||i(this.currentItem),l=p?"left":"top",c=p?"width":"height",u=this.positionAbs[l]+this.offset.click[l],s=this.items.length-1;s>=0;s--)e.contains(this.containers[m].element[0],this.items[s].item[0])&&this.items[s].item[0]!==this.currentItem[0]&&(!p||t(this.positionAbs.top+this.offset.click.top,this.items[s].top,this.items[s].height))&&(d=this.items[s].item.offset()[l],h=!1,Math.abs(d-u)>Math.abs(d+this.items[s][c]-u)&&(h=!0,d+=this.items[s][c]),Math.abs(d-u)<r&&(r=Math.abs(d-u),a=this.items[s],this.direction=h?"up":"down"));if(!a&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[m])return;a?this._rearrange(n,a,null,!0):this._rearrange(n,null,this.containers[m].element,!0),this._trigger("change",n,this._uiHash()),this.containers[m]._trigger("change",n,this._uiHash(this)),this.currentContainer=this.containers[m],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[m]._trigger("over",n,this._uiHash(this)),this.containers[m].containerCache.over=1}},_createHelper:function(t){var i=this.options,n=e.isFunction(i.helper)?e(i.helper.apply(this.element[0],[t,this.currentItem])):"clone"===i.helper?this.currentItem.clone():this.currentItem;return n.parents("body").length||e("parent"!==i.appendTo?i.appendTo:this.currentItem[0].parentNode)[0].appendChild(n[0]),n[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!n[0].style.width||i.forceHelperSize)&&n.width(this.currentItem.width()),(!n[0].style.height||i.forceHelperSize)&&n.height(this.currentItem.height()),n},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&e.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var e=this.currentItem.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,i,n,o=this.options;"parent"===o.containment&&(o.containment=this.helper[0].parentNode),("document"===o.containment||"window"===o.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,e("document"===o.containment?document:window).width()-this.helperProportions.width-this.margins.left,(e("document"===o.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(o.containment)||(t=e(o.containment)[0],i=e(o.containment).offset(),n="hidden"!==e(t).css("overflow"),this.containment=[i.left+(parseInt(e(t).css("borderLeftWidth"),10)||0)+(parseInt(e(t).css("paddingLeft"),10)||0)-this.margins.left,i.top+(parseInt(e(t).css("borderTopWidth"),10)||0)+(parseInt(e(t).css("paddingTop"),10)||0)-this.margins.top,i.left+(n?Math.max(t.scrollWidth,t.offsetWidth):t.offsetWidth)-(parseInt(e(t).css("borderLeftWidth"),10)||0)-(parseInt(e(t).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,i.top+(n?Math.max(t.scrollHeight,t.offsetHeight):t.offsetHeight)-(parseInt(e(t).css("borderTopWidth"),10)||0)-(parseInt(e(t).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(t,i){i||(i=this.position);var n="absolute"===t?1:-1,o="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,s=/(html|body)/i.test(o[0].tagName);return{top:i.top+this.offset.relative.top*n+this.offset.parent.top*n-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():s?0:o.scrollTop())*n,left:i.left+this.offset.relative.left*n+this.offset.parent.left*n-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():s?0:o.scrollLeft())*n}
},_generatePosition:function(t){var i,n,o=this.options,s=t.pageX,r=t.pageY,a="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,l=/(html|body)/i.test(a[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==document&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(s=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(r=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(s=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(r=this.containment[3]+this.offset.click.top)),o.grid&&(i=this.originalPageY+Math.round((r-this.originalPageY)/o.grid[1])*o.grid[1],r=this.containment?i-this.offset.click.top>=this.containment[1]&&i-this.offset.click.top<=this.containment[3]?i:i-this.offset.click.top>=this.containment[1]?i-o.grid[1]:i+o.grid[1]:i,n=this.originalPageX+Math.round((s-this.originalPageX)/o.grid[0])*o.grid[0],s=this.containment?n-this.offset.click.left>=this.containment[0]&&n-this.offset.click.left<=this.containment[2]?n:n-this.offset.click.left>=this.containment[0]?n-o.grid[0]:n+o.grid[0]:n)),{top:r-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():l?0:a.scrollTop()),left:s-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():l?0:a.scrollLeft())}},_rearrange:function(e,t,i,n){i?i[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?t.item[0]:t.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var o=this.counter;this._delay(function(){o===this.counter&&this.refreshPositions(!n)})},_clear:function(e,t){function i(e,t,i){return function(n){i._trigger(e,n,t._uiHash(t))}}this.reverting=!1;var n,o=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(n in this._storedCSS)("auto"===this._storedCSS[n]||"static"===this._storedCSS[n])&&(this._storedCSS[n]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!t&&o.push(function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||t||o.push(function(e){this._trigger("update",e,this._uiHash())}),this!==this.currentContainer&&(t||(o.push(function(e){this._trigger("remove",e,this._uiHash())}),o.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.currentContainer)),o.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.currentContainer)))),n=this.containers.length-1;n>=0;n--)t||o.push(i("deactivate",this,this.containers[n])),this.containers[n].containerCache.over&&(o.push(i("out",this,this.containers[n])),this.containers[n].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,this.cancelHelperRemoval){if(!t){for(this._trigger("beforeStop",e,this._uiHash()),n=0;n<o.length;n++)o[n].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!1}if(t||this._trigger("beforeStop",e,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null,!t){for(n=0;n<o.length;n++)o[n].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){e.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(t){var i=t||this;return{helper:i.helper,placeholder:i.placeholder||e([]),position:i.position,originalPosition:i.originalPosition,offset:i.positionAbs,item:i.currentItem,sender:t?t.element:null}}})}(t),function(e,i){var n="ui-effects-";e.effects={effect:{}},function(e,t){function i(e,t,i){var n=d[t.type]||{};return null==e?i||!t.def?null:t.def:(e=n.floor?~~e:parseFloat(e),isNaN(e)?t.def:n.mod?(e+n.mod)%n.mod:0>e?0:n.max<e?n.max:e)}function n(t){var i=c(),n=i._rgba=[];return t=t.toLowerCase(),f(l,function(e,o){var s,r=o.re.exec(t),a=r&&o.parse(r),l=o.space||"rgba";return a?(s=i[l](a),i[u[l].cache]=s[u[l].cache],n=i._rgba=s._rgba,!1):void 0}),n.length?("0,0,0,0"===n.join()&&e.extend(n,s.transparent),i):s[t]}function o(e,t,i){return i=(i+1)%1,1>6*i?e+(t-e)*i*6:1>2*i?t:2>3*i?e+(t-e)*(2/3-i)*6:e}var s,r="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor",a=/^([\-+])=\s*(\d+\.?\d*)/,l=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[e[1],e[2],e[3],e[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[2.55*e[1],2.55*e[2],2.55*e[3],e[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(e){return[e[1],e[2]/100,e[3]/100,e[4]]}}],c=e.Color=function(t,i,n,o){return new e.Color.fn.parse(t,i,n,o)},u={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},d={"byte":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},h=c.support={},p=e("<p>")[0],f=e.each;p.style.cssText="background-color:rgba(1,1,1,.5)",h.rgba=p.style.backgroundColor.indexOf("rgba")>-1,f(u,function(e,t){t.cache="_"+e,t.props.alpha={idx:3,type:"percent",def:1}}),c.fn=e.extend(c.prototype,{parse:function(o,r,a,l){if(o===t)return this._rgba=[null,null,null,null],this;(o.jquery||o.nodeType)&&(o=e(o).css(r),r=t);var d=this,h=e.type(o),p=this._rgba=[];return r!==t&&(o=[o,r,a,l],h="array"),"string"===h?this.parse(n(o)||s._default):"array"===h?(f(u.rgba.props,function(e,t){p[t.idx]=i(o[t.idx],t)}),this):"object"===h?(o instanceof c?f(u,function(e,t){o[t.cache]&&(d[t.cache]=o[t.cache].slice())}):f(u,function(t,n){var s=n.cache;f(n.props,function(e,t){if(!d[s]&&n.to){if("alpha"===e||null==o[e])return;d[s]=n.to(d._rgba)}d[s][t.idx]=i(o[e],t,!0)}),d[s]&&e.inArray(null,d[s].slice(0,3))<0&&(d[s][3]=1,n.from&&(d._rgba=n.from(d[s])))}),this):void 0},is:function(e){var t=c(e),i=!0,n=this;return f(u,function(e,o){var s,r=t[o.cache];return r&&(s=n[o.cache]||o.to&&o.to(n._rgba)||[],f(o.props,function(e,t){return null!=r[t.idx]?i=r[t.idx]===s[t.idx]:void 0})),i}),i},_space:function(){var e=[],t=this;return f(u,function(i,n){t[n.cache]&&e.push(i)}),e.pop()},transition:function(e,t){var n=c(e),o=n._space(),s=u[o],r=0===this.alpha()?c("transparent"):this,a=r[s.cache]||s.to(r._rgba),l=a.slice();return n=n[s.cache],f(s.props,function(e,o){var s=o.idx,r=a[s],c=n[s],u=d[o.type]||{};null!==c&&(null===r?l[s]=c:(u.mod&&(c-r>u.mod/2?r+=u.mod:r-c>u.mod/2&&(r-=u.mod)),l[s]=i((c-r)*t+r,o)))}),this[o](l)},blend:function(t){if(1===this._rgba[3])return this;var i=this._rgba.slice(),n=i.pop(),o=c(t)._rgba;return c(e.map(i,function(e,t){return(1-n)*o[t]+n*e}))},toRgbaString:function(){var t="rgba(",i=e.map(this._rgba,function(e,t){return null==e?t>2?1:0:e});return 1===i[3]&&(i.pop(),t="rgb("),t+i.join()+")"},toHslaString:function(){var t="hsla(",i=e.map(this.hsla(),function(e,t){return null==e&&(e=t>2?1:0),t&&3>t&&(e=Math.round(100*e)+"%"),e});return 1===i[3]&&(i.pop(),t="hsl("),t+i.join()+")"},toHexString:function(t){var i=this._rgba.slice(),n=i.pop();return t&&i.push(~~(255*n)),"#"+e.map(i,function(e){return e=(e||0).toString(16),1===e.length?"0"+e:e}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),c.fn.parse.prototype=c.fn,u.hsla.to=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t,i,n=e[0]/255,o=e[1]/255,s=e[2]/255,r=e[3],a=Math.max(n,o,s),l=Math.min(n,o,s),c=a-l,u=a+l,d=.5*u;return t=l===a?0:n===a?60*(o-s)/c+360:o===a?60*(s-n)/c+120:60*(n-o)/c+240,i=0===c?0:.5>=d?c/u:c/(2-u),[Math.round(t)%360,i,d,null==r?1:r]},u.hsla.from=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t=e[0]/360,i=e[1],n=e[2],s=e[3],r=.5>=n?n*(1+i):n+i-n*i,a=2*n-r;return[Math.round(255*o(a,r,t+1/3)),Math.round(255*o(a,r,t)),Math.round(255*o(a,r,t-1/3)),s]},f(u,function(n,o){var s=o.props,r=o.cache,l=o.to,u=o.from;c.fn[n]=function(n){if(l&&!this[r]&&(this[r]=l(this._rgba)),n===t)return this[r].slice();var o,a=e.type(n),d="array"===a||"object"===a?n:arguments,h=this[r].slice();return f(s,function(e,t){var n=d["object"===a?e:t.idx];null==n&&(n=h[t.idx]),h[t.idx]=i(n,t)}),u?(o=c(u(h)),o[r]=h,o):c(h)},f(s,function(t,i){c.fn[t]||(c.fn[t]=function(o){var s,r=e.type(o),l="alpha"===t?this._hsla?"hsla":"rgba":n,c=this[l](),u=c[i.idx];return"undefined"===r?u:("function"===r&&(o=o.call(this,u),r=e.type(o)),null==o&&i.empty?this:("string"===r&&(s=a.exec(o),s&&(o=u+parseFloat(s[2])*("+"===s[1]?1:-1))),c[i.idx]=o,this[l](c)))})})}),c.hook=function(t){var i=t.split(" ");f(i,function(t,i){e.cssHooks[i]={set:function(t,o){var s,r,a="";if("transparent"!==o&&("string"!==e.type(o)||(s=n(o)))){if(o=c(s||o),!h.rgba&&1!==o._rgba[3]){for(r="backgroundColor"===i?t.parentNode:t;(""===a||"transparent"===a)&&r&&r.style;)try{a=e.css(r,"backgroundColor"),r=r.parentNode}catch(l){}o=o.blend(a&&"transparent"!==a?a:"_default")}o=o.toRgbaString()}try{t.style[i]=o}catch(l){}}},e.fx.step[i]=function(t){t.colorInit||(t.start=c(t.elem,i),t.end=c(t.end),t.colorInit=!0),e.cssHooks[i].set(t.elem,t.start.transition(t.end,t.pos))}})},c.hook(r),e.cssHooks.borderColor={expand:function(e){var t={};return f(["Top","Right","Bottom","Left"],function(i,n){t["border"+n+"Color"]=e}),t}},s=e.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(t),function(){function n(t){var i,n,o=t.ownerDocument.defaultView?t.ownerDocument.defaultView.getComputedStyle(t,null):t.currentStyle,s={};if(o&&o.length&&o[0]&&o[o[0]])for(n=o.length;n--;)i=o[n],"string"==typeof o[i]&&(s[e.camelCase(i)]=o[i]);else for(i in o)"string"==typeof o[i]&&(s[i]=o[i]);return s}function o(t,i){var n,o,s={};for(n in i)o=i[n],t[n]!==o&&(r[n]||(e.fx.step[n]||!isNaN(parseFloat(o)))&&(s[n]=o));return s}var s=["add","remove","toggle"],r={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};e.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(i,n){e.fx.step[n]=function(e){("none"!==e.end&&!e.setAttr||1===e.pos&&!e.setAttr)&&(t.style(e.elem,n,e.end),e.setAttr=!0)}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e.effects.animateClass=function(t,i,r,a){var l=e.speed(i,r,a);return this.queue(function(){var i,r=e(this),a=r.attr("class")||"",c=l.children?r.find("*").addBack():r;c=c.map(function(){var t=e(this);return{el:t,start:n(this)}}),i=function(){e.each(s,function(e,i){t[i]&&r[i+"Class"](t[i])})},i(),c=c.map(function(){return this.end=n(this.el[0]),this.diff=o(this.start,this.end),this}),r.attr("class",a),c=c.map(function(){var t=this,i=e.Deferred(),n=e.extend({},l,{queue:!1,complete:function(){i.resolve(t)}});return this.el.animate(this.diff,n),i.promise()}),e.when.apply(e,c.get()).done(function(){i(),e.each(arguments,function(){var t=this.el;e.each(this.diff,function(e){t.css(e,"")})}),l.complete.call(r[0])})})},e.fn.extend({addClass:function(t){return function(i,n,o,s){return n?e.effects.animateClass.call(this,{add:i},n,o,s):t.apply(this,arguments)}}(e.fn.addClass),removeClass:function(t){return function(i,n,o,s){return arguments.length>1?e.effects.animateClass.call(this,{remove:i},n,o,s):t.apply(this,arguments)}}(e.fn.removeClass),toggleClass:function(t){return function(n,o,s,r,a){return"boolean"==typeof o||o===i?s?e.effects.animateClass.call(this,o?{add:n}:{remove:n},s,r,a):t.apply(this,arguments):e.effects.animateClass.call(this,{toggle:n},o,s,r)}}(e.fn.toggleClass),switchClass:function(t,i,n,o,s){return e.effects.animateClass.call(this,{add:i,remove:t},n,o,s)}})}(),function(){function t(t,i,n,o){return e.isPlainObject(t)&&(i=t,t=t.effect),t={effect:t},null==i&&(i={}),e.isFunction(i)&&(o=i,n=null,i={}),("number"==typeof i||e.fx.speeds[i])&&(o=n,n=i,i={}),e.isFunction(n)&&(o=n,n=null),i&&e.extend(t,i),n=n||i.duration,t.duration=e.fx.off?0:"number"==typeof n?n:n in e.fx.speeds?e.fx.speeds[n]:e.fx.speeds._default,t.complete=o||i.complete,t}function o(t){return!t||"number"==typeof t||e.fx.speeds[t]?!0:"string"!=typeof t||e.effects.effect[t]?e.isFunction(t)?!0:"object"!=typeof t||t.effect?!1:!0:!0}e.extend(e.effects,{version:"@VERSION",save:function(e,t){for(var i=0;i<t.length;i++)null!==t[i]&&e.data(n+t[i],e[0].style[t[i]])},restore:function(e,t){var o,s;for(s=0;s<t.length;s++)null!==t[s]&&(o=e.data(n+t[s]),o===i&&(o=""),e.css(t[s],o))},setMode:function(e,t){return"toggle"===t&&(t=e.is(":hidden")?"show":"hide"),t},getBaseline:function(e,t){var i,n;switch(e[0]){case"top":i=0;break;case"middle":i=.5;break;case"bottom":i=1;break;default:i=e[0]/t.height}switch(e[1]){case"left":n=0;break;case"center":n=.5;break;case"right":n=1;break;default:n=e[1]/t.width}return{x:n,y:i}},createWrapper:function(t){if(t.parent().is(".ui-effects-wrapper"))return t.parent();var i={width:t.outerWidth(!0),height:t.outerHeight(!0),"float":t.css("float")},n=e("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),o={width:t.width(),height:t.height()},s=document.activeElement;try{s.id}catch(r){s=document.body}return t.wrap(n),(t[0]===s||e.contains(t[0],s))&&e(s).focus(),n=t.parent(),"static"===t.css("position")?(n.css({position:"relative"}),t.css({position:"relative"})):(e.extend(i,{position:t.css("position"),zIndex:t.css("z-index")}),e.each(["top","left","bottom","right"],function(e,n){i[n]=t.css(n),isNaN(parseInt(i[n],10))&&(i[n]="auto")}),t.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),t.css(o),n.css(i).show()},removeWrapper:function(t){var i=document.activeElement;return t.parent().is(".ui-effects-wrapper")&&(t.parent().replaceWith(t),(t[0]===i||e.contains(t[0],i))&&e(i).focus()),t},setTransition:function(t,i,n,o){return o=o||{},e.each(i,function(e,i){var s=t.cssUnit(i);s[0]>0&&(o[i]=s[0]*n+s[1])}),o}}),e.fn.extend({effect:function(){function i(t){function i(){e.isFunction(s)&&s.call(o[0]),e.isFunction(t)&&t()}var o=e(this),s=n.complete,a=n.mode;(o.is(":hidden")?"hide"===a:"show"===a)?(o[a](),i()):r.call(o[0],n,i)}var n=t.apply(this,arguments),o=n.mode,s=n.queue,r=e.effects.effect[n.effect];return e.fx.off||!r?o?this[o](n.duration,n.complete):this.each(function(){n.complete&&n.complete.call(this)}):s===!1?this.each(i):this.queue(s||"fx",i)},show:function(e){return function(i){if(o(i))return e.apply(this,arguments);var n=t.apply(this,arguments);return n.mode="show",this.effect.call(this,n)}}(e.fn.show),hide:function(e){return function(i){if(o(i))return e.apply(this,arguments);var n=t.apply(this,arguments);return n.mode="hide",this.effect.call(this,n)}}(e.fn.hide),toggle:function(e){return function(i){if(o(i)||"boolean"==typeof i)return e.apply(this,arguments);var n=t.apply(this,arguments);return n.mode="toggle",this.effect.call(this,n)}}(e.fn.toggle),cssUnit:function(t){var i=this.css(t),n=[];return e.each(["em","px","%","pt"],function(e,t){i.indexOf(t)>0&&(n=[parseFloat(i),t])}),n}})}(),function(){var t={};e.each(["Quad","Cubic","Quart","Quint","Expo"],function(e,i){t[i]=function(t){return Math.pow(t,e+2)}}),e.extend(t,{Sine:function(e){return 1-Math.cos(e*Math.PI/2)},Circ:function(e){return 1-Math.sqrt(1-e*e)},Elastic:function(e){return 0===e||1===e?e:-Math.pow(2,8*(e-1))*Math.sin((80*(e-1)-7.5)*Math.PI/15)},Back:function(e){return e*e*(3*e-2)},Bounce:function(e){for(var t,i=4;e<((t=Math.pow(2,--i))-1)/11;);return 1/Math.pow(4,3-i)-7.5625*Math.pow((3*t-2)/22-e,2)}}),e.each(t,function(t,i){e.easing["easeIn"+t]=i,e.easing["easeOut"+t]=function(e){return 1-i(1-e)},e.easing["easeInOut"+t]=function(e){return.5>e?i(2*e)/2:1-i(-2*e+2)/2}})}()}(t),function(e){var t=0,i={},n={};i.height=i.paddingTop=i.paddingBottom=i.borderTopWidth=i.borderBottomWidth="hide",n.height=n.paddingTop=n.paddingBottom=n.borderTopWidth=n.borderBottomWidth="show",e.widget("ui.accordion",{version:"@VERSION",options:{active:0,animate:{},collapsible:!1,event:"click",header:"> li > :first-child,> :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},_create:function(){var t=this.options;this.prevShow=this.prevHide=e(),this.element.addClass("ui-accordion ui-widget ui-helper-reset").attr("role","tablist"),t.collapsible||t.active!==!1&&null!=t.active||(t.active=0),this._processPanels(),t.active<0&&(t.active+=this.headers.length),this._refresh()},_getCreateEventData:function(){return{header:this.active,panel:this.active.length?this.active.next():e(),content:this.active.length?this.active.next():e()}},_createIcons:function(){var t=this.options.icons;t&&(e("<span>").addClass("ui-accordion-header-icon ui-icon "+t.header).prependTo(this.headers),this.active.children(".ui-accordion-header-icon").removeClass(t.header).addClass(t.activeHeader),this.headers.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.removeClass("ui-accordion-icons").children(".ui-accordion-header-icon").remove()},_destroy:function(){var e;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role"),this.headers.removeClass("ui-accordion-header ui-accordion-header-active ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-selected").removeAttr("aria-controls").removeAttr("tabIndex").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")}),this._destroyIcons(),e=this.headers.next().css("display","").removeAttr("role").removeAttr("aria-hidden").removeAttr("aria-labelledby").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-state-disabled").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")}),"content"!==this.options.heightStyle&&e.css("height","")},_setOption:function(e,t){return"active"===e?void this._activate(t):("event"===e&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(t)),this._super(e,t),"collapsible"!==e||t||this.options.active!==!1||this._activate(0),"icons"===e&&(this._destroyIcons(),t&&this._createIcons()),void("disabled"===e&&this.headers.add(this.headers.next()).toggleClass("ui-state-disabled",!!t)))},_keydown:function(t){if(!t.altKey&&!t.ctrlKey){var i=e.ui.keyCode,n=this.headers.length,o=this.headers.index(t.target),s=!1;switch(t.keyCode){case i.RIGHT:case i.DOWN:s=this.headers[(o+1)%n];break;case i.LEFT:case i.UP:s=this.headers[(o-1+n)%n];break;case i.SPACE:case i.ENTER:this._eventHandler(t);break;case i.HOME:s=this.headers[0];break;case i.END:s=this.headers[n-1]}s&&(e(t.target).attr("tabIndex",-1),e(s).attr("tabIndex",0),s.focus(),t.preventDefault())}},_panelKeyDown:function(t){t.keyCode===e.ui.keyCode.UP&&t.ctrlKey&&e(t.currentTarget).prev().focus()},refresh:function(){var t=this.options;this._processPanels(),t.active===!1&&t.collapsible===!0||!this.headers.length?(t.active=!1,this.active=e()):t.active===!1?this._activate(0):this.active.length&&!e.contains(this.element[0],this.active[0])?this.headers.length===this.headers.find(".ui-state-disabled").length?(t.active=!1,this.active=e()):this._activate(Math.max(0,t.active-1)):t.active=this.headers.index(this.active),this._destroyIcons(),this._refresh()},_processPanels:function(){this.headers=this.element.find(this.options.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all"),this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom").filter(":not(.ui-accordion-content-active)").hide()},_refresh:function(){var i,n=this.options,o=n.heightStyle,s=this.element.parent(),r=this.accordionId="ui-accordion-"+(this.element.attr("id")||++t);this.active=this._findActive(n.active).addClass("ui-accordion-header-active ui-state-active ui-corner-top").removeClass("ui-corner-all"),this.active.next().addClass("ui-accordion-content-active").show(),this.headers.attr("role","tab").each(function(t){var i=e(this),n=i.attr("id"),o=i.next(),s=o.attr("id");n||(n=r+"-header-"+t,i.attr("id",n)),s||(s=r+"-panel-"+t,o.attr("id",s)),i.attr("aria-controls",s),o.attr("aria-labelledby",n)}).next().attr("role","tabpanel"),this.headers.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}).next().attr({"aria-hidden":"true"}).hide(),this.active.length?this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}).next().attr({"aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0),this._createIcons(),this._setupEvents(n.event),"fill"===o?(i=s.height(),this.element.siblings(":visible").each(function(){var t=e(this),n=t.css("position");"absolute"!==n&&"fixed"!==n&&(i-=t.outerHeight(!0))}),this.headers.each(function(){i-=e(this).outerHeight(!0)}),this.headers.next().each(function(){e(this).height(Math.max(0,i-e(this).innerHeight()+e(this).height()))}).css("overflow","auto")):"auto"===o&&(i=0,this.headers.next().each(function(){i=Math.max(i,e(this).css("height","").height())}).height(i))},_activate:function(t){var i=this._findActive(t)[0];i!==this.active[0]&&(i=i||this.active[0],this._eventHandler({target:i,currentTarget:i,preventDefault:e.noop}))},_findActive:function(t){return"number"==typeof t?this.headers.eq(t):e()},_setupEvents:function(t){var i={keydown:"_keydown"};t&&e.each(t.split(" "),function(e,t){i[t]="_eventHandler"}),this._off(this.headers.add(this.headers.next())),this._on(this.headers,i),this._on(this.headers.next(),{keydown:"_panelKeyDown"}),this._hoverable(this.headers),this._focusable(this.headers)},_eventHandler:function(t){var i=this.options,n=this.active,o=e(t.currentTarget),s=o[0]===n[0],r=s&&i.collapsible,a=r?e():o.next(),l=n.next(),c={oldHeader:n,oldPanel:l,newHeader:r?e():o,newPanel:a};t.preventDefault(),s&&!i.collapsible||this._trigger("beforeActivate",t,c)===!1||(i.active=r?!1:this.headers.index(o),this.active=s?e():o,this._toggle(c),n.removeClass("ui-accordion-header-active ui-state-active"),i.icons&&n.children(".ui-accordion-header-icon").removeClass(i.icons.activeHeader).addClass(i.icons.header),s||(o.removeClass("ui-corner-all").addClass("ui-accordion-header-active ui-state-active ui-corner-top"),i.icons&&o.children(".ui-accordion-header-icon").removeClass(i.icons.header).addClass(i.icons.activeHeader),o.next().addClass("ui-accordion-content-active")))},_toggle:function(t){var i=t.newPanel,n=this.prevShow.length?this.prevShow:t.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0),this.prevShow=i,this.prevHide=n,this.options.animate?this._animate(i,n,t):(n.hide(),i.show(),this._toggleComplete(t)),n.attr({"aria-hidden":"true"}),n.prev().attr("aria-selected","false"),i.length&&n.length?n.prev().attr({tabIndex:-1,"aria-expanded":"false"}):i.length&&this.headers.filter(function(){return 0===e(this).attr("tabIndex")}).attr("tabIndex",-1),i.attr("aria-hidden","false").prev().attr({"aria-selected":"true",tabIndex:0,"aria-expanded":"true"})},_animate:function(e,t,o){var s,r,a,l=this,c=0,u=e.length&&(!t.length||e.index()<t.index()),d=this.options.animate||{},h=u&&d.down||d,p=function(){l._toggleComplete(o)};return"number"==typeof h&&(a=h),"string"==typeof h&&(r=h),r=r||h.easing||d.easing,a=a||h.duration||d.duration,t.length?e.length?(s=e.show().outerHeight(),t.animate(i,{duration:a,easing:r,step:function(e,t){t.now=Math.round(e)}}),void e.hide().animate(n,{duration:a,easing:r,complete:p,step:function(e,i){i.now=Math.round(e),"height"!==i.prop?c+=i.now:"content"!==l.options.heightStyle&&(i.now=Math.round(s-t.outerHeight()-c),c=0)}})):t.animate(i,a,r,p):e.animate(n,a,r,p)},_toggleComplete:function(e){var t=e.oldPanel;t.removeClass("ui-accordion-content-active").prev().removeClass("ui-corner-top").addClass("ui-corner-all"),t.length&&(t.parent()[0].className=t.parent()[0].className),this._trigger("activate",null,e)}})}(t),function(e){e.widget("ui.autocomplete",{version:"@VERSION",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},requestIndex:0,pending:0,_create:function(){var t,i,n,o=this.element[0].nodeName.toLowerCase(),s="textarea"===o,r="input"===o;this.isMultiLine=s?!0:r?!1:this.element.prop("isContentEditable"),this.valueMethod=this.element[s||r?"val":"text"],this.isNewMenu=!0,this.element.addClass("ui-autocomplete-input").attr("autocomplete","off"),this._on(this.element,{keydown:function(o){if(this.element.prop("readOnly"))return t=!0,n=!0,void(i=!0);t=!1,n=!1,i=!1;var s=e.ui.keyCode;switch(o.keyCode){case s.PAGE_UP:t=!0,this._move("previousPage",o);break;case s.PAGE_DOWN:t=!0,this._move("nextPage",o);break;case s.UP:t=!0,this._keyEvent("previous",o);break;case s.DOWN:t=!0,this._keyEvent("next",o);break;case s.ENTER:case s.NUMPAD_ENTER:this.menu.active&&(t=!0,o.preventDefault(),this.menu.select(o));break;case s.TAB:this.menu.active&&this.menu.select(o);break;case s.ESCAPE:this.menu.element.is(":visible")&&(this._value(this.term),this.close(o),o.preventDefault());break;default:i=!0,this._searchTimeout(o)}},keypress:function(n){if(t)return t=!1,void((!this.isMultiLine||this.menu.element.is(":visible"))&&n.preventDefault());if(!i){var o=e.ui.keyCode;switch(n.keyCode){case o.PAGE_UP:this._move("previousPage",n);break;case o.PAGE_DOWN:this._move("nextPage",n);break;case o.UP:this._keyEvent("previous",n);break;case o.DOWN:this._keyEvent("next",n)}}},input:function(e){return n?(n=!1,void e.preventDefault()):void this._searchTimeout(e)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(e){return this.cancelBlur?void delete this.cancelBlur:(clearTimeout(this.searching),this.close(e),void this._change(e))}}),this._initSource(),this.menu=e("<ul>").addClass("ui-autocomplete ui-front").appendTo(this._appendTo()).menu({role:null}).hide().data("ui-menu"),this._on(this.menu.element,{mousedown:function(t){t.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur});var i=this.menu.element[0];e(t.target).closest(".ui-menu-item").length||this._delay(function(){var t=this;this.document.one("mousedown",function(n){n.target===t.element[0]||n.target===i||e.contains(i,n.target)||t.close()})})},menufocus:function(t,i){if(this.isNewMenu&&(this.isNewMenu=!1,t.originalEvent&&/^mouse/.test(t.originalEvent.type)))return this.menu.blur(),void this.document.one("mousemove",function(){e(t.target).trigger(t.originalEvent)});var n=i.item.data("ui-autocomplete-item");!1!==this._trigger("focus",t,{item:n})?t.originalEvent&&/^key/.test(t.originalEvent.type)&&this._value(n.value):this.liveRegion.text(n.value)},menuselect:function(e,t){var i=t.item.data("ui-autocomplete-item"),n=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=n,this._delay(function(){this.previous=n,this.selectedItem=i})),!1!==this._trigger("select",e,{item:i})&&this._value(i.value),this.term=this._value(),this.close(e),this.selectedItem=i}}),this.liveRegion=e("<span>",{role:"status","aria-live":"polite"}).addClass("ui-helper-hidden-accessible").insertBefore(this.element),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(e,t){this._super(e,t),"source"===e&&this._initSource(),"appendTo"===e&&this.menu.element.appendTo(this._appendTo()),"disabled"===e&&t&&this.xhr&&this.xhr.abort()},_appendTo:function(){var t=this.options.appendTo;return t&&(t=t.jquery||t.nodeType?e(t):this.document.find(t).eq(0)),t||(t=this.element.closest(".ui-front")),t.length||(t=this.document[0].body),t},_initSource:function(){var t,i,n=this;e.isArray(this.options.source)?(t=this.options.source,this.source=function(i,n){n(e.ui.autocomplete.filter(t,i.term))}):"string"==typeof this.options.source?(i=this.options.source,this.source=function(t,o){n.xhr&&n.xhr.abort(),n.xhr=e.ajax({url:i,data:t,dataType:"json",success:function(e){o(e)},error:function(){o([])}})}):this.source=this.options.source},_searchTimeout:function(e){clearTimeout(this.searching),this.searching=this._delay(function(){this.term!==this._value()&&(this.selectedItem=null,this.search(null,e))},this.options.delay)},search:function(e,t){return e=null!=e?e:this._value(),this.term=this._value(),e.length<this.options.minLength?this.close(t):this._trigger("search",t)!==!1?this._search(e):void 0},_search:function(e){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:e},this._response())},_response:function(){var t=++this.requestIndex;return e.proxy(function(e){t===this.requestIndex&&this.__response(e),this.pending--,this.pending||this.element.removeClass("ui-autocomplete-loading")},this)},__response:function(e){e&&(e=this._normalize(e)),this._trigger("response",null,{content:e}),!this.options.disabled&&e&&e.length&&!this.cancelSearch?(this._suggest(e),this._trigger("open")):this._close()},close:function(e){this.cancelSearch=!0,this._close(e)},_close:function(e){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",e))},_change:function(e){this.previous!==this._value()&&this._trigger("change",e,{item:this.selectedItem})},_normalize:function(t){return t.length&&t[0].label&&t[0].value?t:e.map(t,function(t){return"string"==typeof t?{label:t,value:t}:e.extend({label:t.label||t.value,value:t.value||t.label},t)})},_suggest:function(t){var i=this.menu.element.empty();this._renderMenu(i,t),this.isNewMenu=!0,this.menu.refresh(),i.show(),this._resizeMenu(),i.position(e.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var e=this.menu.element;e.outerWidth(Math.max(e.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(t,i){var n=this;e.each(i,function(e,i){n._renderItemData(t,i)})},_renderItemData:function(e,t){return this._renderItem(e,t).data("ui-autocomplete-item",t)},_renderItem:function(t,i){return e("<li>").append(e("<a>").text(i.label)).appendTo(t)},_move:function(e,t){return this.menu.element.is(":visible")?this.menu.isFirstItem()&&/^previous/.test(e)||this.menu.isLastItem()&&/^next/.test(e)?(this._value(this.term),void this.menu.blur()):void this.menu[e](t):void this.search(null,t)
},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(e,t){(!this.isMultiLine||this.menu.element.is(":visible"))&&(this._move(e,t),t.preventDefault())}}),e.extend(e.ui.autocomplete,{escapeRegex:function(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(t,i){var n=new RegExp(e.ui.autocomplete.escapeRegex(i),"i");return e.grep(t,function(e){return n.test(e.label||e.value||e)})}}),e.widget("ui.autocomplete",e.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(e){return e+(e>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(e){var t;this._superApply(arguments),this.options.disabled||this.cancelSearch||(t=e&&e.length?this.options.messages.results(e.length):this.options.messages.noResults,this.liveRegion.text(t))}})}(t),function(e){var t,i="ui-button ui-widget ui-state-default ui-corner-all",n="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",o=function(){var t=e(this);setTimeout(function(){t.find(":ui-button").button("refresh")},1)},s=function(t){var i=t.name,n=t.form,o=e([]);return i&&(i=i.replace(/'/g,"\\'"),o=n?e(n).find("[name='"+i+"']"):e("[name='"+i+"']",t.ownerDocument).filter(function(){return!this.form})),o};e.widget("ui.button",{version:"@VERSION",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,o),"boolean"!=typeof this.options.disabled?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var n=this,r=this.options,a="checkbox"===this.type||"radio"===this.type,l=a?"":"ui-state-active";null===r.label&&(r.label="input"===this.type?this.buttonElement.val():this.buttonElement.html()),this._hoverable(this.buttonElement),this.buttonElement.addClass(i).attr("role","button").bind("mouseenter"+this.eventNamespace,function(){r.disabled||this===t&&e(this).addClass("ui-state-active")}).bind("mouseleave"+this.eventNamespace,function(){r.disabled||e(this).removeClass(l)}).bind("click"+this.eventNamespace,function(e){r.disabled&&(e.preventDefault(),e.stopImmediatePropagation())}),this._on({focus:function(){this.buttonElement.addClass("ui-state-focus")},blur:function(){this.buttonElement.removeClass("ui-state-focus")}}),a&&this.element.bind("change"+this.eventNamespace,function(){n.refresh()}),"checkbox"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){return r.disabled?!1:void 0}):"radio"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(r.disabled)return!1;e(this).addClass("ui-state-active"),n.buttonElement.attr("aria-pressed","true");var t=n.element[0];s(t).not(t).map(function(){return e(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown"+this.eventNamespace,function(){return r.disabled?!1:(e(this).addClass("ui-state-active"),t=this,void n.document.one("mouseup",function(){t=null}))}).bind("mouseup"+this.eventNamespace,function(){return r.disabled?!1:void e(this).removeClass("ui-state-active")}).bind("keydown"+this.eventNamespace,function(t){return r.disabled?!1:void((t.keyCode===e.ui.keyCode.SPACE||t.keyCode===e.ui.keyCode.ENTER)&&e(this).addClass("ui-state-active"))}).bind("keyup"+this.eventNamespace+" blur"+this.eventNamespace,function(){e(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(t){t.keyCode===e.ui.keyCode.SPACE&&e(this).click()})),this._setOption("disabled",r.disabled),this._resetButton()},_determineButtonType:function(){var e,t,i;this.type=this.element.is("[type=checkbox]")?"checkbox":this.element.is("[type=radio]")?"radio":this.element.is("input")?"input":"button","checkbox"===this.type||"radio"===this.type?(e=this.element.parents().last(),t="label[for='"+this.element.attr("id")+"']",this.buttonElement=e.find(t),this.buttonElement.length||(e=e.length?e.siblings():this.element.siblings(),this.buttonElement=e.filter(t),this.buttonElement.length||(this.buttonElement=e.find(t))),this.element.addClass("ui-helper-hidden-accessible"),i=this.element.is(":checked"),i&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",i)):this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(i+" ui-state-active "+n).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(e,t){return this._super(e,t),"disabled"===e?(this.element.prop("disabled",!!t),void(t&&this.buttonElement.removeClass("ui-state-focus"))):void this._resetButton()},refresh:function(){var t=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("ui-button-disabled");t!==this.options.disabled&&this._setOption("disabled",t),"radio"===this.type?s(this.element[0]).each(function(){e(this).is(":checked")?e(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):e(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if("input"===this.type)return void(this.options.label&&this.element.val(this.options.label));var t=this.buttonElement.removeClass(n),i=e("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(t.empty()).text(),o=this.options.icons,s=o.primary&&o.secondary,r=[];o.primary||o.secondary?(this.options.text&&r.push("ui-button-text-icon"+(s?"s":o.primary?"-primary":"-secondary")),o.primary&&t.prepend("<span class='ui-button-icon-primary ui-icon "+o.primary+"'></span>"),o.secondary&&t.append("<span class='ui-button-icon-secondary ui-icon "+o.secondary+"'></span>"),this.options.text||(r.push(s?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||t.attr("title",e.trim(i)))):r.push("ui-button-text-only"),t.addClass(r.join(" "))}}),e.widget("ui.buttonset",{version:"@VERSION",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(e,t){"disabled"===e&&this.buttons.button("option",e,t),this._super(e,t)},refresh:function(){var t="rtl"===this.element.css("direction");this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return e(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(t?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(t?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return e(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}})}(t),function(e,t){function i(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div-1-10-4",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},e.extend(this._defaults,this.regional[""]),this.dpDiv=n(e("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function n(t){var i="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return t.delegate(i,"mouseout",function(){e(this).removeClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&e(this).removeClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&e(this).removeClass("ui-datepicker-next-hover")}).delegate(i,"mouseover",function(){e.datepicker._isDisabledDatepicker(s.inline?t.parent()[0]:s.input[0])||(e(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),e(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&e(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&e(this).addClass("ui-datepicker-next-hover"))})}function o(t,i){e.extend(t,i);for(var n in i)null==i[n]&&(t[n]=i[n]);return t}e.extend(e.ui,{datepicker:{version:"@VERSION"}});var s,r="datepicker";e.extend(i.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(e){return o(this._defaults,e||{}),this},_attachDatepicker:function(t,i){var n,o,s;n=t.nodeName.toLowerCase(),o="div"===n||"span"===n,t.id||(this.uuid+=1,t.id="dp"+this.uuid),s=this._newInst(e(t),o),s.settings=e.extend({},i||{}),"input"===n?this._connectDatepicker(t,s):o&&this._inlineDatepicker(t,s)},_newInst:function(t,i){var o=t[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1");return{id:o,input:t,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:i,dpDiv:i?n(e("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(t,i){var n=e(t);i.append=e([]),i.trigger=e([]),n.hasClass(this.markerClassName)||(this._attachments(n,i),n.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp),this._autoSize(i),e.data(t,r,i),i.settings.disabled&&this._disableDatepicker(t))},_attachments:function(t,i){var n,o,s,r=this._get(i,"appendText"),a=this._get(i,"isRTL");i.append&&i.append.remove(),r&&(i.append=e("<span class='"+this._appendClass+"'>"+r+"</span>"),t[a?"before":"after"](i.append)),t.unbind("focus",this._showDatepicker),i.trigger&&i.trigger.remove(),n=this._get(i,"showOn"),("focus"===n||"both"===n)&&t.focus(this._showDatepicker),("button"===n||"both"===n)&&(o=this._get(i,"buttonText"),s=this._get(i,"buttonImage"),i.trigger=e(this._get(i,"buttonImageOnly")?e("<img/>").addClass(this._triggerClass).attr({src:s,alt:o,title:o}):e("<button type='button'></button>").addClass(this._triggerClass).html(s?e("<img/>").attr({src:s,alt:o,title:o}):o)),t[a?"before":"after"](i.trigger),i.trigger.click(function(){return e.datepicker._datepickerShowing&&e.datepicker._lastInput===t[0]?e.datepicker._hideDatepicker():e.datepicker._datepickerShowing&&e.datepicker._lastInput!==t[0]?(e.datepicker._hideDatepicker(),e.datepicker._showDatepicker(t[0])):e.datepicker._showDatepicker(t[0]),!1}))},_autoSize:function(e){if(this._get(e,"autoSize")&&!e.inline){var t,i,n,o,s=new Date(2009,11,20),r=this._get(e,"dateFormat");r.match(/[DM]/)&&(t=function(e){for(i=0,n=0,o=0;o<e.length;o++)e[o].length>i&&(i=e[o].length,n=o);return n},s.setMonth(t(this._get(e,r.match(/MM/)?"monthNames":"monthNamesShort"))),s.setDate(t(this._get(e,r.match(/DD/)?"dayNames":"dayNamesShort"))+20-s.getDay())),e.input.attr("size",this._formatDate(e,s).length)}},_inlineDatepicker:function(t,i){var n=e(t);n.hasClass(this.markerClassName)||(n.addClass(this.markerClassName).append(i.dpDiv),e.data(t,r,i),this._setDate(i,this._getDefaultDate(i),!0),this._updateDatepicker(i),this._updateAlternate(i),i.settings.disabled&&this._disableDatepicker(t),i.dpDiv.css("display","block"))},_dialogDatepicker:function(t,i,n,s,a){var l,c,u,d,h,p=this._dialogInst;return p||(this.uuid+=1,l="dp"+this.uuid,this._dialogInput=e("<input type='text' id='"+l+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.keydown(this._doKeyDown),e("body").append(this._dialogInput),p=this._dialogInst=this._newInst(this._dialogInput,!1),p.settings={},e.data(this._dialogInput[0],r,p)),o(p.settings,s||{}),i=i&&i.constructor===Date?this._formatDate(p,i):i,this._dialogInput.val(i),this._pos=a?a.length?a:[a.pageX,a.pageY]:null,this._pos||(c=document.documentElement.clientWidth,u=document.documentElement.clientHeight,d=document.documentElement.scrollLeft||document.body.scrollLeft,h=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[c/2-100+d,u/2-150+h]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),p.settings.onSelect=n,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),e.blockUI&&e.blockUI(this.dpDiv),e.data(this._dialogInput[0],r,p),this},_destroyDatepicker:function(t){var i,n=e(t),o=e.data(t,r);n.hasClass(this.markerClassName)&&(i=t.nodeName.toLowerCase(),e.removeData(t,r),"input"===i?(o.append.remove(),o.trigger.remove(),n.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):("div"===i||"span"===i)&&n.removeClass(this.markerClassName).empty())},_enableDatepicker:function(t){var i,n,o=e(t),s=e.data(t,r);o.hasClass(this.markerClassName)&&(i=t.nodeName.toLowerCase(),"input"===i?(t.disabled=!1,s.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):("div"===i||"span"===i)&&(n=o.children("."+this._inlineClass),n.children().removeClass("ui-state-disabled"),n.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=e.map(this._disabledInputs,function(e){return e===t?null:e}))},_disableDatepicker:function(t){var i,n,o=e(t),s=e.data(t,r);o.hasClass(this.markerClassName)&&(i=t.nodeName.toLowerCase(),"input"===i?(t.disabled=!0,s.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):("div"===i||"span"===i)&&(n=o.children("."+this._inlineClass),n.children().addClass("ui-state-disabled"),n.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=e.map(this._disabledInputs,function(e){return e===t?null:e}),this._disabledInputs[this._disabledInputs.length]=t)},_isDisabledDatepicker:function(e){if(!e)return!1;for(var t=0;t<this._disabledInputs.length;t++)if(this._disabledInputs[t]===e)return!0;return!1},_getInst:function(t){try{return e.data(t,r)}catch(i){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(i,n,s){var r,a,l,c,u=this._getInst(i);return 2===arguments.length&&"string"==typeof n?"defaults"===n?e.extend({},e.datepicker._defaults):u?"all"===n?e.extend({},u.settings):this._get(u,n):null:(r=n||{},"string"==typeof n&&(r={},r[n]=s),void(u&&(this._curInst===u&&this._hideDatepicker(),a=this._getDateDatepicker(i,!0),l=this._getMinMaxDate(u,"min"),c=this._getMinMaxDate(u,"max"),o(u.settings,r),null!==l&&r.dateFormat!==t&&r.minDate===t&&(u.settings.minDate=this._formatDate(u,l)),null!==c&&r.dateFormat!==t&&r.maxDate===t&&(u.settings.maxDate=this._formatDate(u,c)),"disabled"in r&&(r.disabled?this._disableDatepicker(i):this._enableDatepicker(i)),this._attachments(e(i),u),this._autoSize(u),this._setDate(u,a),this._updateAlternate(u),this._updateDatepicker(u))))},_changeDatepicker:function(e,t,i){this._optionDatepicker(e,t,i)},_refreshDatepicker:function(e){var t=this._getInst(e);t&&this._updateDatepicker(t)},_setDateDatepicker:function(e,t){var i=this._getInst(e);i&&(this._setDate(i,t),this._updateDatepicker(i),this._updateAlternate(i))},_getDateDatepicker:function(e,t){var i=this._getInst(e);return i&&!i.inline&&this._setDateFromField(i,t),i?this._getDate(i):null},_doKeyDown:function(t){var i,n,o,s=e.datepicker._getInst(t.target),r=!0,a=s.dpDiv.is(".ui-datepicker-rtl");if(s._keyEvent=!0,e.datepicker._datepickerShowing)switch(t.keyCode){case 9:e.datepicker._hideDatepicker(),r=!1;break;case 13:return o=e("td."+e.datepicker._dayOverClass+":not(."+e.datepicker._currentClass+")",s.dpDiv),o[0]&&e.datepicker._selectDay(t.target,s.selectedMonth,s.selectedYear,o[0]),i=e.datepicker._get(s,"onSelect"),i?(n=e.datepicker._formatDate(s),i.apply(s.input?s.input[0]:null,[n,s])):e.datepicker._hideDatepicker(),!1;case 27:e.datepicker._hideDatepicker();break;case 33:e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(s,"stepBigMonths"):-e.datepicker._get(s,"stepMonths"),"M");break;case 34:e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(s,"stepBigMonths"):+e.datepicker._get(s,"stepMonths"),"M");break;case 35:(t.ctrlKey||t.metaKey)&&e.datepicker._clearDate(t.target),r=t.ctrlKey||t.metaKey;break;case 36:(t.ctrlKey||t.metaKey)&&e.datepicker._gotoToday(t.target),r=t.ctrlKey||t.metaKey;break;case 37:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,a?1:-1,"D"),r=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(s,"stepBigMonths"):-e.datepicker._get(s,"stepMonths"),"M");break;case 38:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,-7,"D"),r=t.ctrlKey||t.metaKey;break;case 39:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,a?-1:1,"D"),r=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(s,"stepBigMonths"):+e.datepicker._get(s,"stepMonths"),"M");break;case 40:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,7,"D"),r=t.ctrlKey||t.metaKey;break;default:r=!1}else 36===t.keyCode&&t.ctrlKey?e.datepicker._showDatepicker(this):r=!1;r&&(t.preventDefault(),t.stopPropagation())},_doKeyPress:function(t){var i,n,o=e.datepicker._getInst(t.target);return e.datepicker._get(o,"constrainInput")?(i=e.datepicker._possibleChars(e.datepicker._get(o,"dateFormat")),n=String.fromCharCode(null==t.charCode?t.keyCode:t.charCode),t.ctrlKey||t.metaKey||" ">n||!i||i.indexOf(n)>-1):void 0},_doKeyUp:function(t){var i,n=e.datepicker._getInst(t.target);if(n.input.val()!==n.lastVal)try{i=e.datepicker.parseDate(e.datepicker._get(n,"dateFormat"),n.input?n.input.val():null,e.datepicker._getFormatConfig(n)),i&&(e.datepicker._setDateFromField(n),e.datepicker._updateAlternate(n),e.datepicker._updateDatepicker(n))}catch(o){}return!0},_showDatepicker:function(t){if(t=t.target||t,"input"!==t.nodeName.toLowerCase()&&(t=e("input",t.parentNode)[0]),!e.datepicker._isDisabledDatepicker(t)&&e.datepicker._lastInput!==t){var i,n,s,r,a,l,c;i=e.datepicker._getInst(t),e.datepicker._curInst&&e.datepicker._curInst!==i&&(e.datepicker._curInst.dpDiv.stop(!0,!0),i&&e.datepicker._datepickerShowing&&e.datepicker._hideDatepicker(e.datepicker._curInst.input[0])),n=e.datepicker._get(i,"beforeShow"),s=n?n.apply(t,[t,i]):{},s!==!1&&(o(i.settings,s),i.lastVal=null,e.datepicker._lastInput=t,e.datepicker._setDateFromField(i),e.datepicker._inDialog&&(t.value=""),e.datepicker._pos||(e.datepicker._pos=e.datepicker._findPos(t),e.datepicker._pos[1]+=t.offsetHeight),r=!1,e(t).parents().each(function(){return r|="fixed"===e(this).css("position"),!r}),a={left:e.datepicker._pos[0],top:e.datepicker._pos[1]},e.datepicker._pos=null,i.dpDiv.empty(),i.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),e.datepicker._updateDatepicker(i),a=e.datepicker._checkOffset(i,a,r),i.dpDiv.css({position:e.datepicker._inDialog&&e.blockUI?"static":r?"fixed":"absolute",display:"none",left:a.left+"px",top:a.top+"px"}),i.inline||(l=e.datepicker._get(i,"showAnim"),c=e.datepicker._get(i,"duration"),i.dpDiv.zIndex(e(t).zIndex()+1),e.datepicker._datepickerShowing=!0,e.effects&&e.effects.effect[l]?i.dpDiv.show(l,e.datepicker._get(i,"showOptions"),c):i.dpDiv[l||"show"](l?c:null),e.datepicker._shouldFocusInput(i)&&i.input.focus(),e.datepicker._curInst=i))}},_updateDatepicker:function(t){this.maxRows=4,s=t,t.dpDiv.empty().append(this._generateHTML(t)),this._attachHandlers(t),t.dpDiv.find("."+this._dayOverClass+" a").mouseover();var i,n=this._getNumberOfMonths(t),o=n[1],r=17;t.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),o>1&&t.dpDiv.addClass("ui-datepicker-multi-"+o).css("width",r*o+"em"),t.dpDiv[(1!==n[0]||1!==n[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),t.dpDiv[(this._get(t,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),t===e.datepicker._curInst&&e.datepicker._datepickerShowing&&e.datepicker._shouldFocusInput(t)&&t.input.focus(),t.yearshtml&&(i=t.yearshtml,setTimeout(function(){i===t.yearshtml&&t.yearshtml&&t.dpDiv.find("select.ui-datepicker-year:first").replaceWith(t.yearshtml),i=t.yearshtml=null},0))},_shouldFocusInput:function(e){return e.input&&e.input.is(":visible")&&!e.input.is(":disabled")&&!e.input.is(":focus")},_checkOffset:function(t,i,n){var o=t.dpDiv.outerWidth(),s=t.dpDiv.outerHeight(),r=t.input?t.input.outerWidth():0,a=t.input?t.input.outerHeight():0,l=document.documentElement.clientWidth+(n?0:e(document).scrollLeft()),c=document.documentElement.clientHeight+(n?0:e(document).scrollTop());return i.left-=this._get(t,"isRTL")?o-r:0,i.left-=n&&i.left===t.input.offset().left?e(document).scrollLeft():0,i.top-=n&&i.top===t.input.offset().top+a?e(document).scrollTop():0,i.left-=Math.min(i.left,i.left+o>l&&l>o?Math.abs(i.left+o-l):0),i.top-=Math.min(i.top,i.top+s>c&&c>s?Math.abs(s+a):0),i},_findPos:function(t){for(var i,n=this._getInst(t),o=this._get(n,"isRTL");t&&("hidden"===t.type||1!==t.nodeType||e.expr.filters.hidden(t));)t=t[o?"previousSibling":"nextSibling"];return i=e(t).offset(),[i.left,i.top]},_hideDatepicker:function(t){var i,n,o,s,a=this._curInst;!a||t&&a!==e.data(t,r)||this._datepickerShowing&&(i=this._get(a,"showAnim"),n=this._get(a,"duration"),o=function(){e.datepicker._tidyDialog(a)},e.effects&&(e.effects.effect[i]||e.effects[i])?a.dpDiv.hide(i,e.datepicker._get(a,"showOptions"),n,o):a.dpDiv["slideDown"===i?"slideUp":"fadeIn"===i?"fadeOut":"hide"](i?n:null,o),i||o(),this._datepickerShowing=!1,s=this._get(a,"onClose"),s&&s.apply(a.input?a.input[0]:null,[a.input?a.input.val():"",a]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),e.blockUI&&(e.unblockUI(),e("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(e){e.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(t){if(e.datepicker._curInst){var i=e(t.target),n=e.datepicker._getInst(i[0]);(i[0].id!==e.datepicker._mainDivId&&0===i.parents("#"+e.datepicker._mainDivId).length&&!i.hasClass(e.datepicker.markerClassName)&&!i.closest("."+e.datepicker._triggerClass).length&&e.datepicker._datepickerShowing&&(!e.datepicker._inDialog||!e.blockUI)||i.hasClass(e.datepicker.markerClassName)&&e.datepicker._curInst!==n)&&e.datepicker._hideDatepicker()}},_adjustDate:function(t,i,n){var o=e(t),s=this._getInst(o[0]);this._isDisabledDatepicker(o[0])||(this._adjustInstDate(s,i+("M"===n?this._get(s,"showCurrentAtPos"):0),n),this._updateDatepicker(s))},_gotoToday:function(t){var i,n=e(t),o=this._getInst(n[0]);this._get(o,"gotoCurrent")&&o.currentDay?(o.selectedDay=o.currentDay,o.drawMonth=o.selectedMonth=o.currentMonth,o.drawYear=o.selectedYear=o.currentYear):(i=new Date,o.selectedDay=i.getDate(),o.drawMonth=o.selectedMonth=i.getMonth(),o.drawYear=o.selectedYear=i.getFullYear()),this._notifyChange(o),this._adjustDate(n)},_selectMonthYear:function(t,i,n){var o=e(t),s=this._getInst(o[0]);s["selected"+("M"===n?"Month":"Year")]=s["draw"+("M"===n?"Month":"Year")]=parseInt(i.options[i.selectedIndex].value,10),this._notifyChange(s),this._adjustDate(o)},_selectDay:function(t,i,n,o){var s,r=e(t);e(o).hasClass(this._unselectableClass)||this._isDisabledDatepicker(r[0])||(s=this._getInst(r[0]),s.selectedDay=s.currentDay=e("a",o).html(),s.selectedMonth=s.currentMonth=i,s.selectedYear=s.currentYear=n,this._selectDate(t,this._formatDate(s,s.currentDay,s.currentMonth,s.currentYear)))},_clearDate:function(t){var i=e(t);this._selectDate(i,"")},_selectDate:function(t,i){var n,o=e(t),s=this._getInst(o[0]);i=null!=i?i:this._formatDate(s),s.input&&s.input.val(i),this._updateAlternate(s),n=this._get(s,"onSelect"),n?n.apply(s.input?s.input[0]:null,[i,s]):s.input&&s.input.trigger("change"),s.inline?this._updateDatepicker(s):(this._hideDatepicker(),this._lastInput=s.input[0],"object"!=typeof s.input[0]&&s.input.focus(),this._lastInput=null)},_updateAlternate:function(t){var i,n,o,s=this._get(t,"altField");s&&(i=this._get(t,"altFormat")||this._get(t,"dateFormat"),n=this._getDate(t),o=this.formatDate(i,n,this._getFormatConfig(t)),e(s).each(function(){e(this).val(o)}))},noWeekends:function(e){var t=e.getDay();return[t>0&&6>t,""]},iso8601Week:function(e){var t,i=new Date(e.getTime());return i.setDate(i.getDate()+4-(i.getDay()||7)),t=i.getTime(),i.setMonth(0),i.setDate(1),Math.floor(Math.round((t-i)/864e5)/7)+1},parseDate:function(t,i,n){if(null==t||null==i)throw"Invalid arguments";if(i="object"==typeof i?i.toString():i+"",""===i)return null;var o,s,r,a,l=0,c=(n?n.shortYearCutoff:null)||this._defaults.shortYearCutoff,u="string"!=typeof c?c:(new Date).getFullYear()%100+parseInt(c,10),d=(n?n.dayNamesShort:null)||this._defaults.dayNamesShort,h=(n?n.dayNames:null)||this._defaults.dayNames,p=(n?n.monthNamesShort:null)||this._defaults.monthNamesShort,f=(n?n.monthNames:null)||this._defaults.monthNames,m=-1,g=-1,v=-1,_=-1,y=!1,b=function(e){var i=o+1<t.length&&t.charAt(o+1)===e;return i&&o++,i},S=function(e){var t=b(e),n="@"===e?14:"!"===e?20:"y"===e&&t?4:"o"===e?3:2,o=new RegExp("^\\d{1,"+n+"}"),s=i.substring(l).match(o);if(!s)throw"Missing number at position "+l;return l+=s[0].length,parseInt(s[0],10)},T=function(t,n,o){var s=-1,r=e.map(b(t)?o:n,function(e,t){return[[t,e]]}).sort(function(e,t){return-(e[1].length-t[1].length)});if(e.each(r,function(e,t){var n=t[1];return i.substr(l,n.length).toLowerCase()===n.toLowerCase()?(s=t[0],l+=n.length,!1):void 0}),-1!==s)return s+1;throw"Unknown name at position "+l},E=function(){if(i.charAt(l)!==t.charAt(o))throw"Unexpected literal at position "+l;l++};for(o=0;o<t.length;o++)if(y)"'"!==t.charAt(o)||b("'")?E():y=!1;else switch(t.charAt(o)){case"d":v=S("d");break;case"D":T("D",d,h);break;case"o":_=S("o");break;case"m":g=S("m");break;case"M":g=T("M",p,f);break;case"y":m=S("y");break;case"@":a=new Date(S("@")),m=a.getFullYear(),g=a.getMonth()+1,v=a.getDate();break;case"!":a=new Date((S("!")-this._ticksTo1970)/1e4),m=a.getFullYear(),g=a.getMonth()+1,v=a.getDate();break;case"'":b("'")?E():y=!0;break;default:E()}if(l<i.length&&(r=i.substr(l),!/^\s+/.test(r)))throw"Extra/unparsed characters found in date: "+r;if(-1===m?m=(new Date).getFullYear():100>m&&(m+=(new Date).getFullYear()-(new Date).getFullYear()%100+(u>=m?0:-100)),_>-1)for(g=1,v=_;;){if(s=this._getDaysInMonth(m,g-1),s>=v)break;g++,v-=s}if(a=this._daylightSavingAdjust(new Date(m,g-1,v)),a.getFullYear()!==m||a.getMonth()+1!==g||a.getDate()!==v)throw"Invalid date";return a},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*60*60*1e7,formatDate:function(e,t,i){if(!t)return"";var n,o=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,s=(i?i.dayNames:null)||this._defaults.dayNames,r=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,a=(i?i.monthNames:null)||this._defaults.monthNames,l=function(t){var i=n+1<e.length&&e.charAt(n+1)===t;return i&&n++,i},c=function(e,t,i){var n=""+t;if(l(e))for(;n.length<i;)n="0"+n;return n},u=function(e,t,i,n){return l(e)?n[t]:i[t]},d="",h=!1;if(t)for(n=0;n<e.length;n++)if(h)"'"!==e.charAt(n)||l("'")?d+=e.charAt(n):h=!1;else switch(e.charAt(n)){case"d":d+=c("d",t.getDate(),2);break;case"D":d+=u("D",t.getDay(),o,s);break;case"o":d+=c("o",Math.round((new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime()-new Date(t.getFullYear(),0,0).getTime())/864e5),3);break;case"m":d+=c("m",t.getMonth()+1,2);break;case"M":d+=u("M",t.getMonth(),r,a);break;case"y":d+=l("y")?t.getFullYear():(t.getYear()%100<10?"0":"")+t.getYear()%100;break;case"@":d+=t.getTime();break;case"!":d+=1e4*t.getTime()+this._ticksTo1970;break;case"'":l("'")?d+="'":h=!0;break;default:d+=e.charAt(n)}return d},_possibleChars:function(e){var t,i="",n=!1,o=function(i){var n=t+1<e.length&&e.charAt(t+1)===i;return n&&t++,n};for(t=0;t<e.length;t++)if(n)"'"!==e.charAt(t)||o("'")?i+=e.charAt(t):n=!1;else switch(e.charAt(t)){case"d":case"m":case"y":case"@":i+="0123456789";break;case"D":case"M":return null;case"'":o("'")?i+="'":n=!0;break;default:i+=e.charAt(t)}return i},_get:function(e,i){return e.settings[i]!==t?e.settings[i]:this._defaults[i]},_setDateFromField:function(e,t){if(e.input.val()!==e.lastVal){var i=this._get(e,"dateFormat"),n=e.lastVal=e.input?e.input.val():null,o=this._getDefaultDate(e),s=o,r=this._getFormatConfig(e);try{s=this.parseDate(i,n,r)||o}catch(a){n=t?"":n}e.selectedDay=s.getDate(),e.drawMonth=e.selectedMonth=s.getMonth(),e.drawYear=e.selectedYear=s.getFullYear(),e.currentDay=n?s.getDate():0,e.currentMonth=n?s.getMonth():0,e.currentYear=n?s.getFullYear():0,this._adjustInstDate(e)}},_getDefaultDate:function(e){return this._restrictMinMax(e,this._determineDate(e,this._get(e,"defaultDate"),new Date))},_determineDate:function(t,i,n){var o=function(e){var t=new Date;return t.setDate(t.getDate()+e),t},s=function(i){try{return e.datepicker.parseDate(e.datepicker._get(t,"dateFormat"),i,e.datepicker._getFormatConfig(t))}catch(n){}for(var o=(i.toLowerCase().match(/^c/)?e.datepicker._getDate(t):null)||new Date,s=o.getFullYear(),r=o.getMonth(),a=o.getDate(),l=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,c=l.exec(i);c;){switch(c[2]||"d"){case"d":case"D":a+=parseInt(c[1],10);break;case"w":case"W":a+=7*parseInt(c[1],10);break;case"m":case"M":r+=parseInt(c[1],10),a=Math.min(a,e.datepicker._getDaysInMonth(s,r));break;case"y":case"Y":s+=parseInt(c[1],10),a=Math.min(a,e.datepicker._getDaysInMonth(s,r))}c=l.exec(i)}return new Date(s,r,a)},r=null==i||""===i?n:"string"==typeof i?s(i):"number"==typeof i?isNaN(i)?n:o(i):new Date(i.getTime());return r=r&&"Invalid Date"===r.toString()?n:r,r&&(r.setHours(0),r.setMinutes(0),r.setSeconds(0),r.setMilliseconds(0)),this._daylightSavingAdjust(r)
},_daylightSavingAdjust:function(e){return e?(e.setHours(e.getHours()>12?e.getHours()+2:0),e):null},_setDate:function(e,t,i){var n=!t,o=e.selectedMonth,s=e.selectedYear,r=this._restrictMinMax(e,this._determineDate(e,t,new Date));e.selectedDay=e.currentDay=r.getDate(),e.drawMonth=e.selectedMonth=e.currentMonth=r.getMonth(),e.drawYear=e.selectedYear=e.currentYear=r.getFullYear(),o===e.selectedMonth&&s===e.selectedYear||i||this._notifyChange(e),this._adjustInstDate(e),e.input&&e.input.val(n?"":this._formatDate(e))},_getDate:function(e){var t=!e.currentYear||e.input&&""===e.input.val()?null:this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return t},_attachHandlers:function(t){var i=this._get(t,"stepMonths"),n="#"+t.id.replace(/\\\\/g,"\\");t.dpDiv.find("[data-handler]").map(function(){var t={prev:function(){e.datepicker._adjustDate(n,-i,"M")},next:function(){e.datepicker._adjustDate(n,+i,"M")},hide:function(){e.datepicker._hideDatepicker()},today:function(){e.datepicker._gotoToday(n)},selectDay:function(){return e.datepicker._selectDay(n,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return e.datepicker._selectMonthYear(n,this,"M"),!1},selectYear:function(){return e.datepicker._selectMonthYear(n,this,"Y"),!1}};e(this).bind(this.getAttribute("data-event"),t[this.getAttribute("data-handler")])})},_generateHTML:function(e){var t,i,n,o,s,r,a,l,c,u,d,h,p,f,m,g,v,_,y,b,S,T,E,w,M,I,C,D,A,x,N,R,O,L,k,P,F,U,j,H=new Date,B=this._daylightSavingAdjust(new Date(H.getFullYear(),H.getMonth(),H.getDate())),z=this._get(e,"isRTL"),V=this._get(e,"showButtonPanel"),$=this._get(e,"hideIfNoPrevNext"),W=this._get(e,"navigationAsDateFormat"),K=this._getNumberOfMonths(e),Y=this._get(e,"showCurrentAtPos"),q=this._get(e,"stepMonths"),X=1!==K[0]||1!==K[1],G=this._daylightSavingAdjust(e.currentDay?new Date(e.currentYear,e.currentMonth,e.currentDay):new Date(9999,9,9)),J=this._getMinMaxDate(e,"min"),Q=this._getMinMaxDate(e,"max"),Z=e.drawMonth-Y,et=e.drawYear;if(0>Z&&(Z+=12,et--),Q)for(t=this._daylightSavingAdjust(new Date(Q.getFullYear(),Q.getMonth()-K[0]*K[1]+1,Q.getDate())),t=J&&J>t?J:t;this._daylightSavingAdjust(new Date(et,Z,1))>t;)Z--,0>Z&&(Z=11,et--);for(e.drawMonth=Z,e.drawYear=et,i=this._get(e,"prevText"),i=W?this.formatDate(i,this._daylightSavingAdjust(new Date(et,Z-q,1)),this._getFormatConfig(e)):i,n=this._canAdjustMonth(e,-1,et,Z)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(z?"e":"w")+"'>"+i+"</span></a>":$?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(z?"e":"w")+"'>"+i+"</span></a>",o=this._get(e,"nextText"),o=W?this.formatDate(o,this._daylightSavingAdjust(new Date(et,Z+q,1)),this._getFormatConfig(e)):o,s=this._canAdjustMonth(e,1,et,Z)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+o+"'><span class='ui-icon ui-icon-circle-triangle-"+(z?"w":"e")+"'>"+o+"</span></a>":$?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+o+"'><span class='ui-icon ui-icon-circle-triangle-"+(z?"w":"e")+"'>"+o+"</span></a>",r=this._get(e,"currentText"),a=this._get(e,"gotoCurrent")&&e.currentDay?G:B,r=W?this.formatDate(r,a,this._getFormatConfig(e)):r,l=e.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(e,"closeText")+"</button>",c=V?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(z?l:"")+(this._isInRange(e,a)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+r+"</button>":"")+(z?"":l)+"</div>":"",u=parseInt(this._get(e,"firstDay"),10),u=isNaN(u)?0:u,d=this._get(e,"showWeek"),h=this._get(e,"dayNames"),p=this._get(e,"dayNamesMin"),f=this._get(e,"monthNames"),m=this._get(e,"monthNamesShort"),g=this._get(e,"beforeShowDay"),v=this._get(e,"showOtherMonths"),_=this._get(e,"selectOtherMonths"),y=this._getDefaultDate(e),b="",T=0;T<K[0];T++){for(E="",this.maxRows=4,w=0;w<K[1];w++){if(M=this._daylightSavingAdjust(new Date(et,Z,e.selectedDay)),I=" ui-corner-all",C="",X){if(C+="<div class='ui-datepicker-group",K[1]>1)switch(w){case 0:C+=" ui-datepicker-group-first",I=" ui-corner-"+(z?"right":"left");break;case K[1]-1:C+=" ui-datepicker-group-last",I=" ui-corner-"+(z?"left":"right");break;default:C+=" ui-datepicker-group-middle",I=""}C+="'>"}for(C+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+I+"'>"+(/all|left/.test(I)&&0===T?z?s:n:"")+(/all|right/.test(I)&&0===T?z?n:s:"")+this._generateMonthYearHeader(e,Z,et,J,Q,T>0||w>0,f,m)+"</div><table class='ui-datepicker-calendar'><thead><tr>",D=d?"<th class='ui-datepicker-week-col'>"+this._get(e,"weekHeader")+"</th>":"",S=0;7>S;S++)A=(S+u)%7,D+="<th"+((S+u+6)%7>=5?" class='ui-datepicker-week-end'":"")+"><span title='"+h[A]+"'>"+p[A]+"</span></th>";for(C+=D+"</tr></thead><tbody>",x=this._getDaysInMonth(et,Z),et===e.selectedYear&&Z===e.selectedMonth&&(e.selectedDay=Math.min(e.selectedDay,x)),N=(this._getFirstDayOfMonth(et,Z)-u+7)%7,R=Math.ceil((N+x)/7),O=X&&this.maxRows>R?this.maxRows:R,this.maxRows=O,L=this._daylightSavingAdjust(new Date(et,Z,1-N)),k=0;O>k;k++){for(C+="<tr>",P=d?"<td class='ui-datepicker-week-col'>"+this._get(e,"calculateWeek")(L)+"</td>":"",S=0;7>S;S++)F=g?g.apply(e.input?e.input[0]:null,[L]):[!0,""],U=L.getMonth()!==Z,j=U&&!_||!F[0]||J&&J>L||Q&&L>Q,P+="<td class='"+((S+u+6)%7>=5?" ui-datepicker-week-end":"")+(U?" ui-datepicker-other-month":"")+(L.getTime()===M.getTime()&&Z===e.selectedMonth&&e._keyEvent||y.getTime()===L.getTime()&&y.getTime()===M.getTime()?" "+this._dayOverClass:"")+(j?" "+this._unselectableClass+" ui-state-disabled":"")+(U&&!v?"":" "+F[1]+(L.getTime()===G.getTime()?" "+this._currentClass:"")+(L.getTime()===B.getTime()?" ui-datepicker-today":""))+"'"+(U&&!v||!F[2]?"":" title='"+F[2].replace(/'/g,"&#39;")+"'")+(j?"":" data-handler='selectDay' data-event='click' data-month='"+L.getMonth()+"' data-year='"+L.getFullYear()+"'")+">"+(U&&!v?"&#xa0;":j?"<span class='ui-state-default'>"+L.getDate()+"</span>":"<a class='ui-state-default"+(L.getTime()===B.getTime()?" ui-state-highlight":"")+(L.getTime()===G.getTime()?" ui-state-active":"")+(U?" ui-priority-secondary":"")+"' href='#'>"+L.getDate()+"</a>")+"</td>",L.setDate(L.getDate()+1),L=this._daylightSavingAdjust(L);C+=P+"</tr>"}Z++,Z>11&&(Z=0,et++),C+="</tbody></table>"+(X?"</div>"+(K[0]>0&&w===K[1]-1?"<div class='ui-datepicker-row-break'></div>":""):""),E+=C}b+=E}return b+=c,e._keyEvent=!1,b},_generateMonthYearHeader:function(e,t,i,n,o,s,r,a){var l,c,u,d,h,p,f,m,g=this._get(e,"changeMonth"),v=this._get(e,"changeYear"),_=this._get(e,"showMonthAfterYear"),y="<div class='ui-datepicker-title'>",b="";if(s||!g)b+="<span class='ui-datepicker-month'>"+r[t]+"</span>";else{for(l=n&&n.getFullYear()===i,c=o&&o.getFullYear()===i,b+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",u=0;12>u;u++)(!l||u>=n.getMonth())&&(!c||u<=o.getMonth())&&(b+="<option value='"+u+"'"+(u===t?" selected='selected'":"")+">"+a[u]+"</option>");b+="</select>"}if(_||(y+=b+(!s&&g&&v?"":"&#xa0;")),!e.yearshtml)if(e.yearshtml="",s||!v)y+="<span class='ui-datepicker-year'>"+i+"</span>";else{for(d=this._get(e,"yearRange").split(":"),h=(new Date).getFullYear(),p=function(e){var t=e.match(/c[+\-].*/)?i+parseInt(e.substring(1),10):e.match(/[+\-].*/)?h+parseInt(e,10):parseInt(e,10);return isNaN(t)?h:t},f=p(d[0]),m=Math.max(f,p(d[1]||"")),f=n?Math.max(f,n.getFullYear()):f,m=o?Math.min(m,o.getFullYear()):m,e.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";m>=f;f++)e.yearshtml+="<option value='"+f+"'"+(f===i?" selected='selected'":"")+">"+f+"</option>";e.yearshtml+="</select>",y+=e.yearshtml,e.yearshtml=null}return y+=this._get(e,"yearSuffix"),_&&(y+=(!s&&g&&v?"":"&#xa0;")+b),y+="</div>"},_adjustInstDate:function(e,t,i){var n=e.drawYear+("Y"===i?t:0),o=e.drawMonth+("M"===i?t:0),s=Math.min(e.selectedDay,this._getDaysInMonth(n,o))+("D"===i?t:0),r=this._restrictMinMax(e,this._daylightSavingAdjust(new Date(n,o,s)));e.selectedDay=r.getDate(),e.drawMonth=e.selectedMonth=r.getMonth(),e.drawYear=e.selectedYear=r.getFullYear(),("M"===i||"Y"===i)&&this._notifyChange(e)},_restrictMinMax:function(e,t){var i=this._getMinMaxDate(e,"min"),n=this._getMinMaxDate(e,"max"),o=i&&i>t?i:t;return n&&o>n?n:o},_notifyChange:function(e){var t=this._get(e,"onChangeMonthYear");t&&t.apply(e.input?e.input[0]:null,[e.selectedYear,e.selectedMonth+1,e])},_getNumberOfMonths:function(e){var t=this._get(e,"numberOfMonths");return null==t?[1,1]:"number"==typeof t?[1,t]:t},_getMinMaxDate:function(e,t){return this._determineDate(e,this._get(e,t+"Date"),null)},_getDaysInMonth:function(e,t){return 32-this._daylightSavingAdjust(new Date(e,t,32)).getDate()},_getFirstDayOfMonth:function(e,t){return new Date(e,t,1).getDay()},_canAdjustMonth:function(e,t,i,n){var o=this._getNumberOfMonths(e),s=this._daylightSavingAdjust(new Date(i,n+(0>t?t:o[0]*o[1]),1));return 0>t&&s.setDate(this._getDaysInMonth(s.getFullYear(),s.getMonth())),this._isInRange(e,s)},_isInRange:function(e,t){var i,n,o=this._getMinMaxDate(e,"min"),s=this._getMinMaxDate(e,"max"),r=null,a=null,l=this._get(e,"yearRange");return l&&(i=l.split(":"),n=(new Date).getFullYear(),r=parseInt(i[0],10),a=parseInt(i[1],10),i[0].match(/[+\-].*/)&&(r+=n),i[1].match(/[+\-].*/)&&(a+=n)),(!o||t.getTime()>=o.getTime())&&(!s||t.getTime()<=s.getTime())&&(!r||t.getFullYear()>=r)&&(!a||t.getFullYear()<=a)},_getFormatConfig:function(e){var t=this._get(e,"shortYearCutoff");return t="string"!=typeof t?t:(new Date).getFullYear()%100+parseInt(t,10),{shortYearCutoff:t,dayNamesShort:this._get(e,"dayNamesShort"),dayNames:this._get(e,"dayNames"),monthNamesShort:this._get(e,"monthNamesShort"),monthNames:this._get(e,"monthNames")}},_formatDate:function(e,t,i,n){t||(e.currentDay=e.selectedDay,e.currentMonth=e.selectedMonth,e.currentYear=e.selectedYear);var o=t?"object"==typeof t?t:this._daylightSavingAdjust(new Date(n,i,t)):this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return this.formatDate(this._get(e,"dateFormat"),o,this._getFormatConfig(e))}}),e.fn.datepicker=function(t){if(!this.length)return this;e.datepicker.initialized||(e(document).mousedown(e.datepicker._checkExternalClick),e.datepicker.initialized=!0),0===e("#"+e.datepicker._mainDivId).length&&e("body").append(e("<div class='visualizejs'></div>").append(e.datepicker.dpDiv));var i=Array.prototype.slice.call(arguments,1);return"string"!=typeof t||"isDisabled"!==t&&"getDate"!==t&&"widget"!==t?"option"===t&&2===arguments.length&&"string"==typeof arguments[1]?e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(i)):this.each(function(){"string"==typeof t?e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this].concat(i)):e.datepicker._attachDatepicker(this,t)}):e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(i))},e.datepicker=new i,e.datepicker.initialized=!1,e.datepicker.uuid=(new Date).getTime(),e.datepicker.version="@VERSION"}(t),function(e){var t={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},i={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0};e.widget("ui.dialog",{version:"@VERSION",options:{appendTo:"body",autoOpen:!0,buttons:[],closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(t){var i=e(this).css(t).offset().top;0>i&&e(this).css("top",t.top-i)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),this.options.title=this.options.title||this.originalTitle,this._createWrapper(),this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(this.uiDialog),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&e.fn.draggable&&this._makeDraggable(),this.options.resizable&&e.fn.resizable&&this._makeResizable(),this._isOpen=!1},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var t=this.options.appendTo;return t&&(t.jquery||t.nodeType)?e(t):this.document.find(t||"body").eq(0)},_destroy:function(){var e,t=this.originalPosition;this._destroyOverlay(),this.element.removeUniqueId().removeClass("ui-dialog-content ui-widget-content").css(this.originalCss).detach(),this.uiDialog.stop(!0,!0).remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),e=t.parent.children().eq(t.index),e.length&&e[0]!==this.element[0]?e.before(this.element):t.parent.append(this.element)},widget:function(){return this.uiDialog},disable:e.noop,enable:e.noop,close:function(t){var i,n=this;if(this._isOpen&&this._trigger("beforeClose",t)!==!1){if(this._isOpen=!1,this._destroyOverlay(),!this.opener.filter(":focusable").focus().length)try{i=this.document[0].activeElement,i&&"body"!==i.nodeName.toLowerCase()&&e(i).blur()}catch(o){}this._hide(this.uiDialog,this.options.hide,function(){n._trigger("close",t)})}},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(e,t){var i=!!this.uiDialog.nextAll(":visible").insertBefore(this.uiDialog).length;return i&&!t&&this._trigger("focus",e),i},open:function(){var t=this;return this._isOpen?void(this._moveToTop()&&this._focusTabbable()):(this._isOpen=!0,this.opener=e(this.document[0].activeElement),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this._show(this.uiDialog,this.options.show,function(){t._focusTabbable(),t._trigger("focus")}),void this._trigger("open"))},_focusTabbable:function(){var e=this.element.find("[autofocus]");e.length||(e=this.element.find(":tabbable")),e.length||(e=this.uiDialogButtonPane.find(":tabbable")),e.length||(e=this.uiDialogTitlebarClose.filter(":tabbable")),e.length||(e=this.uiDialog),e.eq(0).focus()},_keepFocus:function(t){function i(){var t=this.document[0].activeElement,i=this.uiDialog[0]===t||e.contains(this.uiDialog[0],t);i||this._focusTabbable()}t.preventDefault(),i.call(this),this._delay(i)},_createWrapper:function(){this.uiDialog=e("<div>").addClass("ui-dialog ui-widget ui-widget-content ui-corner-all ui-front "+this.options.dialogClass).hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._on(this.uiDialog,{keydown:function(t){if(this.options.closeOnEscape&&!t.isDefaultPrevented()&&t.keyCode&&t.keyCode===e.ui.keyCode.ESCAPE)return t.preventDefault(),void this.close(t);if(t.keyCode===e.ui.keyCode.TAB){var i=this.uiDialog.find(":tabbable"),n=i.filter(":first"),o=i.filter(":last");t.target!==o[0]&&t.target!==this.uiDialog[0]||t.shiftKey?t.target!==n[0]&&t.target!==this.uiDialog[0]||!t.shiftKey||(o.focus(1),t.preventDefault()):(n.focus(1),t.preventDefault())}},mousedown:function(e){this._moveToTop(e)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var t;this.uiDialogTitlebar=e("<div>").addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(this.uiDialog),this._on(this.uiDialogTitlebar,{mousedown:function(t){e(t.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.focus()}}),this.uiDialogTitlebarClose=e("<button type='button'></button>").button({label:this.options.closeText,icons:{primary:"ui-icon-closethick"},text:!1}).addClass("ui-dialog-titlebar-close").appendTo(this.uiDialogTitlebar),this._on(this.uiDialogTitlebarClose,{click:function(e){e.preventDefault(),this.close(e)}}),t=e("<span>").uniqueId().addClass("ui-dialog-title").prependTo(this.uiDialogTitlebar),this._title(t),this.uiDialog.attr({"aria-labelledby":t.attr("id")})},_title:function(e){this.options.title||e.html("&#160;"),e.text(this.options.title)},_createButtonPane:function(){this.uiDialogButtonPane=e("<div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),this.uiButtonSet=e("<div>").addClass("ui-dialog-buttonset").appendTo(this.uiDialogButtonPane),this._createButtons()},_createButtons:function(){var t=this,i=this.options.buttons;return this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),e.isEmptyObject(i)||e.isArray(i)&&!i.length?void this.uiDialog.removeClass("ui-dialog-buttons"):(e.each(i,function(i,n){var o,s;n=e.isFunction(n)?{click:n,text:i}:n,n=e.extend({type:"button"},n),o=n.click,n.click=function(){o.apply(t.element[0],arguments)},s={icons:n.icons,text:n.showText},delete n.icons,delete n.showText,e("<button></button>",n).button(s).appendTo(t.uiButtonSet)}),this.uiDialog.addClass("ui-dialog-buttons"),void this.uiDialogButtonPane.appendTo(this.uiDialog))},_makeDraggable:function(){function t(e){return{position:e.position,offset:e.offset}}var i=this,n=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(n,o){e(this).addClass("ui-dialog-dragging"),i._blockFrames(),i._trigger("dragStart",n,t(o))},drag:function(e,n){i._trigger("drag",e,t(n))},stop:function(o,s){n.position=[s.position.left-i.document.scrollLeft(),s.position.top-i.document.scrollTop()],e(this).removeClass("ui-dialog-dragging"),i._unblockFrames(),i._trigger("dragStop",o,t(s))}})},_makeResizable:function(){function t(e){return{originalPosition:e.originalPosition,originalSize:e.originalSize,position:e.position,size:e.size}}var i=this,n=this.options,o=n.resizable,s=this.uiDialog.css("position"),r="string"==typeof o?o:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:n.maxWidth,maxHeight:n.maxHeight,minWidth:n.minWidth,minHeight:this._minHeight(),handles:r,start:function(n,o){e(this).addClass("ui-dialog-resizing"),i._blockFrames(),i._trigger("resizeStart",n,t(o))},resize:function(e,n){i._trigger("resize",e,t(n))},stop:function(o,s){n.height=e(this).height(),n.width=e(this).width(),e(this).removeClass("ui-dialog-resizing"),i._unblockFrames(),i._trigger("resizeStop",o,t(s))}}).css("position",s)},_minHeight:function(){var e=this.options;return"auto"===e.height?e.minHeight:Math.min(e.minHeight,e.height)},_position:function(){var e=this.uiDialog.is(":visible");e||this.uiDialog.show(),this.uiDialog.position(this.options.position),e||this.uiDialog.hide()},_setOptions:function(n){var o=this,s=!1,r={};e.each(n,function(e,n){o._setOption(e,n),e in t&&(s=!0),e in i&&(r[e]=n)}),s&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",r)},_setOption:function(e,t){var i,n,o=this.uiDialog;"dialogClass"===e&&o.removeClass(this.options.dialogClass).addClass(t),"disabled"!==e&&(this._super(e,t),"appendTo"===e&&this.uiDialog.appendTo(this._appendTo()),"buttons"===e&&this._createButtons(),"closeText"===e&&this.uiDialogTitlebarClose.button({label:""+t}),"draggable"===e&&(i=o.is(":data(ui-draggable)"),i&&!t&&o.draggable("destroy"),!i&&t&&this._makeDraggable()),"position"===e&&this._position(),"resizable"===e&&(n=o.is(":data(ui-resizable)"),n&&!t&&o.resizable("destroy"),n&&"string"==typeof t&&o.resizable("option","handles",t),n||t===!1||this._makeResizable()),"title"===e&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))},_size:function(){var e,t,i,n=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),n.minWidth>n.width&&(n.width=n.minWidth),e=this.uiDialog.css({height:"auto",width:n.width}).outerHeight(),t=Math.max(0,n.minHeight-e),i="number"==typeof n.maxHeight?Math.max(0,n.maxHeight-e):"none","auto"===n.height?this.element.css({minHeight:t,maxHeight:i,height:"auto"}):this.element.height(Math.max(0,n.height-e)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var t=e(this);return e("<div>").css({position:"absolute",width:t.outerWidth(),height:t.outerHeight()}).appendTo(t.parent()).offset(t.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(t){return e(t.target).closest(".ui-dialog").length?!0:!!e(t.target).closest(".ui-datepicker").length},_createOverlay:function(){if(this.options.modal){var t=this,i=this.widgetFullName;e.ui.dialog.overlayInstances||this._delay(function(){e.ui.dialog.overlayInstances&&this.document.bind("focusin.dialog",function(n){t._allowInteraction(n)||(n.preventDefault(),e(".ui-dialog:visible:last .ui-dialog-content").data(i)._focusTabbable())})}),this.overlay=e("<div>").addClass("ui-widget-overlay ui-front").appendTo(this._appendTo()),this._on(this.overlay,{mousedown:"_keepFocus"}),e.ui.dialog.overlayInstances++}},_destroyOverlay:function(){this.options.modal&&this.overlay&&(e.ui.dialog.overlayInstances--,e.ui.dialog.overlayInstances||this.document.unbind("focusin.dialog"),this.overlay.remove(),this.overlay=null)}}),e.ui.dialog.overlayInstances=0,e.uiBackCompat!==!1&&e.widget("ui.dialog",e.ui.dialog,{_position:function(){var t,i=this.options.position,n=[],o=[0,0];i?(("string"==typeof i||"object"==typeof i&&"0"in i)&&(n=i.split?i.split(" "):[i[0],i[1]],1===n.length&&(n[1]=n[0]),e.each(["left","top"],function(e,t){+n[e]===n[e]&&(o[e]=n[e],n[e]=t)}),i={my:n[0]+(o[0]<0?o[0]:"+"+o[0])+" "+n[1]+(o[1]<0?o[1]:"+"+o[1]),at:n.join(" ")}),i=e.extend({},e.ui.dialog.prototype.options.position,i)):i=e.ui.dialog.prototype.options.position,t=this.uiDialog.is(":visible"),t||this.uiDialog.show(),this.uiDialog.position(i),t||this.uiDialog.hide()}})}(t),function(e){var t=/up|down|vertical/,i=/up|left|vertical|horizontal/;e.effects.effect.blind=function(n,o){var s,r,a,l=e(this),c=["position","top","bottom","left","right","height","width"],u=e.effects.setMode(l,n.mode||"hide"),d=n.direction||"up",h=t.test(d),p=h?"height":"width",f=h?"top":"left",m=i.test(d),g={},v="show"===u;l.parent().is(".ui-effects-wrapper")?e.effects.save(l.parent(),c):e.effects.save(l,c),l.show(),s=e.effects.createWrapper(l).css({overflow:"hidden"}),r=s[p](),a=parseFloat(s.css(f))||0,g[p]=v?r:0,m||(l.css(h?"bottom":"right",0).css(h?"top":"left","auto").css({position:"absolute"}),g[f]=v?a:r+a),v&&(s.css(p,0),m||s.css(f,a+r)),s.animate(g,{duration:n.duration,easing:n.easing,queue:!1,complete:function(){"hide"===u&&l.hide(),e.effects.restore(l,c),e.effects.removeWrapper(l),o()}})}}(t),function(e){e.effects.effect.bounce=function(t,i){var n,o,s,r=e(this),a=["position","top","bottom","left","right","height","width"],l=e.effects.setMode(r,t.mode||"effect"),c="hide"===l,u="show"===l,d=t.direction||"up",h=t.distance,p=t.times||5,f=2*p+(u||c?1:0),m=t.duration/f,g=t.easing,v="up"===d||"down"===d?"top":"left",_="up"===d||"left"===d,y=r.queue(),b=y.length;for((u||c)&&a.push("opacity"),e.effects.save(r,a),r.show(),e.effects.createWrapper(r),h||(h=r["top"===v?"outerHeight":"outerWidth"]()/3),u&&(s={opacity:1},s[v]=0,r.css("opacity",0).css(v,_?2*-h:2*h).animate(s,m,g)),c&&(h/=Math.pow(2,p-1)),s={},s[v]=0,n=0;p>n;n++)o={},o[v]=(_?"-=":"+=")+h,r.animate(o,m,g).animate(s,m,g),h=c?2*h:h/2;c&&(o={opacity:0},o[v]=(_?"-=":"+=")+h,r.animate(o,m,g)),r.queue(function(){c&&r.hide(),e.effects.restore(r,a),e.effects.removeWrapper(r),i()}),b>1&&y.splice.apply(y,[1,0].concat(y.splice(b,f+1))),r.dequeue()}}(t),function(e){e.effects.effect.clip=function(t,i){var n,o,s,r=e(this),a=["position","top","bottom","left","right","height","width"],l=e.effects.setMode(r,t.mode||"hide"),c="show"===l,u=t.direction||"vertical",d="vertical"===u,h=d?"height":"width",p=d?"top":"left",f={};e.effects.save(r,a),r.show(),n=e.effects.createWrapper(r).css({overflow:"hidden"}),o="IMG"===r[0].tagName?n:r,s=o[h](),c&&(o.css(h,0),o.css(p,s/2)),f[h]=c?s:0,f[p]=c?0:s/2,o.animate(f,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){c||r.hide(),e.effects.restore(r,a),e.effects.removeWrapper(r),i()}})}}(t),function(e){e.effects.effect.drop=function(t,i){var n,o=e(this),s=["position","top","bottom","left","right","opacity","height","width"],r=e.effects.setMode(o,t.mode||"hide"),a="show"===r,l=t.direction||"left",c="up"===l||"down"===l?"top":"left",u="up"===l||"left"===l?"pos":"neg",d={opacity:a?1:0};e.effects.save(o,s),o.show(),e.effects.createWrapper(o),n=t.distance||o["top"===c?"outerHeight":"outerWidth"](!0)/2,a&&o.css("opacity",0).css(c,"pos"===u?-n:n),d[c]=(a?"pos"===u?"+=":"-=":"pos"===u?"-=":"+=")+n,o.animate(d,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){"hide"===r&&o.hide(),e.effects.restore(o,s),e.effects.removeWrapper(o),i()}})}}(t),function(e){e.effects.effect.explode=function(t,i){function n(){y.push(this),y.length===d*h&&o()}function o(){p.css({visibility:"visible"}),e(y).remove(),m||p.hide(),i()}var s,r,a,l,c,u,d=t.pieces?Math.round(Math.sqrt(t.pieces)):3,h=d,p=e(this),f=e.effects.setMode(p,t.mode||"hide"),m="show"===f,g=p.show().css("visibility","hidden").offset(),v=Math.ceil(p.outerWidth()/h),_=Math.ceil(p.outerHeight()/d),y=[];for(s=0;d>s;s++)for(l=g.top+s*_,u=s-(d-1)/2,r=0;h>r;r++)a=g.left+r*v,c=r-(h-1)/2,p.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-r*v,top:-s*_}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:v,height:_,left:a+(m?c*v:0),top:l+(m?u*_:0),opacity:m?0:1}).animate({left:a+(m?0:c*v),top:l+(m?0:u*_),opacity:m?1:0},t.duration||500,t.easing,n)}}(t),function(e){e.effects.effect.fade=function(t,i){var n=e(this),o=e.effects.setMode(n,t.mode||"toggle");n.animate({opacity:o},{queue:!1,duration:t.duration,easing:t.easing,complete:i})}}(t),function(e){e.effects.effect.fold=function(t,i){var n,o,s=e(this),r=["position","top","bottom","left","right","height","width"],a=e.effects.setMode(s,t.mode||"hide"),l="show"===a,c="hide"===a,u=t.size||15,d=/([0-9]+)%/.exec(u),h=!!t.horizFirst,p=l!==h,f=p?["width","height"]:["height","width"],m=t.duration/2,g={},v={};e.effects.save(s,r),s.show(),n=e.effects.createWrapper(s).css({overflow:"hidden"}),o=p?[n.width(),n.height()]:[n.height(),n.width()],d&&(u=parseInt(d[1],10)/100*o[c?0:1]),l&&n.css(h?{height:0,width:u}:{height:u,width:0}),g[f[0]]=l?o[0]:u,v[f[1]]=l?o[1]:0,n.animate(g,m,t.easing).animate(v,m,t.easing,function(){c&&s.hide(),e.effects.restore(s,r),e.effects.removeWrapper(s),i()})}}(t),function(e){e.effects.effect.highlight=function(t,i){var n=e(this),o=["backgroundImage","backgroundColor","opacity"],s=e.effects.setMode(n,t.mode||"show"),r={backgroundColor:n.css("backgroundColor")};"hide"===s&&(r.opacity=0),e.effects.save(n,o),n.show().css({backgroundImage:"none",backgroundColor:t.color||"#ffff99"}).animate(r,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){"hide"===s&&n.hide(),e.effects.restore(n,o),i()}})}}(t),function(e){e.effects.effect.pulsate=function(t,i){var n,o=e(this),s=e.effects.setMode(o,t.mode||"show"),r="show"===s,a="hide"===s,l=r||"hide"===s,c=2*(t.times||5)+(l?1:0),u=t.duration/c,d=0,h=o.queue(),p=h.length;for((r||!o.is(":visible"))&&(o.css("opacity",0).show(),d=1),n=1;c>n;n++)o.animate({opacity:d},u,t.easing),d=1-d;o.animate({opacity:d},u,t.easing),o.queue(function(){a&&o.hide(),i()}),p>1&&h.splice.apply(h,[1,0].concat(h.splice(p,c+1))),o.dequeue()}}(t),function(e){e.effects.effect.puff=function(t,i){var n=e(this),o=e.effects.setMode(n,t.mode||"hide"),s="hide"===o,r=parseInt(t.percent,10)||150,a=r/100,l={height:n.height(),width:n.width(),outerHeight:n.outerHeight(),outerWidth:n.outerWidth()};e.extend(t,{effect:"scale",queue:!1,fade:!0,mode:o,complete:i,percent:s?r:100,from:s?l:{height:l.height*a,width:l.width*a,outerHeight:l.outerHeight*a,outerWidth:l.outerWidth*a}}),n.effect(t)},e.effects.effect.scale=function(t,i){var n=e(this),o=e.extend(!0,{},t),s=e.effects.setMode(n,t.mode||"effect"),r=parseInt(t.percent,10)||(0===parseInt(t.percent,10)?0:"hide"===s?0:100),a=t.direction||"both",l=t.origin,c={height:n.height(),width:n.width(),outerHeight:n.outerHeight(),outerWidth:n.outerWidth()},u={y:"horizontal"!==a?r/100:1,x:"vertical"!==a?r/100:1};o.effect="size",o.queue=!1,o.complete=i,"effect"!==s&&(o.origin=l||["middle","center"],o.restore=!0),o.from=t.from||("show"===s?{height:0,width:0,outerHeight:0,outerWidth:0}:c),o.to={height:c.height*u.y,width:c.width*u.x,outerHeight:c.outerHeight*u.y,outerWidth:c.outerWidth*u.x},o.fade&&("show"===s&&(o.from.opacity=0,o.to.opacity=1),"hide"===s&&(o.from.opacity=1,o.to.opacity=0)),n.effect(o)},e.effects.effect.size=function(t,i){var n,o,s,r=e(this),a=["position","top","bottom","left","right","width","height","overflow","opacity"],l=["position","top","bottom","left","right","overflow","opacity"],c=["width","height","overflow"],u=["fontSize"],d=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],h=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],p=e.effects.setMode(r,t.mode||"effect"),f=t.restore||"effect"!==p,m=t.scale||"both",g=t.origin||["middle","center"],v=r.css("position"),_=f?a:l,y={height:0,width:0,outerHeight:0,outerWidth:0};"show"===p&&r.show(),n={height:r.height(),width:r.width(),outerHeight:r.outerHeight(),outerWidth:r.outerWidth()},"toggle"===t.mode&&"show"===p?(r.from=t.to||y,r.to=t.from||n):(r.from=t.from||("show"===p?y:n),r.to=t.to||("hide"===p?y:n)),s={from:{y:r.from.height/n.height,x:r.from.width/n.width},to:{y:r.to.height/n.height,x:r.to.width/n.width}},("box"===m||"both"===m)&&(s.from.y!==s.to.y&&(_=_.concat(d),r.from=e.effects.setTransition(r,d,s.from.y,r.from),r.to=e.effects.setTransition(r,d,s.to.y,r.to)),s.from.x!==s.to.x&&(_=_.concat(h),r.from=e.effects.setTransition(r,h,s.from.x,r.from),r.to=e.effects.setTransition(r,h,s.to.x,r.to))),("content"===m||"both"===m)&&s.from.y!==s.to.y&&(_=_.concat(u).concat(c),r.from=e.effects.setTransition(r,u,s.from.y,r.from),r.to=e.effects.setTransition(r,u,s.to.y,r.to)),e.effects.save(r,_),r.show(),e.effects.createWrapper(r),r.css("overflow","hidden").css(r.from),g&&(o=e.effects.getBaseline(g,n),r.from.top=(n.outerHeight-r.outerHeight())*o.y,r.from.left=(n.outerWidth-r.outerWidth())*o.x,r.to.top=(n.outerHeight-r.to.outerHeight)*o.y,r.to.left=(n.outerWidth-r.to.outerWidth)*o.x),r.css(r.from),("content"===m||"both"===m)&&(d=d.concat(["marginTop","marginBottom"]).concat(u),h=h.concat(["marginLeft","marginRight"]),c=a.concat(d).concat(h),r.find("*[width]").each(function(){var i=e(this),n={height:i.height(),width:i.width(),outerHeight:i.outerHeight(),outerWidth:i.outerWidth()};f&&e.effects.save(i,c),i.from={height:n.height*s.from.y,width:n.width*s.from.x,outerHeight:n.outerHeight*s.from.y,outerWidth:n.outerWidth*s.from.x},i.to={height:n.height*s.to.y,width:n.width*s.to.x,outerHeight:n.height*s.to.y,outerWidth:n.width*s.to.x},s.from.y!==s.to.y&&(i.from=e.effects.setTransition(i,d,s.from.y,i.from),i.to=e.effects.setTransition(i,d,s.to.y,i.to)),s.from.x!==s.to.x&&(i.from=e.effects.setTransition(i,h,s.from.x,i.from),i.to=e.effects.setTransition(i,h,s.to.x,i.to)),i.css(i.from),i.animate(i.to,t.duration,t.easing,function(){f&&e.effects.restore(i,c)})})),r.animate(r.to,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){0===r.to.opacity&&r.css("opacity",r.from.opacity),"hide"===p&&r.hide(),e.effects.restore(r,_),f||("static"===v?r.css({position:"relative",top:r.to.top,left:r.to.left}):e.each(["top","left"],function(e,t){r.css(t,function(t,i){var n=parseInt(i,10),o=e?r.to.left:r.to.top;
return"auto"===i?o+"px":n+o+"px"})})),e.effects.removeWrapper(r),i()}})}}(t),function(e){e.effects.effect.shake=function(t,i){var n,o=e(this),s=["position","top","bottom","left","right","height","width"],r=e.effects.setMode(o,t.mode||"effect"),a=t.direction||"left",l=t.distance||20,c=t.times||3,u=2*c+1,d=Math.round(t.duration/u),h="up"===a||"down"===a?"top":"left",p="up"===a||"left"===a,f={},m={},g={},v=o.queue(),_=v.length;for(e.effects.save(o,s),o.show(),e.effects.createWrapper(o),f[h]=(p?"-=":"+=")+l,m[h]=(p?"+=":"-=")+2*l,g[h]=(p?"-=":"+=")+2*l,o.animate(f,d,t.easing),n=1;c>n;n++)o.animate(m,d,t.easing).animate(g,d,t.easing);o.animate(m,d,t.easing).animate(f,d/2,t.easing).queue(function(){"hide"===r&&o.hide(),e.effects.restore(o,s),e.effects.removeWrapper(o),i()}),_>1&&v.splice.apply(v,[1,0].concat(v.splice(_,u+1))),o.dequeue()}}(t),function(e){e.effects.effect.slide=function(t,i){var n,o=e(this),s=["position","top","bottom","left","right","width","height"],r=e.effects.setMode(o,t.mode||"show"),a="show"===r,l=t.direction||"left",c="up"===l||"down"===l?"top":"left",u="up"===l||"left"===l,d={};e.effects.save(o,s),o.show(),n=t.distance||o["top"===c?"outerHeight":"outerWidth"](!0),e.effects.createWrapper(o).css({overflow:"hidden"}),a&&o.css(c,u?isNaN(n)?"-"+n:-n:n),d[c]=(a?u?"+=":"-=":u?"-=":"+=")+n,o.animate(d,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){"hide"===r&&o.hide(),e.effects.restore(o,s),e.effects.removeWrapper(o),i()}})}}(t),function(e){e.effects.effect.transfer=function(t,i){var n=e(this),o=e(t.to),s="fixed"===o.css("position"),r=e("body"),a=s?r.scrollTop():0,l=s?r.scrollLeft():0,c=o.offset(),u={top:c.top-a,left:c.left-l,height:o.innerHeight(),width:o.innerWidth()},d=n.offset(),h=e("<div class='ui-effects-transfer'></div>").appendTo(document.body).addClass(t.className).css({top:d.top-a,left:d.left-l,height:n.innerHeight(),width:n.innerWidth(),position:s?"fixed":"absolute"}).animate(u,t.duration,t.easing,function(){h.remove(),i()})}}(t),function(e){e.widget("ui.menu",{version:"@VERSION",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content ui-corner-all").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}).bind("click"+this.eventNamespace,e.proxy(function(e){this.options.disabled&&e.preventDefault()},this)),this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true"),this._on({"mousedown .ui-menu-item > a":function(e){e.preventDefault()},"click .ui-state-disabled > a":function(e){e.preventDefault()},"click .ui-menu-item:has(a)":function(t){var i=e(t.target).closest(".ui-menu-item");!this.mouseHandled&&i.not(".ui-state-disabled").length&&(this.select(t),t.isPropagationStopped()||(this.mouseHandled=!0),i.has(".ui-menu").length?this.expand(t):!this.element.is(":focus")&&e(this.document[0].activeElement).closest(".ui-menu").length&&(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(t){var i=e(t.currentTarget);i.siblings().children(".ui-state-active").removeClass("ui-state-active"),this.focus(t,i)},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(e,t){var i=this.active||this.element.children(".ui-menu-item").eq(0);t||this.focus(e,i)},blur:function(t){this._delay(function(){e.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(t)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(t){e(t.target).closest(".ui-menu").length||this.collapseAll(t),this.mouseHandled=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeClass("ui-menu ui-widget ui-widget-content ui-corner-all ui-menu-icons").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(),this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").children("a").removeUniqueId().removeClass("ui-corner-all ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var t=e(this);t.data("ui-menu-submenu-carat")&&t.remove()}),this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(t){function i(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}var n,o,s,r,a,l=!0;switch(t.keyCode){case e.ui.keyCode.PAGE_UP:this.previousPage(t);break;case e.ui.keyCode.PAGE_DOWN:this.nextPage(t);break;case e.ui.keyCode.HOME:this._move("first","first",t);break;case e.ui.keyCode.END:this._move("last","last",t);break;case e.ui.keyCode.UP:this.previous(t);break;case e.ui.keyCode.DOWN:this.next(t);break;case e.ui.keyCode.LEFT:this.collapse(t);break;case e.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(t);break;case e.ui.keyCode.ENTER:case e.ui.keyCode.SPACE:this._activate(t);break;case e.ui.keyCode.ESCAPE:this.collapse(t);break;default:l=!1,o=this.previousFilter||"",s=String.fromCharCode(t.keyCode),r=!1,clearTimeout(this.filterTimer),s===o?r=!0:s=o+s,a=new RegExp("^"+i(s),"i"),n=this.activeMenu.children(".ui-menu-item").filter(function(){return a.test(e(this).children("a").text())}),n=r&&-1!==n.index(this.active.next())?this.active.nextAll(".ui-menu-item"):n,n.length||(s=String.fromCharCode(t.keyCode),a=new RegExp("^"+i(s),"i"),n=this.activeMenu.children(".ui-menu-item").filter(function(){return a.test(e(this).children("a").text())})),n.length?(this.focus(t,n),n.length>1?(this.previousFilter=s,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter):delete this.previousFilter}l&&t.preventDefault()},_activate:function(e){this.active.is(".ui-state-disabled")||(this.active.children("a[aria-haspopup='true']").length?this.expand(e):this.select(e))},refresh:function(){var t,i=this.options.icons.submenu,n=this.element.find(this.options.menus);this.element.toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length),n.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-corner-all").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var t=e(this),n=t.prev("a"),o=e("<span>").addClass("ui-menu-icon ui-icon "+i).data("ui-menu-submenu-carat",!0);n.attr("aria-haspopup","true").prepend(o),t.attr("aria-labelledby",n.attr("id"))}),t=n.add(this.element),t.children(":not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","presentation").children("a").uniqueId().addClass("ui-corner-all").attr({tabIndex:-1,role:this._itemRole()}),t.children(":not(.ui-menu-item)").each(function(){var t=e(this);/[^\-\u2014\u2013\s]/.test(t.text())||t.addClass("ui-widget-content ui-menu-divider")}),t.children(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!e.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(e,t){"icons"===e&&this.element.find(".ui-menu-icon").removeClass(this.options.icons.submenu).addClass(t.submenu),this._super(e,t)},focus:function(e,t){var i,n;this.blur(e,e&&"focus"===e.type),this._scrollIntoView(t),this.active=t.first(),n=this.active.children("a").addClass("ui-state-focus"),this.options.role&&this.element.attr("aria-activedescendant",n.attr("id")),this.active.parent().closest(".ui-menu-item").children("a:first").addClass("ui-state-active"),e&&"keydown"===e.type?this._close():this.timer=this._delay(function(){this._close()},this.delay),i=t.children(".ui-menu"),i.length&&e&&/^mouse/.test(e.type)&&this._startOpening(i),this.activeMenu=t.parent(),this._trigger("focus",e,{item:t})},_scrollIntoView:function(t){var i,n,o,s,r,a;this._hasScroll()&&(i=parseFloat(e.css(this.activeMenu[0],"borderTopWidth"))||0,n=parseFloat(e.css(this.activeMenu[0],"paddingTop"))||0,o=t.offset().top-this.activeMenu.offset().top-i-n,s=this.activeMenu.scrollTop(),r=this.activeMenu.height(),a=t.height(),0>o?this.activeMenu.scrollTop(s+o):o+a>r&&this.activeMenu.scrollTop(s+o-r+a))},blur:function(e,t){t||clearTimeout(this.timer),this.active&&(this.active.children("a").removeClass("ui-state-focus"),this.active=null,this._trigger("blur",e,{item:this.active}))},_startOpening:function(e){clearTimeout(this.timer),"true"===e.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close(),this._open(e)},this.delay))},_open:function(t){var i=e.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(t.parents(".ui-menu")).hide().attr("aria-hidden","true"),t.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(i)},collapseAll:function(t,i){clearTimeout(this.timer),this.timer=this._delay(function(){var n=i?this.element:e(t&&t.target).closest(this.element.find(".ui-menu"));n.length||(n=this.element),this._close(n),this.blur(t),this.activeMenu=n},this.delay)},_close:function(e){e||(e=this.active?this.active.parent():this.element),e.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find("a.ui-state-active").removeClass("ui-state-active")},collapse:function(e){var t=this.active&&this.active.parent().closest(".ui-menu-item",this.element);t&&t.length&&(this._close(),this.focus(e,t))},expand:function(e){var t=this.active&&this.active.children(".ui-menu ").children(".ui-menu-item").first();t&&t.length&&(this._open(t.parent()),this._delay(function(){this.focus(e,t)}))},next:function(e){this._move("next","first",e)},previous:function(e){this._move("prev","last",e)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(e,t,i){var n;this.active&&(n="first"===e||"last"===e?this.active["first"===e?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[e+"All"](".ui-menu-item").eq(0)),n&&n.length&&this.active||(n=this.activeMenu.children(".ui-menu-item")[t]()),this.focus(i,n)},nextPage:function(t){var i,n,o;return this.active?void(this.isLastItem()||(this._hasScroll()?(n=this.active.offset().top,o=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return i=e(this),i.offset().top-n-o<0}),this.focus(t,i)):this.focus(t,this.activeMenu.children(".ui-menu-item")[this.active?"last":"first"]()))):void this.next(t)},previousPage:function(t){var i,n,o;return this.active?void(this.isFirstItem()||(this._hasScroll()?(n=this.active.offset().top,o=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return i=e(this),i.offset().top-n+o>0}),this.focus(t,i)):this.focus(t,this.activeMenu.children(".ui-menu-item").first()))):void this.next(t)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(t){this.active=this.active||e(t.target).closest(".ui-menu-item");var i={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(t,!0),this._trigger("select",t,i)}})}(t),function(e,t){function i(e,t,i){return[parseFloat(e[0])*(p.test(e[0])?t/100:1),parseFloat(e[1])*(p.test(e[1])?i/100:1)]}function n(t,i){return parseInt(e.css(t,i),10)||0}function o(t){var i=t[0];return 9===i.nodeType?{width:t.width(),height:t.height(),offset:{top:0,left:0}}:e.isWindow(i)?{width:t.width(),height:t.height(),offset:{top:t.scrollTop(),left:t.scrollLeft()}}:i.preventDefault?{width:0,height:0,offset:{top:i.pageY,left:i.pageX}}:{width:t.outerWidth(),height:t.outerHeight(),offset:t.offset()}}e.ui=e.ui||{};var s,r=Math.max,a=Math.abs,l=Math.round,c=/left|center|right/,u=/top|center|bottom/,d=/[\+\-]\d+(\.[\d]+)?%?/,h=/^\w+/,p=/%$/,f=e.fn.position;e.position={scrollbarWidth:function(){if(s!==t)return s;var i,n,o=e("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),r=o.children()[0];return e("body").append(o),i=r.offsetWidth,o.css("overflow","scroll"),n=r.offsetWidth,i===n&&(n=o[0].clientWidth),o.remove(),s=i-n},getScrollInfo:function(t){var i=t.isWindow||t.isDocument?"":t.element.css("overflow-x"),n=t.isWindow||t.isDocument?"":t.element.css("overflow-y"),o="scroll"===i||"auto"===i&&t.width<t.element[0].scrollWidth,s="scroll"===n||"auto"===n&&t.height<t.element[0].scrollHeight;return{width:s?e.position.scrollbarWidth():0,height:o?e.position.scrollbarWidth():0}},getWithinInfo:function(t){var i=e(t||window),n=e.isWindow(i[0]),o=!!i[0]&&9===i[0].nodeType;return{element:i,isWindow:n,isDocument:o,offset:i.offset()||{left:0,top:0},scrollLeft:i.scrollLeft(),scrollTop:i.scrollTop(),width:n?i.width():i.outerWidth(),height:n?i.height():i.outerHeight()}}},e.fn.position=function(t){if(!t||!t.of)return f.apply(this,arguments);t=e.extend({},t);var s,p,m,g,v,_,y=e(t.of),b=e.position.getWithinInfo(t.within),S=e.position.getScrollInfo(b),T=(t.collision||"flip").split(" "),E={};return _=o(y),y[0].preventDefault&&(t.at="left top"),p=_.width,m=_.height,g=_.offset,v=e.extend({},g),e.each(["my","at"],function(){var e,i,n=(t[this]||"").split(" ");1===n.length&&(n=c.test(n[0])?n.concat(["center"]):u.test(n[0])?["center"].concat(n):["center","center"]),n[0]=c.test(n[0])?n[0]:"center",n[1]=u.test(n[1])?n[1]:"center",e=d.exec(n[0]),i=d.exec(n[1]),E[this]=[e?e[0]:0,i?i[0]:0],t[this]=[h.exec(n[0])[0],h.exec(n[1])[0]]}),1===T.length&&(T[1]=T[0]),"right"===t.at[0]?v.left+=p:"center"===t.at[0]&&(v.left+=p/2),"bottom"===t.at[1]?v.top+=m:"center"===t.at[1]&&(v.top+=m/2),s=i(E.at,p,m),v.left+=s[0],v.top+=s[1],this.each(function(){var o,c,u=e(this),d=u.outerWidth(),h=u.outerHeight(),f=n(this,"marginLeft"),_=n(this,"marginTop"),w=d+f+n(this,"marginRight")+S.width,M=h+_+n(this,"marginBottom")+S.height,I=e.extend({},v),C=i(E.my,u.outerWidth(),u.outerHeight());"right"===t.my[0]?I.left-=d:"center"===t.my[0]&&(I.left-=d/2),"bottom"===t.my[1]?I.top-=h:"center"===t.my[1]&&(I.top-=h/2),I.left+=C[0],I.top+=C[1],e.support.offsetFractions||(I.left=l(I.left),I.top=l(I.top)),o={marginLeft:f,marginTop:_},e.each(["left","top"],function(i,n){e.ui.position[T[i]]&&e.ui.position[T[i]][n](I,{targetWidth:p,targetHeight:m,elemWidth:d,elemHeight:h,collisionPosition:o,collisionWidth:w,collisionHeight:M,offset:[s[0]+C[0],s[1]+C[1]],my:t.my,at:t.at,within:b,elem:u})}),t.using&&(c=function(e){var i=g.left-I.left,n=i+p-d,o=g.top-I.top,s=o+m-h,l={target:{element:y,left:g.left,top:g.top,width:p,height:m},element:{element:u,left:I.left,top:I.top,width:d,height:h},horizontal:0>n?"left":i>0?"right":"center",vertical:0>s?"top":o>0?"bottom":"middle"};d>p&&a(i+n)<p&&(l.horizontal="center"),h>m&&a(o+s)<m&&(l.vertical="middle"),l.important=r(a(i),a(n))>r(a(o),a(s))?"horizontal":"vertical",t.using.call(this,e,l)}),u.offset(e.extend(I,{using:c}))})},e.ui.position={fit:{left:function(e,t){var i,n=t.within,o=n.isWindow?n.scrollLeft:n.offset.left,s=n.width,a=e.left-t.collisionPosition.marginLeft,l=o-a,c=a+t.collisionWidth-s-o;t.collisionWidth>s?l>0&&0>=c?(i=e.left+l+t.collisionWidth-s-o,e.left+=l-i):e.left=c>0&&0>=l?o:l>c?o+s-t.collisionWidth:o:l>0?e.left+=l:c>0?e.left-=c:e.left=r(e.left-a,e.left)},top:function(e,t){var i,n=t.within,o=n.isWindow?n.scrollTop:n.offset.top,s=t.within.height,a=e.top-t.collisionPosition.marginTop,l=o-a,c=a+t.collisionHeight-s-o;t.collisionHeight>s?l>0&&0>=c?(i=e.top+l+t.collisionHeight-s-o,e.top+=l-i):e.top=c>0&&0>=l?o:l>c?o+s-t.collisionHeight:o:l>0?e.top+=l:c>0?e.top-=c:e.top=r(e.top-a,e.top)}},flip:{left:function(e,t){var i,n,o=t.within,s=o.offset.left+o.scrollLeft,r=o.width,l=o.isWindow?o.scrollLeft:o.offset.left,c=e.left-t.collisionPosition.marginLeft,u=c-l,d=c+t.collisionWidth-r-l,h="left"===t.my[0]?-t.elemWidth:"right"===t.my[0]?t.elemWidth:0,p="left"===t.at[0]?t.targetWidth:"right"===t.at[0]?-t.targetWidth:0,f=-2*t.offset[0];0>u?(i=e.left+h+p+f+t.collisionWidth-r-s,(0>i||i<a(u))&&(e.left+=h+p+f)):d>0&&(n=e.left-t.collisionPosition.marginLeft+h+p+f-l,(n>0||a(n)<d)&&(e.left+=h+p+f))},top:function(e,t){var i,n,o=t.within,s=o.offset.top+o.scrollTop,r=o.height,l=o.isWindow?o.scrollTop:o.offset.top,c=e.top-t.collisionPosition.marginTop,u=c-l,d=c+t.collisionHeight-r-l,h="top"===t.my[1],p=h?-t.elemHeight:"bottom"===t.my[1]?t.elemHeight:0,f="top"===t.at[1]?t.targetHeight:"bottom"===t.at[1]?-t.targetHeight:0,m=-2*t.offset[1];0>u?(n=e.top+p+f+m+t.collisionHeight-r-s,e.top+p+f+m>u&&(0>n||n<a(u))&&(e.top+=p+f+m)):d>0&&(i=e.top-t.collisionPosition.marginTop+p+f+m-l,e.top+p+f+m>d&&(i>0||a(i)<d)&&(e.top+=p+f+m))}},flipfit:{left:function(){e.ui.position.flip.left.apply(this,arguments),e.ui.position.fit.left.apply(this,arguments)},top:function(){e.ui.position.flip.top.apply(this,arguments),e.ui.position.fit.top.apply(this,arguments)}}},function(){var t,i,n,o,s,r=document.getElementsByTagName("body")[0],a=document.createElement("div");t=document.createElement(r?"div":"body"),n={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},r&&e.extend(n,{position:"absolute",left:"-1000px",top:"-1000px"});for(s in n)t.style[s]=n[s];t.appendChild(a),i=r||document.documentElement,i.insertBefore(t,i.firstChild),a.style.cssText="position: absolute; left: 10.7432222px;",o=e(a).offset().left,e.support.offsetFractions=o>10&&11>o,t.innerHTML="",i.removeChild(t)}()}(t),function(e,t){e.widget("ui.progressbar",{version:"@VERSION",options:{max:100,value:0,change:null,complete:null},min:0,_create:function(){this.oldValue=this.options.value=this._constrainedValue(),this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min}),this.valueDiv=e("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element),this._refreshValue()},_destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.valueDiv.remove()},value:function(e){return e===t?this.options.value:(this.options.value=this._constrainedValue(e),void this._refreshValue())},_constrainedValue:function(e){return e===t&&(e=this.options.value),this.indeterminate=e===!1,"number"!=typeof e&&(e=0),this.indeterminate?!1:Math.min(this.options.max,Math.max(this.min,e))},_setOptions:function(e){var t=e.value;delete e.value,this._super(e),this.options.value=this._constrainedValue(t),this._refreshValue()},_setOption:function(e,t){"max"===e&&(t=Math.max(this.min,t)),this._super(e,t)},_percentage:function(){return this.indeterminate?100:100*(this.options.value-this.min)/(this.options.max-this.min)},_refreshValue:function(){var t=this.options.value,i=this._percentage();this.valueDiv.toggle(this.indeterminate||t>this.min).toggleClass("ui-corner-right",t===this.options.max).width(i.toFixed(0)+"%"),this.element.toggleClass("ui-progressbar-indeterminate",this.indeterminate),this.indeterminate?(this.element.removeAttr("aria-valuenow"),this.overlayDiv||(this.overlayDiv=e("<div class='ui-progressbar-overlay'></div>").appendTo(this.valueDiv))):(this.element.attr({"aria-valuemax":this.options.max,"aria-valuenow":t}),this.overlayDiv&&(this.overlayDiv.remove(),this.overlayDiv=null)),this.oldValue!==t&&(this.oldValue=t,this._trigger("change")),t===this.options.max&&this._trigger("complete")}})}(t),function(e){var t=5;e.widget("ui.slider",e.ui.mouse,{version:"@VERSION",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},_create:function(){this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all"),this._refresh(),this._setOption("disabled",this.options.disabled),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var t,i,n=this.options,o=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),s="<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>",r=[];for(i=n.values&&n.values.length||1,o.length>i&&(o.slice(i).remove(),o=o.slice(0,i)),t=o.length;i>t;t++)r.push(s);this.handles=o.add(e(r.join("")).appendTo(this.element)),this.handle=this.handles.eq(0),this.handles.each(function(t){e(this).data("ui-slider-handle-index",t)})},_createRange:function(){var t=this.options,i="";t.range?(t.range===!0&&(t.values?t.values.length&&2!==t.values.length?t.values=[t.values[0],t.values[0]]:e.isArray(t.values)&&(t.values=t.values.slice(0)):t.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?this.range.removeClass("ui-slider-range-min ui-slider-range-max").css({left:"",bottom:""}):(this.range=e("<div></div>").appendTo(this.element),i="ui-slider-range ui-widget-header ui-corner-all"),this.range.addClass(i+("min"===t.range||"max"===t.range?" ui-slider-range-"+t.range:""))):(this.range&&this.range.remove(),this.range=null)},_setupEvents:function(){var e=this.handles.add(this.range).filter("a");this._off(e),this._on(e,this._handleEvents),this._hoverable(e),this._focusable(e)},_destroy:function(){this.handles.remove(),this.range&&this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-widget ui-widget-content ui-corner-all"),this._mouseDestroy()},_mouseCapture:function(t){var i,n,o,s,r,a,l,c,u=this,d=this.options;return d.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),i={x:t.pageX,y:t.pageY},n=this._normValueFromMouse(i),o=this._valueMax()-this._valueMin()+1,this.handles.each(function(t){var i=Math.abs(n-u.values(t));(o>i||o===i&&(t===u._lastChangedValue||u.values(t)===d.min))&&(o=i,s=e(this),r=t)}),a=this._start(t,r),a===!1?!1:(this._mouseSliding=!0,this._handleIndex=r,s.addClass("ui-state-active").focus(),l=s.offset(),c=!e(t.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=c?{left:0,top:0}:{left:t.pageX-l.left-s.width()/2,top:t.pageY-l.top-s.height()/2-(parseInt(s.css("borderTopWidth"),10)||0)-(parseInt(s.css("borderBottomWidth"),10)||0)+(parseInt(s.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(t,r,n),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(e){var t={x:e.pageX,y:e.pageY},i=this._normValueFromMouse(t);return this._slide(e,this._handleIndex,i),!1},_mouseStop:function(e){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(e,this._handleIndex),this._change(e,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(e){var t,i,n,o,s;return"horizontal"===this.orientation?(t=this.elementSize.width,i=e.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(t=this.elementSize.height,i=e.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),n=i/t,n>1&&(n=1),0>n&&(n=0),"vertical"===this.orientation&&(n=1-n),o=this._valueMax()-this._valueMin(),s=this._valueMin()+n*o,this._trimAlignValue(s)},_start:function(e,t){var i={handle:this.handles[t],value:this.value()};return this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values()),this._trigger("start",e,i)},_slide:function(e,t,i){var n,o,s;this.options.values&&this.options.values.length?(n=this.values(t?0:1),2===this.options.values.length&&this.options.range===!0&&(0===t&&i>n||1===t&&n>i)&&(i=n),i!==this.values(t)&&(o=this.values(),o[t]=i,s=this._trigger("slide",e,{handle:this.handles[t],value:i,values:o}),n=this.values(t?0:1),s!==!1&&this.values(t,i))):i!==this.value()&&(s=this._trigger("slide",e,{handle:this.handles[t],value:i}),s!==!1&&this.value(i))},_stop:function(e,t){var i={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values()),this._trigger("stop",e,i)},_change:function(e,t){if(!this._keySliding&&!this._mouseSliding){var i={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values()),this._lastChangedValue=t,this._trigger("change",e,i)}},value:function(e){return arguments.length?(this.options.value=this._trimAlignValue(e),this._refreshValue(),void this._change(null,0)):this._value()},values:function(t,i){var n,o,s;if(arguments.length>1)return this.options.values[t]=this._trimAlignValue(i),this._refreshValue(),void this._change(null,t);if(!arguments.length)return this._values();if(!e.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(t):this.value();for(n=this.options.values,o=arguments[0],s=0;s<n.length;s+=1)n[s]=this._trimAlignValue(o[s]),this._change(null,s);this._refreshValue()},_setOption:function(t,i){var n,o=0;switch("range"===t&&this.options.range===!0&&("min"===i?(this.options.value=this._values(0),this.options.values=null):"max"===i&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),e.isArray(this.options.values)&&(o=this.options.values.length),e.Widget.prototype._setOption.apply(this,arguments),t){case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),n=0;o>n;n+=1)this._change(null,n);this._animateOff=!1;break;case"min":case"max":this._animateOff=!0,this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_value:function(){var e=this.options.value;return e=this._trimAlignValue(e)},_values:function(e){var t,i,n;if(arguments.length)return t=this.options.values[e],t=this._trimAlignValue(t);if(this.options.values&&this.options.values.length){for(i=this.options.values.slice(),n=0;n<i.length;n+=1)i[n]=this._trimAlignValue(i[n]);return i}return[]},_trimAlignValue:function(e){if(e<=this._valueMin())return this._valueMin();if(e>=this._valueMax())return this._valueMax();var t=this.options.step>0?this.options.step:1,i=(e-this._valueMin())%t,n=e-i;return 2*Math.abs(i)>=t&&(n+=i>0?t:-t),parseFloat(n.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var t,i,n,o,s,r=this.options.range,a=this.options,l=this,c=this._animateOff?!1:a.animate,u={};this.options.values&&this.options.values.length?this.handles.each(function(n){i=(l.values(n)-l._valueMin())/(l._valueMax()-l._valueMin())*100,u["horizontal"===l.orientation?"left":"bottom"]=i+"%",e(this).stop(1,1)[c?"animate":"css"](u,a.animate),l.options.range===!0&&("horizontal"===l.orientation?(0===n&&l.range.stop(1,1)[c?"animate":"css"]({left:i+"%"},a.animate),1===n&&l.range[c?"animate":"css"]({width:i-t+"%"},{queue:!1,duration:a.animate})):(0===n&&l.range.stop(1,1)[c?"animate":"css"]({bottom:i+"%"},a.animate),1===n&&l.range[c?"animate":"css"]({height:i-t+"%"},{queue:!1,duration:a.animate}))),t=i}):(n=this.value(),o=this._valueMin(),s=this._valueMax(),i=s!==o?(n-o)/(s-o)*100:0,u["horizontal"===this.orientation?"left":"bottom"]=i+"%",this.handle.stop(1,1)[c?"animate":"css"](u,a.animate),"min"===r&&"horizontal"===this.orientation&&this.range.stop(1,1)[c?"animate":"css"]({width:i+"%"},a.animate),"max"===r&&"horizontal"===this.orientation&&this.range[c?"animate":"css"]({width:100-i+"%"},{queue:!1,duration:a.animate}),"min"===r&&"vertical"===this.orientation&&this.range.stop(1,1)[c?"animate":"css"]({height:i+"%"},a.animate),"max"===r&&"vertical"===this.orientation&&this.range[c?"animate":"css"]({height:100-i+"%"},{queue:!1,duration:a.animate}))},_handleEvents:{keydown:function(i){var n,o,s,r,a=e(i.target).data("ui-slider-handle-index");switch(i.keyCode){case e.ui.keyCode.HOME:case e.ui.keyCode.END:case e.ui.keyCode.PAGE_UP:case e.ui.keyCode.PAGE_DOWN:case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(i.preventDefault(),!this._keySliding&&(this._keySliding=!0,e(i.target).addClass("ui-state-active"),n=this._start(i,a),n===!1))return}switch(r=this.options.step,o=s=this.options.values&&this.options.values.length?this.values(a):this.value(),i.keyCode){case e.ui.keyCode.HOME:s=this._valueMin();break;case e.ui.keyCode.END:s=this._valueMax();break;case e.ui.keyCode.PAGE_UP:s=this._trimAlignValue(o+(this._valueMax()-this._valueMin())/t);break;case e.ui.keyCode.PAGE_DOWN:s=this._trimAlignValue(o-(this._valueMax()-this._valueMin())/t);break;case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:if(o===this._valueMax())return;s=this._trimAlignValue(o+r);break;case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(o===this._valueMin())return;s=this._trimAlignValue(o-r)}this._slide(i,a,s)},click:function(e){e.preventDefault()},keyup:function(t){var i=e(t.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(t,i),this._change(t,i),e(t.target).removeClass("ui-state-active"))}}})}(t),function(e){function t(e){return function(){var t=this.element.val();e.apply(this,arguments),this._refresh(),t!==this.element.val()&&this._trigger("change")}}e.widget("ui.spinner",{version:"@VERSION",defaultElement:"<input>",widgetEventPrefix:"spin",options:{culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max),this._setOption("min",this.options.min),this._setOption("step",this.options.step),""!==this.value()&&this._value(this.element.val(),!0),this._draw(),this._on(this._events),this._refresh(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var t={},i=this.element;return e.each(["min","max","step"],function(e,n){var o=i.attr(n);void 0!==o&&o.length&&(t[n]=o)}),t},_events:{keydown:function(e){this._start(e)&&this._keydown(e)&&e.preventDefault()},keyup:"_stop",focus:function(){this.previous=this.element.val()},blur:function(e){return this.cancelBlur?void delete this.cancelBlur:(this._stop(),this._refresh(),void(this.previous!==this.element.val()&&this._trigger("change",e)))},mousewheel:function(e,t){if(t){if(!this.spinning&&!this._start(e))return!1;this._spin((t>0?1:-1)*this.options.step,e),clearTimeout(this.mousewheelTimer),this.mousewheelTimer=this._delay(function(){this.spinning&&this._stop(e)},100),e.preventDefault()}},"mousedown .ui-spinner-button":function(t){function i(){var e=this.element[0]===this.document[0].activeElement;e||(this.element.focus(),this.previous=n,this._delay(function(){this.previous=n}))}var n;n=this.element[0]===this.document[0].activeElement?this.previous:this.element.val(),t.preventDefault(),i.call(this),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur,i.call(this)}),this._start(t)!==!1&&this._repeat(null,e(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(t){return e(t.currentTarget).hasClass("ui-state-active")?this._start(t)===!1?!1:void this._repeat(null,e(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t):void 0
},"mouseleave .ui-spinner-button":"_stop"},_draw:function(){var e=this.uiSpinner=this.element.addClass("ui-spinner-input").attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml());this.element.attr("role","spinbutton"),this.buttons=e.find(".ui-spinner-button").attr("tabIndex",-1).button().removeClass("ui-corner-all"),this.buttons.height()>Math.ceil(.5*e.height())&&e.height()>0&&e.height(e.height()),this.options.disabled&&this.disable()},_keydown:function(t){var i=this.options,n=e.ui.keyCode;switch(t.keyCode){case n.UP:return this._repeat(null,1,t),!0;case n.DOWN:return this._repeat(null,-1,t),!0;case n.PAGE_UP:return this._repeat(null,i.page,t),!0;case n.PAGE_DOWN:return this._repeat(null,-i.page,t),!0}return!1},_uiSpinnerHtml:function(){return"<span class='ui-spinner ui-widget ui-widget-content ui-corner-all'></span>"},_buttonHtml:function(){return"<a class='ui-spinner-button ui-spinner-up ui-corner-tr'><span class='ui-icon "+this.options.icons.up+"'>&#9650;</span></a><a class='ui-spinner-button ui-spinner-down ui-corner-br'><span class='ui-icon "+this.options.icons.down+"'>&#9660;</span></a>"},_start:function(e){return this.spinning||this._trigger("start",e)!==!1?(this.counter||(this.counter=1),this.spinning=!0,!0):!1},_repeat:function(e,t,i){e=e||500,clearTimeout(this.timer),this.timer=this._delay(function(){this._repeat(40,t,i)},e),this._spin(t*this.options.step,i)},_spin:function(e,t){var i=this.value()||0;this.counter||(this.counter=1),i=this._adjustValue(i+e*this._increment(this.counter)),this.spinning&&this._trigger("spin",t,{value:i})===!1||(this._value(i),this.counter++)},_increment:function(t){var i=this.options.incremental;return i?e.isFunction(i)?i(t):Math.floor(t*t*t/5e4-t*t/500+17*t/200+1):1},_precision:function(){var e=this._precisionOf(this.options.step);return null!==this.options.min&&(e=Math.max(e,this._precisionOf(this.options.min))),e},_precisionOf:function(e){var t=e.toString(),i=t.indexOf(".");return-1===i?0:t.length-i-1},_adjustValue:function(e){var t,i,n=this.options;return t=null!==n.min?n.min:0,i=e-t,i=Math.round(i/n.step)*n.step,e=t+i,e=parseFloat(e.toFixed(this._precision())),null!==n.max&&e>n.max?n.max:null!==n.min&&e<n.min?n.min:e},_stop:function(e){this.spinning&&(clearTimeout(this.timer),clearTimeout(this.mousewheelTimer),this.counter=0,this.spinning=!1,this._trigger("stop",e))},_setOption:function(e,t){if("culture"===e||"numberFormat"===e){var i=this._parse(this.element.val());return this.options[e]=t,void this.element.val(this._format(i))}("max"===e||"min"===e||"step"===e)&&"string"==typeof t&&(t=this._parse(t)),"icons"===e&&(this.buttons.first().find(".ui-icon").removeClass(this.options.icons.up).addClass(t.up),this.buttons.last().find(".ui-icon").removeClass(this.options.icons.down).addClass(t.down)),this._super(e,t),"disabled"===e&&(t?(this.element.prop("disabled",!0),this.buttons.button("disable")):(this.element.prop("disabled",!1),this.buttons.button("enable")))},_setOptions:t(function(e){this._super(e),this._value(this.element.val())}),_parse:function(e){return"string"==typeof e&&""!==e&&(e=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(e,10,this.options.culture):+e),""===e||isNaN(e)?null:e},_format:function(e){return""===e?"":window.Globalize&&this.options.numberFormat?Globalize.format(e,this.options.numberFormat,this.options.culture):e},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},_value:function(e,t){var i;""!==e&&(i=this._parse(e),null!==i&&(t||(i=this._adjustValue(i)),e=this._format(i))),this.element.val(e),this._refresh()},_destroy:function(){this.element.removeClass("ui-spinner-input").prop("disabled",!1).removeAttr("autocomplete").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.uiSpinner.replaceWith(this.element)},stepUp:t(function(e){this._stepUp(e)}),_stepUp:function(e){this._start()&&(this._spin((e||1)*this.options.step),this._stop())},stepDown:t(function(e){this._stepDown(e)}),_stepDown:function(e){this._start()&&(this._spin((e||1)*-this.options.step),this._stop())},pageUp:t(function(e){this._stepUp((e||1)*this.options.page)}),pageDown:t(function(e){this._stepDown((e||1)*this.options.page)}),value:function(e){return arguments.length?void t(this._value).call(this,e):this._parse(this.element.val())},widget:function(){return this.uiSpinner}})}(t),function(e,t){function i(){return++o}function n(e){return e=e.cloneNode(!1),e.hash.length>1&&decodeURIComponent(e.href.replace(s,""))===decodeURIComponent(location.href.replace(s,""))}var o=0,s=/#.*$/;e.widget("ui.tabs",{version:"@VERSION",delay:300,options:{active:null,collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_create:function(){var t=this,i=this.options;this.running=!1,this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible",i.collapsible).delegate(".ui-tabs-nav > li","mousedown"+this.eventNamespace,function(t){e(this).is(".ui-state-disabled")&&t.preventDefault()}).delegate(".ui-tabs-anchor","focus"+this.eventNamespace,function(){e(this).closest("li").is(".ui-state-disabled")&&this.blur()}),this._processTabs(),i.active=this._initialActive(),e.isArray(i.disabled)&&(i.disabled=e.unique(i.disabled.concat(e.map(this.tabs.filter(".ui-state-disabled"),function(e){return t.tabs.index(e)}))).sort()),this.active=this.options.active!==!1&&this.anchors.length?this._findActive(i.active):e(),this._refresh(),this.active.length&&this.load(i.active)},_initialActive:function(){var t=this.options.active,i=this.options.collapsible,n=location.hash.substring(1);return null===t&&(n&&this.tabs.each(function(i,o){return e(o).attr("aria-controls")===n?(t=i,!1):void 0}),null===t&&(t=this.tabs.index(this.tabs.filter(".ui-tabs-active"))),(null===t||-1===t)&&(t=this.tabs.length?0:!1)),t!==!1&&(t=this.tabs.index(this.tabs.eq(t)),-1===t&&(t=i?!1:0)),!i&&t===!1&&this.anchors.length&&(t=0),t},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):e()}},_tabKeydown:function(t){var i=e(this.document[0].activeElement).closest("li"),n=this.tabs.index(i),o=!0;if(!this._handlePageNav(t)){switch(t.keyCode){case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:n++;break;case e.ui.keyCode.UP:case e.ui.keyCode.LEFT:o=!1,n--;break;case e.ui.keyCode.END:n=this.anchors.length-1;break;case e.ui.keyCode.HOME:n=0;break;case e.ui.keyCode.SPACE:return t.preventDefault(),clearTimeout(this.activating),void this._activate(n);case e.ui.keyCode.ENTER:return t.preventDefault(),clearTimeout(this.activating),void this._activate(n===this.options.active?!1:n);default:return}t.preventDefault(),clearTimeout(this.activating),n=this._focusNextTab(n,o),t.ctrlKey||(i.attr("aria-selected","false"),this.tabs.eq(n).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",n)},this.delay))}},_panelKeydown:function(t){this._handlePageNav(t)||t.ctrlKey&&t.keyCode===e.ui.keyCode.UP&&(t.preventDefault(),this.active.focus())},_handlePageNav:function(t){return t.altKey&&t.keyCode===e.ui.keyCode.PAGE_UP?(this._activate(this._focusNextTab(this.options.active-1,!1)),!0):t.altKey&&t.keyCode===e.ui.keyCode.PAGE_DOWN?(this._activate(this._focusNextTab(this.options.active+1,!0)),!0):void 0},_findNextTab:function(t,i){function n(){return t>o&&(t=0),0>t&&(t=o),t}for(var o=this.tabs.length-1;-1!==e.inArray(n(),this.options.disabled);)t=i?t+1:t-1;return t},_focusNextTab:function(e,t){return e=this._findNextTab(e,t),this.tabs.eq(e).focus(),e},_setOption:function(e,t){return"active"===e?void this._activate(t):"disabled"===e?void this._setupDisabled(t):(this._super(e,t),"collapsible"===e&&(this.element.toggleClass("ui-tabs-collapsible",t),t||this.options.active!==!1||this._activate(0)),"event"===e&&this._setupEvents(t),void("heightStyle"===e&&this._setupHeightStyle(t)))},_tabId:function(e){return e.attr("aria-controls")||"ui-tabs-"+i()},_sanitizeSelector:function(e){return e?e.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var t=this.options,i=this.tablist.children(":has(a[href])");t.disabled=e.map(i.filter(".ui-state-disabled"),function(e){return i.index(e)}),this._processTabs(),t.active!==!1&&this.anchors.length?this.active.length&&!e.contains(this.tablist[0],this.active[0])?this.tabs.length===t.disabled.length?(t.active=!1,this.active=e()):this._activate(this._findNextTab(Math.max(0,t.active-1),!1)):t.active=this.tabs.index(this.active):(t.active=!1,this.active=e()),this._refresh()},_refresh:function(){this._setupDisabled(this.options.disabled),this._setupEvents(this.options.event),this._setupHeightStyle(this.options.heightStyle),this.tabs.not(this.active).attr({"aria-selected":"false",tabIndex:-1}),this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-expanded":"false","aria-hidden":"true"}),this.active.length?(this.active.addClass("ui-tabs-active ui-state-active").attr({"aria-selected":"true",tabIndex:0}),this._getPanelForTab(this.active).show().attr({"aria-expanded":"true","aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var t=this;this.tablist=this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role","tablist"),this.tabs=this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({role:"tab",tabIndex:-1}),this.anchors=this.tabs.map(function(){return e("a",this)[0]}).addClass("ui-tabs-anchor").attr({role:"presentation",tabIndex:-1}),this.panels=e(),this.anchors.each(function(i,o){var s,r,a,l=e(o).uniqueId().attr("id"),c=e(o).closest("li"),u=c.attr("aria-controls");n(o)?(s=o.hash,r=t.element.find(t._sanitizeSelector(s))):(a=t._tabId(c),s="#"+a,r=t.element.find(s),r.length||(r=t._createPanel(a),r.insertAfter(t.panels[i-1]||t.tablist)),r.attr("aria-live","polite")),r.length&&(t.panels=t.panels.add(r)),u&&c.data("ui-tabs-aria-controls",u),c.attr({"aria-controls":s.substring(1),"aria-labelledby":l}),r.attr("aria-labelledby",l)}),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role","tabpanel")},_getList:function(){return this.tablist||this.element.find("ol,ul").eq(0)},_createPanel:function(t){return e("<div>").attr("id",t).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)},_setupDisabled:function(t){e.isArray(t)&&(t.length?t.length===this.anchors.length&&(t=!0):t=!1);for(var i,n=0;i=this.tabs[n];n++)t===!0||-1!==e.inArray(n,t)?e(i).addClass("ui-state-disabled").attr("aria-disabled","true"):e(i).removeClass("ui-state-disabled").removeAttr("aria-disabled");this.options.disabled=t},_setupEvents:function(t){var i={click:function(e){e.preventDefault()}};t&&e.each(t.split(" "),function(e,t){i[t]="_eventHandler"}),this._off(this.anchors.add(this.tabs).add(this.panels)),this._on(this.anchors,i),this._on(this.tabs,{keydown:"_tabKeydown"}),this._on(this.panels,{keydown:"_panelKeydown"}),this._focusable(this.tabs),this._hoverable(this.tabs)},_setupHeightStyle:function(t){var i,n=this.element.parent();"fill"===t?(i=n.height(),i-=this.element.outerHeight()-this.element.height(),this.element.siblings(":visible").each(function(){var t=e(this),n=t.css("position");"absolute"!==n&&"fixed"!==n&&(i-=t.outerHeight(!0))}),this.element.children().not(this.panels).each(function(){i-=e(this).outerHeight(!0)}),this.panels.each(function(){e(this).height(Math.max(0,i-e(this).innerHeight()+e(this).height()))}).css("overflow","auto")):"auto"===t&&(i=0,this.panels.each(function(){i=Math.max(i,e(this).height("").height())}).height(i))},_eventHandler:function(t){var i=this.options,n=this.active,o=e(t.currentTarget),s=o.closest("li"),r=s[0]===n[0],a=r&&i.collapsible,l=a?e():this._getPanelForTab(s),c=n.length?this._getPanelForTab(n):e(),u={oldTab:n,oldPanel:c,newTab:a?e():s,newPanel:l};t.preventDefault(),s.hasClass("ui-state-disabled")||s.hasClass("ui-tabs-loading")||this.running||r&&!i.collapsible||this._trigger("beforeActivate",t,u)===!1||(i.active=a?!1:this.tabs.index(s),this.active=r?e():s,this.xhr&&this.xhr.abort(),c.length||l.length||e.error("jQuery UI Tabs: Mismatching fragment identifier."),l.length&&this.load(this.tabs.index(s),t),this._toggle(t,u))},_toggle:function(t,i){function n(){s.running=!1,s._trigger("activate",t,i)}function o(){i.newTab.closest("li").addClass("ui-tabs-active ui-state-active"),r.length&&s.options.show?s._show(r,s.options.show,n):(r.show(),n())}var s=this,r=i.newPanel,a=i.oldPanel;this.running=!0,a.length&&this.options.hide?this._hide(a,this.options.hide,function(){i.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),o()}):(i.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),a.hide(),o()),a.attr({"aria-expanded":"false","aria-hidden":"true"}),i.oldTab.attr("aria-selected","false"),r.length&&a.length?i.oldTab.attr("tabIndex",-1):r.length&&this.tabs.filter(function(){return 0===e(this).attr("tabIndex")}).attr("tabIndex",-1),r.attr({"aria-expanded":"true","aria-hidden":"false"}),i.newTab.attr({"aria-selected":"true",tabIndex:0})},_activate:function(t){var i,n=this._findActive(t);n[0]!==this.active[0]&&(n.length||(n=this.active),i=n.find(".ui-tabs-anchor")[0],this._eventHandler({target:i,currentTarget:i,preventDefault:e.noop}))},_findActive:function(t){return t===!1?e():this.tabs.eq(t)},_getIndex:function(e){return"string"==typeof e&&(e=this.anchors.index(this.anchors.filter("[href$='"+e+"']"))),e},_destroy:function(){this.xhr&&this.xhr.abort(),this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible"),this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role"),this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeUniqueId(),this.tabs.add(this.panels).each(function(){e.data(this,"ui-tabs-destroy")?e(this).remove():e(this).removeClass("ui-state-default ui-state-active ui-state-disabled ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role")}),this.tabs.each(function(){var t=e(this),i=t.data("ui-tabs-aria-controls");i?t.attr("aria-controls",i).removeData("ui-tabs-aria-controls"):t.removeAttr("aria-controls")}),this.panels.show(),"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(i){var n=this.options.disabled;n!==!1&&(i===t?n=!1:(i=this._getIndex(i),n=e.isArray(n)?e.map(n,function(e){return e!==i?e:null}):e.map(this.tabs,function(e,t){return t!==i?t:null})),this._setupDisabled(n))},disable:function(i){var n=this.options.disabled;if(n!==!0){if(i===t)n=!0;else{if(i=this._getIndex(i),-1!==e.inArray(i,n))return;n=e.isArray(n)?e.merge([i],n).sort():[i]}this._setupDisabled(n)}},load:function(t,i){t=this._getIndex(t);var o=this,s=this.tabs.eq(t),r=s.find(".ui-tabs-anchor"),a=this._getPanelForTab(s),l={tab:s,panel:a};n(r[0])||(this.xhr=e.ajax(this._ajaxSettings(r,i,l)),this.xhr&&"canceled"!==this.xhr.statusText&&(s.addClass("ui-tabs-loading"),a.attr("aria-busy","true"),this.xhr.success(function(e){setTimeout(function(){a.html(e),o._trigger("load",i,l)},1)}).complete(function(e,t){setTimeout(function(){"abort"===t&&o.panels.stop(!1,!0),s.removeClass("ui-tabs-loading"),a.removeAttr("aria-busy"),e===o.xhr&&delete o.xhr},1)})))},_ajaxSettings:function(t,i,n){var o=this;return{url:t.attr("href"),beforeSend:function(t,s){return o._trigger("beforeLoad",i,e.extend({jqXHR:t,ajaxSettings:s},n))}}},_getPanelForTab:function(t){var i=e(t).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+i))}})}(t),function(e){function t(t,i){var n=(t.attr("aria-describedby")||"").split(/\s+/);n.push(i),t.data("ui-tooltip-id",i).attr("aria-describedby",e.trim(n.join(" ")))}function i(t){var i=t.data("ui-tooltip-id"),n=(t.attr("aria-describedby")||"").split(/\s+/),o=e.inArray(i,n);-1!==o&&n.splice(o,1),t.removeData("ui-tooltip-id"),n=e.trim(n.join(" ")),n?t.attr("aria-describedby",n):t.removeAttr("aria-describedby")}var n=0;e.widget("ui.tooltip",{version:"@VERSION",options:{content:function(){var t=e(this).attr("title")||"";return e("<a>").text(t).html()},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,tooltipClass:null,track:!1,close:null,open:null},_create:function(){this._on({mouseover:"open",focusin:"open"}),this.tooltips={},this.parents={},this.options.disabled&&this._disable()},_setOption:function(t,i){var n=this;return"disabled"===t?(this[i?"_disable":"_enable"](),void(this.options[t]=i)):(this._super(t,i),void("content"===t&&e.each(this.tooltips,function(e,t){n._updateContent(t)})))},_disable:function(){var t=this;e.each(this.tooltips,function(i,n){var o=e.Event("blur");o.target=o.currentTarget=n[0],t.close(o,!0)}),this.element.find(this.options.items).addBack().each(function(){var t=e(this);t.is("[title]")&&t.data("ui-tooltip-title",t.attr("title")).attr("title","")})},_enable:function(){this.element.find(this.options.items).addBack().each(function(){var t=e(this);t.data("ui-tooltip-title")&&t.attr("title",t.data("ui-tooltip-title"))})},open:function(t){var i=this,n=e(t?t.target:this.element).closest(this.options.items);n.length&&!n.data("ui-tooltip-id")&&(n.attr("title")&&n.data("ui-tooltip-title",n.attr("title")),n.data("ui-tooltip-open",!0),t&&"mouseover"===t.type&&n.parents().each(function(){var t,n=e(this);n.data("ui-tooltip-open")&&(t=e.Event("blur"),t.target=t.currentTarget=this,i.close(t,!0)),n.attr("title")&&(n.uniqueId(),i.parents[this.id]={element:this,title:n.attr("title")},n.attr("title",""))}),this._updateContent(n,t))},_updateContent:function(e,t){var i,n=this.options.content,o=this,s=t?t.type:null;return"string"==typeof n?this._open(t,e,n):(i=n.call(e[0],function(i){e.data("ui-tooltip-open")&&o._delay(function(){t&&(t.type=s),this._open(t,e,i)})}),void(i&&this._open(t,e,i)))},_open:function(i,n,o){function s(e){c.of=e,r.is(":hidden")||r.position(c)}var r,a,l,c=e.extend({},this.options.position);if(o){if(r=this._find(n),r.length)return void r.find(".ui-tooltip-content").html(o);n.is("[title]")&&(i&&"mouseover"===i.type?n.attr("title",""):n.removeAttr("title")),r=this._tooltip(n),t(n,r.attr("id")),r.find(".ui-tooltip-content").html(o),this.options.track&&i&&/^mouse/.test(i.type)?(this._on(this.document,{mousemove:s}),s(i)):r.position(e.extend({of:n},this.options.position)),r.hide(),this._show(r,this.options.show),this.options.show&&this.options.show.delay&&(l=this.delayedShow=setInterval(function(){r.is(":visible")&&(s(c.of),clearInterval(l))},e.fx.interval)),this._trigger("open",i,{tooltip:r}),a={keyup:function(t){if(t.keyCode===e.ui.keyCode.ESCAPE){var i=e.Event(t);i.currentTarget=n[0],this.close(i,!0)}},remove:function(){this._removeTooltip(r)}},i&&"mouseover"!==i.type||(a.mouseleave="close"),i&&"focusin"!==i.type||(a.focusout="close"),this._on(!0,n,a)}},close:function(t){var n=this,o=e(t?t.currentTarget:this.element),s=this._find(o);this.closing||(clearInterval(this.delayedShow),o.data("ui-tooltip-title")&&o.attr("title",o.data("ui-tooltip-title")),i(o),s.stop(!0),this._hide(s,this.options.hide,function(){n._removeTooltip(e(this))}),o.removeData("ui-tooltip-open"),this._off(o,"mouseleave focusout keyup"),o[0]!==this.element[0]&&this._off(o,"remove"),this._off(this.document,"mousemove"),t&&"mouseleave"===t.type&&e.each(this.parents,function(t,i){e(i.element).attr("title",i.title),delete n.parents[t]}),this.closing=!0,this._trigger("close",t,{tooltip:s}),this.closing=!1)},_tooltip:function(t){var i="ui-tooltip-"+n++,o=e("<div>").attr({id:i,role:"tooltip"}).addClass("ui-tooltip ui-widget ui-corner-all ui-widget-content "+(this.options.tooltipClass||""));return e("<div>").addClass("ui-tooltip-content").appendTo(o),o.appendTo(this.document[0].body),this.tooltips[i]=t,o},_find:function(t){var i=t.data("ui-tooltip-id");return i?e("#"+i):e()},_removeTooltip:function(e){e.remove(),delete this.tooltips[e.attr("id")]},_destroy:function(){var t=this;e.each(this.tooltips,function(i,n){var o=e.Event("blur");o.target=o.currentTarget=n[0],t.close(o,!0),e("#"+i).remove(),n.data("ui-tooltip-title")&&(n.attr("title",n.data("ui-tooltip-title")),n.removeData("ui-tooltip-title"))})}})}(t),t}),define("common/config/requestSettings",["require","jrs.configs"],function(e){var t=e("jrs.configs"),i=t.userLocale.replace(/_/g,"-");return{headers:{"X-Suppress-Basic":"true","Accept-Language":i,"Cache-Control":"no-cache, no-store",Pragma:"no-cache"}}}),function(){function e(t,n){function s(e){if(s[e]!==g)return s[e];var t;if("bug-string-char-index"==e)t="a"!="a"[0];else if("json"==e)t=s("json-stringify")&&s("json-parse");else{var i,o='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if("json-stringify"==e){var l=n.stringify,u="function"==typeof l&&y;if(u){(i=function(){return 1}).toJSON=i;try{u="0"===l(0)&&"0"===l(new r)&&'""'==l(new a)&&l(_)===g&&l(g)===g&&l()===g&&"1"===l(i)&&"[1]"==l([i])&&"[null]"==l([g])&&"null"==l(null)&&"[null,null,null]"==l([g,_,null])&&l({a:[i,!0,!1,null,"\x00\b\n\f\r	"]})==o&&"1"===l(null,i)&&"[\n 1,\n 2\n]"==l([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==l(new c(-864e13))&&'"+275760-09-13T00:00:00.000Z"'==l(new c(864e13))&&'"-000001-01-01T00:00:00.000Z"'==l(new c(-621987552e5))&&'"1969-12-31T23:59:59.999Z"'==l(new c(-1))}catch(d){u=!1}}t=u}if("json-parse"==e){var h=n.parse;if("function"==typeof h)try{if(0===h("0")&&!h(!1)){i=h(o);var p=5==i.a.length&&1===i.a[0];if(p){try{p=!h('"	"')}catch(d){}if(p)try{p=1!==h("01")}catch(d){}if(p)try{p=1!==h("1.")}catch(d){}}}}catch(d){p=!1}t=p}}return s[e]=!!t}t||(t=o.Object()),n||(n=o.Object());var r=t.Number||o.Number,a=t.String||o.String,l=t.Object||o.Object,c=t.Date||o.Date,u=t.SyntaxError||o.SyntaxError,d=t.TypeError||o.TypeError,h=t.Math||o.Math,p=t.JSON||o.JSON;"object"==typeof p&&p&&(n.stringify=p.stringify,n.parse=p.parse);var f,m,g,v=l.prototype,_=v.toString,y=new c(-0xc782b5b800cec);try{y=-109252==y.getUTCFullYear()&&0===y.getUTCMonth()&&1===y.getUTCDate()&&10==y.getUTCHours()&&37==y.getUTCMinutes()&&6==y.getUTCSeconds()&&708==y.getUTCMilliseconds()}catch(b){}if(!s("json")){var S="[object Function]",T="[object Date]",E="[object Number]",w="[object String]",M="[object Array]",I="[object Boolean]",C=s("bug-string-char-index");if(!y)var D=h.floor,A=[0,31,59,90,120,151,181,212,243,273,304,334],x=function(e,t){return A[t]+365*(e-1970)+D((e-1969+(t=+(t>1)))/4)-D((e-1901+t)/100)+D((e-1601+t)/400)};if((f=v.hasOwnProperty)||(f=function(e){var t,i={};return(i.__proto__=null,i.__proto__={toString:1},i).toString!=_?f=function(e){var t=this.__proto__,i=e in(this.__proto__=null,this);return this.__proto__=t,i}:(t=i.constructor,f=function(e){var i=(this.constructor||t).prototype;return e in this&&!(e in i&&this[e]===i[e])}),i=null,f.call(this,e)}),m=function(e,t){var n,o,s,r=0;(n=function(){this.valueOf=0}).prototype.valueOf=0,o=new n;for(s in o)f.call(o,s)&&r++;return n=o=null,r?m=2==r?function(e,t){var i,n={},o=_.call(e)==S;for(i in e)o&&"prototype"==i||f.call(n,i)||!(n[i]=1)||!f.call(e,i)||t(i)}:function(e,t){var i,n,o=_.call(e)==S;for(i in e)o&&"prototype"==i||!f.call(e,i)||(n="constructor"===i)||t(i);(n||f.call(e,i="constructor"))&&t(i)}:(o=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],m=function(e,t){var n,s,r=_.call(e)==S,a=!r&&"function"!=typeof e.constructor&&i[typeof e.hasOwnProperty]&&e.hasOwnProperty||f;for(n in e)r&&"prototype"==n||!a.call(e,n)||t(n);for(s=o.length;n=o[--s];a.call(e,n)&&t(n));}),m(e,t)},!s("json-stringify")){var N={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},R="000000",O=function(e,t){return(R+(t||0)).slice(-e)},L="\\u00",k=function(e){for(var t='"',i=0,n=e.length,o=!C||n>10,s=o&&(C?e.split(""):e);n>i;i++){var r=e.charCodeAt(i);switch(r){case 8:case 9:case 10:case 12:case 13:case 34:case 92:t+=N[r];break;default:if(32>r){t+=L+O(2,r.toString(16));break}t+=o?s[i]:e.charAt(i)}}return t+'"'},P=function(e,t,i,n,o,s,r){var a,l,c,u,h,p,v,y,b,S,C,A,N,R,L,F;try{a=t[e]}catch(U){}if("object"==typeof a&&a)if(l=_.call(a),l!=T||f.call(a,"toJSON"))"function"==typeof a.toJSON&&(l!=E&&l!=w&&l!=M||f.call(a,"toJSON"))&&(a=a.toJSON(e));else if(a>-1/0&&1/0>a){if(x){for(h=D(a/864e5),c=D(h/365.2425)+1970-1;x(c+1,0)<=h;c++);for(u=D((h-x(c,0))/30.42);x(c,u+1)<=h;u++);h=1+h-x(c,u),p=(a%864e5+864e5)%864e5,v=D(p/36e5)%24,y=D(p/6e4)%60,b=D(p/1e3)%60,S=p%1e3}else c=a.getUTCFullYear(),u=a.getUTCMonth(),h=a.getUTCDate(),v=a.getUTCHours(),y=a.getUTCMinutes(),b=a.getUTCSeconds(),S=a.getUTCMilliseconds();a=(0>=c||c>=1e4?(0>c?"-":"+")+O(6,0>c?-c:c):O(4,c))+"-"+O(2,u+1)+"-"+O(2,h)+"T"+O(2,v)+":"+O(2,y)+":"+O(2,b)+"."+O(3,S)+"Z"}else a=null;if(i&&(a=i.call(t,e,a)),null===a)return"null";if(l=_.call(a),l==I)return""+a;if(l==E)return a>-1/0&&1/0>a?""+a:"null";if(l==w)return k(""+a);if("object"==typeof a){for(R=r.length;R--;)if(r[R]===a)throw d();if(r.push(a),C=[],L=s,s+=o,l==M){for(N=0,R=a.length;R>N;N++)A=P(N,a,i,n,o,s,r),C.push(A===g?"null":A);F=C.length?o?"[\n"+s+C.join(",\n"+s)+"\n"+L+"]":"["+C.join(",")+"]":"[]"}else m(n||a,function(e){var t=P(e,a,i,n,o,s,r);t!==g&&C.push(k(e)+":"+(o?" ":"")+t)}),F=C.length?o?"{\n"+s+C.join(",\n"+s)+"\n"+L+"}":"{"+C.join(",")+"}":"{}";return r.pop(),F}};n.stringify=function(e,t,n){var o,s,r,a;if(i[typeof t]&&t)if((a=_.call(t))==S)s=t;else if(a==M){r={};for(var l,c=0,u=t.length;u>c;l=t[c++],a=_.call(l),(a==w||a==E)&&(r[l]=1));}if(n)if((a=_.call(n))==E){if((n-=n%1)>0)for(o="",n>10&&(n=10);o.length<n;o+=" ");}else a==w&&(o=n.length<=10?n:n.slice(0,10));return P("",(l={},l[""]=e,l),s,r,o,"",[])}}if(!s("json-parse")){var F,U,j=a.fromCharCode,H={92:"\\",34:'"',47:"/",98:"\b",116:"	",110:"\n",102:"\f",114:"\r"},B=function(){throw F=U=null,u()},z=function(){for(var e,t,i,n,o,s=U,r=s.length;r>F;)switch(o=s.charCodeAt(F)){case 9:case 10:case 13:case 32:F++;break;case 123:case 125:case 91:case 93:case 58:case 44:return e=C?s.charAt(F):s[F],F++,e;case 34:for(e="@",F++;r>F;)if(o=s.charCodeAt(F),32>o)B();else if(92==o)switch(o=s.charCodeAt(++F)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:e+=H[o],F++;break;case 117:for(t=++F,i=F+4;i>F;F++)o=s.charCodeAt(F),o>=48&&57>=o||o>=97&&102>=o||o>=65&&70>=o||B();e+=j("0x"+s.slice(t,F));break;default:B()}else{if(34==o)break;for(o=s.charCodeAt(F),t=F;o>=32&&92!=o&&34!=o;)o=s.charCodeAt(++F);e+=s.slice(t,F)}if(34==s.charCodeAt(F))return F++,e;B();default:if(t=F,45==o&&(n=!0,o=s.charCodeAt(++F)),o>=48&&57>=o){for(48==o&&(o=s.charCodeAt(F+1),o>=48&&57>=o)&&B(),n=!1;r>F&&(o=s.charCodeAt(F),o>=48&&57>=o);F++);if(46==s.charCodeAt(F)){for(i=++F;r>i&&(o=s.charCodeAt(i),o>=48&&57>=o);i++);i==F&&B(),F=i}if(o=s.charCodeAt(F),101==o||69==o){for(o=s.charCodeAt(++F),(43==o||45==o)&&F++,i=F;r>i&&(o=s.charCodeAt(i),o>=48&&57>=o);i++);i==F&&B(),F=i}return+s.slice(t,F)}if(n&&B(),"true"==s.slice(F,F+4))return F+=4,!0;if("false"==s.slice(F,F+5))return F+=5,!1;if("null"==s.slice(F,F+4))return F+=4,null;B()}return"$"},V=function(e){var t,i;if("$"==e&&B(),"string"==typeof e){if("@"==(C?e.charAt(0):e[0]))return e.slice(1);if("["==e){for(t=[];e=z(),"]"!=e;i||(i=!0))i&&(","==e?(e=z(),"]"==e&&B()):B()),","==e&&B(),t.push(V(e));return t}if("{"==e){for(t={};e=z(),"}"!=e;i||(i=!0))i&&(","==e?(e=z(),"}"==e&&B()):B()),(","==e||"string"!=typeof e||"@"!=(C?e.charAt(0):e[0])||":"!=z())&&B(),t[e.slice(1)]=V(z());return t}B()}return e},$=function(e,t,i){var n=W(e,t,i);n===g?delete e[t]:e[t]=n},W=function(e,t,i){var n,o=e[t];if("object"==typeof o&&o)if(_.call(o)==M)for(n=o.length;n--;)$(o,n,i);else m(o,function(e){$(o,e,i)});return i.call(e,t,o)};n.parse=function(e,t){var i,n;return F=0,U=""+e,i=V(z()),"$"!=z()&&B(),F=U=null,t&&_.call(t)==S?W((n={},n[""]=i,n),"",t):i}}}return n.runInContext=e,n}var t="function"==typeof define&&define.amd,i={"function":!0,object:!0},n=i[typeof exports]&&exports&&!exports.nodeType&&exports,o=i[typeof window]&&window||this,s=n&&i[typeof module]&&module&&!module.nodeType&&"object"==typeof global&&global;if(!s||s.global!==s&&s.window!==s&&s.self!==s||(o=s),n&&!t)e(o,n);else{var r=o.JSON,a=o.JSON3,l=!1,c=e(o,o.JSON3={noConflict:function(){return l||(l=!0,o.JSON=r,o.JSON3=a,r=a=null),c}});o.JSON={parse:c.parse,stringify:c.stringify}}t&&define("json3",[],function(){return c})}.call(this),function(e,t){"function"==typeof define&&define.amd?define("common/enum/loggingLevels",[],e):(t.logging||(t.logging={}),t.logging.loggingLevels=e())}(function(){return{DEBUG:100,INFO:200,WARN:300,ERROR:400}},this),function(e,t){"function"==typeof define&&define.amd?define("common/logging/Level",["common/enum/loggingLevels"],e):(t.logging||(t.logging={}),t.logging.Level=e(t.logging.loggingLevels))}(function(e){function t(e,t){this.level=e,this.name=t.toUpperCase()}t.prototype.isGreaterOrEqual=function(e){var i=(e instanceof t?e:t.getLevel(e)).level;return this.level>=i},t.prototype.toString=function(){return this.name},t.getLevel=function(e){return t[e.toUpperCase()]};for(var i in e)e.hasOwnProperty(i)&&(t[i]=new t(e[i],i));return t},this),function(e,t){"function"==typeof define&&define.amd?define("common/logging/LogItem",[],e):(t.logging||(t.logging={}),t.logging.LogItem=e())}(function(){"use strict";function e(e){var t,i=e.getHours().toString(),n=e.getMinutes().toString(),o=e.getSeconds().toString(),s=e.getMilliseconds();return 1==i.length&&(i="0"+i),1==n.length&&(n="0"+n),1==o.length&&(o="0"+o),t=i+":"+n+":"+o+"."+s}function t(e){for(var t in e)if(e.hasOwnProperty(t)){if("args"===t)for(var i=0,n=e[t].length;n>i;i++)e[t][i]instanceof Error&&(e[t][i]=e[t][i].message);this[t]=e[t]}}return t.prototype.toArray=function(){var t=[];return t.push(e(this.time)),t.push("["+this.id+"]"),"unknown"!==this.file&&t.push("["+this.file+":"+this.line+"]"),t.push("["+this.level.toString()+"] -"),t=t.concat(this.args)},t},this),function(e,t){"function"==typeof define&&define.amd?define("common/logging/Log",["common/logging/Level","common/logging/LogItem"],e):(t.logging||(t.logging={}),t.logging.Log=e(t.logging.Level,t.logging.LogItem))}(function(e,t){function i(t){return function(){return this._prepareLogItem({level:e.getLevel(t),args:arguments})}}function n(e,t){this._id=e.id,this._callback=t}return n.prototype._prepareLogItem=function(e){e.id=this._id,e.args=Array.prototype.slice.call(e.args,0),e.time=new Date;var i=(new Error).stack;if(i){var n=i.split("\n")[2],o=n.match(/\/(\w+\.\w+):(\d+)/i);o&&(e.file=o[1],e.line=o[2])}return e.file||(e.file="unknown",e.line="0"),e=new t(e),this._callback(e),e},n.prototype.debug=i("debug"),n.prototype.info=i("info"),n.prototype.warn=i("warn"),n.prototype.error=i("error"),n},this),function(e,t){"function"==typeof define&&define.amd?define("common/logging/appender/ConsoleAppender",[],e):(t.logging||(t.logging={}),t.logging.appender||(t.logging.appender={}),t.logging.appender.ConsoleAppender=e())}(function(){function e(){}return e.prototype.console=function(){if("undefined"==typeof console){var e=function(){};return{assert:e,clear:e,count:e,debug:e,dir:e,dirxml:e,error:e,group:e,groupCollapsed:e,groupEnd:e,info:e,log:e,markTimeline:e,profile:e,profileEnd:e,table:e,time:e,timeEnd:e,timeStamp:e,trace:e,warn:e}}return console}(),e.prototype.write=function(e){var t=this.console.log;switch(e.level.toString()){case"DEBUG":t=this.console.debug||this.console.log;break;case"INFO":t=this.console.info||this.console.log;break;case"WARN":t=this.console.warn;break;case"ERROR":t=this.console.error}try{t.apply(this.console,e.toArray())}catch(i){try{Function.prototype.apply.call(t,this.console,e.toArray())}catch(n){}}},e},this),function(e,t,i){"function"==typeof define&&define.amd?define("common/logging/LoggerManager",["underscore","common/logging/Log","common/logging/Level","common/logging/appender/ConsoleAppender"],e):(t.logging||(t.logging={}),t.logging.LoggerManager=e(i,t.logging.Log,t.logging.Level,t.logging.appender.ConsoleAppender))
}(function(e,t,i,n){var o={console:n},s=function(e){this.initialize(e||{})};return e.extend(s.prototype,{defaults:function(){return{enabled:!1,level:"error",appenders:{},appenderInstances:{},loggers:{}}},initialize:function(t){this.attributes=e.defaults(t,this.defaults());var i={};e.each(o,function(e,t){i[t]=new e}),this.set("appenderInstances",i)},get:function(e){return this.attributes[e]},set:function(e,t){this.attributes[e]=t},register:function(i){var n={id:"root"};if("string"==typeof i&&""!==i?n.id=i:i&&i.hasOwnProperty("id")&&(n.id=i.id),!this.get("loggers").hasOwnProperty(n.id)){var o=this.get("loggers");o[n.id]=new t(n,e.bind(this._processLogItem,this)),this.set("loggers",o)}return this.get("loggers")[n.id]},disable:function(){this.set("enabled",!1)},enable:function(e){e&&this.set("level",i.getLevel(e)),this.set("enabled",!0)},setLevel:function(e){this.set("level",e)},_processLogItem:function(e){this.get("enabled")&&e.level.isGreaterOrEqual(this.get("level"))&&this._appendLogItem(e)},_appendLogItem:function(e){var t=this.get("appenders"),i=this.get("appenderInstances");for(var n in t)i.hasOwnProperty(t[n])&&i[t[n]].write(e)}}),s},this,this._),define("logger",["require","exports","module","common/logging/LoggerManager"],function(e,t,i){"use strict";var n=e("common/logging/LoggerManager"),o=i.config(),s=new n(o);return s}),function(e){"use strict";define("xdm",["json3","logger"],e)}(function(e,t){function i(e,t){var i=typeof e[t];return"function"==i||!("object"!=i||!e[t])||"unknown"==i}function n(e,t){return!("object"!=typeof e[t]||!e[t])}function o(e){return"[object Array]"===Object.prototype.toString.call(e)}function s(){var e="Shockwave Flash",t="application/x-shockwave-flash";if(!m(navigator.plugins)&&"object"==typeof navigator.plugins[e]){var i=navigator.plugins[e].description;i&&!m(navigator.mimeTypes)&&navigator.mimeTypes[t]&&navigator.mimeTypes[t].enabledPlugin&&(w=i.match(/\d+/g))}if(!w){var n;try{n=new ActiveXObject("ShockwaveFlash.ShockwaveFlash"),w=Array.prototype.slice.call(n.GetVariable("$version").match(/(\d+),(\d+),(\d+),(\d+)/),1),n=null}catch(o){}}if(!w)return!1;var s=parseInt(w[0],10),r=parseInt(w[1],10);return M=s>9&&r>0,!0}function r(){if(!V){V=!0,B("firing dom_onReady");for(var e=0;e<$.length;e++)$[e]();$.length=0}}function a(e,t){return V?void e.call(t):void $.push(function(){e.call(t)})}function l(){var e=parent;if(""!==P)for(var t=0,i=P.split(".");t<i.length;t++)e=e[i[t]];return e.easyXDM}function c(e){return B("Settings namespace to '"+e+"'"),window.easyXDM=U,P=e,P&&(j="easyXDM_"+P.replace(".","_")+"_"),F}function u(e){return e.match(O)[3]}function d(e){return e.match(O)[4]||""}function h(e){var t=e.toLowerCase().match(O),i=t[2],n=t[3],o=t[4]||"";return("http:"==i&&":80"==o||"https:"==i&&":443"==o)&&(o=""),i+"//"+n+o}function p(e){if(e=e.replace(k,"$1/"),!e.match(/^(http||https):\/\//)){var t="/"===e.substring(0,1)?"":location.pathname;"/"!==t.substring(t.length-1)&&(t=t.substring(0,t.lastIndexOf("/")+1)),e=location.protocol+"//"+location.host+t+e}for(;L.test(e);)e=e.replace(L,"");return B("resolved url '"+e+"'"),e}function f(e,t){var i="",n=e.indexOf("#");-1!==n&&(i=e.substring(n),e=e.substring(0,n));var o=[];for(var s in t)t.hasOwnProperty(s)&&o.push(s+"="+encodeURIComponent(t[s]));return e+(H?"#":-1==e.indexOf("?")?"?":"&")+o.join("&")+i}function m(e){return"undefined"==typeof e}function g(e,t,i){var n;for(var o in t)t.hasOwnProperty(o)&&(o in e?(n=t[o],"object"==typeof n?g(e[o],n,i):i||(e[o]=t[o])):e[o]=t[o]);return e}function v(){var e=document.body.appendChild(document.createElement("form")),t=e.appendChild(document.createElement("input"));t.name=j+"TEST"+N,E=t!==e.elements[t.name],document.body.removeChild(e),B("HAS_NAME_PROPERTY_BUG: "+E)}function _(e){B("creating frame: "+e.props.src),m(E)&&v();var t;E?t=document.createElement('<iframe name="'+e.props.name+'"/>'):(t=document.createElement("IFRAME"),t.name=e.props.name),t.id=t.name=e.props.name,delete e.props.name,"string"==typeof e.container&&(e.container=document.getElementById(e.container)),e.container||(g(t.style,{position:"absolute",top:"-2000px",left:"0px"}),e.container=document.body);var i=e.props.src;if(e.props.src="javascript:false",g(t,e.props),t.border=t.frameBorder=0,t.allowTransparency=!0,e.container.appendChild(t),e.onLoad&&I(t,"load",e.onLoad),e.usePost){var n,o=e.container.appendChild(document.createElement("form"));if(o.target=t.name,o.action=i,o.method="POST","object"==typeof e.usePost)for(var s in e.usePost)e.usePost.hasOwnProperty(s)&&(E?n=document.createElement('<input name="'+s+'"/>'):(n=document.createElement("INPUT"),n.name=s),n.value=e.usePost[s],o.appendChild(n));o.submit(),o.parentNode.removeChild(o)}else t.src=i;return e.props.src=i,t}function y(e,t){"string"==typeof e&&(e=[e]);for(var i,n=e.length;n--;)if(i=e[n],i=new RegExp("^"==i.substr(0,1)?i:"^"+i.replace(/(\*)/g,".$1").replace(/\?/g,".")+"$"),i.test(t))return!0;return!1}function b(e){var t,n=e.protocol;if(e.isHost=e.isHost||m(K.xdm_p),H=e.hash||!1,B("preparing transport stack"),e.props||(e.props={}),e.isHost)e.remote=p(e.remote),e.channel=e.channel||"default"+N++,e.secret=Math.random().toString(16).substring(2),m(n)?(n=h(location.href)==h(e.remote)?"4":i(window,"postMessage")||i(document,"postMessage")?"1":e.swf&&i(window,"ActiveXObject")&&s()?"6":"Gecko"===navigator.product&&"frameElement"in window&&-1==navigator.userAgent.indexOf("WebKit")?"5":e.remoteHelper?"2":"0",B("selecting protocol: "+n)):B("using protocol: "+n);else if(B("using parameters from query"),e.channel=K.xdm_c.replace(/["'<>\\]/g,""),e.secret=K.xdm_s,e.remote=K.xdm_e.replace(/["'<>\\]/g,""),n=K.xdm_p,e.acl&&!y(e.acl,e.remote))throw new Error("Access denied for "+e.remote);switch(e.protocol=n,n){case"0":if(g(e,{interval:100,delay:2e3,useResize:!0,useParent:!1,usePolling:!1},!0),e.isHost){if(!e.local){B("looking for image to use as local");for(var o,r=location.protocol+"//"+location.host,a=document.body.getElementsByTagName("img"),l=a.length;l--;)if(o=a[l],o.src.substring(0,r.length)===r){e.local=o.src;break}e.local||(B("no image found, defaulting to using the window"),e.local=window)}var c={xdm_c:e.channel,xdm_p:0};e.local===window?(e.usePolling=!0,e.useParent=!0,e.local=location.protocol+"//"+location.host+location.pathname+location.search,c.xdm_e=e.local,c.xdm_pa=1):c.xdm_e=p(e.local),e.container&&(e.useResize=!1,c.xdm_po=1),e.remote=f(e.remote,c)}else g(e,{channel:K.xdm_c,remote:K.xdm_e,useParent:!m(K.xdm_pa),usePolling:!m(K.xdm_po),useResize:e.useParent?!1:e.useResize});t=[new F.stack.HashTransport(e),new F.stack.ReliableBehavior({}),new F.stack.QueueBehavior({encode:!0,maxLength:4e3-e.remote.length}),new F.stack.VerifyBehavior({initiate:e.isHost})];break;case"1":t=[new F.stack.PostMessageTransport(e)];break;case"2":e.isHost&&(e.remoteHelper=p(e.remoteHelper)),t=[new F.stack.NameTransport(e),new F.stack.QueueBehavior,new F.stack.VerifyBehavior({initiate:e.isHost})];break;case"3":t=[new F.stack.NixTransport(e)];break;case"4":t=[new F.stack.SameOriginTransport(e)];break;case"5":t=[new F.stack.FrameElementTransport(e)];break;case"6":w||s(),t=[new F.stack.FlashTransport(e)]}return t.push(new F.stack.QueueBehavior({lazy:e.lazy,remove:!0})),t}function S(e){for(var t,i={incoming:function(e,t){this.up.incoming(e,t)},outgoing:function(e,t){this.down.outgoing(e,t)},callback:function(e){this.up.callback(e)},init:function(){this.down.init()},destroy:function(){this.down.destroy()}},n=0,o=e.length;o>n;n++)t=e[n],g(t,i,!0),0!==n&&(t.down=e[n-1]),n!==o-1&&(t.up=e[n+1]);return t}function T(e){e.up.down=e.down,e.down.up=e.up,e.up=e.down=null}if("undefined"==typeof document)return{};var E,w,M,I,C,D=window.setTimeout,A=t.register("EasyXDM"),x=this,N=Math.floor(1e4*Math.random()),R=Function.prototype,O=/^((http.?:)\/\/([^:\/\s]+)(:\d+)*)/,L=/[\-\w]+\/\.\.\//,k=/([^:])\/\//g,P="",F={},U=window.easyXDM,j="easyXDM_",H=!1,B=R;if(i(window,"addEventListener"))I=function(e,t,i){B("adding listener "+t),e.addEventListener(t,i,!1)},C=function(e,t,i){B("removing listener "+t),e.removeEventListener(t,i,!1)};else{if(!i(window,"attachEvent"))throw new Error("Browser not supported");I=function(e,t,i){B("adding listener "+t),e.attachEvent("on"+t,i)},C=function(e,t,i){B("removing listener "+t),e.detachEvent("on"+t,i)}}var z,V=!1,$=[];if("readyState"in document?(z=document.readyState,V="complete"==z||~navigator.userAgent.indexOf("AppleWebKit/")&&("loaded"==z||"interactive"==z)):V=!!document.body,!V){if(i(window,"addEventListener"))I(document,"DOMContentLoaded",r);else if(I(document,"readystatechange",function(){"complete"==document.readyState&&r()}),document.documentElement.doScroll&&window===top){var W=function(){if(!V){try{document.documentElement.doScroll("left")}catch(e){return void D(W,1)}r()}};W()}I(window,"load",r)}var K=function(e){e=e.substring(1).split("&");for(var t,i={},n=e.length;n--;)t=e[n].split("="),i[t[0]]=decodeURIComponent(t[1]);return i}(/xdm_e=/.test(location.search)?location.search:location.hash),Y=function(){var e={},t={a:[1,2,3]},i='{"a":[1,2,3]}';return"undefined"!=typeof JSON&&"function"==typeof JSON.stringify&&JSON.stringify(t).replace(/\s/g,"")===i?JSON:(Object.toJSON&&Object.toJSON(t).replace(/\s/g,"")===i&&(e.stringify=Object.toJSON),"function"==typeof String.prototype.evalJSON&&(t=i.evalJSON(),t.a&&3===t.a.length&&3===t.a[2]&&(e.parse=function(e){return e.evalJSON()})),e.stringify&&e.parse?(Y=function(){return e},e):null)};g(F,{version:"2.4.19.1",query:K,stack:{},apply:g,getJSONObject:Y,whenReady:a,noConflict:c});var q={_deferred:[],flush:function(){this.trace("... deferred messages ...");for(var e=0,t=this._deferred.length;t>e;e++)this.trace(this._deferred[e]);this._deferred.length=0,this.trace("... end of deferred messages ...")},getTime:function(){var e=new Date,t=e.getHours()+"",i=e.getMinutes()+"",n=e.getSeconds()+"",o=e.getMilliseconds()+"",s="000";return 1==t.length&&(t="0"+t),1==i.length&&(i="0"+i),1==n.length&&(n="0"+n),o=s.substring(o.length)+o,t+":"+i+":"+n+"."+o},log:function(e){A.debug(location.host+(P?":"+P:"")+": "+e)},getTracer:function(e){var i=t.register(e);return function(e){i.debug(e)}}};return q.log("easyXDM present on '"+location.href),F.Debug=q,B=q.getTracer("EasyXDM.{Private}"),F.DomHelper={on:I,un:C,requiresJSON:function(e){n(window,"JSON")?q.log("native JSON found"):(q.log("loading external JSON"),document.write('<script type="text/javascript" src="'+e+'"></script>'))}},function(){var e={};F.Fn={set:function(t,i){this._trace("storing function "+t),e[t]=i},get:function(t,i){if(this._trace("retrieving function "+t),e.hasOwnProperty(t)){var n=e[t];return n||this._trace(t+" not found"),i&&delete e[t],n}}},F.Fn._trace=q.getTracer("easyXDM.Fn")}(),F.Socket=function(e){var t=q.getTracer("easyXDM.Socket");t("constructor");var i=S(b(e).concat([{incoming:function(t,i){e.onMessage(t,i)},callback:function(t){e.onReady&&e.onReady(t)}}])),n=h(e.remote);this.origin=h(e.remote),this.destroy=function(){i.destroy()},this.postMessage=function(e){i.outgoing(e,n)},i.init()},F.Rpc=function(e,t){var i=q.getTracer("easyXDM.Rpc");if(i("constructor"),t.local)for(var n in t.local)if(t.local.hasOwnProperty(n)){var o=t.local[n];"function"==typeof o&&(t.local[n]={method:o})}var s=S(b(e).concat([new F.stack.RpcBehavior(this,t),{callback:function(t){e.onReady&&e.onReady(t)}}]));this.origin=h(e.remote),this.destroy=function(){s.destroy()},s.init()},F.stack.SameOriginTransport=function(e){var t=q.getTracer("easyXDM.stack.SameOriginTransport");t("constructor");var i,n,o,s;return i={outgoing:function(e,t,i){o(e),i&&i()},destroy:function(){t("destroy"),n&&(n.parentNode.removeChild(n),n=null)},onDOMReady:function(){t("init"),s=h(e.remote),e.isHost?(g(e.props,{src:f(e.remote,{xdm_e:location.protocol+"//"+location.host+location.pathname,xdm_c:e.channel,xdm_p:4}),name:j+e.channel+"_provider"}),n=_(e),F.Fn.set(e.channel,function(e){return o=e,D(function(){i.up.callback(!0)},0),function(e){i.up.incoming(e,s)}})):(o=l().Fn.get(e.channel,!0)(function(e){i.up.incoming(e,s)}),D(function(){i.up.callback(!0)},0))},init:function(){a(i.onDOMReady,i)}}},F.stack.FlashTransport=function(e){function t(e){D(function(){n("received message"),o.up.incoming(e,r)},0)}function i(t){n("creating factory with SWF from "+t);var i=e.swf+"?host="+e.isHost,o="easyXDM_swf_"+Math.floor(1e4*Math.random());F.Fn.set("flash_loaded"+t.replace(/[\-.]/g,"_"),function(){F.stack.FlashTransport[t].swf=l=c.firstChild;for(var e=F.stack.FlashTransport[t].queue,i=0;i<e.length;i++)e[i]();e.length=0}),e.swfContainer?c="string"==typeof e.swfContainer?document.getElementById(e.swfContainer):e.swfContainer:(c=document.createElement("div"),g(c.style,M&&e.swfNoThrottle?{height:"20px",width:"20px",position:"fixed",right:0,top:0}:{height:"1px",width:"1px",position:"absolute",overflow:"hidden",right:0,top:0}),document.body.appendChild(c));var s="callback=flash_loaded"+encodeURIComponent(t.replace(/[\-.]/g,"_"))+"&proto="+x.location.protocol+"&domain="+encodeURIComponent(u(x.location.href))+"&port="+encodeURIComponent(d(x.location.href))+"&ns="+encodeURIComponent(P);s+="&log=true",c.innerHTML="<object height='20' width='20' type='application/x-shockwave-flash' id='"+o+"' data='"+i+"'><param name='allowScriptAccess' value='always'></param><param name='wmode' value='transparent'><param name='movie' value='"+i+"'></param><param name='flashvars' value='"+s+"'></param><embed type='application/x-shockwave-flash' FlashVars='"+s+"' allowScriptAccess='always' wmode='transparent' src='"+i+"' height='1' width='1'></embed></object>"}var n=q.getTracer("easyXDM.stack.FlashTransport");n("constructor");var o,s,r,l,c;return o={outgoing:function(t,i,n){l.postMessage(e.channel,t.toString()),n&&n()},destroy:function(){n("destroy");try{l.destroyChannel(e.channel)}catch(t){}l=null,s&&(s.parentNode.removeChild(s),s=null)},onDOMReady:function(){n("init"),r=e.remote,F.Fn.set("flash_"+e.channel+"_init",function(){D(function(){n("firing onReady"),o.up.callback(!0)})}),F.Fn.set("flash_"+e.channel+"_onMessage",t),e.swf=p(e.swf);var a=u(e.swf),c=function(){F.stack.FlashTransport[a].init=!0,l=F.stack.FlashTransport[a].swf,l.createChannel(e.channel,e.secret,h(e.remote),e.isHost),e.isHost&&(M&&e.swfNoThrottle&&g(e.props,{position:"fixed",right:0,top:0,height:"20px",width:"20px"}),g(e.props,{src:f(e.remote,{xdm_e:h(location.href),xdm_c:e.channel,xdm_p:6,xdm_s:e.secret}),name:j+e.channel+"_provider"}),s=_(e))};F.stack.FlashTransport[a]&&F.stack.FlashTransport[a].init?c():F.stack.FlashTransport[a]?F.stack.FlashTransport[a].queue.push(c):(F.stack.FlashTransport[a]={queue:[c]},i(a))},init:function(){a(o.onDOMReady,o)}}},F.stack.PostMessageTransport=function(e){function t(e){if(e.origin)return h(e.origin);if(e.uri)return h(e.uri);if(e.domain)return location.protocol+"//"+e.domain;throw"Unable to retrieve the origin of the event"}function i(i){var s=t(i);n("received message '"+i.data+"' from "+s),s==l&&i.data.substring(0,e.channel.length+1)==e.channel+" "&&o.up.incoming(i.data.substring(e.channel.length+1),s)}var n=q.getTracer("easyXDM.stack.PostMessageTransport");n("constructor");var o,s,r,l;return o={outgoing:function(t,i,n){r.postMessage(e.channel+" "+t,i||l),n&&n()},destroy:function(){n("destroy"),C(window,"message",i),s&&(r=null,s.parentNode.removeChild(s),s=null)},onDOMReady:function(){if(n("init"),l=h(e.remote),e.isHost){var t=function(a){a.data==e.channel+"-ready"&&(n("firing onReady"),r="postMessage"in s.contentWindow?s.contentWindow:s.contentWindow.document,C(window,"message",t),I(window,"message",i),D(function(){o.up.callback(!0)},0))};I(window,"message",t),g(e.props,{src:f(e.remote,{xdm_e:h(location.href),xdm_c:e.channel,xdm_p:1}),name:j+e.channel+"_provider"}),s=_(e)}else I(window,"message",i),r="postMessage"in window.parent?window.parent:window.parent.document,r.postMessage(e.channel+"-ready",l),D(function(){o.up.callback(!0)},0)},init:function(){a(o.onDOMReady,o)}}},F.stack.FrameElementTransport=function(e){var t=q.getTracer("easyXDM.stack.FrameElementTransport");t("constructor");var i,n,o,s;return i={outgoing:function(e,t,i){o.call(this,e),i&&i()},destroy:function(){t("destroy"),n&&(n.parentNode.removeChild(n),n=null)},onDOMReady:function(){t("init"),s=h(e.remote),e.isHost?(g(e.props,{src:f(e.remote,{xdm_e:h(location.href),xdm_c:e.channel,xdm_p:5}),name:j+e.channel+"_provider"}),n=_(e),n.fn=function(e){return delete n.fn,o=e,D(function(){i.up.callback(!0)},0),function(e){i.up.incoming(e,s)}}):(document.referrer&&h(document.referrer)!=K.xdm_e&&(window.top.location=K.xdm_e),o=window.frameElement.fn(function(e){i.up.incoming(e,s)}),i.up.callback(!0))},init:function(){a(i.onDOMReady,i)}}},F.stack.NameTransport=function(e){function t(t){var i=e.remoteHelper+(l?"#_3":"#_2")+e.channel;s("sending message "+t),s("navigating to  '"+i+"'"),c.contentWindow.sendMessage(t,i)}function i(){l?2!==++d&&l||r.up.callback(!0):(t("ready"),s("calling onReady"),r.up.callback(!0))}function n(e){s("received message "+e),r.up.incoming(e,y)}function o(){v&&D(function(){v(!0)},0)}var s=q.getTracer("easyXDM.stack.NameTransport");s("constructor"),e.isHost&&m(e.remoteHelper)&&s("missing remoteHelper");var r,l,c,u,d,v,y,b;return r={outgoing:function(e,i,n){v=n,t(e)},destroy:function(){s("destroy"),c.parentNode.removeChild(c),c=null,l&&(u.parentNode.removeChild(u),u=null)},onDOMReady:function(){s("init"),l=e.isHost,d=0,y=h(e.remote),e.local=p(e.local),l?(F.Fn.set(e.channel,function(t){s("received initial message "+t),l&&"ready"===t&&(F.Fn.set(e.channel,n),i())}),b=f(e.remote,{xdm_e:e.local,xdm_c:e.channel,xdm_p:2}),g(e.props,{src:b+"#"+e.channel,name:j+e.channel+"_provider"}),u=_(e)):(e.remoteHelper=e.remote,F.Fn.set(e.channel,n));var t=function(){var n=c||this;C(n,"load",t),F.Fn.set(e.channel+"_load",o),function s(){"function"==typeof n.contentWindow.sendMessage?i():D(s,50)}()};c=_({props:{src:e.local+"#_4"+e.channel},onLoad:t})},init:function(){a(r.onDOMReady,r)}}},F.stack.HashTransport=function(e){function t(t){if(s("sending message '"+(p+1)+" "+t+"' to "+y),!m)return void s("no caller window");var i=e.remote+"#"+p++ +"_"+t;(l||!v?m.contentWindow:m).location=i}function i(e){d=e,s("received message '"+d+"' from "+y),r.up.incoming(d.substring(d.indexOf("_")+1),y)}function n(){if(f){var e=f.location.href,t="",n=e.indexOf("#");-1!=n&&(t=e.substring(n)),t&&t!=d&&(s("poll: new message"),i(t))}}function o(){s("starting polling"),c=setInterval(n,u)}var s=q.getTracer("easyXDM.stack.HashTransport");s("constructor");var r,l,c,u,d,p,f,m,v,y;return r={outgoing:function(e){t(e)},destroy:function(){window.clearInterval(c),(l||!v)&&m.parentNode.removeChild(m),m=null},onDOMReady:function(){if(l=e.isHost,u=e.interval,d="#"+e.channel,p=0,v=e.useParent,y=h(e.remote),l){if(g(e.props,{src:e.remote,name:j+e.channel+"_provider"}),v)e.onLoad=function(){f=window,o(),r.up.callback(!0)};else{var t=0,i=e.delay/50;!function n(){if(++t>i)throw s("unable to get reference to _listenerWindow, giving up"),new Error("Unable to reference listenerwindow");try{f=m.contentWindow.frames[j+e.channel+"_consumer"]}catch(a){}f?(o(),s("got a reference to _listenerWindow"),r.up.callback(!0)):D(n,50)}()}m=_(e)}else f=window,o(),v?(m=parent,r.up.callback(!0)):(g(e,{props:{src:e.remote+"#"+e.channel+new Date,name:j+e.channel+"_consumer"},onLoad:function(){r.up.callback(!0)}}),m=_(e))},init:function(){a(r.onDOMReady,r)}}},F.stack.ReliableBehavior=function(){var e=q.getTracer("easyXDM.stack.ReliableBehavior");e("constructor");var t,i,n=0,o=0,s="";return t={incoming:function(r,a){e("incoming: "+r);var l=r.indexOf("_"),c=r.substring(0,l).split(",");r=r.substring(l+1),c[0]==n&&(e("message delivered"),s="",i&&i(!0)),r.length>0&&(e("sending ack, and passing on "+r),t.down.outgoing(c[1]+","+n+"_"+s,a),o!=c[1]&&(o=c[1],t.up.incoming(r,a)))},outgoing:function(e,r,a){s=e,i=a,t.down.outgoing(o+","+ ++n+"_"+e,r)}}},F.stack.QueueBehavior=function(e){function t(){if(e.remove&&0===s.length)return i("removing myself from the stack"),void T(n);if(!r&&0!==s.length&&!o){i("dispatching from queue"),r=!0;var a=s.shift();n.down.outgoing(a.data,a.origin,function(e){r=!1,a.callback&&D(function(){a.callback(e)},0),t()})}}var i=q.getTracer("easyXDM.stack.QueueBehavior");i("constructor");var n,o,s=[],r=!0,a="",l=0,c=!1,u=!1;return n={init:function(){m(e)&&(e={}),e.maxLength&&(l=e.maxLength,u=!0),e.lazy?c=!0:n.down.init()},callback:function(e){r=!1;var i=n.up;t(),i.callback(e)},incoming:function(t,o){if(u){var s=t.indexOf("_"),r=parseInt(t.substring(0,s),10);a+=t.substring(s+1),0===r?(i("received the last fragment"),e.encode&&(a=decodeURIComponent(a)),n.up.incoming(a,o),a=""):i("waiting for more fragments, seq="+t)}else n.up.incoming(t,o)},outgoing:function(o,r,a){e.encode&&(o=encodeURIComponent(o));var d,h=[];if(u){for(;0!==o.length;)d=o.substring(0,l),o=o.substring(d.length),h.push(d);for(;d=h.shift();)i("enqueuing"),s.push({data:h.length+"_"+d,origin:r,callback:0===h.length?a:null})}else s.push({data:o,origin:r,callback:a});c?n.down.init():t()},destroy:function(){i("destroy"),o=!0,n.down.destroy()}}},F.stack.VerifyBehavior=function(e){function t(){i("requesting verification"),o=Math.random().toString(16).substring(2),n.down.outgoing(o)}var i=q.getTracer("easyXDM.stack.VerifyBehavior");i("constructor");var n,o,s;return n={incoming:function(r,a){var l=r.indexOf("_");-1===l?r===o?(i("verified, calling callback"),n.up.callback(!0)):s||(i("returning secret"),s=r,e.initiate||t(),n.down.outgoing(r)):r.substring(0,l)===s&&n.up.incoming(r.substring(l+1),a)},outgoing:function(e,t,i){n.down.outgoing(o+"_"+e,t,i)},callback:function(){e.initiate&&t()}}},F.stack.RpcBehavior=function(e,t){function i(e){e.jsonrpc="2.0",r.down.outgoing(l.stringify(e))}function n(e,t){var n=Array.prototype.slice;return a("creating method "+t),function(){a("executing method "+t);var o,s=arguments.length,r={method:t};return s>0&&"function"==typeof arguments[s-1]?(s>1&&"function"==typeof arguments[s-2]?(o={success:arguments[s-2],error:arguments[s-1]},r.params=n.call(arguments,0,s-2)):(o={success:arguments[s-1]},r.params=n.call(arguments,0,s-1)),u[""+ ++c]=o,r.id=c):r.params=n.call(arguments,0),e.namedParams&&1===r.params.length&&(r.params=r.params[0]),i(r),r.id}}function s(e,t,n,s){if(!n)return a("requested to execute non-existent procedure "+e),void(t&&i({id:t,error:{code:-32601,message:"Procedure not found."}}));a("requested to execute procedure "+e);var r,l;t?(r=function(e){r=R,i({id:t,result:e})},l=function(e,n){l=R;var o={id:t,error:{code:-32099,message:e}};n&&(o.error.data=n),i(o)}):r=l=R,o(s)||(s=[s]);try{var c=n.method.apply(n.scope,s.concat([r,l]));m(c)||r(c)}catch(u){l(u.message)}}var r,a=q.getTracer("easyXDM.stack.RpcBehavior"),l=t.serializer||Y(),c=0,u={};return r={incoming:function(e){var n=l.parse(e);if(n.method)a("received request to execute method "+n.method+(n.id?" using callback id "+n.id:"")),n&&n.params&&n.params[0]&&"object"==typeof n.params[0]&&(n.params[0].id=n.id),t.handle?t.handle(n,i):s(n.method,n.id,t.local[n.method],n.params);else{a("received return value destined to callback with id "+n.id);var o=u[n.id];n.error?o.error?o.error(n.error):a("unhandled error returned."):o.success&&o.success(n.result),delete u[n.id]}},init:function(){if(a("init"),t.remote){a("creating stubs");for(var i in t.remote)t.remote.hasOwnProperty(i)&&(e[i]=n(t.remote[i],i))}r.down.init()},destroy:function(){a("destroy");for(var i in t.remote)t.remote.hasOwnProperty(i)&&e.hasOwnProperty(i)&&delete e[i];r.down.destroy()}}},F}),define("common/transport/fakeXhrFactory",["require","underscore"],function(e){var t=e("underscore");return function(e){var i={},n={};return t.extend(e,{getResponseHeader:function(t){var i,n=/^(.*?):[ \t]*([^\r\n]*)$/gm;if(4===e.readyState){if(!this.responseHeaders)for(this.responseHeaders={};i=n.exec(this.responseHeadersString);)this.responseHeaders[i[1].toLowerCase()]=i[2];i=this.responseHeaders[t.toLowerCase()]}return null==i?null:i},getAllResponseHeaders:function(){return 2===e.readyState?this.responseHeadersString:null},setRequestHeader:function(t,o){var s=t.toLowerCase();return e.readyState||(t=i[s]=i[s]||t,n[t]=o),this}})}}),define("common/transport/xdmRequest",["require","jquery","underscore","xdm","./fakeXhrFactory","jrs.configs","logger"],function(e){"use strict";function t(e,t){var i=n.Deferred(),o=n.Deferred(),s=e.request(t,function(e){i.resolve(e.data,e.status,r(e.xhr))},function(e){i.reject(e.message,e.data)});return t.success&&i.done(t.success),t.error&&i.fail(t.error),t.complete&&i.always(t.complete),i.done(o.resolve).fail(o.reject).progress(o.notify),o.fail(function(){"pending"==i.state()&&e.abort(s)}),o}function i(){var e=[];return e.push({name:"logEnabled",value:l.get("enabled")}),l.get("level")&&e.push({name:"logLevel",value:l.get("level")}),n.param(e)}var n=e("jquery"),o=e("underscore"),s=e("xdm"),r=e("./fakeXhrFactory"),a=e("jrs.configs"),l=e("logger"),c=function(e){if(0===arguments.length)throw new Error("Not enough arguments to perform the request.");var i=c.create(e.baseUrl?e.baseUrl:a.contextPath);return t(i,e)};return c.create=o.memoize(function(e){return new s.Rpc({remote:e+"/xdm.html?"+i(),container:document.body,props:{style:{display:"none"}}},{remote:{request:{},abort:{}}})}),c}),define("common/transport/xhrRequest",["require","jquery","underscore","logger"],function(e){"use strict";function t(){r.trigger.apply(r,arguments)}function i(e){(401==e.status||e.getResponseHeader("LoginRequested"))&&(n(window).trigger("sessionExpired"),s.warn("Session timed-out. Redirecting to login page."),window.location.reload())}var n=e("jquery"),o=e("underscore"),s=e("logger").register("request");if("undefined"==typeof document)return{};var r=n(document);return function(e){return o.partial(t,"request:before").apply(null,arguments),n.ajax(e).fail(i).fail(function(e){e.getResponseHeader("adhocException")?s.error(e.getResponseHeader("adhocException")):(500==e.status||e.getResponseHeader("JasperServerError")&&!e.getResponseHeader("SuppressError"))&&s.error(e.responseText)}).fail(o.partial(t,"request:failure")).done(o.partial(t,"request:success"))}}),define("common/transport/request",["require","jquery","underscore","jrs.configs","common/config/requestSettings","common/transport/xdmRequest","common/transport/xhrRequest"],function(e){"use strict";var t,i=e("jquery"),n=e("underscore"),o=e("jrs.configs"),s=e("common/config/requestSettings"),r=e("common/transport/xdmRequest"),a=e("common/transport/xhrRequest");return function(){t||(t=o.isXdm?r:a);var e=n.extend({},s,arguments[0]);return s.headers&&arguments[0].headers&&(e.headers=n.extend({},s.headers,arguments[0].headers)),arguments[0]=e,t.apply(i,arguments)}}),define("settings",["require","common/transport/request","common/config/requestSettings","underscore","jrs.configs"],function(e){"use strict";var t=e("common/transport/request"),i=e("common/config/requestSettings"),n=e("underscore"),o=e("jrs.configs"),s=o.contextPath+"/rest_v2/settings/",r=function(e,o){var r=n.extend({},i,{type:"GET",dataType:"json",url:s+e});t(r).fail(function(){o(null)}).then(function(e){o(e)})};return r.load=function(e,t,i,n){return n.isBuild?void i():void r(e,i)},r}),define("common/jquery/extension/datepickerExt",["require","jrs.configs","jquery.ui","underscore","settings!dateTimeSettings"],function(e){function t(e,t){var i="en";return e&&(o.contains(t,e)?i=e:o.contains(t,e.substring(0,2))&&(i=e.substring(0,2))),i.replace("_","-")}var i=e("jrs.configs"),n=e("jquery.ui"),o=e("underscore"),s=e("settings!dateTimeSettings"),r=t(i.userLocale,i.avaliableLocales);return s&&n(function(e){e.datepicker.regional[r]=s.datepicker,e.datepicker.setDefaults(e.datepicker.regional[r])}),n.datepicker.movePickerRelativelyToTriggerIcon=function(e,t){var i=n(e).offset().left,o=parseFloat(t.dpDiv.css("width").replace("px","")),s=i+e.offsetWidth+o<n(window).width();t.dpDiv.css({marginLeft:s?e.offsetWidth+"px":0})},n}),define("jquery.timepicker.addon",["require","jquery.ui"],function(require){var jQuery=require("jquery.ui");return function($){if($.ui.timepicker=$.ui.timepicker||{},!$.ui.timepicker.version){$.extend($.ui,{timepicker:{version:"1.3"}});var Timepicker=function(){this.regional=[],this.regional[""]={currentText:"Now",closeText:"Done",amNames:["AM","A"],pmNames:["PM","P"],timeFormat:"HH:mm",timeSuffix:"",timeOnlyTitle:"Choose Time",timeText:"Time",hourText:"Hour",minuteText:"Minute",secondText:"Second",millisecText:"Millisecond",microsecText:"Microsecond",timezoneText:"Time Zone",isRTL:!1},this._defaults={showButtonPanel:!0,timeOnly:!1,showHour:null,showMinute:null,showSecond:null,showMillisec:null,showMicrosec:null,showTimezone:null,showTime:!0,stepHour:1,stepMinute:1,stepSecond:1,stepMillisec:1,stepMicrosec:1,hour:0,minute:0,second:0,millisec:0,microsec:0,timezone:null,hourMin:0,minuteMin:0,secondMin:0,millisecMin:0,microsecMin:0,hourMax:23,minuteMax:59,secondMax:59,millisecMax:999,microsecMax:999,minDateTime:null,maxDateTime:null,onSelect:null,hourGrid:0,minuteGrid:0,secondGrid:0,millisecGrid:0,microsecGrid:0,alwaysSetTime:!0,separator:" ",altFieldTimeOnly:!0,altTimeFormat:null,altSeparator:null,altTimeSuffix:null,pickerTimeFormat:null,pickerTimeSuffix:null,showTimepicker:!0,timezoneList:null,addSliderAccess:!1,sliderAccessArgs:null,controlType:"slider",defaultValue:null,parse:"strict"},$.extend(this._defaults,this.regional[""])};$.extend(Timepicker.prototype,{$input:null,$altInput:null,$timeObj:null,inst:null,hour_slider:null,minute_slider:null,second_slider:null,millisec_slider:null,microsec_slider:null,timezone_select:null,hour:0,minute:0,second:0,millisec:0,microsec:0,timezone:null,hourMinOriginal:null,minuteMinOriginal:null,secondMinOriginal:null,millisecMinOriginal:null,microsecMinOriginal:null,hourMaxOriginal:null,minuteMaxOriginal:null,secondMaxOriginal:null,millisecMaxOriginal:null,microsecMaxOriginal:null,ampm:"",formattedDate:"",formattedTime:"",formattedDateTime:"",timezoneList:null,units:["hour","minute","second","millisec","microsec"],support:{},control:null,setDefaults:function(e){return extendRemove(this._defaults,e||{}),this},_newInst:function($input,o){var tp_inst=new Timepicker,inlineSettings={},fns={},overrides,i;for(var attrName in this._defaults)if(this._defaults.hasOwnProperty(attrName)){var attrValue=$input.attr("time:"+attrName);if(attrValue)try{inlineSettings[attrName]=eval(attrValue)}catch(err){inlineSettings[attrName]=attrValue}}overrides={beforeShow:function(e,t){return $.isFunction(tp_inst._defaults.evnts.beforeShow)?tp_inst._defaults.evnts.beforeShow.call($input[0],e,t,tp_inst):void 0},onChangeMonthYear:function(e,t,i){tp_inst._updateDateTime(i),$.isFunction(tp_inst._defaults.evnts.onChangeMonthYear)&&tp_inst._defaults.evnts.onChangeMonthYear.call($input[0],e,t,i,tp_inst)},onClose:function(e,t){tp_inst.timeDefined===!0&&""!==$input.val()&&tp_inst._updateDateTime(t),$.isFunction(tp_inst._defaults.evnts.onClose)&&tp_inst._defaults.evnts.onClose.call($input[0],e,t,tp_inst)}};for(i in overrides)overrides.hasOwnProperty(i)&&(fns[i]=o[i]||null);tp_inst._defaults=$.extend({},this._defaults,inlineSettings,o,overrides,{evnts:fns,timepicker:tp_inst}),tp_inst.amNames=$.map(tp_inst._defaults.amNames,function(e){return e.toUpperCase()}),tp_inst.pmNames=$.map(tp_inst._defaults.pmNames,function(e){return e.toUpperCase()}),tp_inst.support=detectSupport(tp_inst._defaults.timeFormat+(tp_inst._defaults.pickerTimeFormat?tp_inst._defaults.pickerTimeFormat:"")+(tp_inst._defaults.altTimeFormat?tp_inst._defaults.altTimeFormat:"")),"string"==typeof tp_inst._defaults.controlType?("slider"==tp_inst._defaults.controlType&&"undefined"==typeof $.ui.slider&&(tp_inst._defaults.controlType="select"),tp_inst.control=tp_inst._controls[tp_inst._defaults.controlType]):tp_inst.control=tp_inst._defaults.controlType;var timezoneList=[-720,-660,-600,-570,-540,-480,-420,-360,-300,-270,-240,-210,-180,-120,-60,0,60,120,180,210,240,270,300,330,345,360,390,420,480,525,540,570,600,630,660,690,720,765,780,840];null!==tp_inst._defaults.timezoneList&&(timezoneList=tp_inst._defaults.timezoneList);
var tzl=timezoneList.length,tzi=0,tzv=null;if(tzl>0&&"object"!=typeof timezoneList[0])for(;tzl>tzi;tzi++)tzv=timezoneList[tzi],timezoneList[tzi]={value:tzv,label:$.timepicker.timezoneOffsetString(tzv,tp_inst.support.iso8601)};return tp_inst._defaults.timezoneList=timezoneList,tp_inst.timezone=null!==tp_inst._defaults.timezone?$.timepicker.timezoneOffsetNumber(tp_inst._defaults.timezone):-1*(new Date).getTimezoneOffset(),tp_inst.hour=tp_inst._defaults.hour<tp_inst._defaults.hourMin?tp_inst._defaults.hourMin:tp_inst._defaults.hour>tp_inst._defaults.hourMax?tp_inst._defaults.hourMax:tp_inst._defaults.hour,tp_inst.minute=tp_inst._defaults.minute<tp_inst._defaults.minuteMin?tp_inst._defaults.minuteMin:tp_inst._defaults.minute>tp_inst._defaults.minuteMax?tp_inst._defaults.minuteMax:tp_inst._defaults.minute,tp_inst.second=tp_inst._defaults.second<tp_inst._defaults.secondMin?tp_inst._defaults.secondMin:tp_inst._defaults.second>tp_inst._defaults.secondMax?tp_inst._defaults.secondMax:tp_inst._defaults.second,tp_inst.millisec=tp_inst._defaults.millisec<tp_inst._defaults.millisecMin?tp_inst._defaults.millisecMin:tp_inst._defaults.millisec>tp_inst._defaults.millisecMax?tp_inst._defaults.millisecMax:tp_inst._defaults.millisec,tp_inst.microsec=tp_inst._defaults.microsec<tp_inst._defaults.microsecMin?tp_inst._defaults.microsecMin:tp_inst._defaults.microsec>tp_inst._defaults.microsecMax?tp_inst._defaults.microsecMax:tp_inst._defaults.microsec,tp_inst.ampm="",tp_inst.$input=$input,o.altField&&(tp_inst.$altInput=$(o.altField).css({cursor:"pointer"}).focus(function(){$input.trigger("focus")})),(0===tp_inst._defaults.minDate||0===tp_inst._defaults.minDateTime)&&(tp_inst._defaults.minDate=new Date),(0===tp_inst._defaults.maxDate||0===tp_inst._defaults.maxDateTime)&&(tp_inst._defaults.maxDate=new Date),void 0!==tp_inst._defaults.minDate&&tp_inst._defaults.minDate instanceof Date&&(tp_inst._defaults.minDateTime=new Date(tp_inst._defaults.minDate.getTime())),void 0!==tp_inst._defaults.minDateTime&&tp_inst._defaults.minDateTime instanceof Date&&(tp_inst._defaults.minDate=new Date(tp_inst._defaults.minDateTime.getTime())),void 0!==tp_inst._defaults.maxDate&&tp_inst._defaults.maxDate instanceof Date&&(tp_inst._defaults.maxDateTime=new Date(tp_inst._defaults.maxDate.getTime())),void 0!==tp_inst._defaults.maxDateTime&&tp_inst._defaults.maxDateTime instanceof Date&&(tp_inst._defaults.maxDate=new Date(tp_inst._defaults.maxDateTime.getTime())),tp_inst.$input.bind("focus",function(){tp_inst._onFocus()}),tp_inst},_addTimePicker:function(e){var t=this.$altInput&&this._defaults.altFieldTimeOnly?this.$input.val()+" "+this.$altInput.val():this.$input.val();this.timeDefined=this._parseTime(t),this._limitMinMaxDateTime(e,!1),this._injectTimePicker()},_parseTime:function(e,t){if(this.inst||(this.inst=$.datepicker._getInst(this.$input[0])),t||!this._defaults.timeOnly){var i=$.datepicker._get(this.inst,"dateFormat");try{var n=parseDateTimeInternal(i,this._defaults.timeFormat,e,$.datepicker._getFormatConfig(this.inst),this._defaults);if(!n.timeObj)return!1;$.extend(this,n.timeObj)}catch(o){return $.timepicker.log("Error parsing the date/time string: "+o+"\ndate/time string = "+e+"\ntimeFormat = "+this._defaults.timeFormat+"\ndateFormat = "+i),!1}return!0}var s=$.datepicker.parseTime(this._defaults.timeFormat,e,this._defaults);return s?($.extend(this,s),!0):!1},_injectTimePicker:function(){var e=this.inst.dpDiv,t=this.inst.settings,i=this,n="",o="",s=null,r={},a={},l=null,c=0,u=0;if(0===e.find("div.ui-timepicker-div").length&&t.showTimepicker){var d=' style="display:none;"',h='<div class="ui-timepicker-div'+(t.isRTL?" ui-timepicker-rtl":"")+'"><dl><dt class="ui_tpicker_time_label"'+(t.showTime?"":d)+">"+t.timeText+'</dt><dd class="ui_tpicker_time"'+(t.showTime?"":d)+"></dd>";for(c=0,u=this.units.length;u>c;c++){if(n=this.units[c],o=n.substr(0,1).toUpperCase()+n.substr(1),s=null!==t["show"+o]?t["show"+o]:this.support[n],r[n]=parseInt(t[n+"Max"]-(t[n+"Max"]-t[n+"Min"])%t["step"+o],10),a[n]=0,h+='<dt class="ui_tpicker_'+n+'_label"'+(s?"":d)+">"+t[n+"Text"]+'</dt><dd class="ui_tpicker_'+n+'"><div class="ui_tpicker_'+n+'_slider"'+(s?"":d)+"></div>",s&&t[n+"Grid"]>0){if(h+='<div style="padding-left: 1px"><table class="ui-tpicker-grid-label"><tr>',"hour"==n)for(var p=t[n+"Min"];p<=r[n];p+=parseInt(t[n+"Grid"],10)){a[n]++;var f=$.datepicker.formatTime(this.support.ampm?"hht":"HH",{hour:p},t);h+='<td data-for="'+n+'">'+f+"</td>"}else for(var m=t[n+"Min"];m<=r[n];m+=parseInt(t[n+"Grid"],10))a[n]++,h+='<td data-for="'+n+'">'+(10>m?"0":"")+m+"</td>";h+="</tr></table></div>"}h+="</dd>"}var g=null!==t.showTimezone?t.showTimezone:this.support.timezone;h+='<dt class="ui_tpicker_timezone_label"'+(g?"":d)+">"+t.timezoneText+"</dt>",h+='<dd class="ui_tpicker_timezone" '+(g?"":d)+"></dd>",h+="</dl></div>";var v=$(h);for(t.timeOnly===!0&&(v.prepend('<div class="ui-widget-header ui-helper-clearfix ui-corner-all"><div class="ui-datepicker-title">'+t.timeOnlyTitle+"</div></div>"),e.find(".ui-datepicker-header, .ui-datepicker-calendar").hide()),c=0,u=i.units.length;u>c;c++)n=i.units[c],o=n.substr(0,1).toUpperCase()+n.substr(1),s=null!==t["show"+o]?t["show"+o]:this.support[n],i[n+"_slider"]=i.control.create(i,v.find(".ui_tpicker_"+n+"_slider"),n,i[n],t[n+"Min"],r[n],t["step"+o]),s&&t[n+"Grid"]>0&&(l=100*a[n]*t[n+"Grid"]/(r[n]-t[n+"Min"]),v.find(".ui_tpicker_"+n+" table").css({width:l+"%",marginLeft:t.isRTL?"0":l/(-2*a[n])+"%",marginRight:t.isRTL?l/(-2*a[n])+"%":"0",borderCollapse:"collapse"}).find("td").click(function(){var e=$(this),t=e.html(),o=parseInt(t.replace(/[^0-9]/g),10),s=t.replace(/[^apm]/gi),r=e.data("for");"hour"==r&&(-1!==s.indexOf("p")&&12>o?o+=12:-1!==s.indexOf("a")&&12===o&&(o=0)),i.control.value(i,i[r+"_slider"],n,o),i._onTimeChange(),i._onSelectHandler()}).css({cursor:"pointer",width:100/a[n]+"%",textAlign:"center",overflow:"hidden"}));if(this.timezone_select=v.find(".ui_tpicker_timezone").append("<select></select>").find("select"),$.fn.append.apply(this.timezone_select,$.map(t.timezoneList,function(e){return $("<option />").val("object"==typeof e?e.value:e).text("object"==typeof e?e.label:e)})),"undefined"!=typeof this.timezone&&null!==this.timezone&&""!==this.timezone){var _=-1*new Date(this.inst.selectedYear,this.inst.selectedMonth,this.inst.selectedDay,12).getTimezoneOffset();_==this.timezone?selectLocalTimezone(i):this.timezone_select.val(this.timezone)}else"undefined"!=typeof this.hour&&null!==this.hour&&""!==this.hour?this.timezone_select.val(t.timezone):selectLocalTimezone(i);this.timezone_select.change(function(){i._onTimeChange(),i._onSelectHandler()});var y=e.find(".ui-datepicker-buttonpane");if(y.length?y.before(v):e.append(v),this.$timeObj=v.find(".ui_tpicker_time"),null!==this.inst){var b=this.timeDefined;this._onTimeChange(),this.timeDefined=b}if(this._defaults.addSliderAccess){var S=this._defaults.sliderAccessArgs,T=this._defaults.isRTL;S.isRTL=T,setTimeout(function(){if(0===v.find(".ui-slider-access").length){v.find(".ui-slider:visible").sliderAccess(S);var e=v.find(".ui-slider-access:eq(0)").outerWidth(!0);e&&v.find("table:visible").each(function(){var t=$(this),i=t.outerWidth(),n=t.css(T?"marginRight":"marginLeft").toString().replace("%",""),o=i-e,s=n*o/i+"%",r={width:o,marginRight:0,marginLeft:0};r[T?"marginRight":"marginLeft"]=s,t.css(r)})}},10)}}},_limitMinMaxDateTime:function(e,t){var i=this._defaults,n=new Date(e.selectedYear,e.selectedMonth,e.selectedDay);if(this._defaults.showTimepicker){if(null!==$.datepicker._get(e,"minDateTime")&&void 0!==$.datepicker._get(e,"minDateTime")&&n){var o=$.datepicker._get(e,"minDateTime"),s=new Date(o.getFullYear(),o.getMonth(),o.getDate(),0,0,0,0);(null===this.hourMinOriginal||null===this.minuteMinOriginal||null===this.secondMinOriginal||null===this.millisecMinOriginal||null===this.microsecMinOriginal)&&(this.hourMinOriginal=i.hourMin,this.minuteMinOriginal=i.minuteMin,this.secondMinOriginal=i.secondMin,this.millisecMinOriginal=i.millisecMin,this.microsecMinOriginal=i.microsecMin),e.settings.timeOnly||s.getTime()==n.getTime()?(this._defaults.hourMin=o.getHours(),this.hour<=this._defaults.hourMin?(this.hour=this._defaults.hourMin,this._defaults.minuteMin=o.getMinutes(),this.minute<=this._defaults.minuteMin?(this.minute=this._defaults.minuteMin,this._defaults.secondMin=o.getSeconds(),this.second<=this._defaults.secondMin?(this.second=this._defaults.secondMin,this._defaults.millisecMin=o.getMilliseconds(),this.millisec<=this._defaults.millisecMin?(this.millisec=this._defaults.millisecMin,this._defaults.microsecMin=o.getMicroseconds()):(this.microsec<this._defaults.microsecMin&&(this.microsec=this._defaults.microsecMin),this._defaults.microsecMin=this.microsecMinOriginal)):(this._defaults.millisecMin=this.millisecMinOriginal,this._defaults.microsecMin=this.microsecMinOriginal)):(this._defaults.secondMin=this.secondMinOriginal,this._defaults.millisecMin=this.millisecMinOriginal,this._defaults.microsecMin=this.microsecMinOriginal)):(this._defaults.minuteMin=this.minuteMinOriginal,this._defaults.secondMin=this.secondMinOriginal,this._defaults.millisecMin=this.millisecMinOriginal,this._defaults.microsecMin=this.microsecMinOriginal)):(this._defaults.hourMin=this.hourMinOriginal,this._defaults.minuteMin=this.minuteMinOriginal,this._defaults.secondMin=this.secondMinOriginal,this._defaults.millisecMin=this.millisecMinOriginal,this._defaults.microsecMin=this.microsecMinOriginal)}if(null!==$.datepicker._get(e,"maxDateTime")&&void 0!==$.datepicker._get(e,"maxDateTime")&&n){var r=$.datepicker._get(e,"maxDateTime"),a=new Date(r.getFullYear(),r.getMonth(),r.getDate(),0,0,0,0);(null===this.hourMaxOriginal||null===this.minuteMaxOriginal||null===this.secondMaxOriginal||null===this.millisecMaxOriginal)&&(this.hourMaxOriginal=i.hourMax,this.minuteMaxOriginal=i.minuteMax,this.secondMaxOriginal=i.secondMax,this.millisecMaxOriginal=i.millisecMax,this.microsecMaxOriginal=i.microsecMax),e.settings.timeOnly||a.getTime()==n.getTime()?(this._defaults.hourMax=r.getHours(),this.hour>=this._defaults.hourMax?(this.hour=this._defaults.hourMax,this._defaults.minuteMax=r.getMinutes(),this.minute>=this._defaults.minuteMax?(this.minute=this._defaults.minuteMax,this._defaults.secondMax=r.getSeconds(),this.second>=this._defaults.secondMax?(this.second=this._defaults.secondMax,this._defaults.millisecMax=r.getMilliseconds(),this.millisec>=this._defaults.millisecMax?(this.millisec=this._defaults.millisecMax,this._defaults.microsecMax=r.getMicroseconds()):(this.microsec>this._defaults.microsecMax&&(this.microsec=this._defaults.microsecMax),this._defaults.microsecMax=this.microsecMaxOriginal)):(this._defaults.millisecMax=this.millisecMaxOriginal,this._defaults.microsecMax=this.microsecMaxOriginal)):(this._defaults.secondMax=this.secondMaxOriginal,this._defaults.millisecMax=this.millisecMaxOriginal,this._defaults.microsecMax=this.microsecMaxOriginal)):(this._defaults.minuteMax=this.minuteMaxOriginal,this._defaults.secondMax=this.secondMaxOriginal,this._defaults.millisecMax=this.millisecMaxOriginal,this._defaults.microsecMax=this.microsecMaxOriginal)):(this._defaults.hourMax=this.hourMaxOriginal,this._defaults.minuteMax=this.minuteMaxOriginal,this._defaults.secondMax=this.secondMaxOriginal,this._defaults.millisecMax=this.millisecMaxOriginal,this._defaults.microsecMax=this.microsecMaxOriginal)}if(void 0!==t&&t===!0){var l=parseInt(this._defaults.hourMax-(this._defaults.hourMax-this._defaults.hourMin)%this._defaults.stepHour,10),c=parseInt(this._defaults.minuteMax-(this._defaults.minuteMax-this._defaults.minuteMin)%this._defaults.stepMinute,10),u=parseInt(this._defaults.secondMax-(this._defaults.secondMax-this._defaults.secondMin)%this._defaults.stepSecond,10),d=parseInt(this._defaults.millisecMax-(this._defaults.millisecMax-this._defaults.millisecMin)%this._defaults.stepMillisec,10);microsecMax=parseInt(this._defaults.microsecMax-(this._defaults.microsecMax-this._defaults.microsecMin)%this._defaults.stepMicrosec,10),this.hour_slider&&(this.control.options(this,this.hour_slider,"hour",{min:this._defaults.hourMin,max:l}),this.control.value(this,this.hour_slider,"hour",this.hour-this.hour%this._defaults.stepHour)),this.minute_slider&&(this.control.options(this,this.minute_slider,"minute",{min:this._defaults.minuteMin,max:c}),this.control.value(this,this.minute_slider,"minute",this.minute-this.minute%this._defaults.stepMinute)),this.second_slider&&(this.control.options(this,this.second_slider,"second",{min:this._defaults.secondMin,max:u}),this.control.value(this,this.second_slider,"second",this.second-this.second%this._defaults.stepSecond)),this.millisec_slider&&(this.control.options(this,this.millisec_slider,"millisec",{min:this._defaults.millisecMin,max:d}),this.control.value(this,this.millisec_slider,"millisec",this.millisec-this.millisec%this._defaults.stepMillisec)),this.microsec_slider&&(this.control.options(this,this.microsec_slider,"microsec",{min:this._defaults.microsecMin,max:microsecMax}),this.control.value(this,this.microsec_slider,"microsec",this.microsec-this.microsec%this._defaults.stepMicrosec))}}},_onTimeChange:function(){var e=this.hour_slider?this.control.value(this,this.hour_slider,"hour"):!1,t=this.minute_slider?this.control.value(this,this.minute_slider,"minute"):!1,i=this.second_slider?this.control.value(this,this.second_slider,"second"):!1,n=this.millisec_slider?this.control.value(this,this.millisec_slider,"millisec"):!1,o=this.microsec_slider?this.control.value(this,this.microsec_slider,"microsec"):!1,s=this.timezone_select?this.timezone_select.val():!1,r=this._defaults,a=r.pickerTimeFormat||r.timeFormat,l=r.pickerTimeSuffix||r.timeSuffix;"object"==typeof e&&(e=!1),"object"==typeof t&&(t=!1),"object"==typeof i&&(i=!1),"object"==typeof n&&(n=!1),"object"==typeof o&&(o=!1),"object"==typeof s&&(s=!1),e!==!1&&(e=parseInt(e,10)),t!==!1&&(t=parseInt(t,10)),i!==!1&&(i=parseInt(i,10)),n!==!1&&(n=parseInt(n,10)),o!==!1&&(o=parseInt(o,10));var c=r[12>e?"amNames":"pmNames"][0],u=e!=this.hour||t!=this.minute||i!=this.second||n!=this.millisec||o!=this.microsec||this.ampm.length>0&&12>e!=(-1!==$.inArray(this.ampm.toUpperCase(),this.amNames))||null!==this.timezone&&s!=this.timezone;u&&(e!==!1&&(this.hour=e),t!==!1&&(this.minute=t),i!==!1&&(this.second=i),n!==!1&&(this.millisec=n),o!==!1&&(this.microsec=o),s!==!1&&(this.timezone=s),this.inst||(this.inst=$.datepicker._getInst(this.$input[0])),this._limitMinMaxDateTime(this.inst,!0)),this.support.ampm&&(this.ampm=c),this.formattedTime=$.datepicker.formatTime(r.timeFormat,this,r),this.$timeObj&&this.$timeObj.text(a===r.timeFormat?this.formattedTime+l:$.datepicker.formatTime(a,this,r)+l),this.timeDefined=!0,u&&this._updateDateTime()},_onSelectHandler:function(){var e=this._defaults.onSelect||this.inst.settings.onSelect,t=this.$input?this.$input[0]:null;e&&t&&e.apply(t,[this.formattedDateTime,this])},_updateDateTime:function(e){e=this.inst||e;var t=$.datepicker._daylightSavingAdjust(new Date(e.selectedYear,e.selectedMonth,e.selectedDay)),i=$.datepicker._get(e,"dateFormat"),n=$.datepicker._getFormatConfig(e),o=null!==t&&this.timeDefined;this.formattedDate=$.datepicker.formatDate(i,null===t?new Date:t,n);var s=this.formattedDate;if(""===e.lastVal&&(e.currentYear=e.selectedYear,e.currentMonth=e.selectedMonth,e.currentDay=e.selectedDay),this._defaults.timeOnly===!0?s=this.formattedTime:this._defaults.timeOnly!==!0&&(this._defaults.alwaysSetTime||o)&&(s+=this._defaults.separator+this.formattedTime+this._defaults.timeSuffix),this.formattedDateTime=s,this._defaults.showTimepicker)if(this.$altInput&&this._defaults.timeOnly===!1&&this._defaults.altFieldTimeOnly===!0)this.$altInput.val(this.formattedTime),this.$input.val(this.formattedDate);else if(this.$altInput){this.$input.val(s);var r="",a=this._defaults.altSeparator?this._defaults.altSeparator:this._defaults.separator,l=this._defaults.altTimeSuffix?this._defaults.altTimeSuffix:this._defaults.timeSuffix;this._defaults.timeOnly||(r=this._defaults.altFormat?$.datepicker.formatDate(this._defaults.altFormat,null===t?new Date:t,n):this.formattedDate,r&&(r+=a)),r+=this._defaults.altTimeFormat?$.datepicker.formatTime(this._defaults.altTimeFormat,this,this._defaults)+l:this.formattedTime+l,this.$altInput.val(r)}else this.$input.val(s);else this.$input.val(this.formattedDate);var c=$.datepicker._get(e,"onUpdateDateTime");c&&""!==this.formattedTime&&c.apply(window,[{time:this.formattedTime,date:this.formattedDate,datetime:s}]),this.$input.trigger("change")},_onFocus:function(){if(!this.$input.val()&&this._defaults.defaultValue){this.$input.val(this._defaults.defaultValue);var e=$.datepicker._getInst(this.$input.get(0)),t=$.datepicker._get(e,"timepicker");if(t&&t._defaults.timeOnly&&e.input.val()!=e.lastVal)try{$.datepicker._updateDatepicker(e)}catch(i){$.timepicker.log(i)}}},_controls:{slider:{create:function(e,t,i,n,o,s,r){var a=e._defaults.isRTL;return t.prop("slide",null).slider({orientation:"horizontal",value:a?-1*n:n,min:a?-1*s:o,max:a?-1*o:s,step:r,slide:function(t,n){e.control.value(e,$(this),i,a?-1*n.value:n.value),e._onTimeChange()},stop:function(){e._onSelectHandler()}})},options:function(e,t,i,n,o){if(e._defaults.isRTL){if("string"==typeof n)return"min"==n||"max"==n?void 0!==o?t.slider(n,-1*o):Math.abs(t.slider(n)):t.slider(n);var s=n.min,r=n.max;return n.min=n.max=null,void 0!==s&&(n.max=-1*s),void 0!==r&&(n.min=-1*r),t.slider(n)}return"string"==typeof n&&void 0!==o?t.slider(n,o):t.slider(n)},value:function(e,t,i,n){return e._defaults.isRTL?void 0!==n?t.slider("value",-1*n):Math.abs(t.slider("value")):void 0!==n?t.slider("value",n):t.slider("value")}},select:{create:function(e,t,i,n,o,s,r){for(var a='<select class="ui-timepicker-select" data-unit="'+i+'" data-min="'+o+'" data-max="'+s+'" data-step="'+r+'">',l=e._defaults.pickerTimeFormat||e._defaults.timeFormat,c=o;s>=c;c+=r)a+='<option value="'+c+'"'+(c==n?" selected":"")+">",a+="hour"==i?$.datepicker.formatTime($.trim(l.replace(/[^ht ]/gi,"")),{hour:c},e._defaults):"millisec"==i||"microsec"==i||c>=10?c:"0"+c.toString(),a+="</option>";return a+="</select>",t.children("select").remove(),$(a).appendTo(t).change(function(){e._onTimeChange(),e._onSelectHandler()}),t},options:function(e,t,i,n,o){var s={},r=t.children("select");if("string"==typeof n){if(void 0===o)return r.data(n);s[n]=o}else s=n;return e.control.create(e,t,r.data("unit"),r.val(),s.min||r.data("min"),s.max||r.data("max"),s.step||r.data("step"))},value:function(e,t,i,n){var o=t.children("select");return void 0!==n?o.val(n):o.val()}}}}),$.fn.extend({timepicker:function(e){e=e||{};var t=Array.prototype.slice.call(arguments);return"object"==typeof e&&(t[0]=$.extend(e,{timeOnly:!0})),$(this).each(function(){$.fn.datetimepicker.apply($(this),t)})},datetimepicker:function(e){e=e||{};var t=arguments;return"string"==typeof e?"getDate"==e?$.fn.datepicker.apply($(this[0]),t):this.each(function(){var e=$(this);e.datepicker.apply(e,t)}):this.each(function(){var t=$(this);t.datepicker($.timepicker._newInst(t,e)._defaults)})}}),$.datepicker.parseDateTime=function(e,t,i,n,o){var s=parseDateTimeInternal(e,t,i,n,o);if(s.timeObj){var r=s.timeObj;s.date.setHours(r.hour,r.minute,r.second,r.millisec),s.date.setMicroseconds(r.microsec)}return s.date},$.datepicker.parseTime=function(e,t,i){var n=extendRemove(extendRemove({},$.timepicker._defaults),i||{}),o=(-1!==e.replace(/\'.*?\'/g,"").indexOf("Z"),function(e,t,i){var n,o=function(e,t){var i=[];return e&&$.merge(i,e),t&&$.merge(i,t),i=$.map(i,function(e){return e.replace(/[.*+?|()\[\]{}\\]/g,"\\$&")}),"("+i.join("|")+")?"},s=function(e){var t=e.toLowerCase().match(/(h{1,2}|m{1,2}|s{1,2}|l{1}|c{1}|t{1,2}|z|'.*?')/g),i={h:-1,m:-1,s:-1,l:-1,c:-1,t:-1,z:-1};if(t)for(var n=0;n<t.length;n++)-1==i[t[n].toString().charAt(0)]&&(i[t[n].toString().charAt(0)]=n+1);return i},r="^"+e.toString().replace(/([hH]{1,2}|mm?|ss?|[tT]{1,2}|[zZ]|[lc]|'.*?')/g,function(e){var t=e.length;switch(e.charAt(0).toLowerCase()){case"h":return 1===t?"(\\d?\\d)":"(\\d{"+t+"})";case"m":return 1===t?"(\\d?\\d)":"(\\d{"+t+"})";case"s":return 1===t?"(\\d?\\d)":"(\\d{"+t+"})";case"l":return"(\\d?\\d?\\d)";case"c":return"(\\d?\\d?\\d)";case"z":return"(z|[-+]\\d\\d:?\\d\\d|\\S+)?";case"t":return o(i.amNames,i.pmNames);default:return"("+e.replace(/\'/g,"").replace(/(\.|\$|\^|\\|\/|\(|\)|\[|\]|\?|\+|\*)/g,function(e){return"\\"+e})+")?"}}).replace(/\s/g,"\\s?")+i.timeSuffix+"$",a=s(e),l="";n=t.match(new RegExp(r,"i"));var c={hour:0,minute:0,second:0,millisec:0,microsec:0};return n?(-1!==a.t&&(void 0===n[a.t]||0===n[a.t].length?(l="",c.ampm=""):(l=-1!==$.inArray(n[a.t].toUpperCase(),i.amNames)?"AM":"PM",c.ampm=i["AM"==l?"amNames":"pmNames"][0])),-1!==a.h&&(c.hour="AM"==l&&"12"==n[a.h]?0:"PM"==l&&"12"!=n[a.h]?parseInt(n[a.h],10)+12:Number(n[a.h])),-1!==a.m&&(c.minute=Number(n[a.m])),-1!==a.s&&(c.second=Number(n[a.s])),-1!==a.l&&(c.millisec=Number(n[a.l])),-1!==a.c&&(c.microsec=Number(n[a.c])),-1!==a.z&&void 0!==n[a.z]&&(c.timezone=$.timepicker.timezoneOffsetNumber(n[a.z])),c):!1}),s=function(e,t,i){try{var n=new Date("2012-01-01 "+t);if(isNaN(n.getTime())&&(n=new Date("2012-01-01T"+t),isNaN(n.getTime())&&(n=new Date("01/01/2012 "+t),isNaN(n.getTime()))))throw"Unable to parse time with native Date: "+t;return{hour:n.getHours(),minute:n.getMinutes(),second:n.getSeconds(),millisec:n.getMilliseconds(),microsec:n.getMicroseconds(),timezone:-1*n.getTimezoneOffset()}}catch(s){try{return o(e,t,i)}catch(r){$.timepicker.log("Unable to parse \ntimeString: "+t+"\ntimeFormat: "+e)}}return!1};return"function"==typeof n.parse?n.parse(e,t,n):"loose"===n.parse?s(e,t,n):o(e,t,n)},$.datepicker.formatTime=function(e,t,i){i=i||{},i=$.extend({},$.timepicker._defaults,i),t=$.extend({hour:0,minute:0,second:0,millisec:0,timezone:0},t);var n=e,o=i.amNames[0],s=parseInt(t.hour,10);return s>11&&(o=i.pmNames[0]),n=n.replace(/(?:HH?|hh?|mm?|ss?|[tT]{1,2}|[zZ]|[lc]|('.*?'|".*?"))/g,function(e){switch(e){case"HH":return("0"+s).slice(-2);case"H":return s;case"hh":return("0"+convert24to12(s)).slice(-2);case"h":return convert24to12(s);case"mm":return("0"+t.minute).slice(-2);case"m":return t.minute;case"ss":return("0"+t.second).slice(-2);case"s":return t.second;case"l":return("00"+t.millisec).slice(-3);case"c":return("00"+t.microsec).slice(-3);case"z":return $.timepicker.timezoneOffsetString(null===t.timezone?i.timezone:t.timezone,!1);case"Z":return $.timepicker.timezoneOffsetString(null===t.timezone?i.timezone:t.timezone,!0);case"T":return o.charAt(0).toUpperCase();case"TT":return o.toUpperCase();case"t":return o.charAt(0).toLowerCase();case"tt":return o.toLowerCase();default:return e.replace(/\'/g,"")||"'"}}),n=$.trim(n)},$.datepicker._base_selectDate=$.datepicker._selectDate,$.datepicker._selectDate=function(e,t){var i=this._getInst($(e)[0]),n=this._get(i,"timepicker");n?(n._limitMinMaxDateTime(i,!0),i.inline=i.stay_open=!0,this._base_selectDate(e,t),i.inline=i.stay_open=!1,this._notifyChange(i),this._updateDatepicker(i)):this._base_selectDate(e,t)},$.datepicker._base_updateDatepicker=$.datepicker._updateDatepicker,$.datepicker._updateDatepicker=function(e){var t=e.input[0];if(!($.datepicker._curInst&&$.datepicker._curInst!=e&&$.datepicker._datepickerShowing&&$.datepicker._lastInput!=t||"boolean"==typeof e.stay_open&&e.stay_open!==!1)){this._base_updateDatepicker(e);var i=this._get(e,"timepicker");i&&i._addTimePicker(e)}},$.datepicker._base_doKeyPress=$.datepicker._doKeyPress,$.datepicker._doKeyPress=function(e){var t=$.datepicker._getInst(e.target),i=$.datepicker._get(t,"timepicker");if(i&&$.datepicker._get(t,"constrainInput")){var n=i.support.ampm,o=null!==i._defaults.showTimezone?i._defaults.showTimezone:i.support.timezone,s=$.datepicker._possibleChars($.datepicker._get(t,"dateFormat")),r=i._defaults.timeFormat.toString().replace(/[hms]/g,"").replace(/TT/g,n?"APM":"").replace(/Tt/g,n?"AaPpMm":"").replace(/tT/g,n?"AaPpMm":"").replace(/T/g,n?"AP":"").replace(/tt/g,n?"apm":"").replace(/t/g,n?"ap":"")+" "+i._defaults.separator+i._defaults.timeSuffix+(o?i._defaults.timezoneList.join(""):"")+i._defaults.amNames.join("")+i._defaults.pmNames.join("")+s,a=String.fromCharCode(void 0===e.charCode?e.keyCode:e.charCode);return e.ctrlKey||" ">a||!s||r.indexOf(a)>-1}return $.datepicker._base_doKeyPress(e)},$.datepicker._base_updateAlternate=$.datepicker._updateAlternate,$.datepicker._updateAlternate=function(e){var t=this._get(e,"timepicker");if(t){var i=t._defaults.altField;if(i){var n=(t._defaults.altFormat||t._defaults.dateFormat,this._getDate(e)),o=$.datepicker._getFormatConfig(e),s="",r=t._defaults.altSeparator?t._defaults.altSeparator:t._defaults.separator,a=t._defaults.altTimeSuffix?t._defaults.altTimeSuffix:t._defaults.timeSuffix,l=null!==t._defaults.altTimeFormat?t._defaults.altTimeFormat:t._defaults.timeFormat;s+=$.datepicker.formatTime(l,t,t._defaults)+a,t._defaults.timeOnly||t._defaults.altFieldTimeOnly||null===n||(s=t._defaults.altFormat?$.datepicker.formatDate(t._defaults.altFormat,n,o)+r+s:t.formattedDate+r+s),$(i).val(s)}}else $.datepicker._base_updateAlternate(e)},$.datepicker._base_doKeyUp=$.datepicker._doKeyUp,$.datepicker._doKeyUp=function(e){var t=$.datepicker._getInst(e.target),i=$.datepicker._get(t,"timepicker");if(i&&i._defaults.timeOnly&&t.input.val()!=t.lastVal)try{$.datepicker._updateDatepicker(t)}catch(n){$.timepicker.log(n)}return $.datepicker._base_doKeyUp(e)},$.datepicker._base_gotoToday=$.datepicker._gotoToday,$.datepicker._gotoToday=function(e){var t=this._getInst($(e)[0]),i=t.dpDiv;this._base_gotoToday(e);var n=this._get(t,"timepicker");selectLocalTimezone(n);var o=new Date;this._setTime(t,o),$(".ui-datepicker-today",i).click()},$.datepicker._disableTimepickerDatepicker=function(e){var t=this._getInst(e);if(t){var i=this._get(t,"timepicker");$(e).datepicker("getDate"),i&&(i._defaults.showTimepicker=!1,i._updateDateTime(t))}},$.datepicker._enableTimepickerDatepicker=function(e){var t=this._getInst(e);if(t){var i=this._get(t,"timepicker");$(e).datepicker("getDate"),i&&(i._defaults.showTimepicker=!0,i._addTimePicker(t),i._updateDateTime(t))}},$.datepicker._setTime=function(e,t){var i=this._get(e,"timepicker");if(i){var n=i._defaults;i.hour=t?t.getHours():n.hour,i.minute=t?t.getMinutes():n.minute,i.second=t?t.getSeconds():n.second,i.millisec=t?t.getMilliseconds():n.millisec,i.microsec=t?t.getMicroseconds():n.microsec,i._limitMinMaxDateTime(e,!0),i._onTimeChange(),i._updateDateTime(e)}},$.datepicker._setTimeDatepicker=function(e,t,i){var n=this._getInst(e);if(n){var o=this._get(n,"timepicker");if(o){this._setDateFromField(n);var s;t&&("string"==typeof t?(o._parseTime(t,i),s=new Date,s.setHours(o.hour,o.minute,o.second,o.millisec),s.setMicroseconds(o.microsec)):s=new Date(t.getTime()),"Invalid Date"==s.toString()&&(s=void 0),this._setTime(n,s))}}},$.datepicker._base_setDateDatepicker=$.datepicker._setDateDatepicker,$.datepicker._setDateDatepicker=function(e,t){var i=this._getInst(e);if(i){var n=this._get(i,"timepicker"),o=t instanceof Date?new Date(t.getTime()):t;n&&null!=n.timezone&&(t=$.timepicker.timezoneAdjust(t,n.timezone),o=$.timepicker.timezoneAdjust(o,n.timezone)),this._updateDatepicker(i),this._base_setDateDatepicker.apply(this,arguments),this._setTimeDatepicker(e,o,!0)}},$.datepicker._base_getDateDatepicker=$.datepicker._getDateDatepicker,$.datepicker._getDateDatepicker=function(e,t){var i=this._getInst(e);if(i){var n=this._get(i,"timepicker");if(n){void 0===i.lastVal&&this._setDateFromField(i,t);var o=this._getDate(i);return o&&n._parseTime($(e).val(),n.timeOnly)&&(o.setHours(n.hour,n.minute,n.second,n.millisec),o.setMicroseconds(n.microsec),null!=n.timezone&&(o=$.timepicker.timezoneAdjust(o,n.timezone))),o}return this._base_getDateDatepicker(e,t)}},$.datepicker._base_parseDate=$.datepicker.parseDate,$.datepicker.parseDate=function(e,t,i){var n;try{n=this._base_parseDate(e,t,i)}catch(o){if(!(o.indexOf(":")>=0))throw o;n=this._base_parseDate(e,t.substring(0,t.length-(o.length-o.indexOf(":")-2)),i)}return n},$.datepicker._base_formatDate=$.datepicker._formatDate,$.datepicker._formatDate=function(e){var t=this._get(e,"timepicker");return t?(t._updateDateTime(e),t.$input.val()):this._base_formatDate(e)},$.datepicker._base_optionDatepicker=$.datepicker._optionDatepicker,$.datepicker._optionDatepicker=function(e,t,i){var n,o=this._getInst(e);if(!o)return null;var s=this._get(o,"timepicker");if(s){var r,a=null,l=null,c=null,u=s._defaults.evnts,d={};if("string"==typeof t){if("minDate"===t||"minDateTime"===t)a=i;else if("maxDate"===t||"maxDateTime"===t)l=i;else if("onSelect"===t)c=i;else if(u.hasOwnProperty(t)){if("undefined"==typeof i)return u[t];d[t]=i,n={}}}else if("object"==typeof t){t.minDate?a=t.minDate:t.minDateTime?a=t.minDateTime:t.maxDate?l=t.maxDate:t.maxDateTime&&(l=t.maxDateTime);for(r in u)u.hasOwnProperty(r)&&t[r]&&(d[r]=t[r])}for(r in d)d.hasOwnProperty(r)&&(u[r]=d[r],n||(n=$.extend({},t)),delete n[r]);if(n&&isEmptyObject(n))return;a?(a=0===a?new Date:new Date(a),s._defaults.minDate=a,s._defaults.minDateTime=a):l?(l=0===l?new Date:new Date(l),s._defaults.maxDate=l,s._defaults.maxDateTime=l):c&&(s._defaults.onSelect=c)}return void 0===i?this._base_optionDatepicker.call($.datepicker,e,t):this._base_optionDatepicker.call($.datepicker,e,n||t,i)};var isEmptyObject=function(e){var t;for(t in e)if(e.hasOwnProperty(e))return!1;return!0},extendRemove=function(e,t){$.extend(e,t);for(var i in t)(null===t[i]||void 0===t[i])&&(e[i]=t[i]);return e},detectSupport=function(e){var t=e.replace(/\'.*?\'/g,"").toLowerCase(),i=function(e,t){return-1!==e.indexOf(t)?!0:!1};return{hour:i(t,"h"),minute:i(t,"m"),second:i(t,"s"),millisec:i(t,"l"),microsec:i(t,"c"),timezone:i(t,"z"),ampm:i("t")&&i(e,"h"),iso8601:i(e,"Z")}},convert24to12=function(e){return e>12&&(e-=12),0===e&&(e=12),String(e)},splitDateTime=function(e,t,i,n){try{var o=n&&n.separator?n.separator:$.timepicker._defaults.separator,s=n&&n.timeFormat?n.timeFormat:$.timepicker._defaults.timeFormat,r=s.split(o),a=r.length,l=t.split(o),c=l.length;if(c>1)return[l.splice(0,c-a).join(o),l.splice(0,a).join(o)]}catch(u){if($.timepicker.log("Could not split the date from the time. Please check the following datetimepicker options\nthrown error: "+u+"\ndateTimeString"+t+"\ndateFormat = "+e+"\nseparator = "+n.separator+"\ntimeFormat = "+n.timeFormat),u.indexOf(":")>=0){{var d=t.length-(u.length-u.indexOf(":")-2);t.substring(d)}return[$.trim(t.substring(0,d)),$.trim(t.substring(d))]}throw u}return[t,""]},parseDateTimeInternal=function(e,t,i,n,o){var s,r=splitDateTime(e,i,n,o);if(s=$.datepicker._base_parseDate(e,r[0],n),""!==r[1]){var a=r[1],l=$.datepicker.parseTime(t,a,o);if(null===l)throw"Wrong time format";return{date:s,timeObj:l}}return{date:s}},selectLocalTimezone=function(e,t){if(e&&e.timezone_select){var i="undefined"!=typeof t?t:new Date;e.timezone_select.val(-1*i.getTimezoneOffset())}};$.timepicker=new Timepicker,$.timepicker.timezoneOffsetString=function(e,t){if(isNaN(e)||e>840)return e;var i=e,n=i%60,o=(i-n)/60,s=t?":":"",r=(i>=0?"+":"-")+("0"+(101*o).toString()).slice(-2)+s+("0"+(101*n).toString()).slice(-2);return"+00:00"==r?"Z":r},$.timepicker.timezoneOffsetNumber=function(e){return e=e.toString().replace(":",""),"Z"===e.toUpperCase()?0:/^(\-|\+)\d{4}$/.test(e)?("-"==e.substr(0,1)?-1:1)*(60*parseInt(e.substr(1,2),10)+parseInt(e.substr(3,2),10)):e},$.timepicker.timezoneAdjust=function(e,t){var i=$.timepicker.timezoneOffsetNumber(t);if(!isNaN(i)){var n=-1*e.getTimezoneOffset(),o=n-i;e.setMinutes(e.getMinutes()+o)}return e},$.timepicker.timeRange=function(e,t,i){return $.timepicker.handleRange("timepicker",e,t,i)},$.timepicker.datetimeRange=function(e,t,i){$.timepicker.handleRange("datetimepicker",e,t,i)},$.timepicker.dateRange=function(e,t,i){$.timepicker.handleRange("datepicker",e,t,i)},$.timepicker.handleRange=function(e,t,i,n){function o(o,s){var r=t[e]("getDate"),a=i[e]("getDate"),l=o[e]("getDate");if(null!==r){var c=new Date(r.getTime()),u=new Date(r.getTime());c.setMilliseconds(c.getMilliseconds()+n.minInterval),u.setMilliseconds(u.getMilliseconds()+n.maxInterval),n.minInterval>0&&c>a?i[e]("setDate",c):n.maxInterval>0&&a>u?i[e]("setDate",u):r>a&&s[e]("setDate",l)
}}function s(t,i,o){if(t.val()){var s=t[e].call(t,"getDate");null!==s&&n.minInterval>0&&("minDate"==o&&s.setMilliseconds(s.getMilliseconds()+n.minInterval),"maxDate"==o&&s.setMilliseconds(s.getMilliseconds()-n.minInterval)),s.getTime&&i[e].call(i,"option",o,s)}}return n=$.extend({},{minInterval:0,maxInterval:0,start:{},end:{}},n),$.fn[e].call(t,$.extend({onClose:function(){o($(this),i)},onSelect:function(){s($(this),i,"minDate")}},n,n.start)),$.fn[e].call(i,$.extend({onClose:function(){o($(this),t)},onSelect:function(){s($(this),t,"maxDate")}},n,n.end)),o(t,i),s(t,i,"minDate"),s(i,t,"maxDate"),$([t.get(0),i.get(0)])},$.timepicker.log=function(e){window.console&&console.log(e)},Date.prototype.getMicroseconds||(Date.microseconds=0,Date.prototype.getMicroseconds=function(){return this.microseconds},Date.prototype.setMicroseconds=function(e){return this.microseconds=e,this}),$.timepicker.version="1.3"}}(jQuery),jQuery}),define("common/jquery/extension/timepickerExt",["require","jquery.timepicker.addon","settings!dateTimeSettings"],function(e){var t=e("jquery.timepicker.addon"),i=e("settings!dateTimeSettings");return i&&t.timepicker.setDefaults(i.timepicker),t}),jQuery.noConflict();var JRS={vars:{element_scrolled:!1,ajax_in_progress:!1,current_flow:null,contextPath:__jrsConfigs__.contextPath},i18n:{}},Calendar={};if("undefined"==typeof isEncryptionOn)var isEncryptionOn=!1;var jaspersoft={components:{},i18n:{}};"undefined"==typeof JRS&&(JRS={Mocks:{}}),"undefined"==typeof JRS.vars&&(JRS.vars={element_scrolled:!1,ajax_in_progress:!1,current_flow:null}),"undefined"==typeof JRS.Export&&(JRS.Export={i18n:{"file.name.empty":"export.file.name.empty","file.name.too.long":"export.file.name.too.long","file.name.not.valid":"export.file.name.not.valid","export.select.users":"export.select.users","export.select.roles":"export.select.roles","export.session.expired":"export.session.expired","error.timeout":"export.file.name.empty"},configs:{TIMEOUT:12e5,DELAY:3e3}}),"undefined"==typeof localContext&&(localContext={}),__jrsConfigs__.calendar&&(JRS.i18n.bundledCalendarFormat=__jrsConfigs__.calendar.i18n.bundledCalendarFormat,JRS.i18n.bundledCalendarTimeFormat=__jrsConfigs__.calendar.i18n.bundledCalendarTimeFormat),define("namespace",["common/jquery/extension/timepickerExt"],function(e){return function(){var t;return t||e.jaspersoft}}(this));var ajax={};ajax.cancelRequestsBefore,ajax.LOADING_ID="loading",ajax.csrfRequestHeaders=new Hash,ajax.setCsrfHeaders=function(e){ajax.csrfRequestHeaders.each(function(t){e.setRequestHeader(t.key,t.value)})},AjaxRequester.addVar("CUMULATIVE_UPDATE","c").addVar("ROW_COPY_UPDATE","r").addVar("TARGETTED_REPLACE_UPDATE","t").addVar("EVAL_JSON","j").addVar("DUMMY_POST_PARAM","dummyPostData").addVar("MAX_WAIT_TIME",2e3).addVar("errorHandler",function(){return!1}).addMethod("doGet",function(){return this.xmlhttp?(this.xmlhttp.open("GET",this.url,this.async),this.xmlhttp.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),this.xmlhttp.setRequestHeader("If-Modified-Since","Sat, 1 Jan 2000 00:00:00 GMT"),this.xmlhttp.setRequestHeader("x-requested-with","AJAXRequest"),ajax.setCsrfHeaders(this.xmlhttp),this.xmlhttp.send(null),!0):!1}).addMethod("doPost",function(){return this.xmlhttp?(this.postData===AjaxRequester.prototype.DUMMY_POST_PARAM&&(this.postData=null),this.xmlhttp.open("POST",this.url,this.async),this.xmlhttp.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),this.xmlhttp.setRequestHeader("x-requested-with","AJAXRequest"),ajax.setCsrfHeaders(this.xmlhttp),this.xmlhttp.send(this.postData),!0):!1}).addMethod("processResponse",function(e){return function(){if(4==e.xmlhttp.readyState){if(ajax.cancelRequestsBefore&&ajax.cancelRequestsBefore>e.requestTime)return void ajaxRequestEnded(e);handleResponse(e)}}}).addMethod("setErrorHandler",function(){this.errorHandler=errorHandler}).addMethod("verifyAjaxResponse",function(){return this.xmlhttp.getResponseHeader("Server")||this.confirmContinue()}).addMethod("startResponseTimer",function(){this.responseTimer=window.setTimeout(function(){dialogs.popup.show($(ajax.LOADING_ID),!0)},this.MAX_WAIT_TIME)}).addMethod("cancelResponseTimer",function(){window.clearTimeout(this.responseTimer)}).addMethod("confirmContinue",function(){return confirm(serverIsNotResponding)});var clobberingResponseHandler=function(e){var t=e.params[2];document.body.innerHTML=e.xmlhttp.responseText,document.fire("dom:loaded"),invokeCallbacks(t)},evalJSONResponseHandler=function(e){var t=null;try{t=e.xmlhttp.responseText.evalJSON()}catch(i){window.console&&console.log(i)}var n=e.params[2];invokeCallbacks(n,t)},ERROR_POPUP_DIV="jsErrorPopup",ERROR_POPUP_CONTENTS="errorPopupContents",ERROR_POPUP_BACK_BUTTON="errorBack",ERROR_POPUP_CLOSE_BUTTON="errorPopupCloseButton";ajax.ajaxRequestCount=0,define("core.ajax",["jquery","prototype","utils.common","builder","namespace"],function(e){return function(){var t;return t||e.ajax}}(this));var heartbeat={DOM_ID:"heartbeatOptin",PERMIT_CHECKBOX_ID:"heartbeatCheck",initialize:function(e){this._baseUrl=e.baseUrl,this._showDialog=e.showDialog,this._sendClientInfo=e.sendClientInfo,this._dom=$(this.DOM_ID),this._permit=$(this.PERMIT_CHECKBOX_ID),this._okButton=this._dom.select(layoutModule.BUTTON_PATTERN)[0],this._okButton.observe("click",this._okHandler.bind(this))},_okHandler:function(){dialogs.popup.hide(this._dom);var e=this._baseUrl+"/heartbeat.html?permit="+this._permit.checked;ajaxNonReturningUpdate(e,{errorHandler:baseErrorHandler})},start:function(){this._showDialog&&(dialogs.popup.show(this._dom),this._okButton.focus()),this._sendClientInfo&&this._doSendClientInfo()},_doSendClientInfo:function(){try{var e={};e.navAppName=navigator.appName,e.navAppVersion=navigator.appVersion,e.scrWidth=screen.width,e.scrHeight=screen.height,e.scrColorDepth=screen.colorDepth;var t=appendPostData("",e),i=this._baseUrl+"/heartbeatInfo.html";ajaxNonReturningUpdate(i,{postData:t})}catch(n){}}};define("components.heartbeat",["prototype","core.ajax"],function(e){return function(){var t;return t||e.heartbeat}}(this)),String.prototype.parseColor=function(){var e="#";if("rgb("==this.slice(0,4)){var t=this.slice(4,this.length-1).split(","),i=0;do e+=parseInt(t[i]).toColorPart();while(++i<3)}else if("#"==this.slice(0,1)){if(4==this.length)for(var i=1;4>i;i++)e+=(this.charAt(i)+this.charAt(i)).toLowerCase();7==this.length&&(e=this.toLowerCase())}return 7==e.length?e:arguments[0]||this},Element.collectTextNodes=function(e){return $A($(e).childNodes).collect(function(e){return 3==e.nodeType?e.nodeValue:e.hasChildNodes()?Element.collectTextNodes(e):""}).flatten().join("")},Element.collectTextNodesIgnoreClass=function(e,t){return $A($(e).childNodes).collect(function(e){return 3==e.nodeType?e.nodeValue:e.hasChildNodes()&&!Element.hasClassName(e,t)?Element.collectTextNodesIgnoreClass(e,t):""}).flatten().join("")},Element.setContentZoom=function(e,t){return e=$(e),e.setStyle({fontSize:t/100+"em"}),Prototype.Browser.WebKit&&window.scrollBy(0,0),e},Element.getInlineOpacity=function(e){return $(e).style.opacity||""},Element.forceRerendering=function(e){try{e=$(e);var t=document.createTextNode(" ");e.appendChild(t),e.removeChild(t)}catch(i){}};var Effect={_elementDoesNotExistError:{name:"ElementDoesNotExistError",message:"The specified DOM element does not exist, but is required for this effect to operate"},Transitions:{linear:Prototype.K,sinoidal:function(e){return-Math.cos(e*Math.PI)/2+.5},reverse:function(e){return 1-e},flicker:function(e){var e=-Math.cos(e*Math.PI)/4+.75+Math.random()/4;return e>1?1:e},wobble:function(e){return-Math.cos(e*Math.PI*9*e)/2+.5},pulse:function(e,t){return-Math.cos(e*((t||5)-.5)*2*Math.PI)/2+.5},spring:function(e){return 1-Math.cos(4.5*e*Math.PI)*Math.exp(6*-e)},none:function(){return 0},full:function(){return 1}},DefaultOptions:{duration:1,fps:100,sync:!1,from:0,to:1,delay:0,queue:"parallel"},tagifyText:function(e){var t="position:relative";Prototype.Browser.IE&&(t+=";zoom:1"),e=$(e),$A(e.childNodes).each(function(i){3==i.nodeType&&(i.nodeValue.toArray().each(function(n){e.insertBefore(new Element("span",{style:t}).update(" "==n?String.fromCharCode(160):n),i)}),Element.remove(i))})},multiple:function(e,t){var i;i=("object"==typeof e||Object.isFunction(e))&&e.length?e:$(e).childNodes;var n=Object.extend({speed:.1,delay:0},arguments[2]||{}),o=n.delay;$A(i).each(function(e,i){new t(e,Object.extend(n,{delay:i*n.speed+o}))})},PAIRS:{slide:["SlideDown","SlideUp"],blind:["BlindDown","BlindUp"],appear:["Appear","Fade"]},toggle:function(e,t,i){return e=$(e),t=(t||"appear").toLowerCase(),Effect[Effect.PAIRS[t][e.visible()?1:0]](e,Object.extend({queue:{position:"end",scope:e.id||"global",limit:1}},i||{}))}};if(Effect.DefaultOptions.transition=Effect.Transitions.sinoidal,Effect.ScopedQueue=Class.create(Enumerable,{initialize:function(){this.effects=[],this.interval=null},_each:function(e){this.effects._each(e)},add:function(e){var t=(new Date).getTime(),i=Object.isString(e.options.queue)?e.options.queue:e.options.queue.position;switch(i){case"front":this.effects.findAll(function(e){return"idle"==e.state}).each(function(t){t.startOn+=e.finishOn,t.finishOn+=e.finishOn});break;case"with-last":t=this.effects.pluck("startOn").max()||t;break;case"end":t=this.effects.pluck("finishOn").max()||t}e.startOn+=t,e.finishOn+=t,(!e.options.queue.limit||this.effects.length<e.options.queue.limit)&&this.effects.push(e),this.interval||(this.interval=setInterval(this.loop.bind(this),15))},remove:function(e){this.effects=this.effects.reject(function(t){return t==e}),0==this.effects.length&&(clearInterval(this.interval),this.interval=null)},loop:function(){for(var e=(new Date).getTime(),t=0,i=this.effects.length;i>t;t++)this.effects[t]&&this.effects[t].loop(e)}}),Effect.Queues={instances:$H(),get:function(e){return Object.isString(e)?this.instances.get(e)||this.instances.set(e,new Effect.ScopedQueue):e}},Effect.Queue=Effect.Queues.get("global"),Effect.Base=Class.create({position:null,start:function(e){e&&e.transition===!1&&(e.transition=Effect.Transitions.linear),this.options=Object.extend(Object.extend({},Effect.DefaultOptions),e||{}),this.currentFrame=0,this.state="idle",this.startOn=1e3*this.options.delay,this.finishOn=this.startOn+1e3*this.options.duration,this.fromToDelta=this.options.to-this.options.from,this.totalTime=this.finishOn-this.startOn,this.totalFrames=this.options.fps*this.options.duration,this.render=function(){function e(e,t){e.options[t+"Internal"]&&e.options[t+"Internal"](e),e.options[t]&&e.options[t](e)}return function(t){"idle"===this.state&&(this.state="running",e(this,"beforeSetup"),this.setup&&this.setup(),e(this,"afterSetup")),"running"===this.state&&(t=this.options.transition(t)*this.fromToDelta+this.options.from,this.position=t,e(this,"beforeUpdate"),this.update&&this.update(t),e(this,"afterUpdate"))}}(),this.event("beforeStart"),this.options.sync||Effect.Queues.get(Object.isString(this.options.queue)?"global":this.options.queue.scope).add(this)},loop:function(e){if(e>=this.startOn){if(e>=this.finishOn)return this.render(1),this.cancel(),this.event("beforeFinish"),this.finish&&this.finish(),void this.event("afterFinish");var t=(e-this.startOn)/this.totalTime,i=(t*this.totalFrames).round();i>this.currentFrame&&(this.render(t),this.currentFrame=i)}},cancel:function(){this.options.sync||Effect.Queues.get(Object.isString(this.options.queue)?"global":this.options.queue.scope).remove(this),this.state="finished"},event:function(e){this.options[e+"Internal"]&&this.options[e+"Internal"](this),this.options[e]&&this.options[e](this)},inspect:function(){var e=$H();for(property in this)Object.isFunction(this[property])||e.set(property,this[property]);return"#<Effect:"+e.inspect()+",options:"+$H(this.options).inspect()+">"}}),Effect.Parallel=Class.create(Effect.Base,{initialize:function(e){this.effects=e||[],this.start(arguments[1])},update:function(e){this.effects.invoke("render",e)},finish:function(e){this.effects.each(function(t){t.render(1),t.cancel(),t.event("beforeFinish"),t.finish&&t.finish(e),t.event("afterFinish")})}}),Effect.Tween=Class.create(Effect.Base,{initialize:function(e,t,i){e=Object.isString(e)?$(e):e;var n=$A(arguments),o=n.last(),s=5==n.length?n[3]:null;this.method=Object.isFunction(o)?o.bind(e):Object.isFunction(e[o])?e[o].bind(e):function(t){e[o]=t},this.start(Object.extend({from:t,to:i},s||{}))},update:function(e){this.method(e)}}),Effect.Event=Class.create(Effect.Base,{initialize:function(){this.start(Object.extend({duration:0},arguments[0]||{}))},update:Prototype.emptyFunction}),Effect.Opacity=Class.create(Effect.Base,{initialize:function(e){if(this.element=$(e),!this.element)throw Effect._elementDoesNotExistError;Prototype.Browser.IE&&!this.element.currentStyle.hasLayout&&this.element.setStyle({zoom:1});var t=Object.extend({from:this.element.getOpacity()||0,to:1},arguments[1]||{});this.start(t)},update:function(e){this.element.setOpacity(e)}}),Effect.Move=Class.create(Effect.Base,{initialize:function(e){if(this.element=$(e),!this.element)throw Effect._elementDoesNotExistError;var t=Object.extend({x:0,y:0,mode:"relative"},arguments[1]||{});this.start(t)},setup:function(){this.element.makePositioned(),this.originalLeft=parseFloat(this.element.getStyle("left")||"0"),this.originalTop=parseFloat(this.element.getStyle("top")||"0"),"absolute"==this.options.mode&&(this.options.x=this.options.x-this.originalLeft,this.options.y=this.options.y-this.originalTop)},update:function(e){this.element.setStyle({left:(this.options.x*e+this.originalLeft).round()+"px",top:(this.options.y*e+this.originalTop).round()+"px"})}}),Effect.MoveBy=function(e,t,i){return new Effect.Move(e,Object.extend({x:i,y:t},arguments[3]||{}))},Effect.Scale=Class.create(Effect.Base,{initialize:function(e,t){if(this.element=$(e),!this.element)throw Effect._elementDoesNotExistError;var i=Object.extend({scaleX:!0,scaleY:!0,scaleContent:!0,scaleFromCenter:!1,scaleMode:"box",scaleFrom:100,scaleTo:t},arguments[2]||{});this.start(i)},setup:function(){this.restoreAfterFinish=this.options.restoreAfterFinish||!1,this.elementPositioning=this.element.getStyle("position"),this.originalStyle={},["top","left","width","height","fontSize"].each(function(e){this.originalStyle[e]=this.element.style[e]}.bind(this)),this.originalTop=this.element.offsetTop,this.originalLeft=this.element.offsetLeft;var e=this.element.getStyle("font-size")||"100%";["em","px","%","pt"].each(function(t){e.indexOf(t)>0&&(this.fontSize=parseFloat(e),this.fontSizeType=t)}.bind(this)),this.factor=(this.options.scaleTo-this.options.scaleFrom)/100,this.dims=null,"box"==this.options.scaleMode&&(this.dims=[this.element.offsetHeight,this.element.offsetWidth]),/^content/.test(this.options.scaleMode)&&(this.dims=[this.element.scrollHeight,this.element.scrollWidth]),this.dims||(this.dims=[this.options.scaleMode.originalHeight,this.options.scaleMode.originalWidth])},update:function(e){var t=this.options.scaleFrom/100+this.factor*e;this.options.scaleContent&&this.fontSize&&this.element.setStyle({fontSize:this.fontSize*t+this.fontSizeType}),this.setDimensions(this.dims[0]*t,this.dims[1]*t)},finish:function(){this.restoreAfterFinish&&this.element.setStyle(this.originalStyle)},setDimensions:function(e,t){var i={};if(this.options.scaleX&&(i.width=t.round()+"px"),this.options.scaleY&&(i.height=e.round()+"px"),this.options.scaleFromCenter){var n=(e-this.dims[0])/2,o=(t-this.dims[1])/2;"absolute"==this.elementPositioning?(this.options.scaleY&&(i.top=this.originalTop-n+"px"),this.options.scaleX&&(i.left=this.originalLeft-o+"px")):(this.options.scaleY&&(i.top=-n+"px"),this.options.scaleX&&(i.left=-o+"px"))}this.element.setStyle(i)}}),Effect.Highlight=Class.create(Effect.Base,{initialize:function(e){if(this.element=$(e),!this.element)throw Effect._elementDoesNotExistError;var t=Object.extend({startcolor:"#ffff99"},arguments[1]||{});this.start(t)},setup:function(){return"none"==this.element.getStyle("display")?void this.cancel():(this.oldStyle={},this.options.keepBackgroundImage||(this.oldStyle.backgroundImage=this.element.getStyle("background-image"),this.element.setStyle({backgroundImage:"none"})),this.options.endcolor||(this.options.endcolor=this.element.getStyle("background-color").parseColor("#ffffff")),this.options.restorecolor||(this.options.restorecolor=this.element.getStyle("background-color")),this._base=$R(0,2).map(function(e){return parseInt(this.options.startcolor.slice(2*e+1,2*e+3),16)}.bind(this)),void(this._delta=$R(0,2).map(function(e){return parseInt(this.options.endcolor.slice(2*e+1,2*e+3),16)-this._base[e]}.bind(this))))},update:function(e){this.element.setStyle({backgroundColor:$R(0,2).inject("#",function(t,i,n){return t+(this._base[n]+this._delta[n]*e).round().toColorPart()}.bind(this))})},finish:function(){this.element.setStyle(Object.extend(this.oldStyle,{backgroundColor:this.options.restorecolor}))}}),Effect.ScrollTo=function(e){var t=arguments[1]||{},i=document.viewport.getScrollOffsets(),n=$(e).cumulativeOffset();return t.offset&&(n[1]+=t.offset),new Effect.Tween(null,i.top,n[1],t,function(e){scrollTo(i.left,e.round())})},Effect.Fade=function(e){e=$(e);var t=e.getInlineOpacity(),i=Object.extend({from:e.getOpacity()||1,to:0,afterFinishInternal:function(e){0==e.options.to&&e.element.hide().setStyle({opacity:t})}},arguments[1]||{});return new Effect.Opacity(e,i)},Effect.Appear=function(e){e=$(e);var t=Object.extend({from:"none"==e.getStyle("display")?0:e.getOpacity()||0,to:1,afterFinishInternal:function(e){e.element.forceRerendering()},beforeSetup:function(e){e.element.setOpacity(e.options.from).show()}},arguments[1]||{});return new Effect.Opacity(e,t)},Effect.Puff=function(e){e=$(e);var t={opacity:e.getInlineOpacity(),position:e.getStyle("position"),top:e.style.top,left:e.style.left,width:e.style.width,height:e.style.height};return new Effect.Parallel([new Effect.Scale(e,200,{sync:!0,scaleFromCenter:!0,scaleContent:!0,restoreAfterFinish:!0}),new Effect.Opacity(e,{sync:!0,to:0})],Object.extend({duration:1,beforeSetupInternal:function(e){Position.absolutize(e.effects[0].element)},afterFinishInternal:function(e){e.effects[0].element.hide().setStyle(t)}},arguments[1]||{}))},Effect.BlindUp=function(e){return e=$(e),e.makeClipping(),new Effect.Scale(e,0,Object.extend({scaleContent:!1,scaleX:!1,restoreAfterFinish:!0,afterFinishInternal:function(e){e.element.hide().undoClipping()}},arguments[1]||{}))},Effect.BlindDown=function(e){e=$(e);var t=e.getDimensions();return new Effect.Scale(e,100,Object.extend({scaleContent:!1,scaleX:!1,scaleFrom:0,scaleMode:{originalHeight:t.height,originalWidth:t.width},restoreAfterFinish:!0,afterSetup:function(e){e.element.makeClipping().setStyle({height:"0px"}).show()},afterFinishInternal:function(e){e.element.undoClipping()}},arguments[1]||{}))},Effect.SwitchOff=function(e){e=$(e);var t=e.getInlineOpacity();return new Effect.Appear(e,Object.extend({duration:.4,from:0,transition:Effect.Transitions.flicker,afterFinishInternal:function(e){new Effect.Scale(e.element,1,{duration:.3,scaleFromCenter:!0,scaleX:!1,scaleContent:!1,restoreAfterFinish:!0,beforeSetup:function(e){e.element.makePositioned().makeClipping()},afterFinishInternal:function(e){e.element.hide().undoClipping().undoPositioned().setStyle({opacity:t})}})}},arguments[1]||{}))},Effect.DropOut=function(e){e=$(e);var t={top:e.getStyle("top"),left:e.getStyle("left"),opacity:e.getInlineOpacity()};return new Effect.Parallel([new Effect.Move(e,{x:0,y:100,sync:!0}),new Effect.Opacity(e,{sync:!0,to:0})],Object.extend({duration:.5,beforeSetup:function(e){e.effects[0].element.makePositioned()},afterFinishInternal:function(e){e.effects[0].element.hide().undoPositioned().setStyle(t)}},arguments[1]||{}))},Effect.Shake=function(e){e=$(e);var t=Object.extend({distance:20,duration:.5},arguments[1]||{}),i=parseFloat(t.distance),n=parseFloat(t.duration)/10,o={top:e.getStyle("top"),left:e.getStyle("left")};return new Effect.Move(e,{x:i,y:0,duration:n,afterFinishInternal:function(e){new Effect.Move(e.element,{x:2*-i,y:0,duration:2*n,afterFinishInternal:function(e){new Effect.Move(e.element,{x:2*i,y:0,duration:2*n,afterFinishInternal:function(e){new Effect.Move(e.element,{x:2*-i,y:0,duration:2*n,afterFinishInternal:function(e){new Effect.Move(e.element,{x:2*i,y:0,duration:2*n,afterFinishInternal:function(e){new Effect.Move(e.element,{x:-i,y:0,duration:n,afterFinishInternal:function(e){e.element.undoPositioned().setStyle(o)}})}})}})}})}})}})},Effect.SlideDown=function(e){e=$(e).cleanWhitespace();var t=e.down().getStyle("bottom"),i=e.getDimensions();return new Effect.Scale(e,100,Object.extend({scaleContent:!1,scaleX:!1,scaleFrom:window.opera?0:1,scaleMode:{originalHeight:i.height,originalWidth:i.width},restoreAfterFinish:!0,afterSetup:function(e){e.element.makePositioned(),e.element.down().makePositioned(),window.opera&&e.element.setStyle({top:""}),e.element.makeClipping().setStyle({height:"0px"}).show()},afterUpdateInternal:function(e){e.element.down().setStyle({bottom:e.dims[0]-e.element.clientHeight+"px"})},afterFinishInternal:function(e){e.element.undoClipping().undoPositioned(),e.element.down().undoPositioned().setStyle({bottom:t})}},arguments[1]||{}))},Effect.SlideUp=function(e){e=$(e).cleanWhitespace();var t=e.down().getStyle("bottom"),i=e.getDimensions();return new Effect.Scale(e,window.opera?0:1,Object.extend({scaleContent:!1,scaleX:!1,scaleMode:"box",scaleFrom:100,scaleMode:{originalHeight:i.height,originalWidth:i.width},restoreAfterFinish:!0,afterSetup:function(e){e.element.makePositioned(),e.element.down().makePositioned(),window.opera&&e.element.setStyle({top:""}),e.element.makeClipping().show()},afterUpdateInternal:function(e){e.element.down().setStyle({bottom:e.dims[0]-e.element.clientHeight+"px"})},afterFinishInternal:function(e){e.element.hide().undoClipping().undoPositioned(),e.element.down().undoPositioned().setStyle({bottom:t})}},arguments[1]||{}))},Effect.Squish=function(e){return new Effect.Scale(e,window.opera?1:0,{restoreAfterFinish:!0,beforeSetup:function(e){e.element.makeClipping()},afterFinishInternal:function(e){e.element.hide().undoClipping()}})},Effect.Grow=function(e){e=$(e);var t,i,n,o,s=Object.extend({direction:"center",moveTransition:Effect.Transitions.sinoidal,scaleTransition:Effect.Transitions.sinoidal,opacityTransition:Effect.Transitions.full},arguments[1]||{}),r={top:e.style.top,left:e.style.left,height:e.style.height,width:e.style.width,opacity:e.getInlineOpacity()},a=e.getDimensions();switch(s.direction){case"top-left":t=i=n=o=0;break;case"top-right":t=a.width,i=o=0,n=-a.width;break;case"bottom-left":t=n=0,i=a.height,o=-a.height;break;case"bottom-right":t=a.width,i=a.height,n=-a.width,o=-a.height;break;case"center":t=a.width/2,i=a.height/2,n=-a.width/2,o=-a.height/2}return new Effect.Move(e,{x:t,y:i,duration:.01,beforeSetup:function(e){e.element.hide().makeClipping().makePositioned()},afterFinishInternal:function(e){new Effect.Parallel([new Effect.Opacity(e.element,{sync:!0,to:1,from:0,transition:s.opacityTransition}),new Effect.Move(e.element,{x:n,y:o,sync:!0,transition:s.moveTransition}),new Effect.Scale(e.element,100,{scaleMode:{originalHeight:a.height,originalWidth:a.width},sync:!0,scaleFrom:window.opera?1:0,transition:s.scaleTransition,restoreAfterFinish:!0})],Object.extend({beforeSetup:function(e){e.effects[0].element.setStyle({height:"0px"}).show()},afterFinishInternal:function(e){e.effects[0].element.undoClipping().undoPositioned().setStyle(r)}},s))}})},Effect.Shrink=function(e){e=$(e);var t,i,n=Object.extend({direction:"center",moveTransition:Effect.Transitions.sinoidal,scaleTransition:Effect.Transitions.sinoidal,opacityTransition:Effect.Transitions.none},arguments[1]||{}),o={top:e.style.top,left:e.style.left,height:e.style.height,width:e.style.width,opacity:e.getInlineOpacity()},s=e.getDimensions();switch(n.direction){case"top-left":t=i=0;break;case"top-right":t=s.width,i=0;break;case"bottom-left":t=0,i=s.height;break;case"bottom-right":t=s.width,i=s.height;break;case"center":t=s.width/2,i=s.height/2}return new Effect.Parallel([new Effect.Opacity(e,{sync:!0,to:0,from:1,transition:n.opacityTransition}),new Effect.Scale(e,window.opera?1:0,{sync:!0,transition:n.scaleTransition,restoreAfterFinish:!0}),new Effect.Move(e,{x:t,y:i,sync:!0,transition:n.moveTransition})],Object.extend({beforeStartInternal:function(e){e.effects[0].element.makePositioned().makeClipping()},afterFinishInternal:function(e){e.effects[0].element.hide().undoClipping().undoPositioned().setStyle(o)}},n))},Effect.Pulsate=function(e){e=$(e);var t=arguments[1]||{},i=e.getInlineOpacity(),n=t.transition||Effect.Transitions.linear,o=function(e){return 1-n(-Math.cos(e*(t.pulses||5)*2*Math.PI)/2+.5)};return new Effect.Opacity(e,Object.extend(Object.extend({duration:2,from:0,afterFinishInternal:function(e){e.element.setStyle({opacity:i})}},t),{transition:o}))},Effect.Fold=function(e){e=$(e);var t={top:e.style.top,left:e.style.left,width:e.style.width,height:e.style.height};return e.makeClipping(),new Effect.Scale(e,5,Object.extend({scaleContent:!1,scaleX:!1,afterFinishInternal:function(){new Effect.Scale(e,1,{scaleContent:!1,scaleY:!1,afterFinishInternal:function(e){e.element.hide().undoClipping().setStyle(t)}})}},arguments[1]||{}))},Effect.Morph=Class.create(Effect.Base,{initialize:function(e){if(this.element=$(e),!this.element)throw Effect._elementDoesNotExistError;var t=Object.extend({style:{}},arguments[1]||{});if(Object.isString(t.style))if(t.style.include(":"))this.style=t.style.parseStyle();else{this.element.addClassName(t.style),this.style=$H(this.element.getStyles()),this.element.removeClassName(t.style);var i=this.element.getStyles();this.style=this.style.reject(function(e){return e.value==i[e.key]}),t.afterFinishInternal=function(e){e.element.addClassName(e.options.style),e.transforms.each(function(t){e.element.style[t.style]=""})}}else this.style=$H(t.style);this.start(t)},setup:function(){function e(e){return(!e||["rgba(0, 0, 0, 0)","transparent"].include(e))&&(e="#ffffff"),e=e.parseColor(),$R(0,2).map(function(t){return parseInt(e.slice(2*t+1,2*t+3),16)})}this.transforms=this.style.map(function(t){var i=t[0],n=t[1],o=null;if("#zzzzzz"!=n.parseColor("#zzzzzz"))n=n.parseColor(),o="color";else if("opacity"==i)n=parseFloat(n),Prototype.Browser.IE&&!this.element.currentStyle.hasLayout&&this.element.setStyle({zoom:1});else if(Element.CSS_LENGTH.test(n)){var s=n.match(/^([\+\-]?[0-9\.]+)(.*)$/);n=parseFloat(s[1]),o=3==s.length?s[2]:null}var r=this.element.getStyle(i);return{style:i.camelize(),originalValue:"color"==o?e(r):parseFloat(r||0),targetValue:"color"==o?e(n):n,unit:o}}.bind(this)).reject(function(e){return e.originalValue==e.targetValue||"color"!=e.unit&&(isNaN(e.originalValue)||isNaN(e.targetValue))})},update:function(e){for(var t,i={},n=this.transforms.length;n--;)i[(t=this.transforms[n]).style]="color"==t.unit?"#"+Math.round(t.originalValue[0]+(t.targetValue[0]-t.originalValue[0])*e).toColorPart()+Math.round(t.originalValue[1]+(t.targetValue[1]-t.originalValue[1])*e).toColorPart()+Math.round(t.originalValue[2]+(t.targetValue[2]-t.originalValue[2])*e).toColorPart():(t.originalValue+(t.targetValue-t.originalValue)*e).toFixed(3)+(null===t.unit?"":t.unit);this.element.setStyle(i,!0)}}),Effect.Transform=Class.create({initialize:function(e){this.tracks=[],this.options=arguments[1]||{},this.addTracks(e)},addTracks:function(e){return e.each(function(e){e=$H(e);var t=e.values().first();this.tracks.push($H({ids:e.keys().first(),effect:Effect.Morph,options:{style:t}}))}.bind(this)),this},play:function(){return new Effect.Parallel(this.tracks.map(function(e){var t=e.get("ids"),i=e.get("effect"),n=e.get("options"),o=[$(t)||$$(t)].flatten();return o.map(function(e){return new i(e,Object.extend({sync:!0},n))})}).flatten(),this.options)}}),Element.CSS_PROPERTIES=$w("backgroundColor backgroundPosition borderBottomColor borderBottomStyle borderBottomWidth borderLeftColor borderLeftStyle borderLeftWidth borderRightColor borderRightStyle borderRightWidth borderSpacing borderTopColor borderTopStyle borderTopWidth bottom clip color fontSize fontWeight height left letterSpacing lineHeight marginBottom marginLeft marginRight marginTop markerOffset maxHeight maxWidth minHeight minWidth opacity outlineColor outlineOffset outlineWidth paddingBottom paddingLeft paddingRight paddingTop right textIndent top width wordSpacing zIndex"),Element.CSS_LENGTH=/^(([\+\-]?[0-9\.]+)(em|ex|px|in|cm|mm|pt|pc|\%))|0$/,String.__parseStyleElement=document.createElement("div"),String.prototype.parseStyle=function(){var e,t=$H();return Prototype.Browser.WebKit?e=new Element("div",{style:this}).style:(String.__parseStyleElement.innerHTML='<div style="'+this+'"></div>',e=String.__parseStyleElement.childNodes[0].style),Element.CSS_PROPERTIES.each(function(i){e[i]&&t.set(i,e[i])}),Prototype.Browser.IE&&this.include("opacity")&&t.set("opacity",this.match(/opacity:\s*((?:0|1)?(?:\.\d*)?)/)[1]),t},Element.getStyles=document.defaultView&&document.defaultView.getComputedStyle?function(e){var t=document.defaultView.getComputedStyle($(e),null);return Element.CSS_PROPERTIES.inject({},function(e,i){return e[i]=t[i],e})}:function(e){e=$(e);var t,i=e.currentStyle;return t=Element.CSS_PROPERTIES.inject({},function(e,t){return e[t]=i[t],e}),t.opacity||(t.opacity=e.getOpacity()),t},Effect.Methods={morph:function(e,t){return e=$(e),new Effect.Morph(e,Object.extend({style:t},arguments[2]||{})),e},visualEffect:function(e,t,i){e=$(e);var n=t.dasherize().camelize(),o=n.charAt(0).toUpperCase()+n.substring(1);return new Effect[o](e,i),e},highlight:function(e,t){return e=$(e),new Effect.Highlight(e,t),e}},$w("fade appear grow shrink fold blindUp blindDown slideUp slideDown pulsate shake puff squish switchOff dropOut").each(function(e){Effect.Methods[e]=function(t,i){return t=$(t),Effect[e.charAt(0).toUpperCase()+e.substring(1)](t,i),t}}),$w("getInlineOpacity forceRerendering setContentZoom collectTextNodes collectTextNodesIgnoreClass getStyles").each(function(e){Effect.Methods[e]=Element[e]}),Element.addMethods(Effect.Methods),define("effects",["prototype"],function(e){return function(){var t;return t||e.Effect}}(this)),define("utils.animation",["prototype","effects"],function(e){return function(){var t;return t||e.jQuery}}(this)),Object.isUndefined(Effect))throw"dragdrop.js requires including script.aculo.us' effects.js library";var Droppables={drops:[],remove:function(e){this.drops=this.drops.reject(function(t){return t.element==$(e)})},add:function(e){e=$(e);var t=Object.extend({greedy:!0,hoverclass:null,tree:!1},arguments[1]||{});if(t.containment){t._containers=[];var i=t.containment;Object.isArray(i)?i.each(function(e){t._containers.push($(e))}):t._containers.push($(i))}t.accept&&(t.accept=[t.accept].flatten()),Element.makePositioned(e),t.element=e,this.drops.push(t)},findDeepestChild:function(e){for(deepest=e[0],i=1;i<e.length;++i)Element.isParent(e[i].element,deepest.element)&&(deepest=e[i]);return deepest},isContained:function(e,t){var i;return i=t.tree?e.treeNode:e.parentNode,t._containers.detect(function(e){return i==e})},isAffected:function(e,t,i){return i.element!=t&&(!i._containers||this.isContained(t,i))&&(!i.accept||Element.classNames(t).detect(function(e){return i.accept.include(e)}))&&Position.within(i.element,e[0],e[1])},deactivate:function(e){e.hoverclass&&Element.removeClassName(e.element,e.hoverclass),this.last_active=null},activate:function(e){e.hoverclass&&Element.addClassName(e.element,e.hoverclass),this.last_active=e},show:function(e,t){if(this.drops.length){var i,n=[];this.drops.each(function(i){Droppables.isAffected(e,t,i)&&n.push(i)}),n.length>0&&(i=Droppables.findDeepestChild(n)),this.last_active&&this.last_active!=i&&this.deactivate(this.last_active),i&&(Position.within(i.element,e[0],e[1]),i.onHover&&i.onHover(t,i.element,Position.overlap(i.overlap,i.element)),i!=this.last_active&&Droppables.activate(i))}},fire:function(e,t){if(this.last_active){var i;
return Position.prepare(),i=Draggables.supportsTouch?Draggables._lastPointer:[Event.pointerX(e),Event.pointerY(e)],this.isAffected(i,t,this.last_active)&&this.last_active.onDrop?(this.last_active.onDrop(t,this.last_active.element,e),!0):void 0}},reset:function(){this.last_active&&this.deactivate(this.last_active)}},Draggables={DEFAULT_TOLERANCE:window.Prototype.BrowserFeatures.SupportsTouch?2:1,drags:[],observers:[],supportsTouch:window.Prototype.BrowserFeatures.SupportsTouch,register:function(e){0==this.drags.length&&(this.eventMouseUp=this.endDrag.bindAsEventListener(this),this.eventMouseMove=this.updateDrag.bindAsEventListener(this),this.eventKeypress=this.keyPress.bindAsEventListener(this),Draggables.supportsTouch?(Event.observe(document,"touchend",this.eventMouseUp),Event.observe(document,"touchmove",this.eventMouseMove)):Event.observe(document,"mouseup",this.eventMouseUp),Event.observe(document,"keypress",this.eventKeypress)),this.drags.push(e)},unregister:function(e){this.drags=this.drags.reject(function(t){return t==e}),0==this.drags.length&&(Draggables.supportsTouch?(Event.stopObserving(document,"touchend",this.eventMouseUp),Event.stopObserving(document,"touchmove",this.eventMouseMove)):Event.stopObserving(document,"mouseup",this.eventMouseUp),Event.stopObserving(document,"keypress",this.eventKeypress))},activate:function(e){Draggables.supportsTouch||Event.observe(document,"mousemove",this.eventMouseMove),e.options.delay?this._timeout=setTimeout(function(){Draggables._timeout=null,window.focus(),Draggables.activeDraggable=e}.bind(this),e.options.delay):(window.focus(),this.activeDraggable=e)},deactivate:function(){Draggables.supportsTouch||Event.stopObserving(document,"mousemove",this.eventMouseMove),this.activeDraggable=null},updateDrag:function(e){if(this.activeDraggable){var t=[Event.pointerX(e),Event.pointerY(e)];this.pointerInRadius(t)||(this._lastPointer=t,this.activeDraggable.updateDrag(e,t))}},pointerInRadius:function(e,t){return t=t||2,this._lastPointer&&Math.abs(this._lastPointer[0]-e[0])<=t&&Math.abs(this._lastPointer[1]-e[1])<=t},endDrag:function(e){this._timeout&&(clearTimeout(this._timeout),this._timeout=null),this.activeDraggable&&(Draggables.supportsTouch||(this._lastPointer=null),this.activeDraggable.endDrag(e),this.activeDraggable=null)},keyPress:function(e){this.activeDraggable&&this.activeDraggable.keyPress(e)},addObserver:function(e){this.observers.push(e),this._cacheObserverCallbacks()},removeObserver:function(e){this.observers=this.observers.reject(function(t){return t.element==e||t.element&&e&&t.element.id==e.id}),this._cacheObserverCallbacks()},notify:function(e,t,i){this[e+"Count"]>0&&this.observers.each(function(n){n[e]&&n[e](e,t,i)}),t.options[e]&&t.options[e](t,i)},_cacheObserverCallbacks:function(){["onStart","onEnd","onDrag"].each(function(e){Draggables[e+"Count"]=Draggables.observers.select(function(t){return t[e]}).length})}},Draggable=Class.create({initialize:function(e){var t={handle:!1,reverteffect:function(e,t,i){var n=.02*Math.sqrt(Math.abs(2^t)+Math.abs(2^i));new Effect.Move(e,{x:-i,y:-t,duration:n,queue:{scope:"_draggable",position:"end"}})},endeffect:function(e){Draggable._dragging[e]=!1},zindex:1e3,revert:!1,quiet:!1,scroll:!1,scrollSensitivity:20,scrollSpeed:15,snap:!1,delay:0};(!arguments[1]||Object.isUndefined(arguments[1].endeffect))&&Object.extend(t,{starteffect:function(e){e._opacity=Element.getOpacity(e),Draggable._dragging[e]=!0}});var i=Object.extend(t,arguments[1]||{});this.element=$(e),i.handle&&Object.isString(i.handle)&&(this.handle=this.element.down("."+i.handle,0)),this.handle||(this.handle=$(i.handle)),this.handle||(this.handle=this.element),!i.scroll||i.scroll.scrollTo||i.scroll.outerHTML||(i.scroll=$(i.scroll),this._isScrollChild=Element.childOf(this.element,i.scroll)),Element.makePositioned(this.element),this.options=i,this.dragging=!1,this.eventMouseDown=this.initDrag.bindAsEventListener(this),Draggables.supportsTouch?Event.observe(this.handle,"touchstart",this.eventMouseDown):Event.observe(this.handle,"mousedown",this.eventMouseDown),Draggables.register(this)},destroy:function(){Draggables.supportsTouch?Event.stopObserving(this.handle,"touchstart",this.eventMouseDown):Event.stopObserving(this.handle,"mousedown",this.eventMouseDown),Draggables.unregister(this)},currentDelta:function(){var e=Element.getStyle(this.element,"left")||"",t=Element.getStyle(this.element,"top")||"";return e.include("%")&&(e=this.element.parentNode.getWidth()*parseInt(e)/100),t.include("%")&&(t=this.element.parentNode.getHeight()*parseInt(t)/100),[parseInt(e)||"0",parseInt(t)||"0"]},initDrag:function(e){if((Object.isUndefined(Draggable._dragging[this.element])||!Draggable._dragging[this.element])&&(Event.isLeftClick(e)||Draggables.supportsTouch&&e.touches&&1==e.touches.length)){var t=Event.element(e);if((tag_name=t.tagName.toUpperCase())&&("INPUT"==tag_name||"SELECT"==tag_name||"OPTION"==tag_name||"BUTTON"==tag_name||"TEXTAREA"==tag_name))return;var i=[Event.pointerX(e),Event.pointerY(e)],n=this.element.cumulativeOffset();this.offset=[0,1].map(function(e){return i[e]-n[e]}),Draggables.activate(this),this.countdown=Draggables.DEFAULT_TOLERANCE,Event.stop(e),Draggables.supportsTouch?this.handle.fire("drag:"+e.type,{targetEvent:e}):this.handle.fire("drag:mousedown",{targetEvent:e})}},startDrag:function(e){if(this.dragging=!0,this.delta||(this.delta=this.currentDelta()),this.options.zindex&&(this.originalZ=parseInt(Element.getStyle(this.element,"z-index")||0),this.element.style.zIndex=this.options.zindex),this.options.ghosting&&(this._clone=this.element.cloneNode(!0),this._originallyAbsolute="absolute"==this.element.getStyle("position"),this._originallyAbsolute||Position.absolutize(this.element),this.element.parentNode.insertBefore(this._clone,this.element),"TR"===this.element.parentNode.tagName&&document.body.appendChild(this.element)),this.options.scroll)if(this.options.scroll==window){var t=this._getWindowScroll(this.options.scroll);this.originalScrollLeft=t.left,this.originalScrollTop=t.top}else this.originalScrollLeft=this.options.scroll.scrollLeft,this.originalScrollTop=this.options.scroll.scrollTop;Draggables.notify("onStart",this,e),this.options.starteffect&&this.options.starteffect(this.element)},updateDrag:function(event,pointer){if(!this.dragging)if(Draggables.supportsTouch){if(!isIE7()&&this.countdown&&this.countdown--)return;this.startDrag(event)}else{if(this.countdown&&this.countdown--)return;this.startDrag(event)}if(Draggables.supportsTouch&&event.touches.length>1&&this.endDrag(event),this.options.quiet||(Position.prepare(),Droppables.show(pointer,this.element)),Draggables.notify("onDrag",this,event),this.draw(pointer),this.options.change&&this.options.change(this),this.options.scroll){this.stopScrolling();var p;if(this.options.scroll==window)with(this._getWindowScroll(this.options.scroll))p=[left,top,left+width,top+height];else p=Position.page(this.options.scroll).toArray(),p[0]+=this.options.scroll.scrollLeft+Position.deltaX,p[1]+=this.options.scroll.scrollTop+Position.deltaY,p.push(p[0]+this.options.scroll.offsetWidth),p.push(p[1]+this.options.scroll.offsetHeight);var speed=[0,0];pointer[0]<p[0]+this.options.scrollSensitivity&&(speed[0]=pointer[0]-(p[0]+this.options.scrollSensitivity)),pointer[1]<p[1]+this.options.scrollSensitivity&&(speed[1]=pointer[1]-(p[1]+this.options.scrollSensitivity)),pointer[0]>p[2]-this.options.scrollSensitivity&&(speed[0]=pointer[0]-(p[2]-this.options.scrollSensitivity)),pointer[1]>p[3]-this.options.scrollSensitivity&&(speed[1]=pointer[1]-(p[3]-this.options.scrollSensitivity)),this.startScrolling(speed)}Prototype.Browser.WebKit&&window.scrollBy(0,0),Event.stop(event)},finishDrag:function(e,t){if(this.dragging=!1,this.options.quiet){Position.prepare();var i=[Event.pointerX(e),Event.pointerY(e)];Droppables.show(i,this.element)}this.options.ghosting&&(this._originallyAbsolute||(Position.relativize(this.element),"TR"===this._clone.parentNode.tagName&&this._clone.parentNode.insertBefore(this.element,this._clone)),delete this._originallyAbsolute,Element.remove(this._clone),this._clone=null);var n=!1;t&&(n=Droppables.fire(e,this.element),n?Draggables.supportsTouch&&(Draggables._lastPointer=null):n=!1),n&&this.options.onDropped&&this.options.onDropped(this.element),Draggables.notify("onEnd",this,e);var o=this.options.revert;o&&Object.isFunction(o)&&(o=o(this.element));var s=this.currentDelta();o&&this.options.reverteffect?(0==n||"failure"!=o)&&this.options.reverteffect(this.element,s[1]-this.delta[1],s[0]-this.delta[0]):this.delta=s,this.options.zindex&&(this.element.style.zIndex=this.originalZ),this.options.endeffect&&this.options.endeffect(this.element),Draggables.deactivate(this),Droppables.reset()},keyPress:function(e){e.keyCode==Event.KEY_ESC&&(this.finishDrag(e,!1),Event.stop(e))},endDrag:function(e){this.dragging&&(this.stopScrolling(),this.finishDrag(e,!0),Event.stop(e))},draw:function(e){var t=this.element.cumulativeOffset();if(this.options.ghosting){var i=Position.realOffset(this.element);t[0]+=i[0]-Position.deltaX,t[1]+=i[1]-Position.deltaY}var n=this.currentDelta();t[0]-=n[0],t[1]-=n[1],this.options.scroll&&this.options.scroll!=window&&this._isScrollChild&&(t[0]-=this.options.scroll.scrollLeft-this.originalScrollLeft,t[1]-=this.options.scroll.scrollTop-this.originalScrollTop);var o=[0,1].map(function(i){return e[i]-t[i]-this.offset[i]}.bind(this));this.options.snap&&(o=Object.isFunction(this.options.snap)?this.options.snap(o[0],o[1],this):o.map(Object.isArray(this.options.snap)?function(e,t){return(e/this.options.snap[t]).round()*this.options.snap[t]}.bind(this):function(e){return(e/this.options.snap).round()*this.options.snap}.bind(this)));var s=this.element.style;this.options.constraint&&"horizontal"!=this.options.constraint||(s.left=o[0]+"px"),this.options.constraint&&"vertical"!=this.options.constraint||(s.top=o[1]+"px"),"hidden"==s.visibility&&(s.visibility="")},stopScrolling:function(){this.scrollInterval&&(clearInterval(this.scrollInterval),this.scrollInterval=null,Draggables._lastScrollPointer=null)},startScrolling:function(e){(e[0]||e[1])&&(this.scrollSpeed=[e[0]*this.options.scrollSpeed,e[1]*this.options.scrollSpeed],this.lastScrolled=new Date,this.scrollInterval=setInterval(this.scroll.bind(this),10))},scroll:function(){var current=new Date,delta=current-this.lastScrolled;if(this.lastScrolled=current,this.options.scroll==window){with(this._getWindowScroll(this.options.scroll))if(this.scrollSpeed[0]||this.scrollSpeed[1]){var d=delta/1e3;this.options.scroll.scrollTo(left+d*this.scrollSpeed[0],top+d*this.scrollSpeed[1])}}else this.options.scroll.scrollLeft+=this.scrollSpeed[0]*delta/1e3,this.options.scroll.scrollTop+=this.scrollSpeed[1]*delta/1e3;Position.prepare(),Droppables.show(Draggables._lastPointer,this.element),Draggables.notify("onDrag",this),this._isScrollChild&&(Draggables._lastScrollPointer=Draggables._lastScrollPointer||$A(Draggables._lastPointer),Draggables._lastScrollPointer[0]+=this.scrollSpeed[0]*delta/1e3,Draggables._lastScrollPointer[1]+=this.scrollSpeed[1]*delta/1e3,Draggables._lastScrollPointer[0]<0&&(Draggables._lastScrollPointer[0]=0),Draggables._lastScrollPointer[1]<0&&(Draggables._lastScrollPointer[1]=0),this.draw(Draggables._lastScrollPointer)),this.options.change&&this.options.change(this)},_getWindowScroll:function(w){var T,L,W,H;with(w.document)w.document.documentElement&&documentElement.scrollTop?(T=documentElement.scrollTop,L=documentElement.scrollLeft):w.document.body&&(T=body.scrollTop,L=body.scrollLeft),w.innerWidth?(W=w.innerWidth,H=w.innerHeight):w.document.documentElement&&documentElement.clientWidth?(W=documentElement.clientWidth,H=documentElement.clientHeight):(W=body.offsetWidth,H=body.offsetHeight);return{top:T,left:L,width:W,height:H}}});Draggable._dragging={};var SortableObserver=Class.create({initialize:function(e,t){this.element=$(e),this.observer=t,this.lastValue=Sortable.serialize(this.element)},onStart:function(){this.lastValue=Sortable.serialize(this.element)},onEnd:function(){Sortable.unmark(),this.lastValue!=Sortable.serialize(this.element)&&this.observer(this.element)}}),Sortable={SERIALIZE_RULE:/^[^_\-](?:[A-Za-z0-9\-\_]*)[_](.*)$/,sortables:{},_findRootElement:function(e){for(;"BODY"!=e.tagName.toUpperCase();){if(e.id&&Sortable.sortables[e.id])return e;e=e.parentNode}},options:function(e){return(e=Sortable._findRootElement($(e)))?Sortable.sortables[e.id]:void 0},destroy:function(e){e=$(e);var t=Sortable.sortables[e.id];t&&(Draggables.removeObserver(t.element),t.droppables.each(function(e){Droppables.remove(e)}),t.draggables.invoke("destroy"),delete Sortable.sortables[t.element.id])},create:function(e){e=$(e);var t=Object.extend({element:e,tag:"li",dropOnEmpty:!1,accept:[],tree:!1,treeTag:"ul",overlap:"vertical",constraint:"vertical",containment:e,handle:!1,only:!1,delay:0,hoverclass:null,ghosting:!1,quiet:!1,scroll:!1,scrollSensitivity:20,scrollSpeed:15,format:this.SERIALIZE_RULE,elements:!1,handles:!1,onDrop:Prototype.emptyFunction,onHover:Sortable.onHover,onChange:Prototype.emptyFunction,onUpdate:Prototype.emptyFunction},arguments[1]||{});this.destroy(e);var i={revert:!0,quiet:t.quiet,scroll:t.scroll,scrollSpeed:t.scrollSpeed,scrollSensitivity:t.scrollSensitivity,delay:t.delay,ghosting:t.ghosting,constraint:t.constraint,onStart:t.onStart,handle:t.handle};t.starteffect&&(i.starteffect=t.starteffect),t.reverteffect?i.reverteffect=t.reverteffect:t.ghosting&&(i.reverteffect=function(e){e.style.top=0,e.style.left=0}),t.endeffect&&(i.endeffect=t.endeffect),t.zindex&&(i.zindex=t.zindex);var n={overlap:t.overlap,containment:t.containment,tree:t.tree,hoverclass:t.hoverclass,onHover:t.onHover,onDrop:t.onDrop},o={onHover:t.onEmptyHover||Sortable.onEmptyHover,overlap:t.overlap,containment:t.containment,hoverclass:t.hoverclass,accept:t.accept,onDrop:t.onDrop};Element.cleanWhitespace(e),t.draggables=[],t.droppables=[],(t.dropOnEmpty||t.tree)&&(Droppables.add(e,o),t.droppables.push(e)),(t.elements||this.findElements(e,t)||[]).each(function(o,s){var r=t.handles?$(t.handles[s]):t.handle?$(o).select("."+t.handle)[0]:o;t.draggables.push(new Draggable(o,Object.extend(i,{handle:r}))),Droppables.add(o,n),t.tree&&(o.treeNode=e),t.droppables.push(o)}),t.tree&&(Sortable.findTreeElements(e,t)||[]).each(function(i){Droppables.add(i,o),i.treeNode=e,t.droppables.push(i)}),this.sortables[e.identify()]=t,Draggables.addObserver(new SortableObserver(e,t.onUpdate))},findElements:function(e,t){return Element.findChildren(e,t.only,t.tree?!0:!1,t.tag)},findTreeElements:function(e,t){return Element.findChildren(e,t.only,t.tree?!0:!1,t.treeTag)},onHover:function(e,t,i){var n=null,o=null;if(!(Element.isParent(t,e)||i>.33&&.66>i&&Sortable.options(t).tree))if(i>.5)Sortable.mark(t,"before"),t.previousSibling!=e&&(n=e.parentNode,e.style.visibility="hidden",t.parentNode.insertBefore(e,t),t.parentNode!=n&&(o=Sortable.options(n),o&&o.onChange(e)),Sortable.options(t.parentNode).onChange(e));else{Sortable.mark(t,"after");var s=t.nextSibling||null;s!=e&&(n=e.parentNode,e.style.visibility="hidden",t.parentNode.insertBefore(e,s),t.parentNode!=n&&(o=Sortable.options(n),o&&o.onChange(e)),Sortable.options(t.parentNode).onChange(e))}},onEmptyHover:function(e,t,i){var n=e.parentNode,o=Sortable.options(t);if(!Element.isParent(t,e)){var s,r=Sortable.findElements(t,{tag:o.tag,only:o.only}),a=null;if(r){var l,c=null,u=Element.offsetSize(t,o.overlap)*(1-i);for(s=0;s<r.length;s+=1)if(c=Element.offsetSize(r[s],o.overlap),l=r[s].cumulativeOffset().top,Position.ycomp>=l&&Position.ycomp<l+r[s].offsetHeight){if(!(u-c>=0)){if(u-c/2>=0){a=s+1<r.length?r[s+1]:null;break}a=r[s];break}u-=c}}t.insertBefore(e,a);var d=Sortable.options(n);d&&d.onChange(e),o.onChange(e)}},unmark:function(){Sortable._marker&&Sortable._marker.hide()},mark:function(e,t){var i=Sortable.options(e.parentNode);if(!i||i.ghosting){Sortable._marker||(Sortable._marker=($("dropmarker")||Element.extend(document.createElement("DIV"))).hide().addClassName("dropmarker").setStyle({position:"absolute"}),document.getElementsByTagName("body").item(0).appendChild(Sortable._marker));var n=e.cumulativeOffset();Sortable._marker.setStyle({left:n[0]+"px",top:n[1]+"px"}),"after"==t&&Sortable._marker.setStyle("horizontal"==i.overlap?{left:n[0]+e.clientWidth+"px"}:{top:n[1]+e.clientHeight+"px"}),Sortable._marker.show()}},_tree:function(e,t,i){for(var n=Sortable.findElements(e,t)||[],o=0;o<n.length;++o){var s=n[o].id.match(t.format);if(s){var r={id:encodeURIComponent(s?s[1]:null),element:e,parent:i,children:[],position:i.children.length,container:$(n[o]).down(t.treeTag)};r.container&&this._tree(r.container,t,r),i.children.push(r)}}return i},tree:function(e){e=$(e);var t=this.options(e),i=Object.extend({tag:t.tag,treeTag:t.treeTag,only:t.only,name:e.id,format:t.format},arguments[1]||{}),n={id:null,parent:null,children:[],container:e,position:0};return Sortable._tree(e,i,n)},_constructIndex:function(e){var t="";do e.id&&(t="["+e.position+"]"+t);while(null!=(e=e.parent));return t},sequence:function(e){e=$(e);var t=Object.extend(this.options(e),arguments[1]||{});return $(this.findElements(e,t)||[]).map(function(e){return e.id.match(t.format)?e.id.match(t.format)[1]:""})},setSequence:function(e,t){e=$(e);var i=Object.extend(this.options(e),arguments[2]||{}),n={};this.findElements(e,i).each(function(e){e.id.match(i.format)&&(n[e.id.match(i.format)[1]]=[e,e.parentNode]),e.parentNode.removeChild(e)}),t.each(function(e){var t=n[e];t&&(t[1].appendChild(t[0]),delete n[e])})},serialize:function(e){e=$(e);var t=Object.extend(Sortable.options(e),arguments[1]||{}),i=encodeURIComponent(arguments[1]&&arguments[1].name?arguments[1].name:e.id);return t.tree?Sortable.tree(e,arguments[1]).children.map(function(e){return[i+Sortable._constructIndex(e)+"[id]="+encodeURIComponent(e.id)].concat(e.children.map(arguments.callee))}).flatten().join("&"):Sortable.sequence(e,arguments[1]).map(function(e){return i+"[]="+encodeURIComponent(e)}).join("&")}};Element.isParent=function(e,t){return e.parentNode&&e!=t?e.parentNode==t?!0:Element.isParent(e.parentNode,t):!1},Element.findChildren=function(e,t,i,n){if(!e.hasChildNodes())return null;n=n.toUpperCase(),t&&(t=[t].flatten());var o=[];return $A(e.childNodes).each(function(e){if(!e.tagName||e.tagName.toUpperCase()!=n||t&&!Element.classNames(e).detect(function(e){return t.include(e)})||o.push(e),i){var s=Element.findChildren(e,t,i,n);s&&o.push(s)}}),o.length>0?o.flatten():[]},Element.offsetSize=function(e,t){return e["offset"+("vertical"==t||"height"==t?"Height":"Width")]},define("dragdrop",["prototype","effects"],function(e){return function(){var t;return t||e.Draggable}}(this)),Draggable.prototype.startDrag=function(e){this.dragging=!0,this.delta||(this.delta=this.currentDelta()),this.options.zindex&&(this.originalZ=parseInt(Element.getStyle(this.element,"z-index")||0),this.element.style.zIndex=this.options.zindex),this.options.ghosting&&(this._clone=this.element.cloneNode(!0),this.element._originallyAbsolute="absolute"==this.element.getStyle("position"),this.element._originallyAbsolute||Position.absolutize(this.element),this.element.parentNode.insertBefore(this._clone,this.element));var t=jQuery("body"),i=jQuery(this.element),n=i.offset();if(this._sizes={window:{w:t.outerWidth(!0),h:t.outerHeight(!0)},element:{w:i.outerWidth(),h:i.outerHeight()},mouseOffset:{left:Event.pointerX(e)-n.left,top:Event.pointerY(e)-n.top}},this.options.superghosting){Position.prepare();var o=[Event.pointerX(e),Event.pointerY(e)];body=document.getElementsByTagName("body")[0],me=this.element,this._clone=me.cloneNode(!0),me.parentNode.insertBefore(this._clone,me),me.id="clone_"+me.id,me.hide(),Position.absolutize(me),me.parentNode.removeChild(me),body.appendChild(me),("0px"==me.style.width||"0px"==me.style.height)&&(me.style.width=Element.getWidth(this._clone)+"px",me.style.height=Element.getHeight(this._clone)+"px"),this.originalScrollTop=Element.getHeight(this._clone)/2,this.draw(o),me.show()}if(this.options.scroll)if(this.options.scroll==window){var s=this._getWindowScroll(this.options.scroll);this.originalScrollLeft=s.left,this.originalScrollTop=s.top}else this.originalScrollLeft=this.options.scroll.scrollLeft,this.originalScrollTop=this.options.scroll.scrollTop;Draggables.notify("onStart",this,e),this.options.starteffect&&this.options.starteffect(this.element)},Draggable.prototype.draw=function(e){"undefined"==typeof this.elemSizeCaptured&&(setTimeout(function(){if(this._sizes){var e=jQuery(this.element);this._sizes.element={w:e.outerWidth(),h:e.outerHeight()}}}.bind(this),100),this.elemSizeCaptured=!0);var t=jQuery(this.element),i=t.offset(),n={left:e[0]-this._sizes.mouseOffset.left,top:e[1]-this._sizes.mouseOffset.top},o=[n.left,n.top];this.options.snap&&(o=Object.isFunction(this.options.snap)?this.options.snap(o[0],o[1],this):o.map(Object.isArray(this.options.snap)?function(e,t){return(e/this.options.snap[t]).round()*this.options.snap[t]}.bind(this):function(e){return(e/this.options.snap).round()*this.options.snap}.bind(this))),n={left:o[0],top:o[1]},this.options.constraint&&"horizontal"==this.options.constraint&&(n.top=i.top),this.options.constraint&&"vertical"==this.options.constraint&&(n.left=i.left),this.options.mouseOffset&&(n={left:e[0],top:e[1]}),(0>n.top||0>n.left||n.top+this._sizes.element.h>this._sizes.window.h||n.left+this._sizes.element.w>this._sizes.window.w)&&(0>n.top&&(n.top=0),0>n.left&&(n.left=0),n.top+this._sizes.element.h>this._sizes.window.h&&(n.top=this._sizes.window.h-this._sizes.element.h),n.left+this._sizes.element.w>this._sizes.window.w&&(n.left=this._sizes.window.w-this._sizes.element.w)),t.offset(n),this._sequencer=this._sequencer||0,this._sequencer++,1==this._sequencer&&t.offset(n)},Droppables.isAffected=function(e,t,i){return Position.prepare(),positioned_within=Position.withinIncludingScrolloffsets(i.element,e[0],e[1]),i.element!=t&&(!i._containers||this.isContained(t,i))&&(!i.accept||Element.classNames(t).detect(function(e){return i.accept.include(e)}))&&positioned_within},Draggable.prototype.finishDrag=function(e,t){if(this.dragging=!1,delete this._sequencer,delete this._sizes,this.options.quiet){Position.prepare();var i=[Event.pointerX(e),Event.pointerY(e)];Droppables.show(i,this.element)}this.options.ghosting&&(this.element._originallyAbsolute||Position.relativize(this.element),this.element._originallyAbsolute=void 0,Element.remove(this._clone),this._clone=null),this.options.superghosting&&(body=document.getElementsByTagName("body")[0],Element.remove(this.element),new Draggable(this._clone,this.options));var n=!1;t&&(n=Droppables.fire(e,this.element),n||(n=!1)),n&&this.options.onDropped&&this.options.onDropped(this.element),Draggables.notify("onEnd",this,e);var o=this.options.revert;o&&"function"==typeof o&&(o=o(this.element));var s=this.currentDelta();o&&this.options.reverteffect?(0==n||"failure"!=o)&&this.options.reverteffect(this.element,s[1]-this.delta[1],s[0]-this.delta[0]):this.delta=s,this.options.zindex&&(this.element.style.zIndex=this.originalZ,this._clone&&(this._clone.style.zIndex=this.originalZ)),this.options.endeffect&&this.options.endeffect(this.element),Draggables.deactivate(this),Droppables.reset()},define("dragdrop.extra",["dragdrop","jquery"],function(e){return function(){var t;return t||e.Draggable}}(this));var Truncator=Class.create({initialize:function(e,t){if(e&&e[0]){var i=null;t&&(i=t),e.each(function(e){this.truncate(e,i)}.bind(this))}},truncate:function(e,t){if("ABBR"==e.nodeName){var i=e.title.replace("&quot;",'"');e=e.parentNode,e.update(i.strip().escapeHTML())}var n=Object.isUndefined(e.innerText)?e.textContent:e.innerText;e.insert(Truncator.template.evaluate({divId:Truncator.tmpDivId,spanId:Truncator.tmpSpanId}));var o=$(Truncator.tmpSpanId);o.insert(n.escapeHTML());var s=t?t:e.getWidth(),r=o.getWidth();if(s>=r)return void $(Truncator.tmpDivId).remove();for(var a=n,l=0,c=n.length,u=(c-l)/2;u>1;)u+=l,a=n.substr(0,u),isIE()?o.innerText=a:o.update(a.escapeHTML()),o.getWidth()+30>s?c=u:l=u,u=(c-l)/2;$(Truncator.tmpDivId).remove(),e.update(this.truncateString(this.ellipsifyString(a.escapeHTML()),n.escapeHTML().replace('"',"&quot;")))},untruncate:function(e){e.each(function(e){"ABBR"==e.nodeName&&e.update(e.title.strip().escapeHTML())})},ellipsifyString:function(e){return e+"&hellip;"},truncateString:function(e,t){return'<abbr title="'+t+'">'+e+"</abbr>"}});Truncator.tmpDivId="truncator-tmp-div",Truncator.tmpSpanId="truncator-tmp-span",Truncator.template=new Template('    <div id="#{divId}" style="width:9999px; left:-9999px; top:-9999px; display:block; position: absolute">        <span id="#{spanId}"></span>    </div>'),define("tools.truncator",["prototype"],function(e){return function(){var t;return t||e.jQuery}}(this)),function(){var e=Math,t=/webkit/i.test(navigator.appVersion)?"webkit":/firefox/i.test(navigator.userAgent)?"Moz":"opera"in window?"O":"",n="WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix,o="ontouchstart"in window,s=t+"Transform"in document.documentElement.style,r=/android/gi.test(navigator.appVersion),a=/iphone|ipad/gi.test(navigator.appVersion),c=/playbook/gi.test(navigator.appVersion),u=a||c,d=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){return setTimeout(e,1)}}(),h=function(){return window.cancelRequestAnimationFrame||window.webkitCancelRequestAnimationFrame||window.mozCancelRequestAnimationFrame||window.oCancelRequestAnimationFrame||window.msCancelRequestAnimationFrame||clearTimeout}(),p="onorientationchange"in window?"orientationchange":"resize",f=o?"touchstart":"mousedown",m=o?"touchmove":"mousemove",g=o?"touchend":"mouseup",v=o?"touchcancel":"mouseup",_="Moz"==t?"DOMMouseScroll":"mousewheel",y="translate"+(n?"3d(":"("),b=n?",0)":")",S=function(e,i){var l,c=this,d=document;c.wrapper="object"==typeof e?e:d.getElementById(e),c.wrapper.style.overflow="hidden",c.scroller=c.wrapper.children[0],c.options={hScroll:!0,vScroll:!0,bounce:!0,bounceLock:!1,momentum:!0,lockDirection:!0,useTransform:!0,useTransition:!1,checkDOMChanges:!1,hScrollbar:!0,vScrollbar:!0,fixedScrollbar:r,hideScrollbar:a,fadeScrollbar:a&&n,scrollbarClass:"",zoom:!1,zoomMin:1,zoomMax:4,doubleTapZoom:2,wheelAction:"scroll",snap:!1,snapThreshold:1,onRefresh:null,onBeforeScrollStart:function(e){e.preventDefault()},onScrollStart:null,onBeforeScrollMove:null,onScrollMove:null,onBeforeScrollEnd:null,onScrollEnd:null,onTouchEnd:null,onDestroy:null,onZoomStart:null,onZoom:null,onZoomEnd:null};for(l in i)c.options[l]=i[l];c.options.useTransform=s?c.options.useTransform:!1,c.options.hScrollbar=c.options.hScroll&&c.options.hScrollbar,c.options.vScrollbar=c.options.vScroll&&c.options.vScrollbar,c.options.zoom=c.options.useTransform&&c.options.zoom,c.options.useTransition=u&&c.options.useTransition,c.scroller.style[t+"TransitionProperty"]=c.options.useTransform?"-"+t.toLowerCase()+"-transform":"top left",c.scroller.style[t+"TransitionDuration"]="0",c.scroller.style[t+"TransformOrigin"]="0 0",c.options.useTransition&&(c.scroller.style[t+"TransitionTimingFunction"]="cubic-bezier(0.33,0.66,0.66,1)"),c.options.useTransform?c.scroller.style[t+"Transform"]=y+"0,0"+b:c.scroller.style.cssText+=";position:absolute;top:0;left:0",c.options.useTransition&&(c.options.fixedScrollbar=!0),c.refresh(),c._bind(p,window),c._bind(f),o||(c._bind("mouseout",c.wrapper),c._bind(_)),c.options.checkDOMChanges&&(c.checkDOMTime=setInterval(function(){c._checkDOMChanges()},500))};S.prototype={enabled:!0,x:0,y:0,steps:[],scale:1,currPageX:0,currPageY:0,pagesX:[],pagesY:[],aniTime:null,wheelZoomCount:0,handleEvent:function(e){var t=this;switch(e.type){case f:if(!o&&0!==e.button)return;t._start(e);break;case m:t._move(e);break;case g:case v:t._end(e);break;case p:t._resize();break;case _:t._wheel(e);break;case"mouseout":t._mouseout(e);break;case"webkitTransitionEnd":t._transitionEnd(e)}},_checkDOMChanges:function(){this.moved||this.zoomed||this.animating||this.scrollerW==this.scroller.offsetWidth*this.scale&&this.scrollerH==this.scroller.offsetHeight*this.scale||this.refresh()},_scrollbar:function(i){var n,o=this,r=document;return o[i+"Scrollbar"]?(o[i+"ScrollbarWrapper"]||(n=r.createElement("div"),o.options.scrollbarClass?n.className=o.options.scrollbarClass+i.toUpperCase():n.style.cssText="position:absolute;z-index:100;"+("h"==i?"height:7px;bottom:1px;left:2px;right:"+(o.vScrollbar?"7":"2")+"px":"width:7px;bottom:"+(o.hScrollbar?"7":"2")+"px;top:2px;right:1px"),n.style.cssText+=";pointer-events:none;-"+t+"-transition-property:opacity;-"+t+"-transition-duration:"+(o.options.fadeScrollbar?"350ms":"0")+";overflow:hidden;opacity:"+(o.options.hideScrollbar?"0":"1"),o.wrapper.appendChild(n),o[i+"ScrollbarWrapper"]=n,n=r.createElement("div"),o.options.scrollbarClass||(n.style.cssText="position:absolute;z-index:100;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);-"+t+"-background-clip:padding-box;-"+t+"-box-sizing:border-box;"+("h"==i?"height:100%":"width:100%")+";-"+t+"-border-radius:3px;border-radius:3px"),n.style.cssText+=";pointer-events:none;-"+t+"-transition-property:-"+t+"-transform;-"+t+"-transition-timing-function:cubic-bezier(0.33,0.66,0.66,1);-"+t+"-transition-duration:0;-"+t+"-transform:"+y+"0,0"+b,o.options.useTransition&&(n.style.cssText+=";-"+t+"-transition-timing-function:cubic-bezier(0.33,0.66,0.66,1)"),o[i+"ScrollbarWrapper"].appendChild(n),o[i+"ScrollbarIndicator"]=n),"h"==i?(o.hScrollbarSize=o.hScrollbarWrapper.clientWidth,o.hScrollbarIndicatorSize=e.max(e.round(o.hScrollbarSize*o.hScrollbarSize/o.scrollerW),8),o.hScrollbarIndicator.style.width=o.hScrollbarIndicatorSize+"px",o.hScrollbarMaxScroll=o.hScrollbarSize-o.hScrollbarIndicatorSize,o.hScrollbarProp=o.hScrollbarMaxScroll/o.maxScrollX):(o.vScrollbarSize=o.vScrollbarWrapper.clientHeight,o.vScrollbarIndicatorSize=e.max(e.round(o.vScrollbarSize*o.vScrollbarSize/o.scrollerH),8),o.vScrollbarIndicator.style.height=o.vScrollbarIndicatorSize+"px",o.vScrollbarMaxScroll=o.vScrollbarSize-o.vScrollbarIndicatorSize,o.vScrollbarProp=o.vScrollbarMaxScroll/o.maxScrollY),void o._scrollbarPos(i,!0)):void(o[i+"ScrollbarWrapper"]&&(s&&(o[i+"ScrollbarIndicator"].style[t+"Transform"]=""),o[i+"ScrollbarWrapper"].parentNode.removeChild(o[i+"ScrollbarWrapper"]),o[i+"ScrollbarWrapper"]=null,o[i+"ScrollbarIndicator"]=null))},_resize:function(){var e=this;setTimeout(function(){e.refresh()},r?200:0)},_pos:function(i,n){i=this.hScroll?i:0,n=this.vScroll?n:0,this.options.useTransform?this.scroller.style[t+"Transform"]=y+i+"px,"+n+"px"+b+" scale("+this.scale+")":(i=e.round(i),n=e.round(n),this.scroller.style.left=i+"px",this.scroller.style.top=n+"px"),this.x=i,this.y=n,this._scrollbarPos("h"),this._scrollbarPos("v")},_scrollbarPos:function(i,n){var o,s=this,r="h"==i?s.x:s.y;s[i+"Scrollbar"]&&(r=s[i+"ScrollbarProp"]*r,0>r?(s.options.fixedScrollbar||(o=s[i+"ScrollbarIndicatorSize"]+e.round(3*r),8>o&&(o=8),s[i+"ScrollbarIndicator"].style["h"==i?"width":"height"]=o+"px"),r=0):r>s[i+"ScrollbarMaxScroll"]&&(s.options.fixedScrollbar?r=s[i+"ScrollbarMaxScroll"]:(o=s[i+"ScrollbarIndicatorSize"]-e.round(3*(r-s[i+"ScrollbarMaxScroll"])),8>o&&(o=8),s[i+"ScrollbarIndicator"].style["h"==i?"width":"height"]=o+"px",r=s[i+"ScrollbarMaxScroll"]+(s[i+"ScrollbarIndicatorSize"]-o))),s[i+"ScrollbarWrapper"].style[t+"TransitionDelay"]="0",s[i+"ScrollbarWrapper"].style.opacity=n&&s.options.hideScrollbar?"0":"1",s[i+"ScrollbarIndicator"].style[t+"Transform"]=y+("h"==i?r+"px,0":"0,"+r+"px")+b)},_start:function(i){var n,s,r,a,l,c=this,u=o?i.touches[0]:i;S.scrolling=!1,clearTimeout(S.scrollTimer),!c.enabled||Draggables.dragging||i.touches.length<2||(c.options.onBeforeScrollStart&&c.options.onBeforeScrollStart.call(c,i),(c.options.useTransition||c.options.zoom)&&c._transitionTime(0),c.moved=!1,c.animating=!1,c.zoomed=!1,c.distX=0,c.distY=0,c.absDistX=0,c.absDistY=0,c.dirX=0,c.dirY=0,c.options.zoom&&o&&i.touches.length>1&&(a=e.abs(i.touches[0].pageX-i.touches[1].pageX),l=e.abs(i.touches[0].pageY-i.touches[1].pageY),c.touchesDistStart=e.sqrt(a*a+l*l),c.originX=e.abs(i.touches[0].pageX+i.touches[1].pageX-2*c.wrapperOffsetLeft)/2-c.x,c.originY=e.abs(i.touches[0].pageY+i.touches[1].pageY-2*c.wrapperOffsetTop)/2-c.y,c.options.onZoomStart&&c.options.onZoomStart.call(c,i)),c.options.momentum&&(c.options.useTransform?(n=getComputedStyle(c.scroller,null)[t+"Transform"].replace(/[^0-9-.,]/g,"").split(","),s=1*n[4],r=1*n[5]):(s=1*getComputedStyle(c.scroller,null).left.replace(/[^0-9-]/g,""),r=1*getComputedStyle(c.scroller,null).top.replace(/[^0-9-]/g,"")),(s!=c.x||r!=c.y)&&(c.options.useTransition?c._unbind("webkitTransitionEnd"):h(c.aniTime),c.steps=[],c._pos(s,r))),c.absStartX=c.x,c.absStartY=c.y,c.startX=c.x,c.startY=c.y,c.pointX=u.pageX,c.pointY=u.pageY,c.startTime=i.timeStamp||(new Date).getTime(),c.options.onScrollStart&&c.options.onScrollStart.call(c,i),c._bind(m),c._bind(g),c._bind(v),S.scrolling=!0)
},_move:function(i){var n,s,r,a=this,l=o?i.touches[0]:i,c=l.pageX-a.pointX,u=l.pageY-a.pointY,d=a.x+c,h=a.y+u,p=i.timeStamp||(new Date).getTime();return a.options.onBeforeScrollMove&&a.options.onBeforeScrollMove.call(a,i),a.options.zoom&&o&&i.touches.length>1?(n=e.abs(i.touches[0].pageX-i.touches[1].pageX),s=e.abs(i.touches[0].pageY-i.touches[1].pageY),a.touchesDist=e.sqrt(n*n+s*s),a.zoomed=!0,r=1/a.touchesDistStart*a.touchesDist*this.scale,r<a.options.scaleMin?r=.5*a.options.scaleMin*Math.pow(2,r/a.options.scaleMin):r>a.options.scaleMax&&(r=2*a.options.scaleMax*Math.pow(.5,a.options.scaleMax/r)),a.lastScale=r/this.scale,d=this.originX-this.originX*a.lastScale+this.x,h=this.originY-this.originY*a.lastScale+this.y,this.scroller.style[t+"Transform"]=y+d+"px,"+h+"px"+b+" scale("+r+")",void(a.options.onZoom&&a.options.onZoom.call(a,i))):(a.pointX=l.pageX,a.pointY=l.pageY,(d>0||d<a.maxScrollX)&&(d=a.options.bounce?a.x+c/2:d>=0||a.maxScrollX>=0?0:a.maxScrollX),(h>0||h<a.maxScrollY)&&(h=a.options.bounce?a.y+u/2:h>=0||a.maxScrollY>=0?0:a.maxScrollY),a.absDistX<6&&a.absDistY<6?(a.distX+=c,a.distY+=u,a.absDistX=e.abs(a.distX),void(a.absDistY=e.abs(a.distY))):(a.options.lockDirection&&(a.absDistX>a.absDistY+5?(h=a.y,u=0):a.absDistY>a.absDistX+5&&(d=a.x,c=0)),a.moved=!0,a._pos(d,h),a.dirX=c>0?-1:0>c?1:0,a.dirY=u>0?-1:0>u?1:0,p-a.startTime>300&&(a.startTime=p,a.startX=a.x,a.startY=a.y),void(a.options.onScrollMove&&a.options.onScrollMove.call(a,i))))},_end:function(i){if(!o||0==i.touches.length){var n,s,r,a,l,c,u=this,d=o?i.changedTouches[0]:i,h={dist:0,time:0},p={dist:0,time:0},f=(i.timeStamp||(new Date).getTime())-u.startTime,_=u.x,T=u.y;if(u._unbind(m),u._unbind(g),u._unbind(v),S.scrollTimer=setTimeout(function(){S.scrolling=!1},1e3),u.options.onBeforeScrollEnd&&u.options.onBeforeScrollEnd.call(u,i),u.zoomed)return c=u.scale*u.lastScale,c=Math.max(u.options.zoomMin,c),c=Math.min(u.options.zoomMax,c),u.lastScale=c/u.scale,u.scale=c,u.x=u.originX-u.originX*u.lastScale+u.x,u.y=u.originY-u.originY*u.lastScale+u.y,u.scroller.style[t+"TransitionDuration"]="200ms",u.scroller.style[t+"Transform"]=y+u.x+"px,"+u.y+"px"+b+" scale("+u.scale+")",u.zoomed=!1,u.refresh(),void(u.options.onZoomEnd&&u.options.onZoomEnd.call(u,i));if(!u.moved)return o&&(u.doubleTapTimer&&u.options.zoom?(clearTimeout(u.doubleTapTimer),u.doubleTapTimer=null,u.options.onZoomStart&&u.options.onZoomStart.call(u,i),u.zoom(u.pointX,u.pointY,1==u.scale?u.options.doubleTapZoom:1)):u.doubleTapTimer=setTimeout(function(){for(u.doubleTapTimer=null,n=d.target;1!=n.nodeType;)n=n.parentNode;"SELECT"!=n.tagName&&"INPUT"!=n.tagName&&"TEXTAREA"!=n.tagName&&(s=document.createEvent("MouseEvents"),s.initMouseEvent("click",!0,!0,i.view,1,d.screenX,d.screenY,d.clientX,d.clientY,i.ctrlKey,i.altKey,i.shiftKey,i.metaKey,0,null),s._fake=!0,n.dispatchEvent(s))},u.options.zoom?250:0)),u._resetPos(200),void(u.options.onTouchEnd&&u.options.onTouchEnd.call(u,i));if(i.scrollEvent=!0,300>f&&u.options.momentum&&(h=_?u._momentum(_-u.startX,f,-u.x,u.scrollerW-u.wrapperW+u.x,u.options.bounce?u.wrapperW:0):h,p=T?u._momentum(T-u.startY,f,-u.y,u.maxScrollY<0?u.scrollerH-u.wrapperH+u.y:0,u.options.bounce?u.wrapperH:0):p,_=u.x+h.dist,T=u.y+p.dist,(u.x>0&&_>0||u.x<u.maxScrollX&&_<u.maxScrollX)&&(h={dist:0,time:0}),(u.y>0&&T>0||u.y<u.maxScrollY&&T<u.maxScrollY)&&(p={dist:0,time:0})),h.dist||p.dist)return l=e.max(e.max(h.time,p.time),10),u.options.snap&&(r=_-u.absStartX,a=T-u.absStartY,e.abs(r)<u.options.snapThreshold&&e.abs(a)<u.options.snapThreshold?u.scrollTo(u.absStartX,u.absStartY,200):(snap=u._snap(_,T),_=snap.x,T=snap.y,l=e.max(snap.time,l))),u.scrollTo(_,T,l),void(u.options.onTouchEnd&&u.options.onTouchEnd.call(u,i));if(u.options.snap)return r=_-u.absStartX,a=T-u.absStartY,e.abs(r)<u.options.snapThreshold&&e.abs(a)<u.options.snapThreshold?u.scrollTo(u.absStartX,u.absStartY,200):(snap=u._snap(u.x,u.y),(snap.x!=u.x||snap.y!=u.y)&&u.scrollTo(snap.x,snap.y,snap.time)),void(u.options.onTouchEnd&&u.options.onTouchEnd.call(u,i));u._resetPos(200),u.options.onTouchEnd&&u.options.onTouchEnd.call(u,i)}},_resetPos:function(e){var i=this,n=i.x>=0?0:i.x<i.maxScrollX?i.maxScrollX:i.x,o=i.y>=0||i.maxScrollY>0?0:i.y<i.maxScrollY?i.maxScrollY:i.y;return n==i.x&&o==i.y?(i.moved&&(i.moved=!1,i.options.onScrollEnd&&i.options.onScrollEnd.call(i)),i.hScrollbar&&i.options.hideScrollbar&&("webkit"==t&&(i.hScrollbarWrapper.style[t+"TransitionDelay"]="300ms"),i.hScrollbarWrapper.style.opacity="0"),void(i.vScrollbar&&i.options.hideScrollbar&&("webkit"==t&&(i.vScrollbarWrapper.style[t+"TransitionDelay"]="300ms"),i.vScrollbarWrapper.style.opacity="0"))):void i.scrollTo(n,o,e||0)},_wheel:function(e){var t,i,n,o,s,r=this;return"wheelDeltaX"in e?(t=e.wheelDeltaX/12,i=e.wheelDeltaY/12):t=i="detail"in e?3*-e.detail:-e.wheelDelta,"zoom"==r.options.wheelAction?(s=r.scale*Math.pow(2,1/3*(i?i/Math.abs(i):0)),i<r.options.zoomMin&&(i=r.options.zoomMin),i>r.options.zoomMax&&(i=r.options.zoomMax),void(i!=r.scale&&(!r.wheelZoomCount&&r.options.onZoomStart&&r.options.onZoomStart.call(r,e),r.wheelZoomCount++,r.zoom(e.pageX,e.pageY,i,400),setTimeout(function(){r.wheelZoomCount--,!r.wheelZoomCount&&r.options.onZoomEnd&&r.options.onZoomEnd.call(r,e)},400)))):(n=r.x+t,o=r.y+i,n>0?n=0:n<r.maxScrollX&&(n=r.maxScrollX),o>0?o=0:o<r.maxScrollY&&(o=r.maxScrollY),void r.scrollTo(n,o,0))},_mouseout:function(e){var t=e.relatedTarget;if(!t)return void this._end(e);for(;t=t.parentNode;)if(t==this.wrapper)return;this._end(e)},_transitionEnd:function(e){var t=this;e.target==t.scroller&&(t._unbind("webkitTransitionEnd"),t._startAni())},_startAni:function(){var t,i,n=this,o=n.x,s=n.y,r=(new Date).getTime();if(!n.animating)return n.steps.length?(t=n.steps.shift(),t.x==o&&t.y==s&&(t.time=0),n.animating=!0,n.moved=!0,n.options.useTransition?(n._transitionTime(t.time),n._pos(t.x,t.y),n.animating=!1,void(t.time?n._bind("webkitTransitionEnd"):n._resetPos(0))):void function a(){var l,c,u=(new Date).getTime();return u>=r+t.time?(n._pos(t.x,t.y),n.animating=!1,n.options.onAnimationEnd&&n.options.onAnimationEnd.call(n),void n._startAni()):(u=(u-r)/t.time-1,i=e.sqrt(1-u*u),l=(t.x-o)*i+o,c=(t.y-s)*i+s,n._pos(l,c),void(n.animating&&(n.aniTime=d(a))))}()):void n._resetPos(400)},_transitionTime:function(e){e+="ms",this.scroller.style[t+"TransitionDuration"]=e,this.hScrollbar&&(this.hScrollbarIndicator.style[t+"TransitionDuration"]=e),this.vScrollbar&&(this.vScrollbarIndicator.style[t+"TransitionDuration"]=e)},_momentum:function(t,i,n,o,s){var r=6e-4,a=e.abs(t)/i,l=a*a/(2*r),c=0,u=0;return t>0&&l>n?(u=s/(6/(l/a*r)),n+=u,a=a*n/l,l=n):0>t&&l>o&&(u=s/(6/(l/a*r)),o+=u,a=a*o/l,l=o),l*=0>t?-1:1,c=a/r,{dist:l,time:e.round(c)}},_offset:function(e){for(var t=-e.offsetLeft,i=-e.offsetTop;e=e.offsetParent;)t-=e.offsetLeft,i-=e.offsetTop;return e!=this.wrapper&&(t*=this.scale,i*=this.scale),{left:t,top:i}},_snap:function(t,i){var n,o,s,r,a,l,c=this;for(s=c.pagesX.length-1,n=0,o=c.pagesX.length;o>n;n++)if(t>=c.pagesX[n]){s=n;break}for(s==c.currPageX&&s>0&&c.dirX<0&&s--,t=c.pagesX[s],a=e.abs(t-c.pagesX[c.currPageX]),a=a?e.abs(c.x-t)/a*500:0,c.currPageX=s,s=c.pagesY.length-1,n=0;s>n;n++)if(i>=c.pagesY[n]){s=n;break}return s==c.currPageY&&s>0&&c.dirY<0&&s--,i=c.pagesY[s],l=e.abs(i-c.pagesY[c.currPageY]),l=l?e.abs(c.y-i)/l*500:0,c.currPageY=s,r=e.round(e.max(a,l))||200,{x:t,y:i,time:r}},_bind:function(e,t,i){(t||this.scroller).addEventListener(e,this,!!i)},_unbind:function(e,t,i){(t||this.scroller).removeEventListener(e,this,!!i)},destroy:function(){var e=this;e.scroller.style[t+"Transform"]="",e.hScrollbar=!1,e.vScrollbar=!1,e._scrollbar("h"),e._scrollbar("v"),e._unbind(p,window),e._unbind(f),e._unbind(m),e._unbind(g),e._unbind(v),e.options.hasTouch&&(e._unbind("mouseout",e.wrapper),e._unbind(_)),e.options.useTransition&&e._unbind("webkitTransitionEnd"),e.options.checkDOMChanges&&clearInterval(e.checkDOMTime),e.options.onDestroy&&e.options.onDestroy.call(e)},refresh:function(){var n,o=this,s=0,r=0;if(S.scrolling=!1,o.scale<o.options.zoomMin&&(o.scale=o.options.zoomMin),o.wrapperW=o.wrapper.clientWidth||1,o.wrapperH=o.wrapper.clientHeight||1,o.scrollerW=e.round(o.scroller.offsetWidth*o.scale),o.scrollerH=e.round(o.scroller.offsetHeight*o.scale),o.maxScrollX=o.wrapperW-o.scrollerW,o.maxScrollY=o.wrapperH-o.scrollerH,o.dirX=0,o.dirY=0,o.hScroll=o.options.hScroll&&o.maxScrollX<0,o.vScroll=o.options.vScroll&&(!o.options.bounceLock&&!o.hScroll||o.scrollerH>o.wrapperH),o.hScrollbar=o.hScroll&&o.options.hScrollbar,o.vScrollbar=o.vScroll&&o.options.vScrollbar&&o.scrollerH>o.wrapperH,n=o._offset(o.wrapper),o.wrapperOffsetLeft=-n.left,o.wrapperOffsetTop=-n.top,"string"==typeof o.options.snap)for(o.pagesX=[],o.pagesY=[],els=o.scroller.querySelectorAll(o.options.snap),i=0,l=els.length;i<l;i++)s=o._offset(els[i]),s.left+=o.wrapperOffsetLeft,s.top+=o.wrapperOffsetTop,o.pagesX[i]=s.left<o.maxScrollX?o.maxScrollX:s.left*o.scale,o.pagesY[i]=s.top<o.maxScrollY?o.maxScrollY:s.top*o.scale;else if(o.options.snap){for(o.pagesX=[];s>=o.maxScrollX;)o.pagesX[r]=s,s-=o.wrapperW,r++;for(o.maxScrollX%o.wrapperW&&(o.pagesX[o.pagesX.length]=o.maxScrollX-o.pagesX[o.pagesX.length-1]+o.pagesX[o.pagesX.length-1]),s=0,r=0,o.pagesY=[];s>=o.maxScrollY;)o.pagesY[r]=s,s-=o.wrapperH,r++;o.maxScrollY%o.wrapperH&&(o.pagesY[o.pagesY.length]=o.maxScrollY-o.pagesY[o.pagesY.length-1]+o.pagesY[o.pagesY.length-1])}o._scrollbar("h"),o._scrollbar("v"),o.zoomed||(o.scroller.style[t+"TransitionDuration"]="0",o._resetPos(200))},scrollTo:function(e,t,i,n){var o,s,r=this,a=e;for(r.stop(),a.length||(a=[{x:e,y:t,time:i,relative:n}]),o=0,s=a.length;s>o;o++)a[o].relative&&(a[o].x=r.x-a[o].x,a[o].y=r.y-a[o].y),r.steps.push({x:a[o].x,y:a[o].y,time:a[o].time||0});r._startAni()},scrollToElement:function(t,i){var n,o=this;t=t.nodeType?t:o.scroller.querySelector(t),t&&(n=o._offset(t),n.left+=o.wrapperOffsetLeft,n.top+=o.wrapperOffsetTop,n.left=n.left>0?0:n.left<o.maxScrollX?o.maxScrollX:n.left,n.top=n.top>0?0:n.top<o.maxScrollY?o.maxScrollY:n.top,i=void 0===i?e.max(2*e.abs(n.left),2*e.abs(n.top)):i,o.scrollTo(n.left,n.top,i))},scrollToPage:function(e,t,i){var n,o,s=this;s.options.snap?(e="next"==e?s.currPageX+1:"prev"==e?s.currPageX-1:e,t="next"==t?s.currPageY+1:"prev"==t?s.currPageY-1:t,e=0>e?0:e>s.pagesX.length-1?s.pagesX.length-1:e,t=0>t?0:t>s.pagesY.length-1?s.pagesY.length-1:t,s.currPageX=e,s.currPageY=t,n=s.pagesX[e],o=s.pagesY[t]):(n=-s.wrapperW*e,o=-s.wrapperH*t,n<s.maxScrollX&&(n=s.maxScrollX),o<s.maxScrollY&&(o=s.maxScrollY)),s.scrollTo(n,o,i||400)},disable:function(){this.stop(),this._resetPos(0),this.enabled=!1,this._unbind(m),this._unbind(g),this._unbind(v)},enable:function(){this.enabled=!0},stop:function(){this.options.useTransition?this._unbind("webkitTransitionEnd"):h(this.aniTime),this.steps=[],this.moved=!1,this.animating=!1},zoom:function(e,i,n,o){var s=this,r=n/s.scale;s.options.useTransform&&(s.zoomed=!0,o=void 0===o?200:o,e=e-s.wrapperOffsetLeft-s.x,i=i-s.wrapperOffsetTop-s.y,s.x=e-e*r+s.x,s.y=i-i*r+s.y,s.scale=n,s.refresh(),s.x=s.x>0?0:s.x<s.maxScrollX?s.maxScrollX:s.x,s.y=s.y>0?0:s.y<s.maxScrollY?s.maxScrollY:s.y,s.scroller.style[t+"TransitionDuration"]=o+"ms",s.scroller.style[t+"Transform"]=y+s.x+"px,"+s.y+"px"+b+" scale("+n+")",s.zoomed=!1)},isReady:function(){return!this.moved&&!this.zoomed&&!this.animating}},"undefined"!=typeof exports?exports.iScroll=S:window.iScroll=S}(),define("iscroll",function(e){return function(){var t;return t||e.iScroll}}(this));var webHelpModule={currentContext:"default",displayWebHelp:function(){var e=__jrsConfigs__.webHelpModuleState;if(e){var t=e.hostURL+"/"+e.pagePrefix+webHelpModule.getPageForContext();window.name="";var i=window.open(t,"MCWebHelp");i.focus()}},getPageForContext:function(){return __jrsConfigs__.webHelpModuleState.contextMap[webHelpModule.currentContext]},setCurrentContext:function(e){webHelpModule.currentContext=e}};define("components.webHelp",["jrs.configs"],function(e){return function(){var t;return t||e.webHelpModule}}(this));var layoutModule={ELEMENT_CONTEXTMENU:"element:contextmenu",SIZEABLE_PATTERN:".sizeable",SIZER_PATTERN:".sizer",RESIZE_OVERLAY_PATTERN:".resizeOverlay",MOVEABLE_PATTERN:".moveable",MOVER_PATTERN:".mover",MINIMIZER_PATTERN:".maximized .minimize",MINIMIZED_PATTERN:".minimized .minimize",TRUNCATE_PATTERN:".trunc",TREE_LEAF_PATTERN:"a.>node",TREE_CONTAINER_PATTERN:".collapsible",TOOLBAR_CAPSULE_PATTERN:"#toolbar .capsule",NAVIGATION_MUTTON_PATTERN:"li.mutton",NAVIGATION_PATTERN:"#navigationOptions li",NAVIGATION_HOVER_PATTERN:"#navigationOptions li.over",META_LINKS_PATTERN:"#metaLinks #main_logOut_link",BUTTON_SET_BUTTON:".buttonSet > *",TABSET_TAB_PATTERN:".tab",BUTTON_PATTERN:".button",PRESSED_PATTERN:".pressed",SELECTED_PATTERN:".selected",LIST_ITEM_PATTERN:".list.responsive > li",LIST_ITEM_WRAP_PATTERN:".wrap",DISCLOSURE_BUTTON_PATTERN:".disclosure",MENU_LIST_PATTERN:"#menu li",SEPARATOR_PATTERN:".separator",MESSAGE_PATTERN:".message",MESSAGE_WARNING_PATTERN:".message.warning",MESSAGE_SUCCESS_PATTERN:".message.success",DETAILS_PATTERN:".details",COLUMN_NODE_WRAPPER_PATTERN:".node > .wrap > .column",COLUMN_LEAF_WRAPPER_PATTERN:".leaf > .wrap > .column",SEARCH_LOCKUP_PATTERN:".searchLockup",DIALOG_PATTERN:".dialog",DIALOG_LOADING_PATTERN:".dialog.loading",SWIPE_SCROLL_PATTERN:".swipeScroll",SCROLL_WRAPPER_PATTERN:".scrollWrapper",ADHOC_MODE_OPTION_CLASS:"tab mode horizontal",DRAGGING_CLASS:"dragging",COPY_CLASS:"copy",PRESSED_CLASS:"pressed",SELECTED_CLASS:"selected",DISABLED_CLASS:"disabled",HOVERED_CLASS:"over",ERROR_CLASS:"error",SUCCESS_CLASS:"error",MESSAGE_CLASS:"error",UP_CLASS:"up",LAST_CLASS:"last",FIRST_CLASS:"first",SCHEDULED_CLASS:"scheduled",NODE_CLASS:"node",LEAF_CLASS:"leaf",ICON_CLASS:"icon",OPEN_CLASS:"open",CLOSED_CLASS:"closed",LOADING_CLASS:"loading",NOTHING_TO_DISPLAY_CLASS:"nothingToDisplay",COLLAPSIBLE_CLASS:"collapsible",RESPONSIVE_CLASS:"responsive",HIDDEN_CLASS:"hidden",NO_GENERATORS_CLASS:"noGenerators",STACKTRACE_CLASS:"stacktrace",EMPHASIS_CLASS:"emphasis",ASCENDING_CLASS:"ascending",DESCENDING_CLASS:"descending",CANCELLABLE_CLASS:"cancellable",DROP_TARGET_CLASS:"dropTarget",BUTTON_CLASS:"button",ONE_COLUMN_CLASS:"oneColumn",CONTROL_PAGE_CLASS:"controlPage",DISABLED_ATTR_NAME:"disabled",SELECTED_ATTR_NAME:"selected",OPEN_ATTR_NAME:"open",CLOSED_ATTR_NAME:"closed",READONLY_ATTR_NAME:"readonly",DIMMER_ID:"pageDimmer",PAGE_BODY_ID:"display",MENU_ID:"menu",MAIN_NAVIGATION_ID:"mainNavigation",MAIN_NAVIGATION_HOME_ITEM_ID:"main_home",MAIN_NAVIGATION_LIBRARY_ITEM_ID:"main_library",META_LINK_LOGOUT_ID:"main_logOut_link",SCROLL_SENSITIVITY:50,DND_MOVABLE_ZINDEX:2e3,DIMMER_Z_INDEX:900,FOLDERS_RESIZABLE_PANEL_ID:"folders",FILTERS_RESIZABLE_PANEL_ID:"filters",PROPERTIES_RESIZABLE_PANEL_ID:"properties",FIELDS_RESIZABLE_PANEL_ID:"fields",FOLDERS_RESIZABLE_PANEL_COOKIE_NAME:"foldersPanelWidth",FOLDERS_MINIMIZED_PANEL_COOKIE_NAME:"foldersMinimized",FILTERS_RESIZABLE_PANEL_COOKIE_NAME:"filtersPanelWidth",FILTERS_MINIMIZED_PANEL_COOKIE_NAME:"filtersMinimized",PROPERTIES_RESIZABLE_PANEL_COOKIE_NAME:"propertiesPanelWidth",PROPERTIES_MINIMIZED_PANEL_COOKIE_NAME:"propertiesMinimized",FIELDS_RESIZABLE_PANEL_COOKIE_NAME:"fieldsPanelWidth",FIELDS_MINIMIZED_PANEL_COOKIE_NAME:"fieldsMinimized",PANEL_WIDTH:"PanelWidth",MINIMIZED:"Minimized",PANEL_STATE_CHANGED_MANUALLY:"PSCM",scrolls:$H(),initialize:function(e){e=$(e)||$(document.body),new Truncator(e.select(layoutModule.TRUNCATE_PATTERN)),isIE7()&&this.fixIE7Sizes(),e.select(this.SIZEABLE_PATTERN).each(this.createSizer.bind(this)),e.select(this.MOVEABLE_PATTERN).each(this.createMover.bind(this)),e.select(".centered_horz,.centered_vert").each(function(e){var t=parseFunc(e,"centered_fn_");t||(t=centerElement),t(e,{horz:e.match(".centered_horz"),vert:e.match(".centered_vert")})}),null!=$(layoutModule.DIMMER_ID)&&($(layoutModule.DIMMER_ID).style.zIndex=layoutModule.DIMMER_Z_INDEX),jQuery.datepicker&&jQuery.datepicker.initialized&&(jQuery.datepicker.initialized=!1),jQuery(function(){0===jQuery("#ajaxbuffer").length&&jQuery("body").append(jQuery('<div id="ajaxbuffer" style="display:none"></div>'))}),jQuery(window).resize(function(){this.resizeTo&&clearTimeout(this.resizeTo),this.resizeTo=setTimeout(function(){jQuery(this).trigger("resizeEnd")},500)})},updateOnOrientation:function(){},isVisible:function(e){return e&&!$(e).hasClassName(layoutModule.HIDDEN_CLASS)},createScroller:function(e,t){if(e){e=e.identify?e:$(e);var i=layoutModule.scrolls.get(e.identify());i&&i.destroy();var n=["mainTableContainer","resultsContainer","filtersPanel","foldersPodContent"];e.identify().startsWith("iframeScroll_")&&n.push(e.identify()),t=Object.extend({hideScrollbar:!1,useTransform:!n.include(e.identify()),bounce:["resultsContainer"].include(e.identify())},t||{});var o=new iScroll(e,t);return layoutModule.scrolls.set(e.identify(),o),o}return null},createSizer:function(e,t){e=$(e);var i=t&&t.sizer?$(t.sizer):e.down(this.SIZER_PATTERN);if(i&&!matchMeOrUp(e,"."+layoutModule.HIDDEN_CLASS)){var n=this.getSizerType(i),o=this.alignmentModule.getSizerAlignment(i,n),s=new Draggable(i);s.resizeablePanel=e,s.primaryPanel=$(e).siblings().find(function(e){return e.match(".primary")}),t&&t.fillerPattern&&(s.filler=$(jQuery(e).find(t.fillerPattern)[0]));var r=function(){return function(e){s.pointerX=e.pointerX(),s.pointerY=e.pointerY()}}();i.observe("mousedown",r),jQuery(i).bind({touchstart:function(e){r(e.originalEvent),this.style.background="#666",this.style.zIndex=9},touchend:function(){this.style.background="transparent"}}),s.sizerType=n,s.alignment=o,s.options={constraint:"diagonal"===n?"":n,onStart:layoutModule.beginSizerDragging.bind(layoutModule),onDrag:isIPad()?doNothing:layoutModule.respondToDrag.bind(layoutModule),onEnd:layoutModule.endSizerDragging.bind(layoutModule)}}},getSizerType:function(e){return e.match(".horizontal")&&"horizontal"||e.match(".vertical")&&"vertical"||e.match(".diagonal")&&"diagonal"},alignmentModule:{alignments:[["left","right"],["top","bottom"]],alignmentIndexes:{horizontal:0,vertical:1},dimensions:["width","height"],getSizerAlignment:function(e,t){var i=["",""];if("diagonal"===t)return["right","bottom"];var n=this.alignmentIndexes[t],o=this.alignments[n],s=[0,1].map(function(t){return parseInt(e.getStyle(o[t]))}),r=isNaN(s[0])||s[0]>s[1]?o[1]:o[0];return i[n]=r,i}},beginSizerDragging:function(e,t){var i=e.element;e.parentOffset=[i.getStyle(e.alignment[0]),i.getStyle(e.alignment[1])],e.offsetUnit="px",e.pointerX=e.pointerX||t.pointerX(),e.pointerY=e.pointerY||t.pointerY(),e.element.addClassName(layoutModule.DRAGGING_CLASS),$$(layoutModule.RESIZE_OVERLAY_PATTERN).each(function(e){e.removeClassName(layoutModule.HIDDEN_CLASS)})},endSizerDragging:function(e,t){layoutModule.respondToDrag(e,t),e.element.removeClassName(layoutModule.DRAGGING_CLASS),$$(layoutModule.RESIZE_OVERLAY_PATTERN).each(function(e){e.addClassName(layoutModule.HIDDEN_CLASS)}),document.fire("dragger:sizer",{targetEvent:t,element:e.element}),jQuery(window).trigger("resize",{targetEvent:t,element:e.element})},respondToDrag:function(e,t){"vertical"!==e.sizerType&&this.resizeOnDrag(e,t,"horizontal"),"horizontal"!==e.sizerType&&this.resizeOnDrag(e,t,"vertical")},resizeOnDrag:function(e,t,i){var n={};n.axis="horizontal"==i?0:1,n.myAlignments=this.alignmentModule.alignments[n.axis],n.dimension=this.alignmentModule.dimensions[n.axis],n.sizeProperty=n.axis?"offsetHeight":"offsetWidth";{var o=n.axis?"pointerY":"pointerX",s={pointerY:"clientY",pointerX:"clientX"};e.element}n.sizeableAnchorage=e.alignment[n.axis]===n.myAlignments[0]?n.myAlignments[1]:n.myAlignments[0];var r=t.changedTouches?t.changedTouches[0][s[o]]:t[o](),a=e[o]?r-e[o]:0;a=e.alignment[n.axis]===n.myAlignments[1]?a:0-a,n.dragDelta=a,e[o]=t[o](),this.resizePanelsOnDrag(e,n)},resizePanelsOnDrag:function(e,t){var i=this.getSizeTracker();i.checkpoint(e.resizeablePanel[t.sizeProperty]),e.filler&&!e["fillerDelta"+t.dimension]&&(e["fillerDelta"+t.dimension]=e.resizeablePanel[t.sizeProperty]-e.filler[t.sizeProperty]);var n=getDimensionInPx(e.resizeablePanel,t.dimension);if((this.isInBounds(e,t)||!this.isInBounds(e,t)&&t.dragDelta<0)&&(e.resizeablePanel.setStyle(t.dimension+":"+(n+t.dragDelta)+"px"),e.filler&&e.filler.setStyle(t.dimension+":"+(n+t.dragDelta-e["fillerDelta"+t.dimension])+"px")),window.localStorage&&localStorage.setItem(e.resizeablePanel.identify()+layoutModule.PANEL_WIDTH,e.resizeablePanel.getWidth()),!i.changed(e.resizeablePanel[t.sizeProperty])){var o=getActualDimension(e.resizeablePanel,t.dimension);return e.alignment[t.axis]!=t.myAlignments[0]&&(e.element.style[t.myAlignments[0]]=""),e.element.setStyle(e.alignment[t.axis]+":"+e.parentOffset[t.axis]),e.resizeablePanel.setStyle(t.dimension+":"+o+"px"),e.primaryPanel&&e.primaryPanel.style.zIndex==e.resizeablePanel.style.zIndex&&e.primaryPanel.setStyle(t.sizeableAnchorage+":"+o+"px"),void(e.filler&&e.filler.setStyle(t.dimension+":"+(o-e["fillerDelta"+t.dimension])+"px"))}var s;if(e.resizeablePanel.currentStyle?s=e.resizeablePanel.currentStyle.minWidth:(s=document.defaultView.getComputedStyle(e.resizeablePanel,null),s=s["min-width"]?s["min-width"]:s.minWidth),s=s.substring(0,s.indexOf("px")),e.primaryPanel&&e.primaryPanel.style.zIndex==e.resizeablePanel.style.zIndex){var r=getDimensionInPx(e.primaryPanel,t.sizeableAnchorage)+t.dragDelta,a=s>r?s:r;e.primaryPanel.setStyle(t.sizeableAnchorage+":"+a+"px")}e.alignment[t.axis]!=t.myAlignments[0]&&(e.element.style[t.myAlignments[0]]=""),e.element.setStyle(e.alignment[t.axis]+":"+e.parentOffset[t.axis]),jQuery("body").trigger("layout_update")},isInBounds:function(e,t){var i,n,o,s,r,a=jQuery(e.primaryPanel),l=a.parent(),c=t.dimension;if(e.primaryPanel){c=c.replace(c.charAt(0),c.charAt(0).toUpperCase()),r=jQuery.fn["outer"+c],s=r.call(a,!0)-r.call(a),i=parseInt(a.css("min-"+t.dimension)),isNaN(i)&&(i=0),n=parseInt(a.css(t.sizeableAnchorage)),o=parseInt(l.css(t.dimension));var u=l.children("div:visible:not(.minimized)");return jQuery.each(u,function(){var t=jQuery(this),i=0===t.width()||0===t.height();e.resizeablePanel==this||e.primaryPanel==this||i||(o-=r.call(t,!0))}),o-n-t.dragDelta>i+s}return!0},getSizeTracker:function(){return lastSize=-1,{checkpoint:function(e){lastSize=e},changed:function(e){return e!=lastSize}}},createMover:function(e){var t=e.down(this.MOVER_PATTERN);if(t&&!matchMeOrUp(e,"."+layoutModule.HIDDEN_CLASS)){var i=Math.max(this.DND_MOVABLE_ZINDEX,e.getStyle("zIndex"));new Draggable(e,{handle:t,zindex:i})}},maximize:function(e,t){function i(){o.removeClassName("minimized_if_vertical_orientation"),o.removeClassName("minimized"),o.addClassName("maximized"),window.localStorage&&localStorage.setItem(o.identify()+layoutModule.MINIMIZED,!1),jQuery("div.content",o).show()}t=!0;var n=e.hasClassName?e:$(e),o=n.hasClassName("column")?n:n.up(".column");0===window.orientation&&("filters"==o.id&&layoutModule.minimize(document.getElementById("fields")),"fields"==o.id&&layoutModule.minimize(document.getElementById("filters")));var s,r=layoutModule.alignmentModule.alignments[0],a=r.map(function(e){return parseInt(o.getStyle(e))}),l=r[0===a[0]?0:1],c=o.siblings().find(function(e){return e.match(".primary")});c&&window.localStorage&&(s=localStorage.getItem(o.identify()+layoutModule.PANEL_WIDTH)),s&&!isNaN(s)&&(s+="px",o.setStyle({width:s}),t?(c.style[l]=s,o.removeClassName("minimized_if_vertical_orientation"),o.removeClassName("minimized"),o.addClassName("maximized"),window.localStorage&&localStorage.setItem(o.identify()+layoutModule.MINIMIZED,!1),jQuery("div.content",o).show(),jQuery("div.vtitle",o).hide()):(new Effect.Morph(c,{style:l+":"+s,duration:.6,afterFinish:function(){jQuery("body").trigger("layout_update")}}),new Effect.Opacity(o,{to:0,from:1,duration:.3,queue:{position:"front",scope:"sidePanel"},afterFinish:i}),new Effect.Opacity(o,{to:1,from:0,duration:.3,queue:{position:"end",scope:"sidePanel"}}))),jQuery(o).find(".sizer").show(),jQuery("body").trigger("layout_update",{elem:e.parentNode,type:"panel-maximize"}),jQuery(".column.secondary > div.content > .body").show().height()},minimize:function(e,t){function i(){r.addClassName("minimized"),r.removeClassName("maximized"),r.removeClassName("minimized_if_vertical_orientation"),window.localStorage&&localStorage.setItem(r.identify()+layoutModule.MINIMIZED,!0),jQuery("div.content",r).hide()}var n,o;t=!0;var s=e.hasClassName?e:$(e),r=s.hasClassName("column")?s:s.up(".column"),a=window.localStorage&&"true"==localStorage.getItem(r.identify()+layoutModule.MINIMIZED);!a&&window.localStorage&&localStorage.setItem(r.identify()+layoutModule.PANEL_WIDTH,r.getWidth());var l=layoutModule.alignmentModule.alignments[0],c=l.map(function(e){return parseInt(r.getStyle(e))}),u=l[0===c[0]?0:1];if(n=r.siblings().find(function(e){return e.match(".primary")}))if(o=n.getStyle(u),t){var d=jQuery("div.title",r).eq(0),h=jQuery("div.vtitle",r),p=d.html(),f=d.width();f=7*jQuery.trim(d.text()).length,n.style[u]="24px",r.addClassName("minimized"),r.removeClassName("maximized"),r.removeClassName("minimized_if_vertical_orientation"),window.localStorage&&localStorage.setItem(r.identify()+layoutModule.MINIMIZED,!0),h.length||(h=jQuery('<div class="vtitle"></div>').appendTo(r),h.on("mouseup touchend",function(e){layoutModule.maximize(h[0]),e.preventDefault()}),h.html(jQuery.trim(p)).width(f+24)),isIE7()||isIE8()||isIE9()?h.css({top:0,left:0}):h.css("top",f+24+"px"),location.href.indexOf("nui=1")>0?h.hide():h.show(),jQuery("div.content",r).hide()}else new Effect.Morph(n,{style:u+":0px",duration:.6,afterFinish:function(){jQuery("body").trigger("layout_update")}}),new Effect.Opacity(r,{to:0,from:1,duration:.3,queue:{position:"front",scope:"sidePanel"},afterFinish:i}),new Effect.Opacity(r,{to:1,from:0,duration:.3,queue:{position:"end",scope:"sidePanel"}});jQuery(r).find(".sizer").hide(),jQuery("body").trigger("layout_update",{elem:e.parentNode,type:"panel-minimize"})},resizeOnClient:function(e,t,i){var n,o=[],s=jQuery("#"+t),r=jQuery("#display").width()-20-parseInt(s.width());jQuery.each([e,i],function(e,t){t&&(o.push({id:t,isLeft:0===e,jo:jQuery("#"+t),width:window.localStorage?parseInt(localStorage.getItem(t+layoutModule.PANEL_WIDTH)):250}),o[e].minimized=window.localStorage?localStorage.getItem(t+layoutModule.MINIMIZED):!1,o[e].minimized=Object.isUndefined(o[e].minimized)?o[e].jo.hasClass("minimized"):"true"==o[e].minimized,n=o[e].jo[0].currentStyle?o[e].jo[0].currentStyle.minWidth:document.defaultView.getComputedStyle(o[e].jo[0],null).minWidth,o[e].minWidth=(n&&n.indexOf("px"))>0?n.substring(0,n.indexOf("px")):200,o[e].width=o[e].width?o[e].width:o[e].jo.width(),r-=o[e].width)});var a=0>r?Math.abs(r):0;r=0,jQuery.each(o,function(e,t){t.jo.length&&t.jo.is(":visible")&&(t.minimized?(t.jo.removeClass("maximized").addClass("minimized"),layoutModule.minimize(t.jo[0],!0)):(1==e&&!o[0].minimized&&o[0].jo.is(":visible")&&(t.width-=a,t.width<t.minWidth&&(r=t.width-t.minWidth,t.width=t.minWidth)),t.jo.removeClass("minimized").addClass("maximized"),s.css(t.isLeft?"left":"right",t.width+"px"),t.jo.css("width",t.width+"px")))}),0!==r&&(o[0].width+=r,o[0].width=o[0].width<o[0].minWidth?o[0].minWidth:o[0].width,s.css("left",o[0].width+"px"),o[0].jo.css("width",o[0].width+"px"))},autoMaximize:function(e){var t=window.localStorage?localStorage.getItem(e.identify()+layoutModule.MINIMIZED):"false";"true"==t?e.hasClassName("minimized")&&layoutModule.maximize(e,!0):!e.hasClassName("minimized")&&layoutModule.minimize(e,!0)},autoMinimize:function(e){var t=window.localStorage?localStorage.getItem(e.identify()+layoutModule.MINIMIZED):"false";"false"==t?layoutModule.minimize(e,!0):e.removeClassName("minimized")},fixIE7Sizes:function(){$$(".control.tabSet.buttons.vertical").each(function(e){e.immediateDescendants().each(function(t){t.style.width=e.clientWidth||e.offsetWidth})})},storePanelWidth:function(e,t){window.localStorage&&localStorage.setItem(e+layoutModule.PANEL_WIDTH,t)},getPanelWidth:function(e){return window.localStorage?localStorage.getItem(e+layoutModule.PANEL_WIDTH):void 0},getPanelMinimizedState:function(e){return window.localStorage?localStorage.getItem(e+layoutModule.MINIMIZED):void 0},storePanelMinimizedState:function(e,t){window.localStorage&&localStorage.setItem(e+layoutModule.MINIMIZED,t.toString())},manuallyChangePanelState:function(e,t,i){window.localStorage&&localStorage.setItem(e+layoutModule.PANEL_STATE_CHANGED_MANUALLY+t,i)},panelStateWasManuallyChanged:function(e,t){return window.localStorage?"true"===localStorage.getItem(e+layoutModule.PANEL_STATE_CHANGED_MANUALLY+t):!1}};define("core.layout",["jquery","prototype","utils.common","dragdrop.extra","tools.truncator","iscroll","components.webHelp"],function(e){return function(){var t;return t||e.layoutModule}}(this)),define("bundle",["require","common/transport/request","common/config/requestSettings","underscore","jrs.configs"],function(e){"use strict";var t=e("common/transport/request"),i=e("common/config/requestSettings"),n=e("underscore"),o=e("jrs.configs"),s=o.contextPath+"/rest_v2/bundles",r="all",a=function(e,o){var a=r===e?"?expanded=true":"/"+e,l=n.extend({},i,{type:"GET",dataType:"json",url:s+a});t(l).then(function(t){o(r!==e?t:n(t).reduce(function(e,t){return n.extend(e,t)},{}))})};return a.load=function(e,t,i,n){return n.isBuild?void i():void a(e,i)},a});var dialogs={};dialogs.systemConfirm={container:null,message:null,show:function(e,t){window.isEmbeddedDesigner?jQuery(document).trigger("adhocDesigner:notification",[e,t]):(this.container=this.container||jQuery("#systemMessageConsole").on("mouseup touchend",function(){dialogs.systemConfirm.container.slideUp()}),this.message=this.message||document.getElementById("systemMessage"),this.closeText||(this.closeText=this.message.innerHTML.toLowerCase()),this.message.innerHTML=xssUtil.escape(e)+' <span>| <a href="#">'+xssUtil.escape(this.closeText)+"</a></span>",dialogs.systemConfirm.container.slideDown(),setTimeout("dialogs.systemConfirm.hide()",t?t:2e3))},showWarning:function(e,t){e='<span class="warning">'+e+"</span>",this.show(e,t)},hide:function(){dialogs.systemConfirm.container&&dialogs.systemConfirm.container.slideUp()}},dialogs.errorPopup={_dom:null,_content:null,_DOM_ID:"standardAlert",_CONTENT_ID:"errorPopupContents",_PAGE_CONTENT_PATTERN:"#errorPageContent",_DIALOG_WIDTH:"546px",_DIALOG_HEIGHT:"350px",clickHandler:null,show:function(e,t,i){i||(i={});var n=Builder.node("DIV",{style:"display:none"});n.innerHTML=e,document.body.insertBefore(n,document.body.firstChild);var o=$$(this._PAGE_CONTENT_PATTERN)[0],s=o?o.innerHTML:e,r=o&&o.innerHTML;if(n.remove(),s&&(this._dom||(this._dom=$(this._DOM_ID),this._content=$(this._CONTENT_ID),this.clickHandler=this._clickHandler.bindAsEventListener(this)),this._dom)){var a=s;r||(a=Builder.node("P",{"class":"message"}),a.update(xssUtil.escape(s,{softHTMLEscape:!0}))),this._content.update(xssUtil.escape(a,{softHTMLEscape:!0})),this._dom.observe("click",this.clickHandler),this._dom.setStyle({height:i.height||this._DIALOG_HEIGHT,width:i.width||this._DIALOG_WIDTH}),t&&this._dom.addClassName(layoutModule.STACKTRACE_CLASS),dialogs.popup.show(this._dom,t);var l=document.getElementById("completeStackTrace");l&&isIPad()&&new TouchController(l,l.parentNode,{noInit3d:!0})}},_hide:function(){this._dom&&(this._dom.stopObserving("click",this.clickHandler),dialogs.popup.hide(this._dom))},_clickHandler:function(e){var t=e.element();matchAny(t,["button"],!0)&&this._hide()}},dialogs.clusterErrorPopup=_.extend({},dialogs.errorPopup,{show:function(){var e=this;require(["bundle!jasperserver_messages","bundle!jsexceptions_messages"],function(t,i){var n=i["cluster.exception.session.attribute.missing.popup"];dialogs.errorPopup.show.call(e,n);var o=t["button.home"];jQuery("#"+e._DOM_ID).find("button span.wrap").html(o)})},_hide:function(){dialogs.errorPopup._hide.apply(this,arguments),window.location="home.html"}}),dialogs.popup={show:function(e,t,i){i=i||{},e=$(e),e&&((isIE7()||isIE8())&&(jo=jQuery(e),0==jo.children("div.msshadow").length&&jo.prepend('<div class="msshadow" style="position:absolute;top:-10px;right:10px;bottom:10px;left:-10px;border:0;background:#fff;">&nbsp;</div>')),t&&(pageDimmer.show(),e.match(layoutModule.DIALOG_LOADING_PATTERN)&&pageDimmer.setZindex(e.getStyle("zIndex")-1)),reParent(e,document.body),e.setOpacity(0),e.removeClassName(layoutModule.HIDDEN_CLASS),isIE7()&&!e.match(".sizeable")&&setWidthStyleByReflection(e,".content"),layoutModule.createMover.call(layoutModule,e),layoutModule.createSizer.call(layoutModule,e),i.cascade?cascadeElement(e,{position:i.position,number:i.number,horzOffset:40,vertOffset:40}):centerElement(e,{horz:!0,vert:!0}),dialogs.popup._setMaxZIndex(e),layoutModule.createMover.call(layoutModule,e),isIPad()?e.setOpacity(1)&&e.show():appear(e,.4),e.tabIndex=-1,(!i||"undefined"==typeof i.focus||i.focus)&&(isIE8()?setTimeout(function(){try{e.focus()
}catch(t){}},450):e.focus()),!t&&e.observe("click",dialogs.popup.zIndexHandler))},hide:function(e){e&&(e=$(e),e.hasClassName(layoutModule.HIDDEN_CLASS)||(e.addClassName(layoutModule.HIDDEN_CLASS),pageDimmer.hide(),e.match(layoutModule.DIALOG_LOADING_PATTERN)&&pageDimmer.setZindex(layoutModule.DIMMER_Z_INDEX)),e.stopObserving("click",dialogs.popup.zIndexHandler))},zIndexHandler:function(e){var t=Event.element(e),i=matchMeOrUp(t,layoutModule.DIALOG_PATTERN);dialogs.popup._setMaxZIndex(i)},_setMaxZIndex:function(e,t){if(e){var i=t?t.getStyle("zIndex"):0,n=document.body.select(layoutModule.DIALOG_PATTERN),o=function(e){e.visible()&&!e.match(layoutModule.DIALOG_LOADING_PATTERN)&&(i=Math.max(i,e.getStyle("zIndex"),layoutModule.DIMMER_Z_INDEX+1))};1==n.length?o(n[0]):n.each(o),e.setStyle({zIndex:Math.max(i+1,e.getStyle("zIndex"))})}}},dialogs.popupConfirm=_.extend({},dialogs.popup,{show:function(e,t,i){dialogs.popup.show.apply(this,arguments),i=_.extend({okButtonSelector:"button.ok",cancelButtonSelector:"button.cancel"},i);var n=jQuery(e),o=n.find(i.okButtonSelector),s=n.find(i.cancelButtonSelector),r=jQuery.Deferred();return o.on("click",function(){i.validateFunc&&i.validateFunc()===!1||(o.off("click"),s.off("click"),dialogs.popupConfirm.hide(e),r.resolve())}),s.on("click",function(){o.off("click"),s.off("click"),dialogs.popupConfirm.hide(e),r.reject()}),r}}),dialogs.childPopup=_.extend({},dialogs.popup,{cascadePopups:{},show:function(e,t,i,n){i?(n=_.extend({parent:i},n),this.cascadePopups[i.id]||(this.cascadePopups[i.id]=[]),this.cascadePopups[i.id].push(e.id),$(e).setAttribute("data-parentDialog",i.id),dialogs.popup.show.apply(this,[e,t,n]),dialogs.popup._setMaxZIndex(e,i),t&&pageDimmer.setZindex(e.getStyle("zIndex")-1),i.stopObserving("click",dialogs.popup.zIndexHandler)):dialogs.popup.show.apply(this,[e,t,n])},hide:function(e){var t=$(e).getAttribute("data-parentDialog");if(t){this.cascadePopups[t]&&(this.cascadePopups[t]=_.without(this.cascadePopups[t],e.id)),dialogs.popup.hide.apply(this,[e]);var i=$(t);pageDimmer.show(i),dialogs.popup._setMaxZIndex(i)}else dialogs.popup.hide.apply(this,[e])}}),define("components.dialogs",["jquery","prototype","underscore","utils.common","utils.animation","core.layout"],function(e){return function(){var t;return t||e.dialogs}}(this));var about={initialize:function(){about.aboutBox.registerListeners()}};about.aboutBox={show:function(){var e=jQuery("#aboutBox");e.hasClass("hidden")&&dialogs.popup.show(e[0],!0)},_hide:function(){var e=jQuery("#aboutBox");e.hasClass("hidden")||dialogs.popup.hide(e[0])},registerListeners:function(){jQuery(document).delegate("#about","click",function(e){e.preventDefault(),about.aboutBox.show()}),jQuery(document).delegate("#aboutBox button","click",function(e){about.aboutBox._hide(),e.stopPropagation()})}},jQuery(function(){"undefined"==typeof require&&about.initialize()}),define("components.about",["components.dialogs"],function(e){return function(){var t;return t||e.about}}(this)),define("commons.minimal.main",["require","commons.bare.main","!domReady","components.heartbeat","jrs.configs","components.about","components.webHelp","jquery"],function(e){"use strict";e("commons.bare.main");var t=e("!domReady"),i=e("components.heartbeat"),n=e("jrs.configs"),o=e("components.about"),s=e("components.webHelp"),r=e("jquery");t(function(){i.initialize(n.heartbeatInitOptions),i.start(),n.initAdditionalUIComponents&&o.initialize();var e=r("#helpLink");e&&e.on("click",function(e){e.preventDefault(),s.displayWebHelp()})})});var Mustache=function(){function e(e){return String(e).replace(/&(?!\w+;)|[<>"']/g,function(e){return r[e]||e})}var t=Object.prototype.toString;Array.isArray=Array.isArray||function(e){return"[object Array]"==t.call(e)};var i,n=String.prototype.trim;if(n)i=function(e){return null==e?"":n.call(e)};else{var o,s;/\S/.test(" ")?(o=/^[\s\xA0]+/,s=/[\s\xA0]+$/):(o=/^\s+/,s=/\s+$/),i=function(e){return null==e?"":e.toString().replace(o,"").replace(s,"")}}var r={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},a={},l=function(){};return l.prototype={otag:"{{",ctag:"}}",pragmas:{},buffer:[],pragmas_implemented:{"IMPLICIT-ITERATOR":!0},context:{},render:function(e,t,i,n){if(n||(this.context=t,this.buffer=[]),!this.includes("",e))return n?e:void this.send(e);e=this.render_pragmas(e);var o=this.render_section(e,t,i);return o===!1&&(o=this.render_tags(e,t,i,n)),n?o:void this.sendLines(o)},send:function(e){""!==e&&this.buffer.push(e)},sendLines:function(e){if(e)for(var t=e.split("\n"),i=0;i<t.length;i++)this.send(t[i])},render_pragmas:function(e){if(!this.includes("%",e))return e;var t=this,i=this.getCachedRegex("render_pragmas",function(e,t){return new RegExp(e+"%([\\w-]+) ?([\\w]+=[\\w]+)?"+t,"g")});return e.replace(i,function(e,i,n){if(!t.pragmas_implemented[i])throw{message:"This implementation of mustache doesn't understand the '"+i+"' pragma"};if(t.pragmas[i]={},n){var o=n.split("=");t.pragmas[i][o[0]]=o[1]}return""})},render_partial:function(e,t,n){if(e=i(e),!n||void 0===n[e])throw{message:"unknown_partial '"+e+"'"};return t&&"object"==typeof t[e]?this.render(n[e],t[e],n,!0):this.render(n[e],t,n,!0)},render_section:function(e,t,i){if(!this.includes("#",e)&&!this.includes("^",e))return!1;var n=this,o=this.getCachedRegex("render_section",function(e,t){return new RegExp("^([\\s\\S]*?)"+e+"(\\^|\\#)\\s*(.+)\\s*"+t+"\n*([\\s\\S]*?)"+e+"\\/\\s*\\3\\s*"+t+"\\s*([\\s\\S]*)$","g")});return e.replace(o,function(e,o,s,r,a,l){var c,u=o?n.render_tags(o,t,i,!0):"",d=l?n.render(l,t,i,!0):"",h=n.find(r,t);return"^"===s?c=!h||Array.isArray(h)&&0===h.length?n.render(a,t,i,!0):"":"#"===s&&(c=Array.isArray(h)?n.map(h,function(e){return n.render(a,n.create_context(e),i,!0)}).join(""):n.is_object(h)?n.render(a,n.create_context(h),i,!0):"function"==typeof h?h.call(t,a,function(e){return n.render(e,t,i,!0)}):h?n.render(a,t,i,!0):""),u+c+d})},render_tags:function(t,i,n,o){for(var s=this,r=function(){return s.getCachedRegex("render_tags",function(e,t){return new RegExp(e+"(=|!|>|&|\\{|%)?([^#\\^]+?)\\1?"+t+"+","g")})},a=r(),l=function(t,o,l){switch(o){case"!":return"";case"=":return s.set_delimiters(l),a=r(),"";case">":return s.render_partial(l,i,n);case"{":case"&":return s.find(l,i);default:return e(s.find(l,i))}},c=t.split("\n"),u=0;u<c.length;u++)c[u]=c[u].replace(a,l,this),o||this.send(c[u]);return o?c.join("\n"):void 0},set_delimiters:function(e){var t=e.split(" ");this.otag=this.escape_regex(t[0]),this.ctag=this.escape_regex(t[1])},escape_regex:function(e){if(!arguments.callee.sRE){var t=["/",".","*","+","?","|","(",")","[","]","{","}","\\"];arguments.callee.sRE=new RegExp("(\\"+t.join("|\\")+")","g")}return e.replace(arguments.callee.sRE,"\\$1")},find:function(e,t){function n(e){return e===!1||0===e||e}e=i(e);var o;if(e.match(/([a-z_]+)\./gi)){var s=this.walk_context(e,t);n(s)&&(o=s)}else n(t[e])?o=t[e]:n(this.context[e])&&(o=this.context[e]);return"function"==typeof o?o.apply(t):void 0!==o?o:""},walk_context:function(e,t){for(var i=e.split("."),n=void 0!=t[i[0]]?t:this.context,o=n[i.shift()];void 0!=o&&i.length>0;)n=o,o=o[i.shift()];return"function"==typeof o?o.apply(n):o},includes:function(e,t){return-1!=t.indexOf(this.otag+e)},create_context:function(e){if(this.is_object(e))return e;var t=".";this.pragmas["IMPLICIT-ITERATOR"]&&(t=this.pragmas["IMPLICIT-ITERATOR"].iterator);var i={};return i[t]=e,i},is_object:function(e){return e&&"object"==typeof e},map:function(e,t){if("function"==typeof e.map)return e.map(t);for(var i=[],n=e.length,o=0;n>o;o++)i.push(t(e[o]));return i},getCachedRegex:function(e,t){var i=a[this.otag];i||(i=a[this.otag]={});var n=i[this.ctag];n||(n=i[this.ctag]={});var o=n[e];return o||(o=n[e]=t(this.otag,this.ctag)),o}},{name:"mustache.js",version:"0.4.0",to_html:function(e,t,i,n){var o=new l;return n&&(o.send=n),o.render(e,t||{},i),n?void 0:o.buffer.join("\n")}}}();define("mustache",function(e){return function(){var t,i;return i=function(){return Mustache},t=i.apply(e,arguments)}}(this)),jaspersoft.components.templateEngine=function(e,t,i){return{render:function(e,n,o){if(!o)return i.to_html(e,n);if(o==this.STD_PLACEHOLDERS){var s=String(e);return t.each(n,function(e,t){var i=new RegExp("\\{"+t+"\\}");s=s.replace(i,e)}),s}},renderUrl:function(e,t,n){var o=i.to_html(e,t);return n&&(o=encodeURI(o)),o},getTemplateText:function(t){var i=e("#"+t);return i.html()},createTemplate:function(t){var n=e("#"+t),o=n.html();return o&&o.length>0?function(e){return i.to_html(o,e)}:void 0},createTemplateFromText:function(e){return e&&e.length>0?function(t){return i.to_html(e,t)}:void 0},createTemplateSection:function(e,t){var n="\\{\\{#val\\}\\}(\\s|\\S)*\\{\\{/val\\}\\}",o=n.replace(/val/g,e),s=new RegExp(o,"g"),r=this.getTemplateText(t),a=r.match(s)[0];return function(e){return i.to_html(a,e)}},STD_PLACEHOLDERS:"std_placeholder"}}(jQuery,_,Mustache),define("components.templateengine",["namespace","jquery","underscore","mustache"],function(e){return function(){var t;return t||e.jaspersoft.components.templateEngine}}(this)),function(){{var e,t=this,i=t.Backbone,n=[],o=(n.push,n.slice);n.splice}e="undefined"!=typeof exports?exports:t.Backbone={},e.VERSION="1.1.0";var s=t._;s||"undefined"==typeof require||(s=require("underscore")),e.$=t.jQuery||t.Zepto||t.ender||t.$,e.noConflict=function(){return t.Backbone=i,this},e.emulateHTTP=!1,e.emulateJSON=!1;var r=e.Events={on:function(e,t,i){if(!l(this,"on",e,[t,i])||!t)return this;this._events||(this._events={});var n=this._events[e]||(this._events[e]=[]);return n.push({callback:t,context:i,ctx:i||this}),this},once:function(e,t,i){if(!l(this,"once",e,[t,i])||!t)return this;var n=this,o=s.once(function(){n.off(e,o),t.apply(this,arguments)});return o._callback=t,this.on(e,o,i)},off:function(e,t,i){var n,o,r,a,c,u,d,h;if(!this._events||!l(this,"off",e,[t,i]))return this;if(!e&&!t&&!i)return this._events={},this;for(a=e?[e]:s.keys(this._events),c=0,u=a.length;u>c;c++)if(e=a[c],r=this._events[e]){if(this._events[e]=n=[],t||i)for(d=0,h=r.length;h>d;d++)o=r[d],(t&&t!==o.callback&&t!==o.callback._callback||i&&i!==o.context)&&n.push(o);n.length||delete this._events[e]}return this},trigger:function(e){if(!this._events)return this;var t=o.call(arguments,1);if(!l(this,"trigger",e,t))return this;var i=this._events[e],n=this._events.all;return i&&c(i,t),n&&c(n,arguments),this},stopListening:function(e,t,i){var n=this._listeningTo;if(!n)return this;var o=!t&&!i;i||"object"!=typeof t||(i=this),e&&((n={})[e._listenId]=e);for(var r in n)e=n[r],e.off(t,i,this),(o||s.isEmpty(e._events))&&delete this._listeningTo[r];return this}},a=/\s+/,l=function(e,t,i,n){if(!i)return!0;if("object"==typeof i){for(var o in i)e[t].apply(e,[o,i[o]].concat(n));return!1}if(a.test(i)){for(var s=i.split(a),r=0,l=s.length;l>r;r++)e[t].apply(e,[s[r]].concat(n));return!1}return!0},c=function(e,t){var i,n=-1,o=e.length,s=t[0],r=t[1],a=t[2];switch(t.length){case 0:for(;++n<o;)(i=e[n]).callback.call(i.ctx);return;case 1:for(;++n<o;)(i=e[n]).callback.call(i.ctx,s);return;case 2:for(;++n<o;)(i=e[n]).callback.call(i.ctx,s,r);return;case 3:for(;++n<o;)(i=e[n]).callback.call(i.ctx,s,r,a);return;default:for(;++n<o;)(i=e[n]).callback.apply(i.ctx,t)}},u={listenTo:"on",listenToOnce:"once"};s.each(u,function(e,t){r[t]=function(t,i,n){var o=this._listeningTo||(this._listeningTo={}),r=t._listenId||(t._listenId=s.uniqueId("l"));return o[r]=t,n||"object"!=typeof i||(n=this),t[e](i,n,this),this}}),r.bind=r.on,r.unbind=r.off,s.extend(e,r);var d=e.Model=function(e,t){var i=e||{};t||(t={}),this.cid=s.uniqueId("c"),this.attributes={},t.collection&&(this.collection=t.collection),t.parse&&(i=this.parse(i,t)||{}),i=s.defaults({},i,s.result(this,"defaults")),this.set(i,t),this.changed={},this.initialize.apply(this,arguments)};s.extend(d.prototype,r,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(){return s.clone(this.attributes)},sync:function(){return e.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return s.escape(this.get(e))},has:function(e){return null!=this.get(e)},set:function(e,t,i){var n,o,r,a,l,c,u,d;if(null==e)return this;if("object"==typeof e?(o=e,i=t):(o={})[e]=t,i||(i={}),!this._validate(o,i))return!1;r=i.unset,l=i.silent,a=[],c=this._changing,this._changing=!0,c||(this._previousAttributes=s.clone(this.attributes),this.changed={}),d=this.attributes,u=this._previousAttributes,this.idAttribute in o&&(this.id=o[this.idAttribute]);for(n in o)t=o[n],s.isEqual(d[n],t)||a.push(n),s.isEqual(u[n],t)?delete this.changed[n]:this.changed[n]=t,r?delete d[n]:d[n]=t;if(!l){a.length&&(this._pending=!0);for(var h=0,p=a.length;p>h;h++)this.trigger("change:"+a[h],this,d[a[h]],i)}if(c)return this;if(!l)for(;this._pending;)this._pending=!1,this.trigger("change",this,i);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,s.extend({},t,{unset:!0}))},clear:function(e){var t={};for(var i in this.attributes)t[i]=void 0;return this.set(t,s.extend({},e,{unset:!0}))},hasChanged:function(e){return null==e?!s.isEmpty(this.changed):s.has(this.changed,e)},changedAttributes:function(e){if(!e)return this.hasChanged()?s.clone(this.changed):!1;var t,i=!1,n=this._changing?this._previousAttributes:this.attributes;for(var o in e)s.isEqual(n[o],t=e[o])||((i||(i={}))[o]=t);return i},previous:function(e){return null!=e&&this._previousAttributes?this._previousAttributes[e]:null},previousAttributes:function(){return s.clone(this._previousAttributes)},fetch:function(e){e=e?s.clone(e):{},void 0===e.parse&&(e.parse=!0);var t=this,i=e.success;return e.success=function(n){return t.set(t.parse(n,e),e)?(i&&i(t,n,e),void t.trigger("sync",t,n,e)):!1},P(this,e),this.sync("read",this,e)},save:function(e,t,i){var n,o,r,a=this.attributes;if(null==e||"object"==typeof e?(n=e,i=t):(n={})[e]=t,i=s.extend({validate:!0},i),n&&!i.wait){if(!this.set(n,i))return!1}else if(!this._validate(n,i))return!1;n&&i.wait&&(this.attributes=s.extend({},a,n)),void 0===i.parse&&(i.parse=!0);var l=this,c=i.success;return i.success=function(e){l.attributes=a;var t=l.parse(e,i);return i.wait&&(t=s.extend(n||{},t)),s.isObject(t)&&!l.set(t,i)?!1:(c&&c(l,e,i),void l.trigger("sync",l,e,i))},P(this,i),o=this.isNew()?"create":i.patch?"patch":"update","patch"===o&&(i.attrs=n),r=this.sync(o,this,i),n&&i.wait&&(this.attributes=a),r},destroy:function(e){e=e?s.clone(e):{};var t=this,i=e.success,n=function(){t.trigger("destroy",t,t.collection,e)};if(e.success=function(o){(e.wait||t.isNew())&&n(),i&&i(t,o,e),t.isNew()||t.trigger("sync",t,o,e)},this.isNew())return e.success(),!1;P(this,e);var o=this.sync("delete",this,e);return e.wait||n(),o},url:function(){var e=s.result(this,"urlRoot")||s.result(this.collection,"url")||k();return this.isNew()?e:e+("/"===e.charAt(e.length-1)?"":"/")+encodeURIComponent(this.id)},parse:function(e){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return null==this.id},isValid:function(e){return this._validate({},s.extend(e||{},{validate:!0}))},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=s.extend({},this.attributes,e);var i=this.validationError=this.validate(e,t)||null;return i?(this.trigger("invalid",this,i,s.extend(t,{validationError:i})),!1):!0}});var h=["keys","values","pairs","invert","pick","omit"];s.each(h,function(e){d.prototype[e]=function(){var t=o.call(arguments);return t.unshift(this.attributes),s[e].apply(s,t)}});var p=e.Collection=function(e,t){t||(t={}),t.model&&(this.model=t.model),void 0!==t.comparator&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,s.extend({silent:!0},t))},f={add:!0,remove:!0,merge:!0},m={add:!0,remove:!1};s.extend(p.prototype,r,{model:d,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return e.sync.apply(this,arguments)},add:function(e,t){return this.set(e,s.extend({merge:!1},t,m))},remove:function(e,t){var i=!s.isArray(e);e=i?[e]:s.clone(e),t||(t={});var n,o,r,a;for(n=0,o=e.length;o>n;n++)a=e[n]=this.get(e[n]),a&&(delete this._byId[a.id],delete this._byId[a.cid],r=this.indexOf(a),this.models.splice(r,1),this.length--,t.silent||(t.index=r,a.trigger("remove",a,this,t)),this._removeReference(a));return i?e[0]:e},set:function(e,t){t=s.defaults({},t,f),t.parse&&(e=this.parse(e,t));var i=!s.isArray(e);e=i?e?[e]:[]:s.clone(e);var n,o,r,a,l,c,u,h=t.at,p=this.model,m=this.comparator&&null==h&&t.sort!==!1,g=s.isString(this.comparator)?this.comparator:null,v=[],_=[],y={},b=t.add,S=t.merge,T=t.remove,E=!m&&b&&T?[]:!1;for(n=0,o=e.length;o>n;n++){if(l=e[n],r=l instanceof d?a=l:l[p.prototype.idAttribute],c=this.get(r))T&&(y[c.cid]=!0),S&&(l=l===a?a.attributes:l,t.parse&&(l=c.parse(l,t)),c.set(l,t),m&&!u&&c.hasChanged(g)&&(u=!0)),e[n]=c;else if(b){if(a=e[n]=this._prepareModel(l,t),!a)continue;v.push(a),a.on("all",this._onModelEvent,this),this._byId[a.cid]=a,null!=a.id&&(this._byId[a.id]=a)}E&&E.push(c||a)}if(T){for(n=0,o=this.length;o>n;++n)y[(a=this.models[n]).cid]||_.push(a);_.length&&this.remove(_,t)}if(v.length||E&&E.length)if(m&&(u=!0),this.length+=v.length,null!=h)for(n=0,o=v.length;o>n;n++)this.models.splice(h+n,0,v[n]);else{E&&(this.models.length=0);var w=E||v;for(n=0,o=w.length;o>n;n++)this.models.push(w[n])}if(u&&this.sort({silent:!0}),!t.silent){for(n=0,o=v.length;o>n;n++)(a=v[n]).trigger("add",a,this,t);(u||E&&E.length)&&this.trigger("sort",this,t)}return i?e[0]:e},reset:function(e,t){t||(t={});for(var i=0,n=this.models.length;n>i;i++)this._removeReference(this.models[i]);return t.previousModels=this.models,this._reset(),e=this.add(e,s.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),e},push:function(e,t){return this.add(e,s.extend({at:this.length},t))},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e),t},unshift:function(e,t){return this.add(e,s.extend({at:0},t))},shift:function(e){var t=this.at(0);return this.remove(t,e),t},slice:function(){return o.apply(this.models,arguments)},get:function(e){return null==e?void 0:this._byId[e.id]||this._byId[e.cid]||this._byId[e]},at:function(e){return this.models[e]},where:function(e,t){return s.isEmpty(e)?t?void 0:[]:this[t?"find":"filter"](function(t){for(var i in e)if(e[i]!==t.get(i))return!1;return!0})},findWhere:function(e){return this.where(e,!0)},sort:function(e){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return e||(e={}),s.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(s.bind(this.comparator,this)),e.silent||this.trigger("sort",this,e),this},pluck:function(e){return s.invoke(this.models,"get",e)},fetch:function(e){e=e?s.clone(e):{},void 0===e.parse&&(e.parse=!0);var t=e.success,i=this;return e.success=function(n){var o=e.reset?"reset":"set";i[o](n,e),t&&t(i,n,e),i.trigger("sync",i,n,e)},P(this,e),this.sync("read",this,e)},create:function(e,t){if(t=t?s.clone(t):{},!(e=this._prepareModel(e,t)))return!1;t.wait||this.add(e,t);var i=this,n=t.success;return t.success=function(e,t,o){o.wait&&i.add(e,o),n&&n(e,t,o)},e.save(null,t),e},parse:function(e){return e},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(e,t){if(e instanceof d)return e.collection||(e.collection=this),e;t=t?s.clone(t):{},t.collection=this;var i=new this.model(e,t);return i.validationError?(this.trigger("invalid",this,i.validationError,t),!1):i},_removeReference:function(e){this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,i,n){("add"!==e&&"remove"!==e||i===this)&&("destroy"===e&&this.remove(t,n),t&&e==="change:"+t.idAttribute&&(delete this._byId[t.previous(t.idAttribute)],null!=t.id&&(this._byId[t.id]=t)),this.trigger.apply(this,arguments))}});var g=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain"];s.each(g,function(e){p.prototype[e]=function(){var t=o.call(arguments);return t.unshift(this.models),s[e].apply(s,t)}});var v=["groupBy","countBy","sortBy"];s.each(v,function(e){p.prototype[e]=function(t,i){var n=s.isFunction(t)?t:function(e){return e.get(t)};return s[e](this.models,n,i)}});var _=e.View=function(e){this.cid=s.uniqueId("view"),e||(e={}),s.extend(this,s.pick(e,b)),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},y=/^(\S+)\s*(.*)$/,b=["model","collection","el","id","attributes","className","tagName","events"];s.extend(_.prototype,r,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(t,i){return this.$el&&this.undelegateEvents(),this.$el=t instanceof e.$?t:e.$(t),this.el=this.$el[0],i!==!1&&this.delegateEvents(),this},delegateEvents:function(e){if(!e&&!(e=s.result(this,"events")))return this;this.undelegateEvents();for(var t in e){var i=e[t];if(s.isFunction(i)||(i=this[e[t]]),i){var n=t.match(y),o=n[1],r=n[2];i=s.bind(i,this),o+=".delegateEvents"+this.cid,""===r?this.$el.on(o,i):this.$el.on(o,r,i)}}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_ensureElement:function(){if(this.el)this.setElement(s.result(this,"el"),!1);else{var t=s.extend({},s.result(this,"attributes"));this.id&&(t.id=s.result(this,"id")),this.className&&(t["class"]=s.result(this,"className"));var i=e.$("<"+s.result(this,"tagName")+">").attr(t);this.setElement(i,!1)}}}),e.sync=function(t,i,n){var o=T[t];s.defaults(n||(n={}),{emulateHTTP:e.emulateHTTP,emulateJSON:e.emulateJSON});var r={type:o,dataType:"json"};if(n.url||(r.url=s.result(i,"url")||k()),null!=n.data||!i||"create"!==t&&"update"!==t&&"patch"!==t||(r.contentType="application/json",r.data=JSON.stringify(n.attrs||i.toJSON(n))),n.emulateJSON&&(r.contentType="application/x-www-form-urlencoded",r.data=r.data?{model:r.data}:{}),n.emulateHTTP&&("PUT"===o||"DELETE"===o||"PATCH"===o)){r.type="POST",n.emulateJSON&&(r.data._method=o);var a=n.beforeSend;n.beforeSend=function(e){return e.setRequestHeader("X-HTTP-Method-Override",o),a?a.apply(this,arguments):void 0}}"GET"===r.type||n.emulateJSON||(r.processData=!1),"PATCH"===r.type&&S&&(r.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var l=n.xhr=e.ajax(s.extend(r,n));return i.trigger("request",i,l,n),l};var S=!("undefined"==typeof window||!window.ActiveXObject||window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent),T={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};e.ajax=function(){return e.$.ajax.apply(e.$,arguments)};var E=e.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},w=/\((.*?)\)/g,M=/(\(\?)?:\w+/g,I=/\*\w+/g,C=/[\-{}\[\]+?.,\\\^$|#\s]/g;s.extend(E.prototype,r,{initialize:function(){},route:function(t,i,n){s.isRegExp(t)||(t=this._routeToRegExp(t)),s.isFunction(i)&&(n=i,i=""),n||(n=this[i]);var o=this;return e.history.route(t,function(s){var r=o._extractParameters(t,s);n&&n.apply(o,r),o.trigger.apply(o,["route:"+i].concat(r)),o.trigger("route",i,r),e.history.trigger("route",o,i,r)}),this},navigate:function(t,i){return e.history.navigate(t,i),this},_bindRoutes:function(){if(this.routes){this.routes=s.result(this,"routes");for(var e,t=s.keys(this.routes);null!=(e=t.pop());)this.route(e,this.routes[e])}},_routeToRegExp:function(e){return e=e.replace(C,"\\$&").replace(w,"(?:$1)?").replace(M,function(e,t){return t?e:"([^/]+)"}).replace(I,"(.*?)"),new RegExp("^"+e+"$")},_extractParameters:function(e,t){var i=e.exec(t).slice(1);return s.map(i,function(e){return e?decodeURIComponent(e):null})}});var D=e.History=function(){this.handlers=[],s.bindAll(this,"checkUrl"),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},A=/^[#\/]|\s+$/g,x=/^\/+|\/+$/g,N=/msie [\w.]+/,R=/\/$/,O=/[?#].*$/;D.started=!1,s.extend(D.prototype,r,{interval:50,getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getFragment:function(e,t){if(null==e)if(this._hasPushState||!this._wantsHashChange||t){e=this.location.pathname;var i=this.root.replace(R,"");e.indexOf(i)||(e=e.slice(i.length))}else e=this.getHash();return e.replace(A,"")},start:function(t){if(D.started)throw new Error("Backbone.history has already been started");D.started=!0,this.options=s.extend({root:"/"},this.options,t),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var i=this.getFragment(),n=document.documentMode,o=N.exec(navigator.userAgent.toLowerCase())&&(!n||7>=n);this.root=("/"+this.root+"/").replace(x,"/"),o&&this._wantsHashChange&&(this.iframe=e.$('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,this.navigate(i)),this._hasPushState?e.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!o?e.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=i;var r=this.location,a=r.pathname.replace(/[^\/]$/,"$&/")===this.root;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!a)return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+this.location.search+"#"+this.fragment),!0;this._hasPushState&&a&&r.hash&&(this.fragment=this.getHash().replace(A,""),this.history.replaceState({},document.title,this.root+this.fragment+r.search))}return this.options.silent?void 0:this.loadUrl()},stop:function(){e.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),clearInterval(this._checkUrlInterval),D.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(){var e=this.getFragment();return e===this.fragment&&this.iframe&&(e=this.getFragment(this.getHash(this.iframe))),e===this.fragment?!1:(this.iframe&&this.navigate(e),void this.loadUrl())},loadUrl:function(e){return e=this.fragment=this.getFragment(e),s.any(this.handlers,function(t){return t.route.test(e)?(t.callback(e),!0):void 0})},navigate:function(e,t){if(!D.started)return!1;t&&t!==!0||(t={trigger:!!t});var i=this.root+(e=this.getFragment(e||""));if(e=e.replace(O,""),this.fragment!==e){if(this.fragment=e,""===e&&"/"!==i&&(i=i.slice(0,-1)),this._hasPushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,i);else{if(!this._wantsHashChange)return this.location.assign(i);this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getFragment(this.getHash(this.iframe))&&(t.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,e,t.replace))}return t.trigger?this.loadUrl(e):void 0}},_updateHash:function(e,t,i){if(i){var n=e.href.replace(/(javascript:|#).*$/,"");e.replace(n+"#"+t)}else e.hash="#"+t}}),e.history=new D;var L=function(e,t){var i,n=this;i=e&&s.has(e,"constructor")?e.constructor:function(){return n.apply(this,arguments)},s.extend(i,n,t);var o=function(){this.constructor=i};return o.prototype=n.prototype,i.prototype=new o,e&&s.extend(i.prototype,e),i.__super__=n.prototype,i};d.extend=p.extend=E.extend=_.extend=D.extend=L;var k=function(){throw new Error('A "url" property or function must be specified')},P=function(e,t){var i=t.error;t.error=function(n){i&&i(e,n,t),e.trigger("error",e,n,t)}}}.call(this),define("backbone.original",["underscore","json3"],function(e){return function(){var t;return t||e.Backbone}}(this)),define("backbone",["require","backbone.original","common/transport/request"],function(e){"use strict";var t=e("backbone.original"),i=e("common/transport/request");return t.ajax=i,t}),jaspersoft||(jaspersoft={components:{}}),jaspersoft.components||(jaspersoft.components={}),function(e,t,i,n,o,s){var r=n.View.extend({rendered:!1,contentSelector:".body",events:{"click .cancel":"hide"},initialize:function(e){if(this.templateId=e&&e.templateId||this.templateId,this.contentSelector=e&&e.contentSelector||this.contentSelector,!this.templateId)throw"Dialog template is not provided";i.bindAll(this),this.options=i.extend({},e)},render:function(e){return this.undelegateEvents(),this.$el=t(o.getTemplateText(this.templateId)).closest("div"),this.el=this.$el[0],t(e?e:document.body).append(this.$el),this.delegateEvents(),this.rendered=!0,this},hide:function(e){s.popup.hide(this.el),e&&e.stopPropagation()},show:function(e){this.rendered||this.render(e),s.popup.show(this.el,this.options.modal)},setContent:function(e){this.$el.find(this.contentSelector).html(t(e))},_updateMessage:function(e){e=i.isString(e)?[e]:e;var n=document.createDocumentFragment();i.each(e||[],function(e){n.appendChild(t("<p/>",{text:e,"class":"message"})[0])},this),this.$el.find(".body").html(n)}}),a=r.extend({templateId:"standardConfirmTemplate",events:{"click button.cancel":"hide","click button.ok":"onOk"},initialize:function(e){r.prototype.initialize.call(this,e),i.extend(this,i.defaults(e||{},{messages:"",ok:function(){}}))},show:function(e){r.prototype.show.call(this),this._updateMessage(e.messages||this.messages),e.ok&&(this.ok=e.ok)},onOk:function(){this.hide(),this.ok()}});e.Dialog=r,e.ConfirmDialog=a}(jaspersoft.components,jQuery,_,Backbone,jaspersoft.components.templateEngine,dialogs),define("components.dialog",["jquery","underscore","components.templateengine","components.dialogs","backbone"],function(e){return function(){var t;return t||e.jaspersoft.components.Dialog}}(this)),jaspersoft.components.NotificationViewTrait=function(e,t,i){return i.View.extend({initialize:function(){t.bindAll(this),this.collection&&this.collection.each(this.addListeners)},addListeners:function(e){e.on("error:server",this.handleServerError),e.on("notification:show",this.handleNotificationShow)},showErrorNotification:function(e,t){this.showNotification(e,"error",t)},showSuccessNotification:function(e,t){this.showNotification(e,"success",t)},showNotification:function(){},hideNotification:function(){},handleServerError:function(e){this.showErrorNotification(e.message)},handleNotificationShow:function(e){this.showSuccessNotification(e.message)}})}(jQuery,_,Backbone),define("components.notificationviewtrait",["namespace","jquery","underscore","backbone"],function(e){return function(){var t;return t||e.jaspersoft.components.NotificationViewTrait}}(this)),jaspersoft.components.SystemNotificationView=function(e,t){return e.NotificationViewTrait.extend({PSEUDO_INFINITY_DELAY:9999999999,showNotification:function(e){t.systemConfirm.show(e,this.PSEUDO_INFINITY_DELAY)}})}(jaspersoft.components,dialogs),define("components.systemnotificationview",["namespace","jquery","underscore","components.dialogs","components.notificationviewtrait"],function(e){return function(){var t;return t||e.jaspersoft.components.SystemNotificationView}}(this)),jaspersoft.components.Layout=function(e,t,i,n){return i.View.extend({initialize:function(e){t.bindAll(this),this.createUIComponents(e)},render:function(t){return this.notificationView.render(),t&&t.container?(e(t.container).find(".body").prepend(this.notificationView.el),this.defaultRender(this.formView,{container:e(t.container)})):(this.dialogRender(this.formView,this.dialog),this.dialog.$el.find(".body").prepend(this.notificationView.el)),this},createUIComponents:function(e){if(e&&(e.type&&e.namespace[e.type]&&(this.formView=new e.namespace[e.type]({model:this.model})),e.container||(this.dialog=new n.Dialog({modal:e.modal,templateId:"exportsDialogTemplate"}))),this.model){this.stateView=new n.StateView({model:this.model.get("state")});
var t=new i.Collection([this.model,this.model.get("state")]);this.notificationView=new n.SystemNotificationView({collection:t})}},defaultRender:function(e,t){t&&t.container&&e.render(t)},dialogRender:function(t,i){i&&t&&(i.render(e("body")),t.render({container:i.$el}),e("#exportDialog #cancelExportButton").removeClass("hidden"))},showDialog:function(){this.dialog&&(this.formView.prepareToShow&&this.formView.prepareToShow(),this.notificationView.hideNotification(),this.dialog.show())}})}(jQuery,_,Backbone,jaspersoft.components),define("components.layout",["jquery","underscore","components.dialog","components.systemnotificationview"],function(e){return function(){var t;return t||e.jaspersoft.components.Layout}}(this)),TouchController=function(e,t,i){if(this.element=e,this.parent=t,this.children=[],this.hbar=null,this.vbar=null,i=i||{},this.element.style.position=i.absolute?"absolute":"relative",this.useParent=this.observer=i.useParent?t:e,this.translate3d=i.translate3d!==!1?!0:!1,this.forceLayout=i.forceLayout!==!0?!1:!0,this.use2Fingers=i.use2Fingers!==!0?!1:!0,this.fit=i.fit,i.debug&&(t.style.border="solid 1px #f00",e.style.border="solid 1px #00f"),this.translate3d&&!i.noInit3d){var n=jQuery(e).position();e.style.webkitTransform="translate3d("+n.left+"px,"+n.top+"px,0)",e.style.top="",e.style.left=""}if(i.scrollbars===!0){var o=jQuery('<div style="position:absolute;bottom:4px;left:0;right:0;"><div style="position:relative;background:#3fb8fa;min-height:4px;width:24px;opacity:0.4;"></div></div>').appendTo(t),s=jQuery('<div style="position:absolute;top:0;bottom:0;right:4px;"><div style="position:relative;background:#3fb8fa;min-width:4px;height:24px;opacity:0.4;"></div></div>').appendTo(t);this.hbar=o.children().eq(0),this.vbar=s.children().eq(0)}this.computeBoundaries(),this.dragging=!1,this.drag_sensitivity=20,this.scale=1,this.element.style.top=0,this.element.style.left=0,this.maxX=0,this.maxY=0,this.startTouchY=0,this.startTouchX=0,this.contentOffsetX=0,this.contentOffsetY=0,this.observer.addEventListener("touchstart",this,!1),this.observer.addEventListener("touchmove",this,!1),this.observer.addEventListener("touchend",this,!1)},TouchController.prototype.handleEvent=function(e){switch(e.type){case"touchstart":this.onTouchStart(e);break;case"touchmove":this.onTouchMove(e);break;case"touchend":this.onTouchEnd(e)}},TouchController.prototype.computeBoundaries=function(){this.maxX=this.parent.clientWidth-this.element.clientWidth,this.maxY=this.parent.clientHeight-this.element.clientHeight,this.maxX=this.maxX<0?this.maxX:0,this.maxY=this.maxY<0?this.maxY:0,this.hbar&&0!==this.maxX?(this.hratio=this.parent.clientWidth/this.element.clientWidth,this.hbar.width(this.hratio*this.parent.clientWidth),this.hbar.show()):this.hbar&&this.hbar.hide(),this.vbar&&0!==this.maxY?(this.vratio=this.parent.clientHeight/this.element.clientHeight,this.vbar.height(this.vratio*this.parent.clientHeight),this.vbar.show()):this.vbar&&this.vbar.hide(),0===this.maxX&&0===this.maxY&&(this.element.style.minWidth=this.parent.clientWidth+"px",this.element.style.minHeight=this.parent.clientHeight+"px","reportContainer"===this.element.id&&(this.element.style.maxWidth=this.parent.clientWidth+"px",this.element.style.maxHeight=this.parent.clientHeight+"px"))},TouchController.prototype.onTouchStart=function(e){this.scale_pre=!1,this.computeBoundaries(),this.startTouchX=e.touches[0].clientX,this.startTouchY=e.touches[0].clientY,this.contentStartOffsetX=this.contentOffsetX,this.contentStartOffsetY=this.contentOffsetY},TouchController.prototype.onTouchMove=function(e){var t=e.touches[0].clientY,i=e.touches[0].clientX;(!this.use2Fingers||this.use2Fingers&&2==e.touches.length)&&(this.dragging?this.animateTo(i,t):this.isDragging(e)&&(TouchController.element_scrolled=!0,this.forceLayout&&(this.element.style.top=0,this.element.style.webkitTransform="translate3d(0,"+this.contentOffsetY+"px,0)"),this.animateTo(i,t)))},TouchController.prototype.onTouchEnd=function(e){this.dragging&&(this.forceLayout&&(this.element.style.webkitTransform="translate3d(0,0,0)",this.element.style.top=this.contentOffsetY+"px"),this.hbar&&this.hbar.hide(),this.vbar&&this.vbar.hide(),e.preventDefault(),this.shouldStartMomentum()),this.dragging=!1},TouchController.prototype.animateTo=function(e,t){var i=e-this.startTouchX,n=t-this.startTouchY,o=i+this.contentStartOffsetX,s=n+this.contentStartOffsetY,r=jQuery(this.element).position();this.translate3d?(o>0&&(o=0),s>0&&(s=0),o<this.maxX&&(o=this.maxX),s<this.maxY&&(s=this.maxY)):(o+r.left>0&&(o=-1*r.left),s+r.top>0&&(s=-1*r.top),r.left+o<this.maxX&&(o=this.maxX-r.left),r.top+s<this.maxY&&(s=this.maxY-r.top)),this.contentOffsetX=o,this.contentOffsetY=s,this.translate3d||this.use2Fingers?this.element.style.webkitTransform="scale("+this.scale+") translate3d("+o+"px,"+s+"px, 0)":(this.element.style.top=r.top+s+"px",this.element.style.left=r.left+o+"px"),this.hbar&&this.hbar.css("left",-1*o*this.hratio+"px"),this.vbar&&this.vbar.css("top",-1*s*this.vratio+"px")},TouchController.prototype.isDragging=function(e){var t=e.touches[0].clientX-this.startTouchX,i=e.touches[0].clientY-this.startTouchY,n=Math.abs(t),o=Math.abs(i);return this.dragging=n>this.drag_sensitivity||o>this.drag_sensitivity?!0:!1,this.dragging},TouchController.prototype.shouldStartMomentum=function(){return!1},TouchController.prototype.reset=function(){var e=this.contentOffsetX,t=this.contentOffsetY;this.maxX=this.parent.clientWidth-this.element.clientWidth,this.maxY=this.parent.clientHeight-this.element.clientHeight,this.translate3d?(this.element.style.webkitTransform="scale("+this.scale+") translate3d("+e+"px,"+t+"px, 0)",this.element.style.webkitTransform="scale("+this.scale+") translate3d(0,0,0)",this.contentOffsetX=0,this.contentOffsetY=0):(this.element.style.top=0,this.element.style.left=0)},TouchController.prototype.forceRefresh=function(){},TouchController.prototype.isBottom=function(){return this.maxY>=0?!1:this.contentOffsetY-this.maxY<10},TouchController.prototype.addPadding=function(e,t){var i=jQuery("#"+e).width()+t.right,n=jQuery("#"+e).height()+t.bottom;this.element.style.width=i+"px",this.element.style.height=n+"px"},define("touchcontroller",["jquery"],function(e){return function(){var t;return t||e.TouchController}}(this)),JSTooltip.addVar("SEPARATOR","@@"),JSTooltip.addVar("TOOLTIP_LABEL","tooltiplabel"),JSTooltip.addVar("TOOLTIP_TEXT","tooltiptext"),JSTooltip.addVar("TOOLTIP_TEMPLATE","tooltiptemplate"),JSTooltip.addVar("TOOLTIP_TEMPLATE_ID","jsTooltip"),JSTooltip.addVar("LABEL_PATTERN",".message.label"),JSTooltip.addVar("TEXT_PATTERN",".message:not(.label)"),JSTooltip.addMethod("_toAttribute",function(e,t){this.srcElement&&(t=xssUtil.escape(t),this.srcElement.writeAttribute(e,isArray(t)?t.join(this.SEPARATOR):t))}),JSTooltip.addMethod("_fromAttribute",function(e){if(this.srcElement&&this.srcElement.hasAttribute(e)){var t=this.srcElement.readAttribute(e);return t.include(this.SEPARATOR)?t.split(this.SEPARATOR):t}return null}),JSTooltip.addMethod("_setValues",function(e,t){e.each(function(e,i){t[i]&&e.update(xssUtil.escape(t[i]))})}),JSTooltip.addMethod("_calculateZIndex",function(e){function t(e){return parseInt(jQuery(e).css("z-index"))}var i=t(e);(!_.isNumber(i)||_.isNaN(i))&&(i=1e3);var n=_.flatten([this.srcElement,jQuery(this.srcElement).parents().toArray()]),o=_.reduce(n,function(e,i){var n=t(i);return _.isNumber(n)&&!_.isNaN(n)&&(e=Math.max(e,n)),e},i);return o+1}),JSTooltip.addMethod("_escapeText",function(e){return _.isArray(e)?_.map(e,function(e){return xssUtil.escape(e)}):xssUtil.escape(e)}),JSTooltip.addMethod("show",function(e){e&&(this.offsets=e),this._element=$(this.templateId);var e;this.showBelow?(e=getBoxOffsets(this.srcElement),e[1]+=this.srcElement.clientHeight+5):e=[getScrollLeft()+5,getScrollTop()+5],this.offsets&&(e[0]+=this.offsets[0],e[1]+=this.offsets[1]),this._element.setStyle({position:"absolute",left:e[0]+"px",top:e[1]+"px",zIndex:this._calculateZIndex(this._element)});var t=this._element.select(this.LABEL_PATTERN),i=this._element.select(this.TEXT_PATTERN);if(this.label&&this._setValues(t,isArray(this.label)?this.label:[this.label]),this.text&&this._setValues(i,isArray(this.text)?this.text:[this.text]),this._element.removeClassName(layoutModule.HIDDEN_CLASS),e[0]+this._element.clientWidth>jQuery(window).width()){var n=e[0]-this._element.clientWidth>0?e[0]-this._element.clientWidth:15;this._element.setStyle({left:n+"px"})}if(e[1]+this._element.clientHeight>jQuery(window).height()){var o=e[1]-this._element.clientHeight-10;this._element.setStyle({top:o+"px"})}return this.loadTextCallback&&!this.loadTextExecuted&&(this.loadTextExecuted=!0,this.loadTextCallback(this)),this}),JSTooltip.addMethod("updateText",function(e){this.text=this._escapeText(e),this.show()}),JSTooltip.addMethod("hide",function(){this._element&&this._element.addClassName(layoutModule.HIDDEN_CLASS)});var tooltipModule={TOOLTIP_PATTERN:"*[tooltiptext] > *",ELEMENT_WITH_TOOLTIP_PATTERN:"*[tooltiptext]",actualX:0,actualY:0,tooltips:[],showJSTooltip:function(e,t){e.jsTooltip||(e.jsTooltip=new JSTooltip(e,{})),this.actualX=t[0],this.actualY=t[1],this.cleanUp();var i=jQuery(e).attr("tooltipappeardelay");i=i?parseInt(i):1e3,e.jsTooltip.timer&&clearTimeout(e.jsTooltip.timer),e.jsTooltip.timer=setTimeout(function(){e.jsTooltip.show([tooltipModule.actualX,tooltipModule.actualY])},i),jQuery(e).on("mousemove",function(e){tooltipModule.actualX=e.clientX,tooltipModule.actualY=e.clientY})},hideJSTooltip:function(e){e&&e.jsTooltip&&(e.jsTooltip.timer&&clearTimeout(e.jsTooltip.timer),e.jsTooltip.hide(),jQuery(e).off("mousemove"))},cleanUp:function(){if(this.tooltips&&this.tooltips.length>0){var e=[],t="fuigasuifdughaiadbvguaidbapvuwbev";this.tooltips.each(function(i){i.srcElement.id&&document.getElementById(i.srcElement.id)||(i.srcElement.setAttribute("id",t),document.getElementById(t)||(i.hide(),e.push(i)),i.srcElement.setAttribute("id",null))}),e.length>0&&(this.tooltips=this.tooltips.reject(function(t){return e.include(t)}))}}};define("components.tooltip",["jquery","prototype","underscore","utils.common","core.layout"],function(e){return function(){var t;return t||e.JSTooltip}}(this)),document.observe(isSupportsTouch()?"drag:touchstart":"drag:mousedown",function(e){var t=e.memo.targetEvent.element();if(!isSupportsTouch()||!event.treeEvent&&!event.listEvent){var i=matchMeOrUp(t,layoutModule.LIST_ITEM_PATTERN);i&&!t.match(layoutModule.DISCLOSURE_BUTTON_PATTERN)&&buttonManager.down(i,function(e){return $(e).down(layoutModule.LIST_ITEM_WRAP_PATTERN)}),t.match(layoutModule.DISCLOSURE_BUTTON_PATTERN)&&buttonManager.down(t)}});var buttonManager={over:function(e,t){if(e&&!this.isSelected(e)){var i=t?t(e):e;$(i).addClassName(layoutModule.HOVERED_CLASS)}},out:function(e,t){if(e){var i=t?t(e):e;$(i).removeClassName(layoutModule.HOVERED_CLASS).removeClassName(layoutModule.PRESSED_CLASS)}},down:function(e,t){if(e&&!this.isSelected(e)){var i=t?t(e):e;$(i).removeClassName(layoutModule.HOVERED_CLASS).addClassName(layoutModule.PRESSED_CLASS)}},up:function(e,t){if(e&&!this.isSelected(e)){var i=t?t(e):e;i=$(i),i.removeClassName(layoutModule.PRESSED_CLASS),!isIPad()&&i.addClassName(layoutModule.HOVERED_CLASS)}},disable:function(e){e&&(buttonManager.out(e),$(e).writeAttribute(layoutModule.DISABLED_ATTR_NAME,layoutModule.DISABLED_ATTR_NAME))},enable:function(e){e&&(buttonManager.out(e),$(e).writeAttribute(layoutModule.DISABLED_ATTR_NAME,null))},isDisabled:function(e){return e?$(e).readAttribute(layoutModule.DISABLED_ATTR_NAME)===layoutModule.DISABLED_ATTR_NAME||$(e).hasClassName(layoutModule.DISABLED_CLASS):void 0},unSelect:function(e){e&&$(e).removeClassName(layoutModule.SELECTED_CLASS)},select:function(e){e&&$(e).addClassName(layoutModule.SELECTED_CLASS)},isSelected:function(e,t){if(e){var i=t?t(e):$(e),n=i.up("li");return n&&n.hasClassName(layoutModule.SELECTED_CLASS)}return!1}};document.observe("mouseup",function(e){if(isRightClick(e)){var t=e.element();document.fire(layoutModule.ELEMENT_CONTEXTMENU,{targetEvent:e,node:t})}}),document.observe("contextmenu",function(e){return Event.stop(e),!1}),document.observe("dom:loaded",function(){isIE()&&document.body.setAttribute("oncontextmenu","return false"),jQuery("body").on("mouseover mouseout",layoutModule.BUTTON_PATTERN,function(e){hasDisabledAttributeSet(this)||("mouseover"==e.type?buttonManager.over(this):buttonManager.out(this))}),jQuery("body").on("mousedown mouseup touchstart touchend",[layoutModule.BUTTON_PATTERN,layoutModule.MENU_LIST_PATTERN,layoutModule.DISCLOSURE_BUTTON_PATTERN,layoutModule.META_LINKS_PATTERN].join(","),function(e){"mousedown"==e.type||"touchstart"==e.type?!hasDisabledAttributeSet(this)&&buttonManager.down(this):!hasDisabledAttributeSet(this)&&buttonManager.up(this),("mouseup"==e.type||"touchend"==e.type)&&(this.parentNode.id==layoutModule.MAIN_NAVIGATION_HOME_ITEM_ID&&primaryNavModule.navigationOption("home"),this.parentNode.id==layoutModule.MAIN_NAVIGATION_LIBRARY_ITEM_ID&&primaryNavModule.navigationOption("library"))}),jQuery("#frame").on("touchend mouseup",".minimize",function(e){this.parentNode.className.indexOf("maximized")>=0?layoutModule.minimize(this):layoutModule.maximize(this),e.preventDefault()}),jQuery("#frame").on("touchend mouseup",layoutModule.TABSET_TAB_PATTERN,function(){if(!hasDisabledAttributeSet(this)){jQuery(this).siblings().removeClass(layoutModule.SELECTED_CLASS).each(function(){jQuery(jQuery(this).attr("tabId")).addClass("hidden")}),jQuery(this).addClass(layoutModule.SELECTED_CLASS),jQuery(jQuery(this).attr("tabId")).removeClass("hidden");var e=jQuery(this).closest(".tabs").find(".control.tabSet.anchor");"#attributesTab"===jQuery(this).attr("tabId")?e.addClass("attributesAnchor"):e.removeClass("attributesAnchor")}}),jQuery("#"+layoutModule.META_LINK_LOGOUT_ID).on("mousedown touchstart",function(e){e.preventDefault(),primaryNavModule.navigationOption("logOut")}),jQuery("body").on("mouseover mouseout click","[tooltiptext]",function(e){("mouseout"==e.type||"click"==e.type)&&tooltipModule.hideJSTooltip(this),"mouseover"==e.type&&tooltipModule.showJSTooltip(this,[e.clientX,e.clientY])}),jQuery("#mainNavigation").on("mouseover",layoutModule.NAVIGATION_MUTTON_PATTERN,function(e){primaryNavModule.showNavButtonMenu(e,this)}),isSupportsTouch()&&(document.body.addEventListener("touchstart",function(){window.calendar&&window.calendar.hide&&!window.calendar.hidden&&window.calendar.hide(),"undefined"!=typeof TouchController&&(TouchController.element_scrolled=!1)},!1),document.body.addEventListener("touchmove",function(){},!1)),jQuery("#filePath").on("mouseenter mouseout",function(){jQuery("#fake_upload_button").toggleClass("over")})}),define("core.events.bis",["jquery","prototype","utils.common","core.layout","components.tooltip"],function(e){return function(){var t;return t||e.buttonManager}}(this));var baseList={isResponsive:function(e){return $(e.up(0)).hasClassName(layoutModule.RESPONSIVE_CLASS)},isCollapsible:function(e){return $(e.up(0)).hasClassName(layoutModule.COLLAPSIBLE_CLASS)},selectItem:function(e){this.isItemDisabled(e)||$(e).addClassName(layoutModule.SELECTED_CLASS)},deselectItem:function(e){$(e).removeClassName(layoutModule.SELECTED_CLASS)},isItemSelected:function(e){return $(e).hasClassName(layoutModule.SELECTED_CLASS)},disableItem:function(e){buttonManager.disable(e)},enableItem:function(e){buttonManager.enable(e)},isItemDisabled:function(e){buttonManager.isDisabled(e)},openItem:function(e){$(e).removeClassName(layoutModule.CLOSED_CLASS).addClassName(layoutModule.OPEN_CLASS).isOpen=!0},isItemOpen:function(e){return $(e).hasClassName(layoutModule.OPEN_CLASS)||$(e).isOpen&&!$(e).hasClassName(layoutModule.CLOSED_CLASS)},closeItem:function(e){$(e).removeClassName(layoutModule.OPEN_CLASS).addClassName(layoutModule.CLOSED_CLASS).isOpen=!1}},dynamicList={lists:{},activeListId:null,_templateHash:{},messages:{listNItemsSelected:"#{count} items selected"}};dynamicList.ListItem=function(e){this._itemId=void 0,this._list=void 0,this.first=!1,this.last=!1,e&&(this._value=e.value?e.value:{},this._label=e.label?e.label:"",this._subList=e.subList,this._cssClassName=e.cssClassName?e.cssClassName:void 0,this._templateDomId=e.templateDomId?e.templateDomId:void 0,this._respondOnItemEvents=Object.isUndefined(e.respondOnItemEvents)?!0:e.respondOnItemEvents,this._excludeFromEventHandling=e.excludeFromEventHandling?e.excludeFromEventHandling:void 0,this._excludeFromSelectionTriggers=e.excludeFromSelectionTriggers?e.excludeFromSelectionTriggers:void 0)},dynamicList.ListItem.addVar("DEFAULT_TEMPLATE_DOM_ID","dynamicListItemTemplate"),dynamicList.ListItem.addVar("DEFAULT_ITEM_ID_PREFIX","item"),dynamicList.ListItem.addVar("DEFAULT_SUB_LIST_ID_SUFFIX","SubList"),dynamicList.ListItem.addMethod("getId",function(){return this._itemId}),dynamicList.ListItem.addMethod("setList",function(e){this._list=e,this.getList()&&(this._itemId=this.getList().getNextItemId())}),dynamicList.ListItem.addMethod("getList",function(){return this._list}),dynamicList.ListItem.addMethod("setValue",function(e){return this._value=e}),dynamicList.ListItem.addMethod("getValue",function(){return this._value}),dynamicList.ListItem.addMethod("setLabel",function(e){return this._label=e}),dynamicList.ListItem.addMethod("getLabel",function(){return this._label}),dynamicList.ListItem.addMethod("setCssClassName",function(e){this._cssClassName=e}).addMethod("getCssClassName",function(){return this._cssClassName}),dynamicList.ListItem.addMethod("setTemplateDomId",function(e){this._templateDomId=e}),dynamicList.ListItem.addMethod("getTemplateDomId",function(){return this._templateDomId}),dynamicList.ListItem.addMethod("show",function(e){if(e){this._element=this.processTemplate(this._getTemplate()),this._getElement().setAttribute("id",this._generateId()),this._getElement().setAttribute("tabindex",-1),this.first&&this.getList().tabindex&&this._getElement().writeAttribute("tabindex",this.getList().tabindex),this._getElement().listItem=this,this.refreshStyle();var t=e.childElements(),i=this.index(),n=i-1;n>-1&&n<t.length?this._getElement().insert({after:t[n]}):$(e).insert(this._getElement())}}),dynamicList.ListItem.addMethod("refresh",function(){isNotNullORUndefined(this._getElement())&&(this.getList()?(this._element=this.processTemplate(this._getElement()),this.refreshStyle()):(this._getElement().remove(),this._element=null))}),dynamicList.ListItem.addMethod("refreshStyle",function(){var e=this._getElement();e.templateClassName&&(e.className=e.templateClassName),this.first&&e.addClassName(layoutModule.FIRST_CLASS),this.last&&e.addClassName(layoutModule.LAST_CLASS),this.isSelected()&&e.addClassName(layoutModule.SELECTED_CLASS),this.isDisabled()&&e.addClassName(layoutModule.DISABLED_CLASS),this.getCssClassName()&&e.addClassName(this.getCssClassName())}),dynamicList.ListItem.addMethod("isRendered",function(){return isNotNullORUndefined(this._getElement())}),dynamicList.ListItem.addMethod("disable",function(){baseList.disableItem(this._getElement())}).addMethod("enable",function(){baseList.enableItem(this._getElement())}).addMethod("isDisabled",function(){return baseList.isItemDisabled(this._getElement())}),dynamicList.ListItem.addMethod("processTemplate",function(e){var t=e.childElements()[0];t.cleanWhitespace();var i=t.childElements().length;return i==t.childNodes.length?t.insert(xssUtil.escape(this.getLabel())):t.childNodes[i].data=this.getLabel(),e}),dynamicList.ListItem.addMethod("focus",function(){this._getElement().focus()}),dynamicList.ListItem.addMethod("remove",function(){this.getList().removeItems([this])}),dynamicList.ListItem.addMethod("isSelected",function(){return this.getList().isItemSelected(this)}),dynamicList.ListItem.addMethod("select",function(){this.getList().selectItem(this,!0)}),dynamicList.ListItem.addMethod("deselect",function(){this.getList().deselectItem(this)}),dynamicList.ListItem.addMethod("index",function(){this.getList().getItems().indexOf(this)}),dynamicList.ListItem.addMethod("_getElement",function(){if(!this._element){var e=$(this._generateId());this._element=Object.isElement(e)?e:void 0}return this._element}),dynamicList.ListItem.addMethod("_getTemplate",function(){var e=this._templateDomId;dynamicList._templateHash[e]||(dynamicList._templateHash[e]=e);var t=$(dynamicList._templateHash[e]).cloneNode(!0);return t.templateId=e,t.templateClassName=t.className,t}),dynamicList.ListItem.addMethod("_generateId",function(){return this.getList().getId()+"_"+this.DEFAULT_ITEM_ID_PREFIX+this.getId()}),dynamicList.ListItem.addMethod("_isElementInExcluded",function(e){var t=e.element();return this._excludeFromEventHandling&&null!=matchAny(t,this._excludeFromEventHandling)}),dynamicList.ListItem.addMethod("_isExcludedFromSelectionTriggers",function(e){var t=e.element();return this._excludeFromSelectionTriggers&&null!=matchAny(t,this._excludeFromSelectionTriggers)}),dynamicList.CompositeItem=function(e){dynamicList.ListItem.call(this,e),this.isComposite=!0,this._items=e.items,this._openUp=e.openUp,this._subList=null,this._subListOptions=e.listOptions?e.listOptions:{},this._listTagName="ul",this.OPEN_HANDLER_PATTERN=e.openHandlerPattern?e.openHandlerPattern:this.OPEN_HANDLER_PATTERN,this.CLOSE_HANDLER_PATTERN=e.closeHandlerPattern?e.closeHandlerPattern:this.CLOSE_HANDLER_PATTERN},dynamicList.CompositeItem.prototype=deepClone(dynamicList.ListItem.prototype),dynamicList.CompositeItem.addVar("OPEN_HANDLER_PATTERN","[openHandler=openHandler]"),dynamicList.CompositeItem.addVar("CLOSE_HANDLER_PATTERN","[closeHandler=closeHandler]"),dynamicList.CompositeItem.addMethod("getItems",function(){return this._items}),dynamicList.CompositeItem.addMethod("setItems",function(e){this._items=e}),dynamicList.CompositeItem.addMethod("addItem",function(e){this._items.push(e)}),dynamicList.CompositeItem.addMethod("removeItems",function(e){this._items=this._items.reject(function(t){return e.include(t)}),this._subList.removeItems(e)}),dynamicList.CompositeItem.addMethod("show",function(e){this._listTagName=e.tagName,dynamicList.ListItem.prototype.show.call(this,e),baseList.closeItem(this._getElement()),this._items&&this._showSubList()}),dynamicList.CompositeItem.addMethod("_showSubList",function(){var e=this._getSubListId(),t=new Element(this._listTagName,{id:e});this._getElement().insert(this._openUp?{top:t}:{bottom:t});var i=this._subListOptions;this._subList=new dynamicList.List(e,{responsive:i.responsive?i.responsive:this.getList()._responsive,collapsible:i.collapsible?i.collapsible:this.getList()._collapsible,multiSelect:i.multiSelect?i.multiSelect:this.getList()._multiSelect,cssClassName:i.cssClassName?i.cssClassName:this.getList()._cssClassName,listTemplateDomId:i.listTemplateDomId?i.listTemplateDomId:this.getList()._listTemplateDomId,itemTemplateDomId:i.itemTemplateDomId?i.itemTemplateDomId:this.getList()._itemTemplateDomId,itemCssClassName:i.itemCssClassName?i.itemCssClassName:this.getList()._itemCssClassName,comparator:i.comparator?i.comparator:this.getList()._comparator,items:this._items}),this._subList._initEvents=function(){},this._subList.show(),this._subList._parentList=this.getList(),this._subList.getItems().each(function(e){e.parentItem=this}.bind(this))}),dynamicList.CompositeItem.addMethod("refresh",function(){dynamicList.ListItem.prototype.refresh.call(this),this._items&&(this._subList?this._subList.refresh():this._showSubList())}),dynamicList.CompositeItem.addMethod("getFirstChild",function(){return this._subList.getItems()[0]}),dynamicList.CompositeItem.addMethod("refreshStyle",function(){dynamicList.ListItem.prototype.refreshStyle.call(this),baseList.isItemOpen(this._getElement())?baseList.openItem(this._getElement()):baseList.closeItem(this._getElement()),this._subList&&this._subList.refreshStyle()}),dynamicList.CompositeItem.addMethod("_isOpenHandler",function(e){return e.match(this.OPEN_HANDLER_PATTERN)}).addMethod("_isCloseHandler",function(e){return e.match(this.CLOSE_HANDLER_PATTERN)}),dynamicList.CompositeItem.addMethod("_getSubListId",function(){return this._generateId()+"_"+this.DEFAULT_SUB_LIST_ID_SUFFIX}),dynamicList.TemplatedListItem=function(e){this.tooltipText=e?e.tooltipText:null,dynamicList.ListItem.call(this,e)};var tempFunc=function(){};tempFunc.prototype=dynamicList.ListItem.prototype,dynamicList.TemplatedListItem.prototype=new tempFunc,dynamicList.TemplatedListItem.prototype.constructor=dynamicList.TemplatedListItem,dynamicList.TemplatedListItem.prototype.processTemplate=function(e){var t=Mustache.to_html(e.innerHTML,this.getValue());return e.innerHTML=xssUtil.escape(t),null!=this.tooltipText&&new JSTooltip(e,{text:xssUtil.escape(this.tooltipText)}),e},dynamicList.UnderscoreTemplatedListItem=function(e){dynamicList.TemplatedListItem.call(this,e),this._template=e?e.template:""};var tempFunc=function(){};tempFunc.prototype=dynamicList.TemplatedListItem.prototype,dynamicList.UnderscoreTemplatedListItem.prototype=new tempFunc,dynamicList.UnderscoreTemplatedListItem.prototype.constructor=dynamicList.UnderscoreTemplatedListItem,dynamicList.UnderscoreTemplatedListItem.prototype._getTemplate=function(){return this._template},dynamicList.UnderscoreTemplatedListItem.prototype.processTemplate=function(){var e=jQuery(_.template(this._template,xssUtil.escape(this.getValue())))[0];return e.templateClassName=e.className,null!=this.tooltipText&&new JSTooltip(e,{text:xssUtil.escape(this.tooltipText)}),e},dynamicList.List=function(e,t){this._id=e,this._items=[],this._selectedItems=[],this._lastSelectedItem=null,this._nextId=1,this.draggables=[],this._parentList=null,t&&(this._multiSelect=t.multiSelect?t.multiSelect:!1,this._cssClassName=t.cssClassName?t.cssClassName:"",this._listTemplateDomId=t.listTemplateDomId,this._itemTemplateDomId=t.itemTemplateDomId,this._itemCssClassName=t.itemCssClassName,this._comparator=t.comparator,this._excludeFromEventHandling=t.excludeFromEventHandling,this._excludeFromSelectionTriggers=t.excludeFromSelectionTriggers,this.dragPattern=t.dragPattern,this.selectOnMousedown=t.selectOnMousedown,this.scroll=t.scroll,this.setItems(t.items)),this._createFromTemplate(),this._registerCustomScroll(),dynamicList.activeListId=this.getId(),this._msgNItemsSelected=new Template(dynamicList.messages.listNItemsSelected),dynamicList.lists[this._id]=this},dynamicList.List.addVar("Event",{ITEM_SELECTED:"item:selected",ITEM_UNSELECTED:"item:unselected",ITEM_MOUSEUP:"item:mouseup",ITEM_MOUSEDOWN:"item:mousedown",ITEM_CLICK:"item:click",ITEM_DBLCLICK:"item:dblclick",ITEM_OPEN:"item:open",ITEM_CLOSED:"item:closed",ITEM_CONTEXTMENU:"item:contextmenu",ITEM_BEFORE_SELECT_OR_UNSELECT:"item:beforeSelectOrUnselect"}),dynamicList.List.addVar("DND_WRAPPER_TEMPLATE","column_two"),dynamicList.List.addVar("DND_ITEM_TEMPLATE","column_two:resourceName"),dynamicList.List.addMethod("getNextItemId",function(){return this._nextId++}),dynamicList.List.addMethod("getId",function(){return this._id}),dynamicList.List.addMethod("getItems",function(){return this._items}),dynamicList.List.addMethod("setItems",function(e){e&&(this._items=[],this.resetSelected(),this.addItems(e))}),dynamicList.List.addMethod("addItems",function(e){e&&(e.compact().each(function(e){this._prepareListItem(e),this._items.push(e)}.bind(this)),this._comparator&&(this._items=this._items.sort(this._comparator)))}),dynamicList.List.addMethod("insertItems",function(e,t){t&&(t=t.compact(),t.each(function(e){this._prepareListItem(e)}.bind(this)),this._items.splice.apply(this._items,[e,0].concat(t)),this._comparator&&(this._items=this._items.sort(this._comparator)))}),dynamicList.List.addMethod("_prepareListItem",function(e){e&&(e.setList(this),this._itemTemplateDomId&&!e.getTemplateDomId()&&e.setTemplateDomId(this._itemTemplateDomId),this._itemCssClassName&&!e.getCssClassName()&&e.setCssClassName(this._itemCssClassName),this._excludeFromEventHandling&&!e._excludeFromEventHandling&&(e._excludeFromEventHandling=this._excludeFromEventHandling),this._excludeFromSelectionTriggers&&!e._excludeFromSelectionTriggers&&(e._excludeFromSelectionTriggers=this._excludeFromSelectionTriggers))}),dynamicList.List.addMethod("removeItems",function(e){e&&isArray(e)&&(this._items=this._items.reject(function(t){return e.include(t)}),e.each(function(e){this.deselectItem(e)}.bind(this)),e.each(function(e){e.setList(null),e.refresh()}))}),dynamicList.List.addMethod("sort",function(e){e&&(this._comparator=e),this._comparator&&this.getItems().sort(this._comparator)}),dynamicList.List.addMethod("getSelectedItems",function(){return this._selectedItems}),dynamicList.List.addMethod("isItemSelected",function(e){return this.getSelectedItems().include(e)}),dynamicList.List.addMethod("selectItem",function(e,t,i,n){var o=this.fire(this.Event.ITEM_BEFORE_SELECT_OR_UNSELECT,{item:e});if(o.stopSelectOrUnselect)return!1;if(this._multiSelect&&this._selectedItems.length>1&&this.isItemSelected(e)&&!(t||i||n))return!1;var s=this.isItemSelected(e)&&n,r=!(this._multiSelect&&t||s),a=this.isItemSelected(e)&&t&&!s,l=!a&&isNotNullORUndefined(this._lastSelectedItem)&&i,c=!a&&!l;if(r&&this.resetSelected(),a&&!r&&this._removeItemFromSelected(e,t),l){var u=this._items.indexOf(this._lastSelectedItem),d=this._items.indexOf(e),h=Math.min(u,d),p=Math.max(u,d);if(h>-1)for(var f=h;p>=f;f++)this._addItemToSelected(this._items[f],!1);else this._addItemToSelected(this._items[p],!1)}return c&&(this._addItemToSelected(e,!i),this.cursor=e),!0}),dynamicList.List.addMethod("deselectItem",function(e){this._removeItemFromSelected(e)}),dynamicList.List.addMethod("deselectOthers",function(e,t,i,n,o){var s=this.fire(this.Event.ITEM_BEFORE_SELECT_OR_UNSELECT,{item:e,showConfirm:o&&o.showConfirm});if(!s.stopSelectOrUnselect&&this._multiSelect&&this._selectedItems.length>1&&this.isItemSelected(e)&&!(t||i||n)){var r=this._selectedItems.findAll(function(t){return t!=e});r.each(function(e){this._removeItemFromSelected(e)}.bind(this))}}),dynamicList.List.addMethod("resetSelected",function(e){var t=this._selectedItems;this._selectedItems=[],t.each(function(e){e.getList()!==this&&e.getList().resetSelected(!0),e.refreshStyle(),this.fire(this.Event.ITEM_UNSELECTED,{item:e})}.bind(this)),this._parentList&&!e&&this._parentList.resetSelected()}),dynamicList.List.addMethod("getNextItem",function(e){var t=this.getItems(),i=t.indexOf(e);return~i?this.getItems()[i+1]:null}),dynamicList.List.addMethod("getPreviousItem",function(e){var t=this.getItems(),i=t.indexOf(e);return~i?this.getItems()[i-1]:null}),dynamicList.List.addMethod("selectNext",function(e){var t=e.memo.targetEvent,i=this.cursor?this.cursor:this.getSelectedItems()[this.getSelectedItems().length-1],n=i.getList().getNextItem(i);n&&(isShiftHeld(t)?this.isItemSelected(n)?i.getList().deselectItem(i):this._addItemToSelected(n,!1):(this.resetSelected(),i.getList().selectItem(n)),n._getElement().focus(),this.cursor=n)}),dynamicList.List.addMethod("selectPrevious",function(e){var t=e.memo.targetEvent,i=this.cursor?this.cursor:this.getSelectedItems()[0],n=i.getList().getPreviousItem(i);n&&(isShiftHeld(t)?this.isItemSelected(n)?i.getList().deselectItem(i):this._addItemToSelected(n,!1):(this.resetSelected(),i.getList().selectItem(n)),n._getElement().focus(),this.cursor=n)}),dynamicList.List.addMethod("selectOutwards",function(e){var t=this.getSelectedItems()[0],i=t._getElement(),n=!baseList.isItemOpen(i)&&t.parentItem;n?(t.deselect(),n.select(),n._getElement().focus()):(baseList.closeItem(i),this.fire(this.Event.ITEM_CLOSED,{targetEvent:e,item:t}))}),dynamicList.List.addMethod("selectInwards",function(e){var t=this.getSelectedItems()[0];if(t.isComposite){var i=t._getElement(),n=baseList.isItemOpen(i)&&t.getFirstChild();n?(t.deselect(),n.select(),i.focus()):(baseList.openItem(i),this.fire(this.Event.ITEM_OPEN,{targetEvent:e,item:t}))}}),dynamicList.List.addMethod("show",function(){dynamicList.activeListId=this.getId(),this._getElement().update(),this.getItems().each(function(e,t){e.first=0===t,e.last=t===this.getItems().length-1,e.show(this._getElement())
}.bind(this)),this.draggables=[],this.scroll&&this.scroll.refresh(),this._initEvents()}),dynamicList.List.addMethod("refresh",function(){this.refreshStyle();var e=this._getElement().childElements(),t=[];this.getItems().each(function(i,n){if(i.first=0===n,i.last=n===this.getItems().length-1,i.isRendered())if(i.index()!=e.indexOf(i._getElement())){var o=baseList.isItemOpen(i._getElement());i._getElement().remove(),i.show(this._getElement()),o&&baseList.openItem(i._getElement())}else i.refresh();else i.show(this._getElement());t.push(i._getElement())}.bind(this)),e.each(function(e){!t.include(e)&&e.parentNode&&e.remove()})}),dynamicList.List.addMethod("refreshStyle",function(){var e=this._getElement();e.templateClassName&&(e.className=e.templateClassName),this._cssClassName&&e.addClassName(this._cssClassName)}),dynamicList.List.addMethod("fire",function(e,t){return this._getElement().fire(e,t)}),dynamicList.List.addMethod("observe",function(e,t){this._getElement().observe(e,t)}),dynamicList.List.addMethod("stopObserving",function(e,t){this._getElement().stopObserving(e,t)}),dynamicList.List.addMethod("_getElement",function(){return this._element||(this._element=$(this.getId())),this._element}),dynamicList.List.addMethod("getItemByEvent",function(e){if(e)for(var t=Event.element(e);t&&t.readAttribute&&t.readAttribute("id")!==this.getId();){var i=t.listItem;if(i&&null!=i.getList())return i._label=xssUtil.unescape(i._label),i;t=$(t.parentNode)}return null}),dynamicList.List.addMethod("_createFromTemplate",function(){var e=this._getElement().readAttribute("tabindex");this.tabindex=parseInt(e&&e.length>0?e:-1),this._getElement().insert({after:this._getTemplateElement(this._getElement())}),this._getElement().remove(),this._element=null,this._getElement().update(),this.tabindex&&this.tabindex.length>0&&this._getElement().writeAttribute("tabindex",this.tabindex),disableSelectionWithoutCursorStyle(this._getElement())}),dynamicList.List.addMethod("_getTemplateElement",function(e){var t=this._listTemplateDomId;dynamicList._templateHash[t]||(dynamicList._templateHash[t]=t);var i=$(dynamicList._templateHash[t]).cloneNode(!0);return i.writeAttribute("id",this.getId()),i.templateId=t,i.templateClassName=i.className,cloneCustomAttributes(e,i),i}),dynamicList.List.addMethod("_addItemToSelected",function(e,t){e&&!this.isItemSelected(e)&&(this._selectedItems.push(e),t&&(this._lastSelectedItem=e),e.refreshStyle(),this._parentList?this._parentList._addItemToSelected(e,t):this.fire(this.Event.ITEM_SELECTED,{item:e}))}),dynamicList.List.addMethod("_removeItemFromSelected",function(e,t){e&&this.isItemSelected(e)&&(this._selectedItems=this._selectedItems.without(e),e.refreshStyle(),this._parentList?this._parentList._removeItemFromSelected(e):this.fire(this.Event.ITEM_UNSELECTED,{item:e,isCtrlHeld:t}))}),dynamicList.List.addMethod("_buildDnDOverlay",function(e){e.setStyle({width:null,height:null}),e.items.length>1?e.update(this._msgNItemsSelected.evaluate({count:e.items.length})):1==e.items.length&&e.update(xssUtil.escape(e.items[0].getLabel()))}),dynamicList.List.addMethod("_registerCustomScroll",function(){if(!this.scroll&&this._getElement()){var e=this._getElement().up(layoutModule.SWIPE_SCROLL_PATTERN);if(e){var t=layoutModule.scrolls.get(e.identify());t&&(this.scroll=t)}}}),dynamicList.List.addMethod("createDraggableIfNeeded",function(e){var t=e.element();if(this.dragPattern&&!this.draggables[t.identify()]){var i=matchAny(t,[this.dragPattern],!0);if(i){if(!i||this.draggables[i.identify()])return;var n=this.getItemByEvent(e);this.draggables[i.identify()]=new Draggable(i,{superghosting:!0,mouseOffset:!0,onStart:this.setDragStartState.bind(this,n),onEnd:this.setDragEndState.bind(this,n)})}}}),dynamicList.List.addMethod("setDragStartState",function(e,t){var i=e._getElement().templateClassName;i&&t.element.addClassName(i),t.element.addClassName(layoutModule.DRAGGING_CLASS).addClassName(this.getId()),t.element.items=this.getSelectedItems().slice(0),this._buildDnDOverlay(t.element),t.options.scroll=this._getElement(),t.options.scrollSensitivity=layoutModule.SCROLL_SENSITIVITY,Draggables.dragging=this.regionID||!0}),dynamicList.List.addMethod("setDragEndState",function(){delete Draggables.dragging}),dynamicList.List.addMethod("_mouseupHandler",function(e){var t=e.element(),i=matchMeOrUp(t,layoutModule.BUTTON_PATTERN)&&this.getItemByEvent(e);if(i&&!i._isElementInExcluded(e)){if(e.listEvent=!0,i._respondOnItemEvents&&!e.isInvoked){if(this.fire(this.Event.ITEM_MOUSEUP,{targetEvent:e,item:i}),!i._isExcludedFromSelectionTriggers(e)){var n=isMetaHeld(e),o=isShiftHeld(e),s=isRightClick(e),r=!this.selectOnMousedown&&!TouchController.element_scrolled&&(!isSupportsTouch()||e.changedTouches.length>=1),a=r&&i.getList().selectItem(i,n,o,s);if(!r&&this._multiSelect&&this._selectedItems.length>1&&this.isItemSelected(i)&&!(n||o||s)&&(this._lastSelectedItem=i),i.getList().deselectOthers(i,isMetaHeld(e),isShiftHeld(e),isRightClick(e),{showConfirm:a}),this.twofingers){this.twofingers=!1;var l=jQuery(t).parents("li:first");l.hasClass("selected")&&document.fire(layoutModule.ELEMENT_CONTEXTMENU,{targetEvent:e,node:t})}}this.createDraggableIfNeeded(e)}e.isInvoked=!0}}),dynamicList.List.addMethod("_mousedownHandler",function(e){e="dataavailable"==e.type?e.memo.targetEvent:e;var t=e.element(),i=matchMeOrUp(t,layoutModule.BUTTON_PATTERN)&&this.getItemByEvent(e);if(i&&!i._isElementInExcluded(e)){if(e.listEvent=!0,this.twofingers=e.touches&&2==e.touches.length?!0:!1,i._respondOnItemEvents&&!e.isInvoked&&(this.fire(this.Event.ITEM_MOUSEDOWN,{targetEvent:e,item:i}),!i._isExcludedFromSelectionTriggers(e))){var n=this.selectOnMousedown;n&&i.getList().selectItem(i,isMetaHeld(e),isShiftHeld(e),isRightClick(e))}e.isInvoked=!0}}),dynamicList.List.addMethod("_mouseoverHandler",function(e){matchMeOrUp(e.element(),layoutModule.BUTTON_PATTERN)&&this.createDraggableIfNeeded(e)}),dynamicList.List.addMethod("_clickHandler",function(e){var t=matchMeOrUp(e.element(),layoutModule.BUTTON_PATTERN)&&this.getItemByEvent(e);if(t&&!t._isElementInExcluded(e)){if(!e.isInvoked){if(t._respondOnItemEvents&&this.fire(this.Event.ITEM_CLICK,{targetEvent:e,item:t}),!t.isComposite)return;var i=t._getElement(),n=e.element();t._isCloseHandler(n)&&baseList.isItemOpen(i)?(baseList.closeItem(i),this.fire(this.Event.ITEM_CLOSED,{targetEvent:e,item:t})):t._isOpenHandler(n)&&!baseList.isItemOpen(i)&&(baseList.openItem(i),this.fire(this.Event.ITEM_OPEN,{targetEvent:e,item:t}))}e.isInvoked=!0}}),dynamicList.List.addMethod("_dblclickHandler",function(e){var t=matchMeOrUp(e.element(),layoutModule.BUTTON_PATTERN)&&this.getItemByEvent(e);t&&!t._isElementInExcluded(e)&&(t._respondOnItemEvents&&!e.isInvoked&&this.fire(this.Event.ITEM_DBLCLICK,{targetEvent:e,item:t}),e.isInvoked=!0)}),dynamicList.List.addMethod("_initEvents",function(){var e=this._getElement();this.draggables=[],isSupportsTouch()?(e.stopObserving("touchstart").observe("touchstart",this._mousedownHandler.bindAsEventListener(this)),e.stopObserving("drag:touchstart").observe("drag:touchstart",this._mousedownHandler.bindAsEventListener(this)),e.stopObserving("touchend").observe("touchend",this._mouseupHandler.bindAsEventListener(this))):(e.stopObserving("mouseup").observe("mouseup",this._mouseupHandler.bindAsEventListener(this)),e.stopObserving("mousedown").observe("mousedown",this._mousedownHandler.bindAsEventListener(this)),e.stopObserving("drag:mousedown").observe("drag:mousedown",this._mousedownHandler.bindAsEventListener(this))),isIPad||e.stopObserving("mouseover").observe("mouseover",this._mouseoverHandler.bindAsEventListener(this)),e.stopObserving("click").observe("click",this._clickHandler.bindAsEventListener(this)),e.stopObserving("dblclick").observe("dblclick",this._dblclickHandler.bindAsEventListener(this)),e.stopObserving("key:down").observe("key:down",this.selectNext.bindAsEventListener(this)),e.stopObserving("key:up").observe("key:up",this.selectPrevious.bindAsEventListener(this)),e.stopObserving("key:right").observe("key:right",this.selectInwards.bindAsEventListener(this)),e.stopObserving("key:left").observe("key:left",this.selectOutwards.bindAsEventListener(this))}),dynamicList.UnderscoreTemplatedList=function(e,t){this._template=t?t.template:"",dynamicList.List.apply(this,arguments)};var tempFunc=function(){};tempFunc.prototype=dynamicList.List.prototype,dynamicList.UnderscoreTemplatedList.prototype=new tempFunc,dynamicList.UnderscoreTemplatedList.prototype.constructor=dynamicList.UnderscoreTemplatedList,dynamicList.UnderscoreTemplatedList.prototype._getTemplateElement=function(e){var t=jQuery(_.template(this._template,{}))[0];return t.writeAttribute("id",this.getId()),t.templateClassName=t.className,cloneCustomAttributes(e,t),t},define("components.list",["jquery","prototype","components.layout","touchcontroller","utils.common","dragdrop.extra","core.events.bis"],function(e){return function(){var t;return t||e.dynamicList}}(this)),"undefined"==typeof localContext&&(localContext=window);var actionModel={};actionModel.SIMPLE_ACTION="simpleAction",actionModel.SELECT_ACTION="selectAction",actionModel.INPUT_ACTION="inputAction",actionModel.OPTION_ACTION="optionAction",actionModel.SEPARATOR="separator",actionModel.SINGLE_SELECT_CONSTRAINT="singleSelect",actionModel.HIGH_Z_INDEX=99999,actionModel.RES_LABEL="$label",actionModel.RES_ID="$id",actionModel.RES_SELECTED="$selected",actionModel.EVENT="$event",actionModel.selObjects=[],actionModel.lastItemWasSeparator=!1,actionModel.noItemsYet=!0,actionModel.data=null,actionModel.openedSubMenus=[],actionModel.parentMenu="",actionModel.menuDom=null,actionModel.menuListDom=null,actionModel.PARENT_MENU_CONTAINER="menuList",actionModel.PARENT_MENU_STYLE="menu vertical context hidden",actionModel.SIMPLE_ACTION_DOM_ID="menuList_simpleAction",actionModel.SEPARATOR_DOM_ID="menuList_separator",actionModel.FLYOUT_PARENT_DOM_ID="menuList_flyout",actionModel.EXTRA_INPUT_DOM_ID="menuList_extraInput",actionModel.LIST_ITEM_DOM_ID="menuList_listItem",actionModel.DISPLAY_STYLE="inline",actionModel.DROP_DOWN_MENU=".dropDown",actionModel.showDynamicMenu=function(e,t,i,n,o,s){if(null==e){if(!isProVersion())return;var r=designerBase.getSelectedObject();if(!r||!r.menuLevel)return;e=r.menuLevel}actionModel.resetMenu(),actionModel.updateCSSClass(i),actionModel.initActionModelData(o),actionModel.assembleMenuFromActionModel(e,t,actionModel.menuListDom,s),actionModel.setMenuPosition(actionModel.menuDom,t,n),actionModel.setMenuEventHandlers(actionModel.menuDom),isIE()&&jQuery("#"+actionModel.menuDom.id).prepend('<div class="msshadow"></div>'),actionModel.makeMenuVisible(actionModel.menuDom),isIE7()&&setWidthStyleByReflection(actionModel.menuDom,".content"),actionModel.adjustMenuPosition(actionModel.menuDom),actionModel.focusMenu(),jQuery("body").on("mouseout",actionModel.closeHandler)},actionModel.closeHandler=function(e){var t=jQuery(e.relatedTarget);(t.hasClass("mutton")||t.parents(".mutton").length)&&e.relatedTarget||"menu"===t.attr("id")||t.parents("#menu").length?e.stopPropagation():(jQuery("body").trigger("actionmodel-mouseout"),actionModel.hideMenu())},actionModel.resetMenu=function(){var e=$("menu");e.parentId=void 0,e.setAttribute("tabIndex",-1),e.childElements().each(function(e){Element.remove(e)}),e.innerHTML=$("commonMenu").cloneNode(!0).innerHTML;var t=e.down("ul"),i=t.readAttribute("id");t.writeAttribute("id",actionModel.updateTemplateId(i)),e.className=actionModel.PARENT_MENU_STYLE,e.writeAttribute("style",""),actionModel.menuDom=e,actionModel.menuListDom=t},actionModel.updateTemplateId=function(e){var t=new RegExp("_template");return e.replace(t,"")},actionModel.updateCSSClass=function(e){isNotNullORUndefined(e)&&($(actionModel.menuDom).className=e+" hidden")},actionModel.setMenuPosition=function(e,t,i){var n=t?t:window.event,o=Event.pointer(n);isSupportsTouch()&&n.changedTouches&&(o={x:n.changedTouches[0].pageX+20,y:n.changedTouches[0].pageY});var s,r;isNotNullORUndefined(i)?(s=isNotNullORUndefined(i.menuLeft)?i.menuLeft:o.x,r=isNotNullORUndefined(i.menuTop)?i.menuTop:o.y):(s=o.x,r=o.y),e.setStyle({left:s+"px",top:r+"px"})},actionModel.adjustMenuPosition=function(e,t,i,n,o){(!$(e).hasClassName("dropDown")||$(e).hasClassName("fitable"))&&fitObjectIntoScreen(e,null,i,null,o)},actionModel.assembleMenuFromActionModel=function(e,t,i,n){actionModel.noItemsYet=!0;var o=actionModel.data[e];n&&(o=n(e,o)),o.each(function(e){actionModel.appendToMenu(e,t,i)}),actionModel.removeTrailingSeparator()},actionModel.initActionModelData=function(e){actionModel.data="navigationActionModel"===e?primaryNavModule.JSON:_.isString(e)?jQuery("#"+e).html().evalJSON():e},actionModel.appendToMenu=function(e,t,i){if(actionModel.passesClientTest(e)){var n=getMenuMouseupFunction(getAsFunction(e.action),e.actionArgs,e.text,e.id,t);actionModel.appendDesiredRowType(e,t,n,i)}},actionModel.appendDesiredRowType=function(e,t,i,n){var o=function(){actionModel.isMenuShowing()&&actionModel.hideMenu(),i&&i()};e.type==actionModel.SIMPLE_ACTION&&actionModel.addSimpleActionRow(e,o,n),e.type!=actionModel.SEPARATOR||actionModel.lastItemWasSeparator||actionModel.addSeparatorRows(e,n),e.type==actionModel.SELECT_ACTION&&actionModel.addSelector(e,n,t),e.type==actionModel.OPTION_ACTION&&actionModel.addOption(e,o,n)},actionModel.addSimpleActionRow=function(e,t,i){var n=null;n=e.className&&"requiresInput"==e.className?$(actionModel.EXTRA_INPUT_DOM_ID).cloneNode(!0):$(actionModel.SIMPLE_ACTION_DOM_ID).cloneNode(!0),isSupportsTouch()?n.ontouchend=t:n.onmouseup=t,n.onmouseup_saved=t;var o=$(n).down(".button"),s=document.createTextNode(e.text);s.nodeValue=replaceNbsps(s.nodeValue),o.appendChild(s);var r=n.readAttribute("id")+getRandomId();n.writeAttribute("id",r),actionModel.insertMenuRow(i,n,!1,e.isDisabled,e.id,null)},actionModel.addSeparatorRows=function(e,t){var i=null;if(!actionModel.noItemsYet){var n=$(actionModel.SEPARATOR_DOM_ID).cloneNode(!0),o=n.readAttribute("id")+getRandomId();n.writeAttribute("id",o),e.className&&(i=e.className),actionModel.insertMenuRow(t,n,!0,e.isDisabled,null,i)}},actionModel.addOption=function(e,t,i){if(actionModel.passesClientTest(e)){var n=null,o=$(actionModel.LIST_ITEM_DOM_ID).cloneNode(!0);e.button=e.button&&"true"==String(e.button).toLowerCase()?!0:!1,isSupportsTouch()?o.ontouchend=t:o.onmouseup=t,o.onmouseup_saved=t;var s=$(o).down(".button"),r=document.createTextNode(e.text);r.nodeValue=replaceNbsps(r.nodeValue),s.appendChild(r);var a=o.readAttribute("id")+getRandomId();o.writeAttribute("id",a),e.className&&(n=e.className),!e.button&&evaluateTest(e.isSelectedTest,e.isSelectedTestArgs,e.text,e.id,!1,!1)&&s.addClassName("down"),actionModel.insertMenuRow(i,o,!1,e.isDisabled,e.id,n)}},actionModel.addSelector=function(e,t,i){var n,o=e.className;if("flyout"==o){if(e&&e.children.length>0){n=$(actionModel.FLYOUT_PARENT_DOM_ID).cloneNode(!0);var s=$(n).down(".button"),r=document.createTextNode(e.text);r.nodeValue=replaceNbsps(r.nodeValue),s.appendChild(r);var a=n.readAttribute("id")+getRandomId();n.writeAttribute("id",a),actionModel.insertMenuRow(t,n,!1,e.isDisabled,e.id,null);var l=actionModel.menuDom.cloneNode(!1);l.writeAttribute("id",n.readAttribute("id")+"_subMenu"),l.innerHTML=$("commonMenu").cloneNode(!0).innerHTML;var c=l.down("ul"),u=c.readAttribute("id");c.writeAttribute("id",actionModel.updateTemplateId(u)),n.appendChild(l);var d=l.select("ul")[0],h=d.writeAttribute("id",d.readAttribute("id")+"_subMenu");actionModel.buildSubMenu(e,h,i)}}else e.children.each(function(e){var n=getMenuMouseupFunction(getAsFunction(e.action),e.actionArgs,e.text,e.id,i);actionModel.appendDesiredRowType(e,i,n,t)})},actionModel.getSubMenuLeft=function(e){var t=$(e).up(2).clientWidth,i=Math.abs(parseInt($(e).up(1).offsetLeft));return t+i},actionModel.getSubMenuTop=function(e){return Math.abs(parseInt($(e).offsetTop))},actionModel.showChildSubmenu=function(e){var t,i,n=e.parentNode.parentNode.parentNode.id,o=!1;for(t=0;t<actionModel.openedSubMenus.length;t++)actionModel.openedSubMenus[t]==n&&(i=t,o=!0,jQuery("#"+n+">div.content>ul").children("li.node").each(function(){actionModel.hideChildSubmenu(jQuery(this).get(0))})),o&&jQuery("#"+actionModel.openedSubMenus[t]+">div.content>ul").children("li.node").each(function(){actionModel.hideChildSubmenu(jQuery(this).get(0))});actionModel.openedSubMenus.splice(i,actionModel.openedSubMenus.length-i);var s=null,r=null,a=null,l=20,c=e.childElements()[1];c.setStyle({display:actionModel.DISPLAY_STYLE}),c.setStyle({position:"absolute"});var u=actionModel.getSubMenuLeft(e),d=0;c.setStyle({left:u+"px",top:d+"px"}),isIE()&&jQuery(c).prepend('<div class="msshadow"></div>'),actionModel.makeMenuVisible(c),isIE7()&&setWidthStyleByReflection(c,".content"),s=$(c).cumulativeOffset()[1],r=$(c).getHeight();var h=getWindowHeight(),p=s+r;p>h&&(d=h-p-l,c.setStyle({top:d+"px"}));var f=c.cumulativeOffset()[0];a=c.getWidth(),getWindowWidth()<f+a&&c.setStyle({left:"-"+a+"px"}),actionModel.openedSubMenus.push(n)},actionModel.hideChildSubmenu=function(e){var t=e.childElements()[1];t.setStyle({display:"none"}),t.setStyle({position:"absolute"}),t.setStyle({left:0}),actionModel.makeMenuInVisible($(t))},actionModel.makeMenuVisible=function(e){var t=e.down("ul");t.childElements().length>0&&(e.setStyle({zIndex:actionModel.HIGH_Z_INDEX}),$(e).removeClassName("hidden"))},actionModel.makeMenuInVisible=function(e){e.addClassName("hidden")},actionModel.buildSubMenu=function(e,t,i){e.children.each(function(e){actionModel.appendToMenu(e,i,$(t))})},actionModel.isMenuShowing=function(){return!("none"==$("menu").getStyle("display")||$("menu").hasClassName("hidden"))},actionModel.updateRowDom=function(e,t){if(e){e.innerHTML=t;var i=e.readAttribute("id")+getRandomId();e.writeAttribute("id",i)}return e},actionModel.launchNewMenu=function(){actionModel.hideMenu(),alert("action not implemented...")},actionModel.insertMenuRow=function(e,t,i,n,o,s){null==t.readAttribute("id")&&(o?t.setAttribute("id",o):t.identify()),n&&actionModel.disableMenuOption(t),s&&t.addClassName(s),e.appendChild(t),actionModel.lastItemWasSeparator=i,actionModel.noItemsYet=!1},actionModel.disableMenuOption=function(e){buttonManager.disable(e),_.isEmpty(e.childNodes)&&buttonManager.disable(e.childNodes[0])},actionModel.passesClientTest=function(e){var t,i=!0;if(e.clientTest){t=e.clientTest;var n=!1;t.startsWith("!")&&(t=e.clientTest.sub("!",""),n=!0),i=evaluateTest(t,e.clientTestArgs,e.text,e.id,n,null)}var o=actionModel.selObjects;return _.isEmpty(o)||i&&e.selectionConstraint&&(i=e.selectionConstraint==actionModel.SINGLE_SELECT_CONSTRAINT?1==o.length:o.length>1),i},actionModel.removeTrailingSeparator=function(){var e=actionModel.menuListDom.lastChild;if($(e)&&!actionModel.noItemsYet){var t=e.identify(),i=new RegExp("w*separatorw*");i.test(t)&&e.remove()}},actionModel.getMenuParent=function(){return $(actionModel.menuDom.parentId)},actionModel.getFirstMenuButton=function(){return actionModel.menuDom.down(layoutModule.BUTTON_PATTERN,0)},actionModel.focusMenu=function(){var e=actionModel.menuDom;if(actionModel.lastFocused=document.activeElement,!e.hasClassName(layoutModule.HIDDEN_CLASS)&&e.focus(),!e.match(actionModel.DROP_DOWN_MENU)&&!isSupportsTouch()){var t=e.select("li");if(t[0]){var i=t[0].down(layoutModule.BUTTON_PATTERN);i&&buttonManager.over(i)}}},actionModel.showDropDownMenu=function(e,t,i,n,o){t=jQuery(t);var s=t.offset(),r={menuLeft:s.left,menuTop:s.top+t.height()-1};actionModel.showDynamicMenu(i,e,n,r,o)},actionModel.setMenuEventHandlers=function(e){e.select("li").each(function(e){e.hasClassName("disabled")||e.hasClassName("node")&&(isSupportsTouch()?Event.observe(e,"touchstart",function(t){t.firstCall||actionModel.showChildSubmenu(e),t.firstCall=!0}):(Event.observe(e,"mouseenter",function(){actionModel.showChildSubmenu(e)}),Event.observe(e,"mouseleave",function(){actionModel.hideChildSubmenu(e)})))})},actionModel.initializeOneTimeMenuHandlers=function(){$("menu").observe("mouseenter",function(){var e=this.select("."+layoutModule.HOVERED_CLASS)[0];e&&buttonManager.out(e)}.bind($("menu")))},actionModel.hideMenu=function(){if(actionModel.isMenuShowing()){var e=function(){var e=actionModel.lastFocused;try{e&&e.focus()}catch(t){}};!isSupportsTouch()&&setTimeout(e,0),actionModel.makeMenuInVisible($("menu")),jQuery("body").off("mouseout",actionModel.closeHandler)}},actionModel.createMenuElement=function(e,t){if(!e)throw new Error("Can not construct actionModel object: type can not be empty");return Object.extend({type:e},t)},actionModel.setSelected=function(e){actionModel.selObjects=e},define("actionModel.modelGenerator",["prototype","utils.common","core.events.bis"],function(e){return function(){var t;return t||e.actionModel}}(this));var accessibilityModule={ATTR_TAB_INDEX:"data-tab-index",ATTR_COMPONENT_TYPE:"data-component-type",delayTime:500,components:[],currentTabIndex:-1,disabled:!1,initialize:function(){var e=$$("*["+this.ATTR_TAB_INDEX+"]");e.each(function(e){var t=this.getTabIndex(e);t>0&&(this.components[t]=e)}.bind(this))},enable:function(){this.disabled=!1},disable:function(){this.disabled=!0},_focusByType:{tree:function(e){var t=e.readAttribute("id"),i=dynamicTree.trees[t];if(i){var n=i.selectedNodes.last();n=n||(i.bShowRoot?i.getRootNode():i.getRootNode().getFirstChild()),n&&(n.isSelected()||n.select(),accessibilityModule._doFocus(n))}},list:function(e){var t=e.readAttribute("id"),i=dynamicList.lists[t];if(i){var n=i.getSelectedItems().last();n=n||i.getItems().first(),n&&(n.isSelected()||n.select(),accessibilityModule._doFocus(n))}},search:function(e){var t=e.down("input");t&&t.select(),accessibilityModule._doFocus(t)},navigation:function(e){var t=e.down("#main_home");buttonManager.over(t.down(layoutModule.BUTTON_PATTERN)),accessibilityModule._doFocus(t)},linkList:function(e){buttonManager.over(e.down("a")),accessibilityModule._doFocus(e)}},_blurByType:{navigation:function(e){actionModel.hideMenu(),e.select(".over").each(function(e){buttonManager.out(e)})},linkList:function(e){e.select("a.over").each(function(e){buttonManager.out(e)})}},_doFocus:function(e){setTimeout(function(){e.focus()},this.delayTime)},_focusComponent:function(e){var t=e&&this.getType(e)&&this._focusByType[this.getType(e)];return t&&t(e)},_blurComponent:function(e){var t=e&&this.getType(e)&&this._blurByType[this.getType(e)];return t&&t(e)},findTabComponent:function(e){for(var t;e&&!t;)t=e.hasAttribute&&e.hasAttribute(this.ATTR_TAB_INDEX)&&e,e=$(e.parentNode);return t},getTabIndex:function(e){var t=-1;if(e&&e.hasAttribute){e.hasAttribute(this.ATTR_TAB_INDEX)||(e=accessibilityModule.findTabComponent(e));var i=e?e.readAttribute(this.ATTR_TAB_INDEX):this.currentTabIndex;try{i&&i.length>0&&(t=parseInt(i))}catch(n){}}return t},getType:function(e){return e&&e.hasAttribute(this.ATTR_COMPONENT_TYPE)?e.readAttribute(this.ATTR_COMPONENT_TYPE):void 0},getNext:function(e){var t=-1;if(this.components.length>0)for(e||(e=this.currentTabIndex),0>e&&(e=0),t=e+1;Object.isUndefined(this.components[t])&&t!=e;)t++,t<this.components.length||(t=0);return t},getPrevious:function(e){var t=-1;if(this.components.length>0)for(e||(e=this.currentTabIndex),0>e&&(e=0),t=e-1;Object.isUndefined(this.components[t])&&t!=e;)t--,t>-1||(t=this.components.length-1);return t},focusNext:function(e){this.focusByIndex(this.getNext(e))},focusPrevious:function(e){this.focusByIndex(this.getPrevious(e))},focusByIndex:function(e){e>-1&&(this.currentTabIndex=e)&&this._focusComponent(this.components[e])},blurCurrent:function(){var e=this.components[this.currentTabIndex];e&&this._blurComponent(e)},blurByIndex:function(e){var t=this.components[e];t&&this._blurComponent(t)}};document.observe("key:tab",function(e){if(!accessibilityModule.disabled){if(!t)var t=window.event;var i=accessibilityModule.getTabIndex(e.element());return accessibilityModule.blurCurrent(),isShiftHeld(e)?accessibilityModule.focusPrevious(i):accessibilityModule.focusNext(i),e.stop(),!1}}),define("core.accessibility",["prototype","components.list","actionModel.modelGenerator","core.events.bis"],function(e){return function(){var t;return t||e.accessibilityModule}}(this));var keyManager={ignoreKeyDown:[Keys.DOM_VK_SHIFT,Keys.DOM_VK_CONTROL,Keys.DOM_VK_ALT],noBubbleOnKeyUp:[Keys.DOM_VK_F10]};document.observe("keyup",function(e){keyManager.noBubbleOnKeyUp.include(e.keyCode)&&Event.stop(e)}),document.observe("keydown",function(e){if(!keyManager.ignoreKeyDown.include(e.keyCode)){var t=e.element();return e.keyCode==Event.KEY_RETURN?void t.fire("key:enter",{targetEvent:e,node:t}):e.shiftKey&&e.keyCode==Keys.DOM_VK_F10?(Event.stop(e),void t.fire("key:contextMenu",{targetEvent:e,node:t})):e.keyCode==Event.KEY_LEFT?void t.fire("key:left",{targetEvent:e,node:t}):e.keyCode==Event.KEY_RIGHT?void t.fire("key:right",{targetEvent:e,node:t}):e.keyCode==Event.KEY_UP?void t.fire("key:up",{targetEvent:e,node:t}):e.keyCode==Event.KEY_DOWN?void t.fire("key:down",{targetEvent:e,node:t}):isMetaHeld(e)&&89==e.keyCode?void t.fire("key:redo",{targetEvent:e,node:t}):isMetaHeld(e)&&90==e.keyCode?void t.fire("key:undo",{targetEvent:e,node:t}):e.keyCode==Event.KEY_ESC?void t.fire("key:escape",{targetEvent:e,node:t}):e.keyCode==Event.KEY_TAB?void t.fire("key:tab",{targetEvent:e,node:t}):e.keyCode==Event.KEY_DELETE?void t.fire("key:delete",{targetEvent:e,node:t}):65==e.keyCode&&isMetaHeld(e)?void t.fire("key:selectAll",{targetEvent:e,node:t}):83==e.keyCode&&isMetaHeld(e)&&!isShiftHeld(e)?void t.fire("key:save",{targetEvent:e,node:t}):76==e.keyCode&&isMetaHeld(e)&&isShiftHeld(e)?void t.fire("key:chartZoomIn",{targetEvent:e,node:t}):79==e.keyCode&&isMetaHeld(e)&&isShiftHeld(e)?void t.fire("key:chartZoomOut",{targetEvent:e,node:t}):void 0}}),document.observe("key:esc",function(){actionModel.isMenuShowing()&&actionModel.hideActionModelMenu()}),document.observe("key:enter",function(e){var t,i=e.element(),n=$(layoutModule.MENU_ID);if(layoutModule.isVisible(n)){Event.stop(e);var o=n.select("."+layoutModule.HOVERED_CLASS)[0];if(o){var s=o.up(layoutModule.MENU_LIST_PATTERN);setTimeout(s.onmouseup.curry(e.memo.targetEvent),0)}}t=matchMeOrUp(i,layoutModule.NAVIGATION_PATTERN),t&&(t.identify()==layoutModule.MAIN_NAVIGATION_HOME_ITEM_ID?(Event.stop(e),primaryNavModule.navigationOption("home")):t.identify()==layoutModule.MAIN_NAVIGATION_LIBRARY_ITEM_ID&&(Event.stop(e),primaryNavModule.navigationOption("library")))}),document.observe("key:down",function(e){{var t;e.element()}if(layoutModule.isVisible(layoutModule.MENU_ID)){Event.stop(e);var i=$(layoutModule.MENU_ID).select("."+layoutModule.HOVERED_CLASS)[0];if(i){var n=i.up(layoutModule.MENU_LIST_PATTERN),o=getNextNonMatchingSibling(n,layoutModule.SEPARATOR_PATTERN);return void(o&&(buttonManager.out(i),buttonManager.over(o.down(layoutModule.BUTTON_PATTERN)),o.focus()))}}(t=matchAny(e.element(),[layoutModule.NAVIGATION_MUTTON_PATTERN],!0))&&(buttonManager.out(t.down(layoutModule.BUTTON_PATTERN)),buttonManager.over(actionModel.getFirstMenuButton()),actionModel.focusMenu())}),document.observe("key:up",function(e){e.element();if(layoutModule.isVisible(layoutModule.MENU_ID)){Event.stop(e);var t=$(layoutModule.MENU_ID).select("."+layoutModule.HOVERED_CLASS)[0];if(t){var i=t.up(layoutModule.MENU_LIST_PATTERN),n=getPreviousNonMatchingSibling(i,layoutModule.SEPARATOR_PATTERN)||actionModel.getMenuParent();n&&(buttonManager.out(t),buttonManager.over(n.down(layoutModule.BUTTON_PATTERN)),n.focus())}}}),document.observe("key:left",function(e){var t,i=(e.element(),$(layoutModule.MAIN_NAVIGATION_ID)),n=i&&i.select("."+layoutModule.HOVERED_CLASS)[0];if(n){Event.stop(e);var o=n.up(layoutModule.NAVIGATION_PATTERN),s=getPreviousMatchingSibling(o,layoutModule.NAVIGATION_PATTERN);s&&(actionModel.hideMenu(),buttonManager.out(n),buttonManager.over(s.down(layoutModule.BUTTON_PATTERN)),s.focus(),t=matchMeOrUp(s,layoutModule.NAVIGATION_MUTTON_PATTERN),t&&primaryNavModule.showNavButtonMenu(e,t))}}),document.observe("key:right",function(e){var t,i=(e.element(),$(layoutModule.MAIN_NAVIGATION_ID)),n=i&&i.select("."+layoutModule.HOVERED_CLASS)[0];if(n){Event.stop(e);var o=n.up(layoutModule.NAVIGATION_PATTERN),s=getNextMatchingSibling(o,layoutModule.NAVIGATION_PATTERN);s&&(actionModel.hideMenu(),buttonManager.out(n),buttonManager.over(s.down(layoutModule.BUTTON_PATTERN)),s.focus(),t=matchMeOrUp(s,layoutModule.NAVIGATION_MUTTON_PATTERN),t&&primaryNavModule.showNavButtonMenu(e,t))}}),define("core.key.events",["jquery","prototype","utils.common","core.layout"],function(e){return function(){var t;return t||e.keyManager}}(this));var primaryNavModule={NAVIGATION_MENU_CLASS:"menu vertical dropDown",ACTION_MODEL_TAG:"navigationActionModel",CONTEXT_POSTFIX:"_mutton",NAVIGATION_MUTTON_DOM_ID:"navigation_mutton",NAVIGATION_MENU_PARENT_DOM_ID:"navigationOptions",JSON:null,navigationPaths:{browse:{url:"flow.html",params:"_flowId=searchFlow"},home:{url:"home.html"},library:{url:"flow.html",params:"_flowId=searchFlow&mode=library"},logOut:{url:"exituser.html"},search:{url:"flow.html",params:"_flowId=searchFlow&mode=search"},report:{url:"flow.html",params:"_flowId=searchFlow&mode=search&filterId=resourceTypeFilter&filterOption=resourceTypeFilter-reports&searchText="},olap:{url:"flow.html",params:"_flowId=searchFlow&mode=search&filterId=resourceTypeFilter&filterOption=resourceTypeFilter-view&searchText="},event:{url:"flow.html",params:"_flowId=logEventFlow"},samples:{url:"flow.html",params:"_flowId=sampleFlow&page=dialogs"},adminHome:{url:"flow.html",params:"_flowId=adminHomeFlow"},organization:{url:"flow.html",params:"_flowId=tenantFlow"},etl:{url:"etl"},mondrianProperties:{url:"olap/properties.html"},flush:{url:"olap/flush.html"},user:{url:"flow.html",params:"_flowId=userListFlow"},role:{url:"flow.html",params:"_flowId=roleListFlow"},analysisOptions:{url:"flow.html",params:"_flowId=mondrianPropertiesFlow"},designerOptions:{url:"flow.html",params:"_flowId=designerOptionsFlow"},designerCache:{url:"flow.html",params:"_flowId=designerCacheFlow"},awsSettings:{url:"flow.html",params:"_flowId=awsSettingsFlow"},designer:{url:"flow.html",params:"_flowId=adhocFlow"},dashboard:{url:"dashboard/designer.html"},legacyDashboard:{url:"flow.html",params:"_flowId=dashboardDesignerFlow&createNew=true"},domain:{url:"flow.html",params:"_flowId=createSLDatasourceFlow&ParentFolderUri="},dataSource:{url:"flow.html",params:"_flowId=addDataSourceFlow&ParentFolderUri="+encodeURIComponent("/datasources")},logSettings:{url:"log_settings.html"},createReport:{url:"view/view/modules/adhoc/createReport"}},bodyIds:{designer:"designerBase.confirmAndLeave",dashboardDesigner:"designerBase.confirmAndLeave",repoBrowse:"repositorySearch.confirmAndLeave",repoSearch:"repositorySearch.confirmAndLeave",manage_users:"orgModule.confirmAndLeave",manage_roles:"orgModule.confirmAndLeave",manage_orgs:"orgModule.confirmAndLeave",domainDesigner_tables:"domain.designer.confirmAndLeave",domainDesigner_derivedTables:"domain.designer.confirmAndLeave",domainDesigner_joins:"domain.designer.confirmAndLeave",domainDesigner_calculatedFields:"domain.designer.confirmAndLeave",domainDesigner_filters:"domain.designer.confirmAndLeave",domainDesigner_display:"domain.designer.confirmAndLeave",dataChooserDisplay:"domain.chooser.confirmAndLeave",dataChooserFields:"domain.chooser.confirmAndLeave",dataChooserPreFilters:"domain.chooser.confirmAndLeave",dataChooserSaveAsTopic:"domain.chooser.confirmAndLeave",reportViewer:"Report.confirmAndLeave"},globalActions:{logOut:function(e){return primaryNavModule.bodyIds[e]}},initializeNavigation:function(){var e,t,i;this.JSON=$("navigationActionModel").text?$("navigationActionModel").text.evalJSON():{};var n=/[A-Za-z]+[_]{1}[A-Za-z]+/;for(e in this.JSON)if(t=n.exec(e)[0],i=this.JSON[e][0],isNotNullORUndefined(i))this.createMutton(t,i.text);else if("main_home"===t||"main_library"===t){var o=$(t);o&&$(o).removeClassName("hidden")}},createMutton:function(e,t){var i=$(this.NAVIGATION_MUTTON_DOM_ID).cloneNode("true"),n=$(i).down(".button");
$(i).setAttribute("id",e);var o=document.createTextNode(t);n.appendChild(o);var s=$(this.NAVIGATION_MENU_PARENT_DOM_ID);s&&s.appendChild(i)},showNavButtonMenu:function(e,t){var i=jQuery(t).attr("id");actionModel.showDropDownMenu(e,t,i+this.CONTEXT_POSTFIX,this.NAVIGATION_MENU_CLASS,this.ACTION_MODEL_TAG),$("menu").parentId=i},isNavButton:function(e){return $(e).hasClassName("mutton")||$(e).hasClassName("icon")},setNewLocation:function(e,t){var i=this.navigationPaths[e],n=t||i.params;i&&(n=n?"?"+n:"",window.location.href=__jrsConfigs__.urlContext+"/"+i.url+n)},navigationOption:function(e){var t=$(document.body).readAttribute("id"),i=null;if(primaryNavModule.globalActions[e]?i=primaryNavModule.globalActions[e](t):primaryNavModule.bodyIds[t]&&(i=primaryNavModule.bodyIds[t]),i){var n=getAsFunction(i),o=n();if("function"==typeof o)return void o(function(){primaryNavModule.setNewLocation(e)});if(!o)return}primaryNavModule.setNewLocation(e)}};define("actionModel.primaryNavigation",["actionModel.modelGenerator"],function(e){return function(){var t;return t||e.primaryNavModule}}(this));var SearchBox=function(e){this._id=e.id,this._dom=$(this._id),this._enabled=!0,this._process(),this._assignHandlers()};SearchBox.addMethod("_process",function(){this._input=this._dom.select("input")[0],this._clearButton=this._dom.select(".button.searchClear")[0],this._searchButton=this._dom.select(".button.search")[0]}),SearchBox.addMethod("_assignHandlers",function(){this._dom.observe("submit",function(e){Event.stop(e)}),this._input.observe("keypress",this._keyPressHandler.bindAsEventListener(this)),this._clearButton.observe("click",this._clearHandler.bindAsEventListener(this)),this._searchButton.observe("click",this._searchHandler.bindAsEventListener(this))}),SearchBox.addMethod("_keyPressHandler",function(e){this._enabled&&Event.KEY_RETURN==e.keyCode&&(this._doSearch(),Event.stop(e))}),SearchBox.addMethod("_updateClearButtonVisibility",function(){this.getText().blank()?this._clearButton.removeClassName(layoutModule.UP_CLASS):this._clearButton.addClassName(layoutModule.UP_CLASS)}),SearchBox.addMethod("_clearHandler",function(){this._enabled&&(this.setText(""),this._doSearch())}),SearchBox.addMethod("_searchHandler",function(){this._enabled&&this._doSearch()}),SearchBox.addMethod("getText",function(){return this._input.getValue()}),SearchBox.addMethod("setText",function(e){this._input.setValue(e),this._updateClearButtonVisibility()}),SearchBox.addMethod("enable",function(){buttonManager.enable(this._clearButton),buttonManager.enable(this._searchButton),this._input.writeAttribute(layoutModule.READONLY_ATTR_NAME,null),this._dom.writeAttribute(layoutModule.DISABLED_ATTR_NAME,null),this._enabled=!0}),SearchBox.addMethod("disable",function(){buttonManager.disable(this._clearButton),buttonManager.disable(this._searchButton),this._input.writeAttribute(layoutModule.READONLY_ATTR_NAME,layoutModule.READONLY_ATTR_NAME),this._dom.writeAttribute(layoutModule.DISABLED_ATTR_NAME,layoutModule.DISABLED_ATTR_NAME),this._enabled=!1}),SearchBox.addMethod("_doSearch",function(){this._updateClearButtonVisibility(),this.onSearch(this.getText())}),SearchBox.addMethod("onSearch",function(){}),define("components.searchBox",["prototype","utils.common","core.events.bis"],function(e){return function(){var t;return t||e.SearchBox}}(this));var globalSearchBox={_searchBox:null,_containerId:"globalSearch",_searchInputId:"searchInput",initialize:function(){this._searchBox=new SearchBox({id:this._containerId}),this._searchBox.onSearch=function(e){$(this._searchInputId).setValue(e),primaryNavModule.navigationPaths.search.params+="&searchText="+encodeUriParameter(e),primaryNavModule.navigationOption("search")}.bind(this)},setText:function(e){this._searchBox.setText(e)}};define("repository.search.globalSearchBoxInit",["prototype","actionModel.primaryNavigation","components.searchBox"],function(e){return function(){var t;return t||e.globalSearchBox}}(this)),define("commons.main",["require","!domReady","commons.minimal.main","namespace","core.accessibility","core.events.bis","core.key.events","actionModel.modelGenerator","actionModel.primaryNavigation","repository.search.globalSearchBoxInit","core.layout","jrs.configs"],function(e){"use strict";var t=e("!domReady");e("commons.minimal.main"),e("namespace"),e("core.accessibility"),e("core.events.bis"),e("core.key.events");var i=e("actionModel.modelGenerator"),n=e("actionModel.primaryNavigation"),o=e("repository.search.globalSearchBoxInit"),s=e("core.layout"),r=e("jrs.configs");t(function(){s.initialize(),n.initializeNavigation(),i.initializeOneTimeMenuHandlers(),r.initAdditionalUIComponents&&o.initialize(),document.fire("dom:loaded")})}),JRS.Export=function(){return{configs:{TIMEOUT:12e5,DELAY:3e3},i18n:{}}}(),define("export",["namespace"],function(e){return function(){var t;return t||e.JRS.Export}}(this)),define("common/util/classUtil",["require","underscore"],function(e){"use strict";var t=e("underscore"),i={mixin:function(){var e,t,i=Array.prototype,n=i.shift.call(arguments);for(e=0;e<arguments.length;e+=1)if(arguments[e])for(t in arguments[e])arguments[e].hasOwnProperty(t)&&(n[t]=arguments[e][t]);return n},inherit:function(e,n){var o;o=n&&n.hasOwnProperty("constructor")?n.constructor:function(){return e.apply(this,arguments)};var s=function(){};return s.prototype=e.prototype,o.prototype=new s,n&&t.extend(o.prototype,n),o.prototype.constructor=o,o.parent=e.prototype,o.extend=function(e){return i.inherit(o,e)},o},extend:function(e){return i.inherit(function(){},e)}};return i}),define("common/component/dialog/Dimmer",["require","jquery","common/util/classUtil"],function(e){var t,i,n=e("jquery"),o=e("common/util/classUtil");return o.extend({constructor:function(e){t||(i=0,t=n("<div id='dialogDimmer' class='dimmer'></div>").css(e),n(document.body).append(t)),t.hide(),i++},css:function(e){return t.css(e),this},show:function(){var e=this.getCount()||0;return this.setCount(++e),t.show(),this},hide:function(){if(this.isVisible()){var e=this.getCount();return this.setCount(--e),!e&&t.hide(),this}},setCount:function(e){t.data({count:e})},getCount:function(){return parseInt(t.data("count"),10)},isVisible:function(){return t.is(":visible")},remove:function(){this._removed||(this._removed=!0,t&&(i--,i||(t.remove(),t=null)))}})}),define("requirejs.plugin.text",["module"],function(e){"use strict";var t,i,n,o,s,r=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],a=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,l=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,c="undefined"!=typeof location&&location.href,u=c&&location.protocol&&location.protocol.replace(/\:/,""),d=c&&location.hostname,h=c&&(location.port||void 0),p={},f=e.config&&e.config()||{};return t={version:"2.0.9",strip:function(e){if(e){e=e.replace(a,"");var t=e.match(l);t&&(e=t[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:f.createXhr||function(){var e,t,i;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)for(t=0;3>t;t+=1){i=r[t];try{e=new ActiveXObject(i)}catch(n){}if(e){r=[i];break}}return e},parseName:function(e){var t,i,n,o=!1,s=e.indexOf("."),r=0===e.indexOf("./")||0===e.indexOf("../");return-1!==s&&(!r||s>1)?(t=e.substring(0,s),i=e.substring(s+1,e.length)):t=e,n=i||t,s=n.indexOf("!"),-1!==s&&(o="strip"===n.substring(s+1),n=n.substring(0,s),i?i=n:t=n),{moduleName:t,ext:i,strip:o}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,i,n,o){var s,r,a,l=t.xdRegExp.exec(e);return l?(s=l[2],r=l[3],r=r.split(":"),a=r[1],r=r[0],!(s&&s!==i||r&&r.toLowerCase()!==n.toLowerCase()||(a||r)&&a!==o)):!0},finishLoad:function(e,i,n,o){n=i?t.strip(n):n,f.isBuild&&(p[e]=n),o(n)},load:function(e,i,n,o){if(o.isBuild&&!o.inlineText)return void n();f.isBuild=o.isBuild;var s=t.parseName(e),r=s.moduleName+(s.ext?"."+s.ext:""),a=i.toUrl(r),l=f.useXhr||t.useXhr;!c||l(a,u,d,h)?t.get(a,function(i){t.finishLoad(e,s.strip,i,n)},function(e){n.error&&n.error(e)}):i([r],function(e){t.finishLoad(s.moduleName+"."+s.ext,s.strip,e,n)})},write:function(e,i,n){if(p.hasOwnProperty(i)){var o=t.jsEscape(p[i]);n.asModule(e+"!"+i,"define(function () { return '"+o+"';});\n")}},writeFile:function(e,i,n,o,s){var r=t.parseName(i),a=r.ext?"."+r.ext:"",l=r.moduleName+a,c=n.toUrl(r.moduleName+a)+".js";t.load(l,n,function(){var i=function(e){return o(c,e)};i.asModule=function(e,t){return o.asModule(e,c,t)},t.write(e,l,i,s)},s)}},"node"===f.env||!f.env&&"undefined"!=typeof process&&process.versions&&process.versions.node&&!process.versions["node-webkit"]?(i=require.nodeRequire("fs"),t.get=function(e,t,n){try{var o=i.readFileSync(e,"utf8");0===o.indexOf("﻿")&&(o=o.substring(1)),t(o)}catch(s){n(s)}}):"xhr"===f.env||!f.env&&t.createXhr()?t.get=function(e,i,n,o){var s,r=t.createXhr();if(r.open("GET",e,!0),o)for(s in o)o.hasOwnProperty(s)&&r.setRequestHeader(s.toLowerCase(),o[s]);f.onXhr&&f.onXhr(r,e),r.onreadystatechange=function(){var t,o;4===r.readyState&&(t=r.status,t>399&&600>t?(o=new Error(e+" HTTP status: "+t),o.xhr=r,n(o)):i(r.responseText),f.onXhrComplete&&f.onXhrComplete(r,e))},r.send(null)}:"rhino"===f.env||!f.env&&"undefined"!=typeof Packages&&"undefined"!=typeof java?t.get=function(e,t){var i,n,o="utf-8",s=new java.io.File(e),r=java.lang.System.getProperty("line.separator"),a=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(s),o)),l="";try{for(i=new java.lang.StringBuffer,n=a.readLine(),n&&n.length()&&65279===n.charAt(0)&&(n=n.substring(1)),null!==n&&i.append(n);null!==(n=a.readLine());)i.append(r),i.append(n);l=String(i.toString())}finally{a.close()}t(l)}:("xpconnect"===f.env||!f.env&&"undefined"!=typeof Components&&Components.classes&&Components.interfaces)&&(n=Components.classes,o=Components.interfaces,Components.utils["import"]("resource://gre/modules/FileUtils.jsm"),s="@mozilla.org/windows-registry-key;1"in n,t.get=function(e,t){var i,r,a,l={};s&&(e=e.replace(/\//g,"\\")),a=new FileUtils.File(e);try{i=n["@mozilla.org/network/file-input-stream;1"].createInstance(o.nsIFileInputStream),i.init(a,1,0,!1),r=n["@mozilla.org/intl/converter-input-stream;1"].createInstance(o.nsIConverterInputStream),r.init(i,"utf-8",i.available(),o.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),r.readString(i.available(),l),r.close(),i.close(),t(l.value)}catch(c){throw new Error((a&&a.path||"")+": "+c)}}),t}),define("text",["require","requirejs.plugin.text","underscore","common/transport/request"],function(e){"use strict";var t=e("requirejs.plugin.text"),i=e("underscore"),n=e("common/transport/request"),o=t.createXhr,s=t.load;return i.extend(t,{useXhr:function(){return!0},createXhr:function(){var e=o.apply(t,arguments),s={},r={response:void 0,responseBody:void 0,responseText:void 0,responseType:void 0,responseXML:void 0,status:void 0,statusText:void 0};for(var a in e)-1==a.indexOf("response")&&-1==a.indexOf("status")&&(r[a]=e[a]);return i.extend(r,{open:function(e,t){s.url=t,r.status=1},send:function(){n(s).done(function(e,t,i){r.readyState=i.readyState,r.status=i.status,r.responseText=i.responseText,r.onreadystatechange()}).fail(function(e){r.onerror(e)})}})},load:function(e,t,n,o){return o.isBuild&&o.excludeText&&i.indexOf(o.excludeText,e)>=0?void n():s(e,t,n,o)}})}),define("text!common/component/panel/template/panelTemplate.htm",[],function(){return'<div class="panel {{- additionalCssClasses }}">\n    <div class="header">\n        <div class="title">{{- title}}</div>\n    </div>\n    <div class="subcontainer"></div>\n</div>\n'}),define("requirejs.plugin.css",[],function(){if("undefined"==typeof window)return{load:function(e,t,i){i()}};var e=document.getElementsByTagName("head")[0],t=window.navigator.userAgent.match(/Trident\/([^ ;]*)|AppleWebKit\/([^ ;]*)|Opera\/([^ ;]*)|rv\:([^ ;]*)(.*?)Gecko\/([^ ;]*)|MSIE\s([^ ;]*)|AndroidWebKit\/([^ ;]*)/)||0,i=!1,n=!0;t[1]||t[7]?i=parseInt(t[1])<6||parseInt(t[7])<=9:t[2]||t[8]?n=!1:t[4]&&(i=parseInt(t[4])<18);var o={};o.pluginBuilder="./css-builder";var s,r,a,l=function(){s=document.createElement("style"),e.appendChild(s),r=s.styleSheet||s.sheet},c=0,u=[],d=function(e){r.addImport(e+"?"+Math.random()),s.onload=function(){h()},c++,31==c&&(l(),c=0)},h=function(){a();var e=u.shift();return e?(a=e[1],void d(e[0])):void(a=null)},p=function(e,t){if(r&&r.addImport||l(),r&&r.addImport)a?u.push([e,t]):(d(e),a=t);else{s.textContent='@import "'+e+'";';var i=setInterval(function(){try{s.sheet.cssRules,clearInterval(i),t()}catch(e){}},10)}},f=function(t,i){var o=document.createElement("link");if(o.type="text/css",o.rel="stylesheet",n)o.onload=function(){o.onload=function(){},setTimeout(i,7)};else var s=setInterval(function(){for(var e=0;e<document.styleSheets.length;e++){var t=document.styleSheets[e];if(t.href==o.href)return clearInterval(s),i()}},10);o.href=t,e.appendChild(o)};return o.normalize=function(e,t){return".css"==e.substr(e.length-4,4)&&(e=e.substr(0,e.length-4)),t(e)},o.load=function(e,t,n){(i?p:f)(t.toUrl(e+".css"),n)},o}),define("css",["require","requirejs.plugin.css","underscore","jrs.configs"],function(e){"use strict";var t=e("requirejs.plugin.css"),i=e("underscore"),n=e("jrs.configs"),o=i.clone(t);return o.load=function(e,i,o,s){var r=n.currentThemePath||"themes/default";e=n.contextPath+"/"+r+"/"+e,t.load.call(this,e,i,o,s)},o}),define("common/component/panel/Panel",["require","underscore","backbone","text!./template/panelTemplate.htm","css!panel.css"],function(e){"use strict";var t=e("underscore"),i=e("backbone"),n=e("text!./template/panelTemplate.htm");return e("css!panel.css"),i.View.extend({defaultTemplate:n,el:function(){return this.template({title:this.title,additionalCssClasses:this.additionalCssClasses})},constructor:function(e){if(t.isUndefined(e)||!t.isObject(e))throw new Error("No init options were specified");this.template=t.template(e.template||this.defaultTemplate),this.title=e.title||"",this.additionalCssClasses=e.additionalCssClasses||"",this.content=e.content||"",this.collapsed=!e.collapsed,this.openClass=e.openClass||"open",this.closedClass=e.closedClass||"closed",this.loadingClass=e.loadingClass||"loading",this.fixedHeight=e.fixedHeight||!1,this.contentContainer=e.contentContainer||".subcontainer",this.overflow=e.overflow||"auto",this.traits=e.traits||[],t.each(this.traits,t.bind(function(e){e.extension&&t.extend(this,e.extension)},this)),this.invokeTraits("onConstructor",e),i.View.apply(this,arguments)},invokeTraits:function(e){var i=Array.prototype.slice.call(arguments,1),n=this;t.each(this.traits,function(t){t[e]&&t[e].apply(n,i)})},initialize:function(e){this.invokeTraits("beforeInitialize",e),this.content&&this.setContent(this.content),this.toggleCollapsedState(),this.invokeTraits("afterInitialize",e)},setElement:function(e){this.invokeTraits("beforeSetElement",e);var t=i.View.prototype.setElement.apply(this,arguments);return this.$contentContainer=this.$(this.contentContainer),this.$contentContainer[this.collapsed?"hide":"show"](),this.invokeTraits("afterSetElement",e),t},open:function(e){return this.invokeTraits("beforeOpen",e),this.$contentContainer.show(),this.$el.removeClass(this.closedClass).addClass(this.openClass),this.collapsed=!1,e&&e.renderContent&&this.renderContent(),this.invokeTraits("afterOpen",e),e&&e.silent||this.trigger("open",this),this},close:function(e){return this.invokeTraits("beforeClose",e),this.$contentContainer.hide(),this.$el.removeClass(this.openClass).addClass(this.closedClass),this.collapsed=!0,this.invokeTraits("afterClose",e),e&&e.silent||this.trigger("close",this),this},setContent:function(e){this.content=e;var t=this.renderContent();this.$contentContainer["string"==typeof e?"html":"append"](t)},renderContent:function(){return this.content instanceof i.View?this.content.render().$el:this.content},setHeight:function(e){var i=this.$("> .header").outerHeight();this.$contentContainer.css({height:t.isNumber(e)?e-i+"px":"auto",overflow:this.overflow})},toggleCollapsedState:function(){return this.collapsed?this.open():this.close(),this},remove:function(){this.invokeTraits("onRemove"),this.content&&this.content.remove&&this.content.remove(),i.View.prototype.remove.call(this)}})}),define("common/component/option/OptionView",["require","backbone","underscore"],function(e){"use strict";var t=e("backbone"),i=e("underscore");return t.View.extend({events:{click:"select",mouseover:"mouseover",mouseout:"mouseout"},constructor:function(e){if(!e||!e.template)throw new Error("Option should have defined template");if(!(e.model&&e.model instanceof t.Model))throw new Error("Option should have associated Backbone.Model");this.template=i.template(e.template),this.disabledClass=e.disabledClass,this.hiddenClass=e.hiddenClass,this.toggleClass=e.toggleClass,t.View.apply(this,arguments)},initialize:function(){t.View.prototype.initialize.apply(this,arguments),this.model.get("disabled")===!0&&this.disable(),this.model.get("hidden")===!0&&this.hide()},el:function(){return this.template(this.model.toJSON())},enable:function(){this.$el.removeAttr("disabled").removeClass(this.disabledClass)},disable:function(){this.$el.attr("disabled","disabled").addClass(this.disabledClass)},show:function(){this.$el.show().removeClass(this.hiddenClass)},hide:function(){this.$el.hide().addClass(this.hiddenClass)},isVisible:function(){return this.$el.is(":visible")},isDisabled:function(){return this.$el.is(":disabled")},select:function(e){this.model.trigger("select",this,this.model,e)},addSelection:function(){this.$el.addClass(this.toggleClass)},removeSelection:function(){this.$el.removeClass(this.toggleClass)},mouseover:function(e){this.trigger("mouseover",this,this.model,e)},mouseout:function(e){this.trigger("mouseout",this,this.model,e)}})}),define("common/component/option/OptionContainer",["require","backbone","underscore","./OptionView"],function(e){"use strict";function t(e){if(!e)throw new Error("Init options must be specified");if(!e.options||!e.options.length)throw new Error("Option views descriptors must be specified");if(!e.mainTemplate&&!e.el)throw new Error("Option container must have a template");if(!e.optionTemplate)throw new Error("Option container must have an option template")}var i=e("backbone"),n=e("underscore"),o=e("./OptionView"),s=Array.prototype.slice;return i.View.extend({el:function(){return n.template(this.template)()},constructor:function(e){t(e),this.contextName=e.contextName||"option",this.contentContainer=e.el?e.contentContainer:e.contentContainer||"> .content > ul",this.toggle=!!e.toggle,this.toggleClass=e.toggleClass||"active",this.options=[],this.collection=new i.Collection(e.options),this.hasGroups=this.collection.models[0]&&this.collection.models[0].get("groupId")?!0:!1,this.defalutOptionView=this.hasGroups?this.collection.where({"default":!0}):[this.collection.findWhere({"default":!0})],this.listenTo(this.collection,"select",this._selectOption),this.template=e.mainTemplate,this.optionTemplate=e.optionTemplate,i.View.apply(this,arguments)},setElement:function(){var e=i.View.prototype.setElement.apply(this,arguments);return this.$contentContainer=this.contentContainer?this.$(this.contentContainer):this.$el,e},initialize:function(){var e=this;this.collection.forEach(function(t){var i=new o({template:e.optionTemplate,model:t,toggleClass:e.toggleClass});e.listenTo(i,"mouseover",function(t,i){e.trigger("mouseover",t,e,i)}),e.listenTo(i,"mouseout",function(t,i){e.trigger("mouseout",t,e,i)}),e.options.push(i),e.$contentContainer.append(i.$el)}),this.toggle&&this.defalutOptionView&&n.each(this.defalutOptionView,function(e){e&&this.getOptionView(e.get("action")).addSelection()},this)},_onKeyDown:function(e){var t=this.getOptionView(e.keyCode,"triggerOnKeyCode");t&&!t.isDisabled()&&t.select()},_selectOption:function(e,t){if(this.toggle){var i=t.get("groupId"),o=this.hasGroups?n.where(this.options,function(e){return e.model.get("groupId")===i}):this.options;n.each(o,function(e){e.removeSelection()},this),e.addSelection()}this.trigger(this.contextName+":"+t.get("action"),e,t)},getOptionView:function(e,t){return n.find(this.options,function(i){return i.model.get(t||"action")===e})},resetSelection:function(e,t){e=e||[],this.toggle&&(this.hasGroups?(e.length<this.defalutOptionView.length&&n.each(this.defalutOptionView,function(t){var i={groupId:t.get("groupId")},o=n.findWhere(e,i);!o&&t&&e.push(n.extend(i,{action:t.get("action")}))}),e=n.pluck(e,"action")):!e.length&&this.defalutOptionView[0]&&e.push(this.defalutOptionView[0].get("action")),n.each(this.options,function(i){e.length&&(n.contains(e,i.model.get("action"))?t?this._selectOption(i,i.model):i.addSelection():i.removeSelection())},this))},select:function(){var e=Array.prototype.slice.call(arguments,0);this.toggle&&n.each(this.options,function(t){!e.length||n.contains(e,t.model.get("action"))?t.addSelection():t.removeSelection()},this)},deselect:function(){var e=Array.prototype.slice.call(arguments,0);this.toggle&&n.each(this.options,function(t){(!e.length||n.contains(e,t.model.get("action")))&&t.removeSelection()},this)},show:function(){return n.each(this.options,function(e){var t=e.model.get("test");t&&!t()?e.hide():e[e.model.get("hidden")?"hide":"show"]()}),this.$el.show(),this.trigger("show",this),this},hide:function(){return this.$el.hide(),this.trigger("hide",this),this},enable:function(){var e=s.call(arguments);n.each(this.options,function(t){(!e.length||n.contains(e,t.model.get("action")))&&t.enable()})},disable:function(){var e=s.call(arguments);n.each(this.options,function(t){(!e.length||n.contains(e,t.model.get("action")))&&t.disable()})},remove:function(){n.invoke(this.options,"remove"),i.View.prototype.remove.apply(this,arguments)}})}),define("common/component/panel/trait/abstractPanelTrait",[],function(){return{extension:{},onConstructor:function(){},beforeInitialize:function(){},afterInitialize:function(){},beforeSetElement:function(){},afterSetElement:function(){},beforeOpen:function(){},afterOpen:function(){},beforeClose:function(){},afterClose:function(){},onRemove:function(){}}}),define("common/component/panel/trait/resizablePanelTrait",["require","underscore","jquery","./abstractPanelTrait"],function(e){"use strict";var t=e("underscore"),i=(e("jquery"),e("./abstractPanelTrait"));return t.extend({},i,{onConstructor:function(e){this.handles=e.handles||"e, s, se",this.minWidth=e.minWidth||10,this.minHeight=e.minHeight||10,this.maxWidth=e.maxWidth||null,this.alsoResize=e.alsoResize||!1,this.resizableEl=e.resizableEl},afterSetElement:function(){this.$resizableEl=this.$el.find(this.resizableEl).length?this.$el.find(this.resizableEl):this.$el,this.$resizableEl.resizable({handles:this.handles,minHeight:this.minHeight,minWidth:this.minWidth,maxWidth:this.maxWidth,alsoResize:this.alsoResize,resize:t.bind(this._onResize,this),start:t.bind(this._onStart,this),stop:t.bind(this._onStop,this)})},onRemove:function(){try{this.$el.resizable("destroy")}catch(e){}},extension:{_onResize:function(e,t){this.trigger("resize",e,t)},_onStart:function(e,t){this.trigger("resizeStart",e,t)},_onStop:function(e,t){this.trigger("resizeStop",e,t)}}})}),define("text!common/component/dialog/template/dialogTemplate.htm",[],function(){return'<div class="panel dialog overlay {{- additionalCssClasses }}" tabindex="-1">\n    <div class="content hasFooter ">\n        <div class="header mover">\n            <div class="title">{{- title }}</div>\n        </div>\n        <div class="subcontainer"></div>\n        <div class="footer"></div>\n    </div>\n</div>\n'}),define("text!common/component/dialog/template/dialogButtonTemplate.htm",[],function(){return'<button class="button action up {{- primary ? \'primary\' : \'\'}}">\n    <span class="wrap">{{- label }}<span class="icon"></span></span>\n</button>\n'}),define("common/component/dialog/Dialog",["require","jquery.ui","underscore","jquery","./Dimmer","common/component/panel/Panel","common/component/option/OptionContainer","common/component/panel/trait/resizablePanelTrait","text!./template/dialogTemplate.htm","text!./template/dialogButtonTemplate.htm","css!dialog.css"],function(e){"use strict";e("jquery.ui");var t=e("underscore"),i=e("jquery"),n=e("./Dimmer"),o=e("common/component/panel/Panel"),s=e("common/component/option/OptionContainer"),r=e("common/component/panel/trait/resizablePanelTrait"),a=e("text!./template/dialogTemplate.htm"),l=e("text!./template/dialogButtonTemplate.htm");e("css!dialog.css");var c=o.extend({defaultTemplate:a,events:{mousedown:"_focus",touchstart:"_focus",keydown:"_onKeyDown"},constructor:function(e){e||(e={}),e.traits||(e.traits=[]),this.resizable=e.resizable||!1,this.modal=e.modal||!1,this.resizable&&-1===t.indexOf(e.traits,r)&&e.traits.push(r),o.call(this,e)},initialize:function(e){this.collapsed=!this.collapsed,t.isEmpty(e.buttons)||(this.buttons=new s({options:e.buttons,el:this.$(".footer")[0],contextName:"button",optionTemplate:l})),o.prototype.initialize.apply(this,arguments),this.buttons&&this.listenTo(this.buttons,t.map(e.buttons,function(e){return"button:"+e.action}).join(" "),t.bind(function(e,t){this.trigger("button:"+t.get("action"),e,t)},this)),this.render()},setElement:function(){var e=o.prototype.setElement.apply(this,arguments);return this.buttons&&this.buttons.setElement(this.$(".footer")[0]),e},render:function(){return this.$el.hide(),this.modal&&(this.dimmer=new n({zIndex:900})),i("body").append(this.$el),this.$el.draggable({handle:".mover",addClasses:!1,containment:"document"}),this},open:function(e){return this.isVisible()?void 0:(o.prototype.open.apply(this,arguments),this.modal&&this.dimmer.css({zIndex:++c.highestIndex}).show(),this._position(e)._increaseZIndex(),this.buttons&&this.buttons.$(".over").removeClass("over"),this.$el.show(),this.trigger("dialog:visible"),this)},close:function(){return this.isVisible()?(this.$el.css({zIndex:--c.highestIndex}),this.modal&&this.dimmer.css({zIndex:--c.highestIndex}).hide(),this.$el.hide(),o.prototype.close.apply(this,arguments),this):void 0},toggleCollapsedState:function(){return this},enableButton:function(e){this.buttons.enable(e)},disableButton:function(e){this.buttons.disable(e)},isVisible:function(){return this.$el.is(":visible")},_position:function(e){var t,n,o=i("body"),s=this.$el.height(),r=this.$el.width();if(e&&"undefined"!=typeof e.top&&"undefined"!=typeof e.left){t=e.top,n=e.left;var a=o.height(),l=o.width(),c=a-e.top,u=l-e.left;s>c&&(t=e.top-s,t=0>t?a/2-s/2:t),r>u&&(n=e.left-r,n=0>n?l/2-r/2:n)}else t=i(window).height()/2-s/2,n=i(window).width()/2-r/2;return this.$el.css({top:t,left:n,position:"absolute"}),this},_focus:function(){!this.modal&&this._increaseZIndex()},_increaseZIndex:function(){this.$el.css({zIndex:++c.highestIndex})},_onKeyDown:function(e){this.buttons._onKeyDown(e)},remove:function(){this.buttons&&this.buttons.remove(),this.dimmer&&this.dimmer.remove();try{this.$el.draggable("destroy")}catch(e){}o.prototype.remove.call(this)}},{highestIndex:1e3,resetHighestIndex:function(e){c.highestIndex=e||1e3}});return c}),define("text!common/component/dialog/template/alertDialogTemplate.htm",[],function(){return"<p class='alertText'>\n    {{- message }}\n</p>"}),define("common/component/dialog/AlertDialog",["require","underscore","./Dialog","text!./template/alertDialogTemplate.htm","bundle!CommonBundle"],function(e){"use strict";var t=e("underscore"),i=e("./Dialog"),n=e("text!./template/alertDialogTemplate.htm"),o=e("bundle!CommonBundle");return i.extend({contentTemplate:t.template(n),constructor:function(e){e||(e={}),i.prototype.constructor.call(this,{modal:e.modal!==!1,additionalCssClasses:"alertDialog",title:e.title||o["dialog.exception.title"],buttons:[{label:o["button.close"],action:"close",primary:!0}]})},initialize:function(){i.prototype.initialize.apply(this,arguments),this.on("button:close",this.close)},setMessage:function(e){this.content=this.contentTemplate({message:e});var t=this.renderContent();this.$contentContainer["string"==typeof e?"html":"append"](t)}})});var repositorySearch={_container:null,mode:null,isFlowRedirectRunning:!1,flowExecutionKey:"",messages:[],Mode:{SEARCH:"search",BROWSE:"browse",LIBRARY:"library"},ResourceType:{REPORT_UNIT:"com.jaspersoft.jasperserver.api.metadata.jasperreports.domain.ReportUnit",ADHOC_REPORT_UNIT:"com.jaspersoft.ji.adhoc.AdhocReportUnit",OLAP_UNIT:"com.jaspersoft.jasperserver.api.metadata.olap.domain.OlapUnit",DASHBOARD_RESOURCE:"com.jaspersoft.ji.adhoc.DashboardResource",REPORT_OPTIONS:"com.jaspersoft.ji.report.options.metadata.ReportOptions",REPORT_DATA_SOURCE:"com.jaspersoft.jasperserver.api.metadata.jasperreports.domain.ReportDataSource",JDBC_REPORT_DATA_SOURCE:"com.jaspersoft.jasperserver.api.metadata.jasperreports.domain.JdbcReportDataSource",JNDI_JDBC_REPORT_DATA_SOURCE:"com.jaspersoft.jasperserver.api.metadata.jasperreports.domain.JndiJdbcReportDataSource",VIRTUAL_REPORT_DATA_SOURCE:"com.jaspersoft.jasperserver.api.metadata.jasperreports.domain.VirtualReportDataSource",CUSTOM_REPORT_DATA_SOURCE:"com.jaspersoft.jasperserver.api.metadata.jasperreports.domain.CustomReportDataSource",BEAN_REPORT_DATA_SOURCE:"com.jaspersoft.jasperserver.api.metadata.jasperreports.domain.BeanReportDataSource",OLAP_DATA_SOURCE:"com.jaspersoft.jasperserver.api.metadata.olap.domain.OlapDataSource",OLAP_CLIENT_CONNECTION:"com.jaspersoft.jasperserver.api.metadata.olap.domain.OlapClientConnection",QUERY:"com.jaspersoft.jasperserver.api.metadata.common.domain.Query",INPUT_CONTROL:"com.jaspersoft.jasperserver.api.metadata.common.domain.InputControl",LIST_OF_VALUES:"com.jaspersoft.jasperserver.api.metadata.common.domain.ListOfValues",LIST_OF_VALUES_ITEM:"com.jaspersoft.jasperserver.api.metadata.common.domain.ListOfValuesItem",DATA_TYPE:"com.jaspersoft.jasperserver.api.metadata.common.domain.DataType",MONDRIAN_CONNECTION:"com.jaspersoft.jasperserver.api.metadata.olap.domain.MondrianConnection",SECURE_MONDRIAN_CONNECTION:"com.jaspersoft.ji.ja.security.domain.SecureMondrianConnection",XMLA_CONNECTION:"com.jaspersoft.jasperserver.api.metadata.olap.domain.XMLAConnection",MONDRIAN_XMLA_DEFINITION:"com.jaspersoft.jasperserver.api.metadata.olap.domain.MondrianXMLADefinition",CONTENT_RESOURCE:"com.jaspersoft.jasperserver.api.metadata.common.domain.ContentResource",FILE_RESOURCE:"com.jaspersoft.jasperserver.api.metadata.common.domain.FileResource",SEMANTIC_LAYER_DATA_SOURCE:"com.jaspersoft.commons.semantic.datasource.SemanticLayerDataSource",DATA_DEFINER_UNIT:"com.jaspersoft.commons.semantic.DataDefinerUnit"},SearchAction:{NEXT:"next",GET_RESOURCE_CHILDREN:"getResourceChildren"},Event:{SEARCH_RUN:"search:run",SEARCH_BROWSE:"search:browse",SEARCH_FILTER:"search:filter",SEARCH_SORT:"search:sort",SEARCH_NEXT:"search:next",SEARCH_ROLLBACK:"search:rollback",SEARCH_SEARCH:"search:search",SEARCH_CHILDREN:"search:children",STATE_CHANGED:"state:changed",FILTER_PATH_CHANGED:"filterPath:changed",RESULT_CHANGED:"result:changed",CHILDREN_LOADED:"resourceChildren:loaded",RESULT_NEXT:"result:next",RESULT_ERROR:"result:error",REDIRECT_ERROR:"redirect:error",FLOW_REDIRECT_RUNNING:"flowRedirect:running"},InfoAction:{GET_DISPLAY_PATH:"getDisplayPath"},PermissionAction:{BROWSE:"permissionBrowse",SEARCH:"permissionSearch",NEXT:"permissionNext",UPDATE:"permissionsUpdate"},PermissionEvent:{BROWSE:"permission:browse",SEARCH:"permission:search",NEXT:"permission:next",UPDATE:"permission:update",LOADED:"permission:loaded",UPDATED:"permission:updated",ERROR:"permission:error"},FolderAction:{CREATE:"createFolder",COPY:"copyFolder",MOVE:"moveFolder",UPDATE:"updateFolder",DELETE:"deleteFolder"},FolderEvent:{DELETED:"folder:deleted",DELETE_ERROR:"folder:deleteError",CREATED:"folder:created",CREATE_ERROR:"folder:createError",COPIED:"folder:copied",COPY_ERROR:"folder:copyError",MOVED:"folder:moved",MOVE_ERROR:"folder:moveError",UPDATED:"folder:updated",UPDATE_ERROR:"folder:updateError"},ResourceAction:{DELETE:"deleteResources",COPY:"copyResources",MOVE:"moveResources",UPDATE:"updateResource",GENERATE:"generate",CONVERT:"convert"},ResourceEvent:{DELETED:"resource:deleted",DELETE_ERROR:"resource:deleteError",COPIED:"resource:copied",COPY_ERROR:"resource:copyError",MOVED:"resource:moved",MOVE_ERROR:"resource:moveError",UPDATED:"resource:updated",UPDATE_ERROR:"resource:updateError",GENERATED:"resource:generated",GENERATE_ERROR:"resource:generateError",CONVERTED:"resource:converted",CONVERT_ERROR:"resource:convertError"},RedirectType:{FLOW_REDIRECT:0,LOCATION_REDIRECT:1,WINDOW_REDIRECT:2},ThemeAction:{SETTHEME:"setActiveTheme",DOWNLOAD_THEME:"downloadTheme",REUPLOAD:"reuploadTheme"},ThemeEvent:{UPDATED:"theme:updated",REUPLOADED:"theme:reuploaded",THEME_ERROR:"theme:error"},initialize:function(e){function t(e,t){if(e){var i="USER"==t?orgModule.User:orgModule.Role;
return e.collect(function(e){return new i(e)})}return[]}var i=e.rsInitOptions;repositorySearch.mode=i.mode,repositorySearch.flowExecutionKey=i.flowExecutionKey,layoutModule.resizeOnClient("repoSearch"==document.body.id?"searchFilters":"folders","results"),webHelpModule.setCurrentContext(repositorySearch.mode===repositorySearch.Mode.SEARCH?"search":"repo"),i.enableDnD=repositorySearch.mode==repositorySearch.Mode.BROWSE&&!isIPad(),repositorySearch.model.setPublicFolderUri(i.publicFolderUri),repositorySearch.model.setTempFolderUri(i.tempFolderUri),repositorySearch.model.setRootFolderUri(i.rootFolderUri),repositorySearch.model.setOrganizationsFolderUri(i.organizationsFolderUri),repositorySearch.model.setFolderSeparator(i.folderSeparator),repositorySearch.model.setAdministrator(i.isAdministrator),repositorySearch.model.setConfiguration(i.configuration),repositorySearch.model.setServerState(i.state),repositorySearch.CursorManager.initialize(),repositorySearch.actionModel.initialize(),repositorySearch.mode==repositorySearch.Mode.BROWSE?(repositorySearch.toolbar.initialize(repositorySearch.actionModel.bulkActions),repositorySearch.foldersPanel.initialize(i)):(repositorySearch.filtersPanel.initialize(repositorySearch.model.getFiltersConfiguration(),repositorySearch.model.getFiltersState()),repositorySearch.secondarySearchBox.initialize(repositorySearch.model.getTextState()),repositorySearch.filterPath.initialize()),repositorySearch.resultsPanel.initialize(i),repositorySearch.sortersPanel.initialize(repositorySearch.model.getSortersConfiguration(),repositorySearch.model.getSortState()),repositorySearch.initFolderEvents(),repositorySearch.initResourceEvents(),repositorySearch.initThemeEvents(),repositorySearch.observe("search:filter",function(e){var t=new repositorySearch.ServerAction.createSearchAction("filter",{filterId:e.memo.filterId,filterOption:e.memo.optionId});t.invokeAction()}),repositorySearch.observe("search:sort",function(e){var t=new repositorySearch.ServerAction.createSearchAction("sort",{sortBy:e.memo.sorterId});t.invokeAction()}),repositorySearch.observe("search:browse",function(e){var t=new repositorySearch.ServerAction.createSearchAction("browse",{folderUri:e.memo.uri});t.invokeAction(),repositorySearch.actionModel.refreshToolbar()}),repositorySearch.observe("search:search",function(e){var t=new repositorySearch.ServerAction.createSearchAction("search",{text:e.memo.text});t.invokeAction()}),repositorySearch.observe("search:next",function(){var e=new this.ServerAction.createSearchAction(this.SearchAction.NEXT,{});e.invokeAction()}.bindAsEventListener(repositorySearch)),repositorySearch.observe("search:rollback",function(e){var t=new repositorySearch.ServerAction.createSearchAction("rollback",{position:e.memo.position});t.invokeAction()}),repositorySearch.observe("search:children",function(e){var t=e.memo.resource,i=e.memo.item,n=new this.ServerAction.createSearchAction(this.SearchAction.GET_RESOURCE_CHILDREN,{resourceUri:t.URIString,resourceType:t.resourceType,item:i});n.invokeAction()}.bindAsEventListener(repositorySearch)),repositorySearch.observe("permission:browse",function(e){var t=new repositorySearch.ServerAction.createPermissionAction(this.PermissionAction.BROWSE,e.memo);t.invokeAction()}.bindAsEventListener(repositorySearch)),repositorySearch.observe("permission:search",function(e){var t=new repositorySearch.ServerAction.createPermissionAction(this.PermissionAction.SEARCH,e.memo);t.invokeAction()}.bindAsEventListener(repositorySearch)),repositorySearch.observe("permission:next",function(e){var t=new repositorySearch.ServerAction.createPermissionAction(this.PermissionAction.NEXT,e.memo);t.invokeAction()}.bindAsEventListener(repositorySearch)),repositorySearch.observe("permission:update",function(e){var t=e.memo.uri,i=e.memo.entities,n=e.memo.finishEdit;if(i.length>0){var o=i.collect(function(e){return e.toPermissionData()}),s=new repositorySearch.ServerAction.createPermissionAction(this.PermissionAction.UPDATE,{uri:t,entitiesWithPermission:Object.toJSON(o),finishEdit:n});s.invokeAction()}else{var r=repositorySearch.dialogsPool.getPermissionsDialog(t);n&&r.hide()}}.bindAsEventListener(repositorySearch)),repositorySearch.observe("permission:loaded",function(e){var i=e.memo.responseData,n=repositorySearch.dialogsPool.getPermissionsDialog(e.memo.inputData.uri);n.stopWaiting(),i&&(e.memo.doSet?n.setEntities(t(i.entities,i.type)):n.addEntities(t(i.entities,i.type)),"USER"===i.type?(buttonManager.select(n._byUsersButton.parentNode),buttonManager.unSelect(n._byRolesButton.parentNode)):(buttonManager.unSelect(n._byUsersButton.parentNode),buttonManager.select(n._byRolesButton.parentNode)))}.bindAsEventListener(repositorySearch)),repositorySearch.observe("permission:updated",function(e){var i=e.memo.inputData.uri,n=e.memo.inputData.finishEdit,o=repositorySearch.dialogsPool.getPermissionsDialog(i);if(o.enable(),n)o.hide();else{var s=e.memo.responseData;s&&o.updateEntities(t(s.entities,s.type))}}.bindAsEventListener(repositorySearch)),repositorySearch.observe("permission:error",function(e){alert(Object.toJSON(e.memo))}.bindAsEventListener(repositorySearch)),repositorySearch.observe("resourceChildren:loaded",function(e){var t=e.memo.inputData.item,i=t.getValue(),n=e.memo.responseData;if(Object.isArray(n)){var o=[];n.each(function(e){var t=new Resource(e);i.addChild(t),o.push(t)}),repositorySearch.resultsPanel.setResources(o,t),i.isLoaded()&&t.isLoading&&t.setLoading(!1)}}.bindAsEventListener(repositorySearch)),repositorySearch.observe("state:changed",function(e){repositorySearch.updateUI(e.memo.state)}),repositorySearch.observe("filterPath:changed",function(e){repositorySearch.filterPath.setPathItems(e.memo.filterPath)}),repositorySearch.observe("result:changed",function(e){var t=e.memo.resources,i=t.collect(function(e){return new Resource(e)});repositorySearch.resultsPanel.setResources(i)}),repositorySearch.observe("result:next",function(e){var t=e.memo.resources,i=t.collect(function(e){return new Resource(e)});repositorySearch.resultsPanel.addResources(i)}),repositorySearch.observe("result:error",this.defaultErrorHandler),repositorySearch.observe("redirect:error",this.defaultErrorHandler),repositorySearch.observe("flowRedirect:running",function(){repositorySearch.isflowRedirectRunning=!0,repositorySearch.toolbar.refresh()}),repositorySearch.Mode.BROWSE!=i.mode&&repositorySearch.fire(repositorySearch.Event.SEARCH_SEARCH,{text:repositorySearch.model.getTextState()}),e.rsInitOptions.systemConfirm.blank()||dialogs.systemConfirm.show(e.rsInitOptions.systemConfirm),JRS.reportExecutionCounter&&JRS.reportExecutionCounter.check(),e.rsInitOptions.errorPopupMessage.blank()||dialogs.errorPopup.show(e.rsInitOptions.errorPopupMessage)},showContextMenu:function(e){var t=e.memo.targetEvent;if(repositorySearch.mode==repositorySearch.Mode.BROWSE&&repositorySearch.foldersPanel.isFolderContextMenu(t)&&repositorySearch.actionModel.showFolderMenu(t),repositorySearch.resultsPanel.isResourceContextMenu(t)){var i=repositorySearch.model.getSelectedResources();i.length>1?repositorySearch.actionModel.showResourceBulkMenu(t):repositorySearch.actionModel.showResourceMenu(t)}},updateUI:function(e){e.sortBy!=repositorySearch.model.getSortState()&&repositorySearch.sortersPanel.select(e.sortBy,!0),e.text!=repositorySearch.model.getTextState()&&repositorySearch.mode!=repositorySearch.Mode.BROWSE&&repositorySearch.secondarySearchBox.setText(e.text);for(var t in e.customFilters)e.customFilters[t]!=repositorySearch.model.getFiltersState()[t]&&repositorySearch.filtersPanel.select(t,e.customFilters[t],!0);e.folderUri!=repositorySearch.model.getFolderUriState(),repositorySearch.model.setServerState(e)},initFolderEvents:function(){this.observe("folder:deleted",function(e){var t=e.memo.inputData.folder,i=t.getParentFolder(),n=repositorySearch.foldersPanel;n.refreshFolder(i),"/"===i.URI&&n.tree._selectOrEditNode(void 0,i.node,!1)}),this.observe("folder:deleteError",this.defaultErrorHandler),this.observe("folder:created",function(e){var t=e.memo.inputData.toFolder;repositorySearch.foldersPanel.refreshFolder(t)}),this.observe("folder:createError",this.defaultErrorHandler),this.observe("folder:copied",function(e){var t=e.memo.inputData.folder,i=e.memo.inputData.toFolder;repositorySearch.CopyMoveController.cancel(),repositorySearch.foldersPanel.moveOrCopyFolder(t,i,!0)}),this.observe("folder:copyError",this.defaultErrorHandler),this.observe("folder:moved",function(e){var t=e.memo.inputData.folder,i=e.memo.inputData.toFolder;repositorySearch.CopyMoveController.cancel(),repositorySearch.foldersPanel.moveOrCopyFolder(t,i)}),this.observe("folder:moveError",this.defaultErrorHandler),this.observe("folder:updated",function(e){var t=e.memo.inputData.folder,i=e.memo.responseData.label,n=e.memo.responseData.desc;repositorySearch.foldersPanel.updateFolder(t,i,n)}),this.observe("folder:updateError",this.defaultErrorHandler)},initResourceEvents:function(){this.observe("resource:deleted",function(e){var t=e.memo.inputData.resources,i=e.memo.responseData;if(i.dependentResources)dialogs.dependentResources.show(i.dependentResources,null,{okOnly:!0,canSave:!1,topMessage:repositorySearch.messages["dialog.dependencies.resources.message"],bottomMessage:repositorySearch.messages["dialog.dependencies.resources.deleteMessage"]});else{{repositorySearch.model.getSelectedFolder()}repositorySearch.resultsPanel.removeResources(t)}}),this.observe("resource:deleteError",this.defaultErrorHandler),this.observe("resource:copied",function(e){var t=e.memo.inputData.folder;repositorySearch.foldersPanel.reselectFolder(t)}),this.observe("resource:copyError",this.defaultErrorHandler),this.observe("resource:moved",function(e){var t=e.memo.inputData.folder,i=repositorySearch.model.getSelectedFolder();repositorySearch.foldersPanel.reselectFolder(t),repositorySearch.foldersPanel.reselectFolder(i)}),this.observe("resource:moveError",this.defaultErrorHandler),this.observe("resource:updated",function(e){repositorySearch.resultsPanel.updateResource(new Resource(e.memo.responseData))}),this.observe("resource:updateError",this.defaultErrorHandler),this.observe("resource:generated",function(e){var t=e.memo.inputData,i=e.memo.responseData,n=new Resource(i);if(t.run){var o=repositorySearch.RedirectAction.createRunResourceAction(n,!1);o.invokeAction()}else repositorySearch.mode==repositorySearch.Mode.BROWSE?t.location==repositorySearch.foldersPanel.getSelectedUri()&&repositorySearch.foldersPanel.doBrowse():repositorySearch.fire(repositorySearch.Event.SEARCH_SEARCH,{text:repositorySearch.model.getTextState()});dialogs.systemConfirm.show(repositorySearch.messages.RM_REPORT_CREATED,5e3)}),this.observe("resource:generateError",function(e){var t,i=(e.memo.inputData,e.memo.responseData),n=i.msg,o=i.data;if(n&&n.indexOf("SYSTEM_CONFIRM_REQUIRED")>-1){var s=Utils.restOfString(n,"SYSTEM_CONFIRM_REQUIRED:");if(o&&confirm(s)){o.overwrite=!0;var r=repositorySearch.ResourceAction.GENERATE;t=new repositorySearch.ServerAction.createGenerateAction(r,o),t.invokeAction()}}else repositorySearch.defaultErrorHandler(e)}),this.observe("resource:converted",function(e){dialogs.systemConfirm.show(e.memo.responseData||e.memo,5e3),repositorySearch.mode==repositorySearch.Mode.BROWSE?repositorySearch.foldersPanel.doBrowse():repositorySearch.fire(repositorySearch.Event.SEARCH_SEARCH,{text:repositorySearch.model.getTextState()})}),this.observe("resource:convertError",this.defaultErrorHandler)},defaultErrorHandler:function(e){require(["common/component/dialog/AlertDialog","bundle!jasperserver_messages"],function(t,i){var n=new t({title:i["dialog.dependencies.title"]});n.setMessage(e.memo.responseData||e.memo),n.open()})},initThemeEvents:function(){this.observe("theme:updated",function(e){var t=e.memo.responseData;if(t&&t.refresh)document.body.style.cursor="wait",window.location.reload(!0);else{var i=repositorySearch&&repositorySearch.model&&repositorySearch.model.getContextFolder()&&repositorySearch.model.getContextFolder().getParentFolder();i&&repositorySearch.foldersPanel&&repositorySearch.foldersPanel.refreshFolder&&repositorySearch.foldersPanel.refreshFolder(i)}}),this.observe("theme:reuploaded",function(e){if(e.memo.responseData.isActiveTheme){var t=e.memo.responseData.themeUri,i=new repositorySearch.ServerAction.createFolderAction(repositorySearch.ThemeAction.SETTHEME,{folderUri:t});i.invokeAction()}}),this.observe("theme:error",function(e){var t=e.memo.responseData;t&&alert(t)})},getMessage:function(e,t){var i=repositorySearch.messages[e];return i?new Template(i).evaluate(t?t:{}):""},_createAction:function(e,t){var i;if(t.endsWith("FolderAction")){var n=repositorySearch.model.getContextFolder();i=e["create"+t].call(null,n)}else if(t.endsWith("ResourceAction")||t.endsWith("RunAction")){var o=repositorySearch.model.getContextResource();i=e["create"+t].call(null,o)}else i=e["create"+t].call();return i},observe:function(e,t){this._getContainer().observe(e,t)},stopObserving:function(e,t){this._getContainer().stopObserving(e,t)},fire:function(e,t){this._getContainer().fire(e,t)},_getContainer:function(){return this._container||(this._container=document.body),this._container}};repositorySearch.model={_organizationsFolderUri:null,_rootFolderUri:null,_tempFolderUri:null,_publicFolderUri:null,_folderSeparator:null,_configuration:{},_serverState:{},_uiState:{selectedFolder:null,contextFolder:null,contextResource:null,selectedResources:[]},_isAdministrator:!1,setOrganizationsFolderUri:function(e){this._organizationsFolderUri=e},getOrganizationsFolderUri:function(){return this._organizationsFolderUri},setRootFolderUri:function(e){this._rootFolderUri=e},getRootFolderUri:function(){return this._rootFolderUri},setTempFolderUri:function(e){this._tempFolderUri=e},getTempFolderUri:function(){return this._tempFolderUri},setPublicFolderUri:function(e){this._publicFolderUri=e},getPublicFolderUri:function(){return this._publicFolderUri},setFolderSeparator:function(e){this._folderSeparator=e},getFolderSeparator:function(){return this._folderSeparator},setConfiguration:function(e){this._configuration=e},getConfiguration:function(){return this._configuration},getFiltersConfiguration:function(){return this.getConfiguration().filters},getSortersConfiguration:function(){return this.getConfiguration().sorters},setServerState:function(e){this._serverState=e},getServerState:function(){return this._serverState},getUIState:function(){return this._uiState},setAdministrator:function(e){this._isAdministrator=e},isAdministrator:function(){return this._isAdministrator},getFiltersState:function(){return this.getServerState().customFilters},getSortState:function(){return this.getServerState().sortBy},getTextState:function(){return this.getServerState().text},getFolderUriState:function(){return this.getServerState().folderUri},setSelectedFolder:function(e){return this.getUIState().selectedFolder=e},getSelectedFolder:function(){return this.getUIState().selectedFolder},setContextFolder:function(e){return this.getUIState().contextFolder=e},getContextFolder:function(){return this.getUIState().contextFolder},setSelectedResources:function(e){return this.getUIState().selectedResources=e},getSelectedResources:function(){return this.getUIState().selectedResources}},repositorySearch.actionModel={bulkActions:{RUN:{buttonId:"run",action:invokeBulkAction,actionArgs:"Run",test:canAllBeRun},EDIT:{buttonId:"edit",action:invokeBulkAction,actionArgs:"Edit",test:canAllBeEdited},OPEN:{buttonId:"open",action:invokeBulkAction,actionArgs:"Open",test:canAllBeOpened},COPY:{buttonId:"copy",action:invokeBulkAction,actionArgs:"Copy",test:canAllBeCopied},CUT:{buttonId:"cut",action:invokeBulkAction,actionArgs:"Move",test:canAllBeMoved},PASTE:{buttonId:"paste",action:invokeFolderAction,actionArgs:"PasteResources",test:canAllBePasted},REMOVE:{buttonId:"remove",action:invokeBulkAction,actionArgs:"Delete",test:canAllBeDeleted}},_holderId:"searchActionModel",_folderMenu:"folder_mutton",_resourceMenu:"resource_menu",_resourceBulkMenu:"resource_bulk_menu",initialize:function(){var e=$(layoutModule.PAGE_BODY_ID);e&&e.observe(isSupportsTouch()?"touchstart":"click",function(e){isIPad()?!isRightClick(e)&&1==e.touches.length&&actionModel.hideMenu():!isRightClick(e)&&actionModel.hideMenu()})},showFolderMenu:function(e,t){actionModel.showDynamicMenu(this._folderMenu,e,null,t,this._holderId)},showResourceBulkMenu:function(e,t){actionModel.showDynamicMenu(this._resourceBulkMenu,e,null,t,this._holderId)},showResourceMenu:function(e,t){actionModel.showDynamicMenu(this._resourceMenu,e,null,t,this._holderId)},refreshToolbar:function(){repositorySearch.toolbar.refresh()}},repositorySearch.CopyMoveController={object:null,_move:!1,_copy:!1,_dndMode:!1,onMove:function(){repositorySearch.CursorManager.move(),repositorySearch.actionModel.refreshToolbar()},onCopy:function(){repositorySearch.CursorManager.copy(),repositorySearch.actionModel.refreshToolbar()},onCancel:function(){repositorySearch.CursorManager.none(),repositorySearch.actionModel.refreshToolbar()},isObjectInstanceOf:function(e){var t=this.object;return t?this.isBulkAction()?t.length==t.findAll(function(t){return t instanceof e}).length:t instanceof e:!1},isMoveResource:function(){return this._move&&this.isObjectInstanceOf(Resource)},isMoveFolder:function(){return this._move&&this.isObjectInstanceOf(Folder)},isCopyResource:function(){return this._copy&&this.isObjectInstanceOf(Resource)},isCopyFolder:function(){return this._copy&&this.isObjectInstanceOf(Folder)},isBulkAction:function(){return Object.isArray(this.object)},move:function(e,t){this.cancel(),this.object=e,this._move=!0,this._copy=!1,this._dndMode=t,this.onMove()},copy:function(e,t){this.cancel(),this.object=e,this._move=!1,this._copy=!0,this._dndMode=t,this.onCopy()},cancel:function(){this.object=null,this._move=!1,this._copy=!1,this.onCancel()},isMove:function(){return this._move},isCopy:function(){return this._copy},isDnd:function(){return this._dndMode}},repositorySearch.CursorManager={container:null,className:["copy_cursor","move_cursor"],initialize:function(){this.container=$("display")},copy:function(){this.none(),this.container.addClassName(this.className[0])},move:function(){this.none(),this.container.addClassName(this.className[1])},none:function(){this.className.each(function(e,t){this.container.removeClassName(this.className[t])}.bind(this))}};var Resource=function(e){this._json=e,this.name=e.name,this.label=e.label,this.description=e.description,this.date=e.date,this.dateTimestamp=e.dateTimestamp,this.dateTime=e.dateTime,this.updateDate=e.updateDate,this.updateDateTimestamp=e.updateDateTimestamp,this.updateDateTime=e.updateDateTime,this.URI=e.URI,this.URIString=e.URIString,this.parentUri=e.parentUri,this.parentFolder=e.parentFolder,this.resourceType=e.resourceType,this.type=e.type,this.isScheduled=e.scheduled,this._permissions=e.permissions,this.hasChildren=e.hasChildren,this.isChild=!1,this.parentResource=null,this.isOpen=!1,this._children=[]};Resource.addMethod("clone",function(){return new Resource(this._json)}),Resource.addMethod("isReadable",function(){return this._permissions.include("r")}),Resource.addMethod("isEditable",function(){return this._permissions.include("e")}),Resource.addMethod("isRemovable",function(){return this._permissions.include("d")}),Resource.addMethod("isAdministrable",function(){return this._permissions.include("a")}),Resource.addMethod("typeEquals",function(e){return this.resourceType===e}),Resource.addMethod("typeSuffix",function(){return this.resourceType.split(".").last()}),Resource.addMethod("isLoaded",function(){return this._children.size()>0}),Resource.addMethod("isFolder",function(){return!1}),Resource.addMethod("getChildren",function(){return this._children}),Resource.addMethod("addChild",function(e){e.isChild=!0,e.parentResource=this,this._children.push(e)}),Resource.addMethod("updateChild",function(e){e.isChild=!0,e.parentResource=this;var t=-1;this._children.each(function(i,n){i.URIString==e.URIString&&(t=n)}),t>-1?this._children[t]=e:this._children.push(e)}),Resource.addMethod("permissionsToString",function(){var e="";return e+=this.isEditable()?repositorySearch.messages["permission.modify"]:repositorySearch.messages["permission.readOnly"],this.isRemovable()&&(e+=", "+repositorySearch.messages["permission.delete"]),this.isAdministrable()&&(e+=", "+repositorySearch.messages["permission.administer"]),e});var Folder=function(e){this.node=e,this.name=e.param.id,this.label=xssUtil.unescape(e.name),this.desc=e.param.extra.desc?xssUtil.unescape(e.param.extra.desc):"",this.description=xssUtil.unescape(this.desc),this.date=e.param.extra.date?xssUtil.unescape(e.param.extra.date):"",this.URI=e.param.uri,this.URIString=e.param.uri};Folder.prototype=deepClone(Resource.prototype),Folder.addMethod("clone",function(){return new Folder(this.node)}),Folder.addMethod("getParentFolder",function(){return this.isRoot()?null:new Folder(this.node.parent)}),Folder.addMethod("getReadableUri",function(){return this.isRoot()?"":this.getParentFolder().getReadableUri()+repositorySearch.model.getFolderSeparator()+this.label}),Folder.addMethod("isRoot",function(){return this.URI==repositorySearch.model.getRootFolderUri()||null==this.node.parent}),Folder.addMethod("isPublic",function(){return this.URI==repositorySearch.model.getPublicFolderUri()}),Folder.addMethod("isTemp",function(){return this.URI==repositorySearch.model.getTempFolderUri()}),Folder.addMethod("isOrganization",function(){return this.URI.match(repositorySearch.model.getOrganizationsFolderUri()+"/[^/]+$")}),Folder.addMethod("isOrganizationsRoot",function(){return this.URI.match(repositorySearch.model.getOrganizationsFolderUri()+"$")}),Folder.addMethod("isReadable",function(){return!0}),Folder.addMethod("isEditable",function(){return this.node.param.extra.isWritable}),Folder.addMethod("isRemovable",function(){return this.node.param.extra.isRemovable}),Folder.addMethod("isAdministrable",function(){return this.node.param.extra.isAdministrable}),Folder.addMethod("isSelected",function(){return this.node.isSelected()}),Folder.addMethod("equals",function(e){return e&&this.URI==e.URI}),Folder.addMethod("isThemeFolder",function(){return this.node.param.extra&&this.node.param.extra.isThemeFolder}),Folder.addMethod("isThemeRootFolder",function(){return this.node.param.extra&&this.node.param.extra.isThemeRootFolder}),Folder.addMethod("isActiveThemeFolder",function(){return this.node.param.extra&&this.node.param.extra.isActiveThemeFolder}),Folder.addMethod("isFolder",function(){return!0});var ResourcesUtils={getResourceUris:function(e){var t=[];return e.each(function(e){t.push(e.URIString?e.URIString:e.URI)}),t},getResourceUriAndTypeList:function(e){var t=[];return e.each(function(e){var i=e.URIString?e.URIString:e.URI;t.push({URIString:i,type:e.type})}),t},checkNameLength:function(e){return!e.blank()&&e.length<=repositorySearch.model.getConfiguration().resourceNameMaxLength},checkDescriptionLength:function(e){return e.length<=repositorySearch.model.getConfiguration().resourceDescriptionMaxLength},labelValidator:function(e){var t=!0,i="";return e.blank()?(i=repositorySearch.messages.RE_INVALID_NAME_SIZE.replace("{0}",repositorySearch.model.getConfiguration().resourceLabelMaxLength),t=!1):e.length>repositorySearch.model.getConfiguration().resourceLabelMaxLength&&(i=repositorySearch.messages.RE_INVALID_NAME_SIZE.replace("{0}",repositorySearch.model.getConfiguration().resourceLabelMaxLength),t=!1),{isValid:t,errorMessage:i}},descriptionValidator:function(e){var t=!0,i="";return e.length>repositorySearch.model.getConfiguration().resourceDescriptionMaxLength&&(i=repositorySearch.messages.RE_INVALID_DESC_SIZE.replace("{0}",repositorySearch.model.getConfiguration().resourceDescriptionMaxLength),t=!1),{isValid:t,errorMessage:i}},_fileTypeValidatorTemplate:function(e,t){var i=!0,n="";return!e||e.blank()?(n=repositorySearch.messages.RE_ENTER_FILE_NAME,i=!1):e.toLowerCase().endsWith(t)||(n=repositorySearch.messages.RE_INVALID_FILE_TYPE.replace("{0}",t),i=!1),{isValid:i,errorMessage:n}},zipFileTypeValidator:function(e){return ResourcesUtils._fileTypeValidatorTemplate(e,".zip")},isCustomDataSource:function(e){return _.contains(Utils.getInitConfiguration().customDataSources,e.resourceType)}},Utils={restOfString:function(e,t){var i=e.lastIndexOf(t)+t.length;return e.substring(i,e.length).trim()},getInitOptions:function(){return localContext.rsInitOptions||__jrsConfigs__.repositorySearch.localContext.rsInitOptions},getInitConfiguration:function(){return Utils.getInitOptions().configuration}};document.observe("element:contextmenu",repositorySearch.showContextMenu.bindAsEventListener(repositorySearch)),document.observe("key:escape",function(e){actionModel.hideMenu(),Event.stop(e)}),document.observe("key:delete",function(e){e.target instanceof HTMLInputElement||e.target instanceof HTMLTextAreaElement||canAllBeDeleted()&&invokeBulkAction("Delete")}),designerBase=void 0,define("repository.search.main",["prototype","actionModel.modelGenerator","utils.common","common/component/dialog/AlertDialog"],function(e){return function(){var t;return t||e.repositorySearch}}(this));var dynamicTree={trees:{},nodes:{},treeNodeEdited:null,editaborted:!1,activeTreeId:null,Tree:function(e,t){this.id=e,t?(this.setRootNode(t.root),this.bShowRoot=!!t.bShowRoot,this.handleNodeOnDblclick=void 0!==t.handleNodeOnDblclick?t.handleNodeOnDblclick:!0,this.multiSelectEnabled=!!t.multiSelectEnabled,this.showAllNodesOnStartup=!!t.showAllNodesOnStartup,this.treeClassName=t.treeClassName?t.treeClassName:"",this.dragPattern=t.dragPattern,this.dragClasses=t.dragClasses,this.dropClasses=t.dropClasses,this.selectOnMousedown=t.selectOnMousedown,this.regionID=t.regionID,this.scroll=t.scroll,this.templateDomId=t.templateDomId?t.templateDomId:this.DEFAULT_TREE_TEMPLATE_ID):(this.templateDomId=this.DEFAULT_TREE_TEMPLATE_ID,this.handleNodeOnDblclick=!0),this.stateObject={},this.sortNodes=!0,this.sorters=[this.sortByOrder,this.sortByName],this.selectedNodes=[],this.TREE_NN_ITEMS_SELECTED="#{count} items selected",dynamicTree.trees[this.id]=this,this._createFromTemplate(),this.refreshStyle(),this._registerEvents(),this._registerCustomScroll()},getNextId:function(){var e=1;return function(){return e++}}(),getActiveTree:function(){return dynamicTree.trees[dynamicTree.activeTreeId]},getTreeNode:function(e){return dynamicTree.nodes[e]},getStorageVal:function(e){var t=JSON.parse(window.localStorage.getItem("dynamicTree"))||{};return t[e]||null},setStorageVal:function(e,t){var i=window.localStorage,n=JSON.parse(i.getItem("dynamicTree"))||{};n[e]=t;try{i.setItem("dynamicTree",JSON.stringify(n))}catch(o){window.console&&console.log(o)}},_templateHash:{}};dynamicTree.Tree.addVar("DEFAULT_TREE_TEMPLATE_ID","list_responsive_collapsible"),dynamicTree.Tree.addVar("HIDE_ROOT_CLASS_NAME","hideRoot"),dynamicTree.Tree.addMethod("getId",function(){return this.id}),dynamicTree.Tree.addMethod("_getElement",function(){return this._element||(this._element=$(this.id)),this._element}),dynamicTree.Tree.addMethod("_createFromTemplate",function(){this._getElement()&&(this._getElement().insert({after:this._getTemplateElement(this._getElement())}),this._getElement().remove(),this._element=null,this._getElement().update())}),dynamicTree.Tree.addMethod("_registerCustomScroll",function(){if(!this.scroll&&this._getElement()){var e=this._getElement().up(layoutModule.SWIPE_SCROLL_PATTERN);if(e){var t=layoutModule.scrolls.get(e.identify());t&&(this.scroll=t)}}}),dynamicTree.Tree.addMethod("setRootNode",function(e){this.rootNode=e,this.rootNode&&(this.rootNode.treeId=this.id)}),dynamicTree.Tree.addMethod("getRootNode",function(){return this.rootNode}),dynamicTree.Tree.addMethod("refreshStyle",function(){var e=this._getElement();e.templateClassName&&(e.className=e.templateClassName),this.treeClassName&&e.addClassName(this.treeClassName),this.bShowRoot?e.removeClassName(this.HIDE_ROOT_CLASS_NAME):e.addClassName(this.HIDE_ROOT_CLASS_NAME)}),dynamicTree.Tree.addMethod("resetSelected",function(){this._prevSelectedNodes=this.selectedNodes.clone(),this.selectedNodes=[]}),dynamicTree.Tree.addMethod("revertSelection",function(){var e=this._prevSelectedNodes.clone();e=e.concat(this.selectedNodes),this.selectedNodes=this._prevSelectedNodes.clone();for(var t=0;t<e.length;t++)e[t].refreshStyle()}),dynamicTree.Tree.addMethod("getSelectedNode",function(){return 0===this.selectedNodes.length?null:this.selectedNodes[0]}),dynamicTree.Tree.addMethod("addNodeToSelected",function(e){this.selectedNodes.push(e),this._prevSelectedNodes=this.selectedNodes.clone()}),dynamicTree.Tree.addMethod("removeNodeFromSelected",function(e){for(var t=0;t<this.selectedNodes.length;t++)if(this.selectedNodes[t]==e)return this._prevSelectedNodes=this.selectedNodes.clone(),void this.selectedNodes.splice(t,1)}),dynamicTree.Tree.addMethod("isNodeSelected",function(e){var t=this.selectedNodes&&this.selectedNodes.length;if(t)for(var i=0;t>i;i++)if(this.selectedNodes[i]==e)return!0;return!1}),dynamicTree.Tree.addMethod("resortSubtree",function(e){if(e){e.resortChilds();for(var t=0;t<e.childs.length;t++)this.resortSubtree(e.childs[t])}}),dynamicTree.Tree.addMethod("resortTree",function(){this.sortNodes&&this.resortSubtree(this.rootNode)}),dynamicTree.Tree.addMethod("readStates",function(){var e=dynamicTree.getStorageVal("tree"+this.id);if(e)for(var t in e)this.stateObject[t]=e[t]}),dynamicTree.Tree.addMethod("getState",function(e){var t,i=this.stateObject;return i[e]?(t=i[e],(null===t||""===t)&&(t=dynamicTree.TreeNode.State.CLOSED),t):dynamicTree.TreeNode.State.CLOSED}),dynamicTree.Tree.addMethod("writeStates",function(e,t){var i={},n=this.stateObject;for(var o in n)i[o]=n[o];n[e]=t,null!=t&&(i[e]=t),dynamicTree.setStorageVal("tree"+this.id,i)}),dynamicTree.Tree.addMethod("resetStates",function(){this.stateObject={},dynamicTree.setStorageVal("tree"+this.id,"")}),dynamicTree.Tree.addMethod("comparer",function(e,t){var i,n;if(this.sorters&&this.sorters.length)for(i=0;i<this.sorters.length;i++)if(n=this.sorters[i](e,t),0!==n)return n;return 0}),dynamicTree.Tree.addMethod("renderTree",function(){this.readStates(),this.stopWaiting(),this.refreshStyle();var e=this._getElement();this.rootNode&&(this.writeStates(this.rootNode.id,dynamicTree.TreeNode.State.OPEN),this.rootNode.showNode(),this.rootNode.render(e),this.refreshScroll())}),dynamicTree.Tree.addMethod("refreshScroll",function(e){e?setTimeout(function(){this.scroll&&this.scroll.refresh()}.bind(this),e):this.scroll&&this.scroll.refresh()}),dynamicTree.Tree.addMethod("binarySearchOfNode",function(e,t){for(var i=0,n=e.length-1;n>=i;){var o=Math.round((i+n)/2),s=e[o];if(this.comparer(s,t)<0)i=o+1;else{if(!(this.comparer(s,t)>0))return o;n=o-1}}return-(i+1)}),dynamicTree.Tree.addMethod("_deselectAllNodes",function(e){if(this.selectedNodes.length>0){var t=this.selectedNodes.clone();this.resetSelected();for(var i=0;i<t.length;i++)t[i].refreshStyle();if(e){var n=dynamicTree.trees[this.id];n.fireUnSelectAllEvent(e)}}}),dynamicTree.Tree.addMethod("_selectOrEditNode",function(e,t,i,n,o,s){var r,a,l,c=t.isSelected()&&o,u=this.multiSelectEnabled&&t.isSelected()&&i&&!c,d=t.isSelected()&&dynamicTree.treeNodeEdited!==t&&!this.multiSelectEnabled&&!i&&!c,h=null!=dynamicTree.treeNodeEdited&&(m||u),p=this.multiSelectEnabled&&!t.isSelected()&&n&&isNotNullORUndefined(this._lastSelectedNode)&&this._lastSelectedNode.parent===t.parent,f=this.multiSelectEnabled&&t.isSelected()&&n&&isNotNullORUndefined(this._lastSelectedNode)&&this._lastSelectedNode.parent===t.parent,m=!this.multiSelectEnabled&&!t.isSelected()||this.multiSelectEnabled&&!i&&!t.isSelected(),g=!t.isSelected()||m&&this.selectedNodes.length>1;if(n&&this._lastSelectedNode||(this._lastSelectedNode=t),u&&t.deselect(e),m&&this._deselectAllNodes(e),d)return void t.edit(e);if(h&&dynamicTree.treeNodeEdited.doEndEdit(e),p||f){l=t.parent;var v=l.childs.indexOf(this._lastSelectedNode),_=l.childs.indexOf(t);
r=Math.min(v,_),a=Math.max(v,_)}if(p)if(r>-1)for(var y=r;a>=y;y++)l.childs[y].select(e);else l.childs[a].select(e);else if(f){for(var y=0;r>y;y++)l.childs[y].deselect(e);for(var y=a+1;y<l.childs.length;y++)l.childs[y].deselect(e)}else g&&t.select(e,t.nofocus,s)}),dynamicTree.Tree.addMethod("_deselectOthers",function(e,t,i,n,o){var s=this.multiSelectEnabled&&this.selectedNodes.length>1&&t.isSelected()&&!(i||n||o);s&&this.selectedNodes.findAll(function(e){return e!=t}.bind(this)).invoke("deselect",e)}),dynamicTree.Tree.addMethod("_selectNextNode",function(e,t){function i(e){return e=e.parent,!e&&null||e.nextSibling||i(e)}var n=e.isOpen()&&e.getFirstChild()||e.nextSibling||i(e);n&&e.deselect()&&n.select(t)}),dynamicTree.Tree.addMethod("_selectPreviousNode",function(e,t){function i(e){return!(e.isOpen()&&e.hasChilds())&&e||i(e.getLastChild())}var n=e.prevSibling&&i(e.prevSibling)||e.parent;n&&e.deselect()&&n.select(t)}),dynamicTree.Tree.addMethod("_selectInwards",function(e,t){var i=e.isOpen()&&e.getFirstChild();i?e.deselect()&&i.select(t):e.handleNode(t)}),dynamicTree.Tree.addMethod("_selectOutwards",function(e,t){if(!e.isHiddenRootNode()){var i=e.isOpen()?null:e.parent;i?e.deselect()&&i.select(t):e.handleNode(t)}}),dynamicTree.Tree.addMethod("sortByOrder",function(e,t){var i=e.orderNumber,n=t.orderNumber;return null==i&&null==n?0:null==i?1:null==n?-1:i-n}),dynamicTree.Tree.addMethod("sortByName",function(e,t){var i=e.name.toLowerCase(),n=t.name.toLowerCase();return i>n?1:n>i?-1:0}),dynamicTree.Tree.addVar("TREE_WAIT_TEMPLATE_DOM_ID","list_responsive_collapsible:loading"),dynamicTree.Tree.addMethod("wait",function(){$(this.id).update($(this.TREE_WAIT_TEMPLATE_DOM_ID).cloneNode(!0))}),dynamicTree.Tree.addMethod("stopWaiting",function(){$(this.id).update("")}),dynamicTree.Tree.addMethod("_getTemplateElement",function(e){var t=this.templateDomId,i=$(t).cloneNode(!0);return i.writeAttribute("id",this.getId()),i.templateId=t,i.templateClassName=i.className,cloneCustomAttributes(e,i),i}),define("dynamicTree.tree",["prototype","dragdrop.extra","touchcontroller","utils.common","core.layout","json3"],function(e){return function(){var t;return t||e.dynamicTree}}(this)),dynamicTree.TreeNode=function(e){this.id=dynamicTree.getNextId(),this.treeId=null,this.name=null!=e.name?e.name:this.DEFAULT_NAME,this.param=null!=e.param?e.param:{},this.orderNumber=null!=e.orderNumber?e.orderNumber:null,this.childs=[],this.parent=null,this.Types={Folder:new dynamicTree.TreeNode.Type(this.FOLDER_TYPE_NAME)},this.isloaded=!1,this.delayedRendering=!0,this.haschilds=!1,this.editable=!1,this.isWaiting=!1,this.hidden=!1,this.isDropTarget=!1,dynamicTree.nodes[this.id]=this},dynamicTree.TreeNode.Type=function(e,t){this.name=e,t&&(this.cssClassName=t.cssClassName,this.templateDomId=t.templateDomId)},dynamicTree.TreeNode.State={OPEN:"open",CLOSED:"closed"},dynamicTree.TreeNode.addVar("FOLDER_TYPE_NAME","com.jaspersoft.jasperserver.api.metadata.common.domain.Folder"),dynamicTree.TreeNode.addVar("DEFAULT_NAME","unset name"),dynamicTree.TreeNode.addVar("NODE_ID_PREFIX","node"),dynamicTree.TreeNode.addVar("SUB_NODE_ID_SUFFIX","sub"),dynamicTree.TreeNode.addVar("HANDLER_ID_PREFIX","handler"),dynamicTree.TreeNode.addVar("NODE_CLASS_NAME","node").addVar("LEAF_CLASS_NAME","leaf").addVar("OPEN_CLASS_NAME","open").addVar("CLOSED_CLASS_NAME","closed").addVar("SELECTED_CLASS_NAME","selected").addVar("LOADING_CLASS_NAME","loading").addVar("ROOTS_CLASS_NAME","roots"),dynamicTree.TreeNode.addVar("nodeHeaderTemplateDomId","list_responsive_collapsible:leaf"),dynamicTree.TreeNode.addVar("nodeFooterTemplateDomId","list_responsive_collapsible"),dynamicTree.TreeNode.addVar("nodeInputTemplateDomId","list_responsive_collapsible:input"),dynamicTree.TreeNode.addVar("isSelectable",!1),dynamicTree.TreeNode.addMethod("getTreeId",function(){return this.treeId||this.parent&&this.parent.getTreeId()}),dynamicTree.TreeNode.addMethod("getState",function(){return dynamicTree.trees[this.getTreeId()].getState(this.id)}),dynamicTree.TreeNode.addMethod("isParent",function(){return this.param.type==this.Types.Folder.name}),dynamicTree.TreeNode.addMethod("addChild",function(e){if(this.isParent()){var t=this.childs[this.childs.length-1];t&&(t.nextSibling=e,e.prevSibling=t),this.childs.push(e),e.parent=this,this.resortChilds(),this.delayedRendering||(e.showNode(),e.render(this._getChildrenElement(),e.nextSibling))}}),dynamicTree.TreeNode.addMethod("removeChild",function(e){for(var t=0;t<this.childs.length;t++)if(this.childs[t]==e){this.childs.splice(t,1);break}if(e.deselect(),!this.delayedRendering){var i=e._getElement();i&&i.remove()}}),dynamicTree.TreeNode.addMethod("resortChilds",function(){var e=this.getTreeId(),t=dynamicTree.trees[e];if(t&&t.sortNodes&&isArray(this.childs)){this.childs.sort(function(e,i){return t.comparer(e,i)});for(var i=this.childs.length;i--;){var n=this.childs[i];n.prevSibling=this.childs[i-1],n.nextSibling=this.childs[i+1]}}}),dynamicTree.TreeNode.addMethod("resetChilds",function(){this.childs=[]}),dynamicTree.TreeNode.addMethod("setHasChilds",function(e){this.haschilds=e}),dynamicTree.TreeNode.addMethod("hasChilds",function(){return this.haschilds?!0:this.getChildCount()>0}),dynamicTree.TreeNode.addMethod("getChildCount",function(){return this.childs.length}),dynamicTree.TreeNode.addMethod("getFirstChild",function(){return this.hasChilds()?this.childs[0]:null}),dynamicTree.TreeNode.addMethod("getLastChild",function(){return this.hasChilds()?this.childs[this.childs.length-1]:null}),dynamicTree.TreeNode.addMethod("_getElement",function(){return this._element||(this._element=$(this.NODE_ID_PREFIX+this.id)),this._element}),dynamicTree.TreeNode.addMethod("_getTitle",function(){var e=this._getElement().childElements()[0];e.cleanWhitespace();var t=e.childNodes[e.childNodes.length-1];return"#text"!==t.nodeName&&(t=document.createTextNode(""),e.appendChild(t)),t}),dynamicTree.TreeNode.addMethod("_getTitleInputElement",function(){return $(this._getElement().getElementsByTagName("input")[0])}),dynamicTree.TreeNode.addMethod("_getChildrenElement",function(){return this._childrenElement||(this._childrenElement=$(this.NODE_ID_PREFIX+this.id+this.SUB_NODE_ID_SUFFIX)),this._childrenElement}),dynamicTree.TreeNode.addMethod("isOpen",function(){return this.getState()===dynamicTree.TreeNode.State.OPEN}),dynamicTree.TreeNode.addMethod("changeName",function(e){this.name=e,this._getTitle().data=this.name}),dynamicTree.TreeNode.addMethod("getType",function(){for(var e in this.Types)if(this.param.type===this.Types[e].name)return this.Types[e];return void 0}),dynamicTree.TreeNode.addMethod("refreshStyle",function(e){if(e=$(e)||this._getElement()){e.templateClassName&&(e.className=e.templateClassName),this.isParent()?(e.addClassName(this.NODE_CLASS_NAME).removeClassName(this.LEAF_CLASS_NAME),this.isWaiting||(this.isOpen()?e.addClassName(this.OPEN_CLASS_NAME).removeClassName(this.CLOSED_CLASS_NAME):e.addClassName(this.CLOSED_CLASS_NAME).removeClassName(this.OPEN_CLASS_NAME))):e.addClassName(this.LEAF_CLASS_NAME).removeClassName(this.NODE_CLASS_NAME),this.isWaiting?e.addClassName(this.LOADING_CLASS_NAME):e.removeClassName(this.LOADING_CLASS_NAME),this.isSelected()?e.addClassName(this.SELECTED_CLASS_NAME):e.removeClassName(this.SELECTED_CLASS_NAME),this.hidden?e.addClassName(layoutModule.HIDDEN_CLASS):e.removeClassName(layoutModule.HIDDEN_CLASS),this.param.cssClass&&e.addClassName(this.param.cssClass);var t=this.getType();t&&t.cssClassName&&e.addClassName(t.cssClassName);var i=e.down();this.isDropTarget&&i&&i.addClassName(layoutModule.DROP_TARGET_CLASS),!this.isDropTarget&&i&&i.removeClassName(layoutModule.DROP_TARGET_CLASS)}}),dynamicTree.TreeNode.addMethod("_createNode",function(){var e=this.id,t=dynamicTree.trees[this.getTreeId()],i=this._getHeaderTemplateElement();i.id=this.NODE_ID_PREFIX+e,i.tabIndex=-1,this.refreshStyle(i),this.treeId=t.id,i.treeNode=this;var n=i.childElements()[0];n.insert(xssUtil.escape(this.name,{softHTMLEscape:!0,whiteList:["a"]})),null!=this.tooltip&&this.tooltip.length>0&&(n.title=this.tooltip),n.childElements().each(function(t,i){0===i&&(t.id=this.HANDLER_ID_PREFIX+e);var n=this.iconTooltip;n&&(t.title=isArray(n)?n[i]:n)}.bind(this)),this._element=i}),dynamicTree.TreeNode.addMethod("_createNodeChildren",function(){var e=this._getFooterTemplateElement();e.id=this.NODE_ID_PREFIX+this.id+this.SUB_NODE_ID_SUFFIX,this._childrenElement=e}),dynamicTree.TreeNode.addMethod("showNode",function(e){var t=dynamicTree.trees[this.getTreeId()];if(this._createNode(),this.isParent()){var i=this.isOpen()||t.showAllNodesOnStartup;if(i){this._createNodeChildren();for(var n=0;n<this.getChildCount();n++)this.childs[n].showNode(this._getChildrenElement());this.delayedRendering=!1,t.fireOpenEvent(this)}}this.render(e)}),dynamicTree.TreeNode.addMethod("render",function(e,t){if(!Object.isUndefined(e)){var i=$(e);i&&(this._getChildrenElement()&&this._getElement().insert(this._getChildrenElement()),t?i.insert(this._getElement(),{before:t._getElement()}):i.insert(this._getElement()))}}),dynamicTree.TreeNode.addMethod("_renderChildren",function(){var e=this._getElement();e&&this._getChildrenElement()&&e.insert(this._getChildrenElement())}),dynamicTree.TreeNode.addMethod("refreshNode",function(){if(this.refreshStyle(),this.isParent()&&this.isOpen()&&this.isloaded){this.delayedRendering?(this._createNodeChildren(),this._renderChildren()):this._getChildrenElement().update("");for(var e=0;e<this.getChildCount();e++)this.childs[e].showNode(this._getChildrenElement());this.delayedRendering=!1}var t=dynamicTree.trees[this.getTreeId()];t.refreshScroll()}),dynamicTree.TreeNode.addMethod("wait",function(){this.isWaiting=!0,this.refreshStyle()}),dynamicTree.TreeNode.addMethod("stopWaiting",function(){this.isWaiting=!1,this.refreshStyle()}),dynamicTree.TreeNode.addMethod("isHiddenRootNode",function(){var e=dynamicTree.trees[this.getTreeId()];return e.rootNode==this&&!e.bShowRoot}),dynamicTree.TreeNode.addMethod("deselect",function(e){var t=dynamicTree.trees[this.getTreeId()];return t&&this.isSelected()?(t.removeNodeFromSelected(this),this.refreshStyle(),e&&t.fireUnSelectEvent(this,e),!0):!1}),dynamicTree.TreeNode.addMethod("select",function(e,t,i){if(i=i||{},!t&&this.focus(),this.isSelected())return!1;var n=dynamicTree.trees[this.getTreeId()];return n.addNodeToSelected(this),this.refreshStyle(),!i.silent&&n.fireSelectEvent(this,e),!0}),dynamicTree.TreeNode.addMethod("focus",function(){!isIPad()&&this._getElement()&&this._getElement().focus()}),dynamicTree.TreeNode.addMethod("isSelected",function(){var e=dynamicTree.trees[this.getTreeId()];return e&&e.isNodeSelected(this)}),dynamicTree.TreeNode.addMethod("_removeTitle",function(){var e=this._getTitle();e.data="",$(e.parentNode).cleanWhitespace()}),dynamicTree.TreeNode.addMethod("edit",function(e){if(this.editable){if(dynamicTree.treeNodeEdited==this)return;dynamicTree.treeNodeEdited=this;var t=this.name,i=$(this._getTitle().parentNode),n=this._getInputTemplateElement();this._getTitle().data="",i.cleanWhitespace(),i.insert(n),n.value=xssUtil.unescape(this.name),n.focus(),n.select(e),n.onclick=function(e){cancelEventBubbling(e)},n.ondblclick=function(e){cancelEventBubbling(e)},n.onmousedown=function(e){cancelEventBubbling(e)},n.onmouseup=function(e){cancelEventBubbling(e)},n.onkeydown=function(e){var i=window.event?window.event:e;13==i.keyCode?(n.onblur=null,this.doEndEdit(i)):27==i.keyCode&&(n.onblur=null,n.value=t,this.doEndEdit(i))}.bindAsEventListener(this),n.onblur=function(e){this.doEndEdit(e)}.bindAsEventListener(this),dynamicTree.trees[this.getTreeId()].fireStartEditEvent(this,n)}}),dynamicTree.TreeNode.addMethod("doEndEdit",function(){this.editEnded(),dynamicTree.trees[this.getTreeId()].fireEndEditEvent(this)}),dynamicTree.TreeNode.addMethod("editEnded",function(){var e=dynamicTree.trees[this.getTreeId()];if(null!=dynamicTree.treeNodeEdited){var t=this._getTitleInputElement(),i=($(t.parentNode),t.value);if(i==dynamicTree.treeNodeEdited.name)return t.remove(),this._getTitle().data=dynamicTree.treeNodeEdited.name,void(dynamicTree.treeNodeEdited=null);e.fireEditEvent(dynamicTree.treeNodeEdited,i),dynamicTree.editaborted||(dynamicTree.treeNodeEdited.name=i,t.remove(),this._getTitle().data=i),dynamicTree.treeNodeEdited=null}}),dynamicTree.TreeNode.addMethod("scroll",function(e){var t=dynamicTree.trees[this.getTreeId()].rootNode._getElement(),i=$(e?e:t.parentNode),n=this._getElement();if(i){var o=i.clientHeight,s=i.clientWidth,r=i.scrollTop,a=i.scrollLeft,l=n.cumulativeOffset().top-i.cumulativeOffset().top,c=n.offsetLeft,u=n.clientHeight,d=n.clientWidth;l>r+o?i.scrollTop=l-(o/2-u/2):r>l+u&&(i.scrollTop=l-(o/2-u/2)),c>a+s?i.scrollLeft=c-(s/2-d/2):a>c+d&&(i.scrollTop=c-(s/2-d/2))}}),dynamicTree.TreeNode.addMethod("handleNode",function(e){if(this.isParent()){var t=dynamicTree.trees[this.getTreeId()];this.isOpen()?t.writeStates(this.id,dynamicTree.TreeNode.State.CLOSED):(t.writeStates(this.id,dynamicTree.TreeNode.State.OPEN),t.fireOpenEvent(this,e)),this.refreshNode()}}),dynamicTree.TreeNode.addMethod("openNode",function(e){if(this.isParent()){var t=dynamicTree.trees[this.getTreeId()];this.isOpen()||(t.writeStates(this.id,dynamicTree.TreeNode.State.OPEN),t.fireOpenEvent(this,e)),this.refreshNode()}}),dynamicTree.TreeNode.addMethod("_getHeaderTemplateElement",function(){var e=this.getType(),t=e&&e.templateDomId?e.templateDomId:this.nodeHeaderTemplateDomId,i=$(t).cloneNode(!0);return i.templateId=t,i.templateClassName=i.className,i}),dynamicTree.TreeNode.addMethod("_getFooterTemplateElement",function(){var e=this.nodeFooterTemplateDomId,t=$(e).cloneNode(!0);return t.templateId=e,t.update(""),t}),dynamicTree.TreeNode.addMethod("_getInputTemplateElement",function(){var e=this.nodeInputTemplateDomId,t=$(e).cloneNode(!0);return t.templateId=e,t}),define("dynamicTree.treenode",["prototype","underscore","dynamicTree.tree"],function(e){return function(){var t;return t||e.dynamicTree}}(this)),dynamicTree.Tree.addVar("NODE_PATTERN",".node").addVar("NODE_WRAPPER_PATTERN",".node > .wrap").addVar("NODE_ICON_PATTERN",".node > .wrap .icon").addVar("NODE_CUSTOM_PATTERNS",[]),dynamicTree.Tree.addVar("LEAF_PATTERN",".leaf").addVar("LEAF_WRAPPER_PATTERN",".leaf > .wrap").addVar("LEAF_ICON_PATTERN",".leaf > .wrap .icon").addVar("LEAF_CUSTOM_PATTERNS",[]),dynamicTree.Tree.addVar("EXPANDING_TIME",1e3),dynamicTree.Tree.addVar("draggables",[]),dynamicTree.Tree.addMethod("getTreeNodeByEvent",function(e){var t=Event.element(e);return this.getTreeNodeByElement(t)}),dynamicTree.Tree.addMethod("getTreeNodeByElement",function(e){for(;e&&e.readAttribute&&e.readAttribute("id")!==this.id;){var t=e.treeNode;if(t&&t.getTreeId()===this.getId())return t;e=$(e.parentNode)}return null}),dynamicTree.Tree.addMethod("isNodeEvent",function(e){var t=matchMeOrUp(e.element().parentNode,"LI");return t&&t.hasClassName(layoutModule.NODE_CLASS)}),dynamicTree.Tree.addMethod("isLeafEvent",function(e){var t=matchMeOrUp(e.element().parentNode,"LI");return t&&t.hasClassName(layoutModule.LEAF_CLASS)}),dynamicTree.Tree.addMethod("isIconEvent",function(e){return e.element().hasClassName(layoutModule.ICON_CLASS)}),dynamicTree.Tree.addMethod("_registerEvents",function(){this._cleanUpListeners(),this._registerClickEvents(),this._registerCustomEvents(),this._registerKeyEvents(),this._registerMouseEvents()}),dynamicTree.Tree.addMethod("_cleanUpListeners",function(){var e=this._getElement();e.stopObserving("click"),e.stopObserving("dblclick"),isSupportsTouch()?(e.stopObserving("touchstart"),e.stopObserving("drag:touchstart"),e.stopObserving("touchend")):(e.stopObserving("mousedown"),e.stopObserving("drag:mousedown"),e.stopObserving("mouseup")),e.stopObserving("mouseover"),e.stopObserving("mouseout")}),dynamicTree.Tree.addMethod("_registerClickEvents",function(){var e=this._getElement();e.observe("click",function(t){var i=matchMeOrUp(t.element(),layoutModule.BUTTON_PATTERN)&&this.getTreeNodeByEvent(t);if(i){var n=this.isIconEvent(t),o=this.isNodeEvent(t),s=this.isLeafEvent(t);o?(n&&e.fire("nodeIcon:click",{targetEvent:t,node:i}),e.fire("node:click",{targetEvent:t,node:i})):s&&(n&&e.fire("nodeIcon:click",{targetEvent:t,node:i}),e.fire("leaf:click",{targetEvent:t,node:i})),!isIPad()&&o&&n&&i.handleNode(t)}}.bindAsEventListener(this)),e.observe("dblclick",function(t){var i=matchMeOrUp(t.element(),layoutModule.BUTTON_PATTERN)&&this.getTreeNodeByEvent(t);if(i){var n=this.isIconEvent(t),o=this.isNodeEvent(t),s=this.isLeafEvent(t);o?(n&&e.fire("nodeIcon:dblclick",{targetEvent:t,node:i}),e.fire("node:dblclick",{targetEvent:t,node:i})):s&&(n&&e.fire("leafIcon:dblclick",{targetEvent:t,node:i}),e.fire("leaf:dblclick",{targetEvent:t,node:i})),this.handleNodeOnDblclick&&(o||s)&&!n&&i.handleNode(t)}}.bindAsEventListener(this))}),dynamicTree.Tree.addMethod("_registerMouseEvents",function(){var e=this._getElement();e.observe(isSupportsTouch()?"touchstart":"mousedown",function(t){var i=t.element(),n=matchMeOrUp(i,layoutModule.BUTTON_PATTERN)&&this.getTreeNodeByEvent(t);if(n){t.treeEvent=!0;var o=this.isIconEvent(t),s=this.isNodeEvent(t),r=this.isLeafEvent(t);if(isSupportsTouch())if(JRS.vars.ajax_in_progress)alert("please wait");else if(this.twofingers=!1,2==t.touches.length&&(this.twofingers=!0,this._selectOrEditNode(t,n,isMetaHeld(t),isShiftHeld(t),isRightClick(t)),n.isSelected()||designerBase&&designerBase.isInSelection(n))){var a=jQuery(i).parents("li:first");return void(a.hasClass("selected")&&document.fire(layoutModule.ELEMENT_CONTEXTMENU,{targetEvent:t,node:i}))}isSupportsTouch()&&JRS.vars.ajax_in_progress||(!this.selectOnMousedown||isSupportsTouch()&&1!=t.touches.length||this._selectOrEditNode(t,n,isMetaHeld(t),isShiftHeld(t),isRightClick(t)),s?(o&&e.fire("nodeIcon:mousedown",{targetEvent:t,node:n}),e.fire("node:mousedown",{targetEvent:t,node:n})):r&&(o&&e.fire("leafIcon:mousedown",{targetEvent:t,node:n}),e.fire("leaf:mousedown",{targetEvent:t,node:n})))}}.bindAsEventListener(this)),e.observe(isSupportsTouch()?"drag:touchstart":"drag:mousedown",function(t){var i=t.memo.targetEvent,n=matchMeOrUp(i.element(),layoutModule.BUTTON_PATTERN)&&this.getTreeNodeByEvent(i);if(n){i.treeEvent=!0;var o=this.isIconEvent(i),s=this.isNodeEvent(i),r=this.isLeafEvent(i);this.selectOnMousedown&&!isRightClick(i)&&this._selectOrEditNode(i,n,isMetaHeld(i),isShiftHeld(i),isRightClick(i)),s?(o&&e.fire("nodeIcon.drag:mousedown",{targetEvent:i,node:n}),e.fire("node.drag:mousedown",{targetEvent:i,node:n})):r&&(o&&e.fire("leafIcon.drag:mousedown",{targetEvent:i,node:n}),e.fire("leaf.drag:mousedown",{targetEvent:i,node:n}))}}.bindAsEventListener(this)),e.observe(isSupportsTouch()?"touchend":"mouseup",function(t){var i=matchMeOrUp(t.element(),layoutModule.BUTTON_PATTERN)&&this.getTreeNodeByEvent(t);if(i){t.treeEvent=!0;var n=this.isIconEvent(t),o=this.isNodeEvent(t),s=this.isLeafEvent(t);if(this.twofingers&&(t.isEmulatedRightClick=!0),isSupportsTouch()&&!this.twofingers&&(this.clickid==i.id&&!JRS.vars.ajax_in_progress&&t.timeStamp-this.clicktime<700&&(o?(n&&e.fire("nodeIcon:dblclick",{targetEvent:t,node:i}),e.fire("node:dblclick",{targetEvent:t,node:i})):s&&(n&&e.fire("leafIcon:dblclick",{targetEvent:t,node:i}),e.fire("leaf:dblclick",{targetEvent:t,node:i})),this.handleNodeOnDblclick&&(o||s)&&!n&&i.handleNode(t)),this.clicktime=t.timeStamp,this.clickid=i.id),!isSupportsTouch()||!JRS.vars.ajax_in_progress){this.selectOnMousedown||TouchController.element_scrolled||isSupportsTouch()&&1!=t.changedTouches.length||this._selectOrEditNode(t,i,isMetaHeld(t),isShiftHeld(t),isRightClick(t)),this._deselectOthers(t,i,isMetaHeld(t),isShiftHeld(t),isRightClick(t));o?(n&&e.fire("nodeIcon:mouseup",{targetEvent:t,node:i}),e.fire("node:mouseup",{targetEvent:t,node:i})):s&&(n&&e.fire("leafIcon:mouseup",{targetEvent:t,node:i}),e.fire("leaf:mouseup",{targetEvent:t,node:i})),isSupportsTouch()&&o&&n&&!TouchController.element_scrolled&&i.handleNode(t)}}}.bindAsEventListener(this)),"createTouch"in document||(e.observe("mouseover",function(t){var i=t.element(),n=matchMeOrUp(i,layoutModule.BUTTON_PATTERN)&&this.getTreeNodeByEvent(t);n&&(Draggables.dragging&&(clearTimeout(this.timeout_id),this.timeout_id=setTimeout(function(e){n.openNode(e)},this.EXPANDING_TIME)),this.createDraggableIfNeeded(t,n),!isIE7()&&e.fire("tree:mouseover",{targetEvent:t,node:n}))}.bindAsEventListener(this)),isIE7()||e.observe("mouseout",function(t){var i=matchMeOrUp(t.element(),layoutModule.BUTTON_PATTERN)&&this.getTreeNodeByEvent(t);i&&e.fire("tree:mouseout",{targetEvent:t,node:i})}.bindAsEventListener(this))),Droppables.add(e,{accept:this.dropClasses,onDrop:function(e){this.elementDropped=e}.bind(this)})}),dynamicTree.Tree.addMethod("_registerKeyEvents",function(){var e=this._getElement();e.observe("key:down",function(e){var t=this.getTreeNodeByEvent(e);dynamicTree.treeNodeEdited!==t&&t&&this._selectNextNode(t,e.memo.targetEvent)}.bindAsEventListener(this)),e.observe("key:up",function(e){var t=this.getTreeNodeByEvent(e);dynamicTree.treeNodeEdited!==t&&t&&this._selectPreviousNode(t,e.memo.targetEvent)}.bindAsEventListener(this)),e.observe("key:right",function(e){var t=this.getTreeNodeByEvent(e);dynamicTree.treeNodeEdited!==t&&t&&this._selectInwards(t,e.memo.targetEvent)}.bindAsEventListener(this)),e.observe("key:left",function(e){var t=this.getTreeNodeByEvent(e);dynamicTree.treeNodeEdited!==t&&t&&this._selectOutwards(t,e.memo.targetEvent)}.bindAsEventListener(this))}),dynamicTree.Tree.addMethod("_registerCustomEvents",function(){var e=this._getElement();e.observe("mousedown",function(t){dynamicTree.activeTreeId&&dynamicTree.activeTreeId===this.getId()||(e.fire("tree:blur",{targetEvent:t,tree:dynamicTree.getActiveTree()}),dynamicTree.activeTreeId=this.getId(),e.fire("tree:focus",{targetEvent:t,tree:dynamicTree.getActiveTree()}))}.bindAsEventListener(this)),e.observe("mouseover",function(t){var i=this.getTreeNodeByEvent(t);i||e.fire("tree:mouseover",{targetEvent:t,tree:this})}.bindAsEventListener(this)),e.observe("mouseout",function(t){var i=this.getTreeNodeByEvent(t);i||e.fire("tree:mouseout",{targetEvent:t,tree:this})}.bindAsEventListener(this))}),dynamicTree.Tree.addMethod("fireOpenEvent",function(e,t){var i=this._getElement();i.fire("node:open",{node:e,targetEvent:t})}),dynamicTree.Tree.addMethod("fireSelectEvent",function(e,t){var i=this._getElement();i.fire(e.isParent()?"node:selected":"leaf:selected",{node:e,targetEvent:t})}),dynamicTree.Tree.addMethod("fireUnSelectEvent",function(e,t){var i=this._getElement();i.fire(e.isParent()?"node:unselected":"leaf:unselected",{node:e,targetEvent:t})}),dynamicTree.Tree.addMethod("fireUnSelectAllEvent",function(e){var t=this._getElement();t.fire("items:unselected",{targetEvent:e})}),dynamicTree.Tree.addMethod("fireEditEvent",function(e,t){var i=this._getElement();i.fire(e.isParent()?"node:edit":"leaf:edit",{node:e,newValue:t})}),dynamicTree.Tree.addMethod("fireStartEditEvent",function(e,t){var i=this._getElement();i.fire(e.isParent()?"node:startEdit":"leaf:startEdit",{node:e,input:t})}),dynamicTree.Tree.addMethod("fireEndEditEvent",function(e){var t=this._getElement();t.fire(e.isParent()?"node:endEdit":"leaf:endEdit",{node:e})}),dynamicTree.Tree.addMethod("observe",function(e,t){this._getElement().observe(e,t)}),dynamicTree.Tree.addMethod("stopObserving",function(e,t){this._getElement().stopObserving(e,t)}),dynamicTree.Tree.addMethod("createDraggableIfNeeded",function(e,t){var i=e?e.element():t._getElement().down(this.dragPattern),n=this.draggables[i.identify()];if(this.dragPattern&&!n){var o=matchAny(i,[this.dragPattern],!0);if(o&&i.className.toLowerCase().indexOf("icon")<0&&!this.draggables[o.identify()])return this.draggables[o.identify()]=new Draggable(i,{superghosting:!0,mouseOffset:!0,delay:isIE()||isSupportsTouch()?200:0,onStart:this.setDragStartState.bind(this,t),onEnd:this.setDragEndState.bind(this,t)}),this.draggables[o.identify()]}return null}),dynamicTree.Tree.addMethod("setDragStartState",function(e,t){var i=e._getElement().templateClassName;i&&t.element.addClassName(i),t.element.setStyle({width:null,height:null}),t.element.addClassName(layoutModule.DRAGGING_CLASS).addClassName(this.getId()),this.dragClasses&&t.element.addClassName(this.dragClasses),this.selectedNodes.length>1&&t.element.update(new Template(this.TREE_NN_ITEMS_SELECTED).evaluate({count:this.selectedNodes.length})),t.element.node=e,t.element.nodes=this.selectedNodes,t.options.scroll=this._getElement(),t.options.scrollSensitivity=layoutModule.SCROLL_SENSITIVITY,Draggables.dragging=this.regionID||!0}),dynamicTree.Tree.addMethod("setDragEndState",function(){delete Draggables.dragging}),define("dynamicTree.events",["prototype","dynamicTree.tree"],function(e){return function(){var t;return t||e.dynamicTree}}(this)),dynamicTree.TreeSupport=function(e,t){if(dynamicTree.Tree.call(this,e,t),this.providerId=t.providerId,this.hideLoader=t.hideLoader,this.rootUri=Object.isUndefined(t.rootUri)?"/":t.rootUri,this.nodeClass=t.nodeClass&&Object.isFunction(t.nodeClass)?t.nodeClass:dynamicTree.TreeNode,t.rootObjectModifier&&(this.modifyRootObject=t.rootObjectModifier),this.resetStatesOnShow=Object.isUndefined(t.resetStatesOnShow)||t.resetStatesOnShow,this.inInit=!0,this.ajaxBufferId="ajaxbuffer",this.nodeTextId="treeNodeText",this.urlGetNode=t.urlGetNode?t.urlGetNode:this._getFlowUrl("getNode"),this.urlGetChildren=t.urlGetChildren?t.urlGetChildren:this._getFlowUrl("getChildren"),this.urlGetMultipleChildren=t.urlGetMultipleChildren?t.urlGetMultipleChildren:this._getFlowUrl("getMultipleChildren"),this.urlGetMessage=t.urlGetMessage?t.urlGetMessage:this._getFlowUrl("getMessage"),this.additionalParams=t.additionalParams?t.additionalParams:{},null==this.TREE_NN_ITEMS_SELECTED){var i=function(e){this.TREE_NN_ITEMS_SELECTED=e}.bind(this);this.getMessage("TREE_NN_ITEMS_SELECTED",i,null)}this._initOpenListener()},dynamicTree.TreeSupport.prototype=deepClone(dynamicTree.Tree.prototype),dynamicTree.TreeSupport.addMethod("_initOpenListener",function(){this.observe("node:open",function(e){var t=e.memo.node;t&&!t.isloaded&&this.getTreeNodeChildren(t)}.bindAsEventListener(this))}),dynamicTree.TreeSupport.addMethod("stopObserving",function(e,t){this._getElement().stopObserving(e,t),"node:open"!==e||t||this._initOpenListener()}),dynamicTree.TreeSupport.addMethod("_getFlowUrl",function(e){return __jrsConfigs__.contextPath+"/flow.html?_flowId=treeFlow&method="+e}),dynamicTree.TreeSupport.addMethod("showTree",function(e,t,i,n){var o=this.urlGetNode+"&provider="+this.providerId+"&uri="+this.rootUri+"&depth="+e;n&&(o+="&forceHtmlEscape=true"),o+="&"+this._evaluateAdditionalParams(),this._showTree(o,t,i)}),dynamicTree.TreeSupport.addMethod("_evaluateAdditionalParams",function(){var e=this.additionalParams;return _.isFunction(e)&&(e=e.call(null)),_.isObject(e)?Object.toQueryString(e):null}),dynamicTree.TreeSupport.addMethod("showTreePrefetchNodes",function(e,t,i){var n=this.urlGetNode+"&provider="+this.providerId+"&uri="+this.rootUri;e&&(n+="&prefetch="+encodeURIComponent(e)),n+="&"+this._evaluateAdditionalParams(),this._showTree(n,t,i)}),dynamicTree.TreeSupport.addMethod("_showTree",function(e,t,i){this.inInit=!0,this.wait();var n=function(e,t,i){return function(){return e.showTreeCallback(t,i)}}(this,t,i);ajaxTargettedUpdate(e,{fillLocation:this.ajaxBufferId,callback:n,errorHandler:baseErrorHandler,hideLoader:this.hideLoader})}),dynamicTree.TreeSupport.addMethod("showTreeCallback",function(e,t){var i=document.getElementById(this.nodeTextId);if(null==i)return void(t?t():this.fireServerErrorEvent());var n=xssUtil.unescape(jQuery(i).text()),o=n.evalJSON();this.modifyRootObject&&(o=this.modifyRootObject(o,!1)),i=document.getElementById(this.ajaxBufferId),i.innerHTML="",this.setRootNode(this.processNode(o)),this.resortTree(),this.resetStatesOnShow&&this.resetStates(),this.renderTree(),this.inInit=!1,e?e():this.fireTreeLoadedEvent({tree:this})}),dynamicTree.TreeSupport.addMethod("processNode",function(e){var t={};t.id=e.id,t.type=e.type,t.uri=e.uri,t.extra=deepClone(e.extra),e.cssClass&&(t.cssClass=e.cssClass);var i=this.nodeClass,n=new i({name:unescapeBackslash(e.label),param:t,orderNumber:e.order});e.tooltip&&(n.tooltip=e.tooltip);var o=e.children;if(null!=o){var s=o.length;if(0===s)n.setHasChilds(!1);else for(var r=0;s>r;r++){var a=o[r];if(a){var l=this.processNode(a);n.addChild(l)}}n.isloaded=!0}return n}),dynamicTree.TreeSupport.addMethod("getTreeNodeChildren",function(e,t,i){var n=e.param.uri,o=function(e,t,i,n){return function(){return e.getTreeNodeChildrenCallback(t,i,n)}}(this,e.id,t,i),s=function(t){(500==t.status||t.getResponseHeader("JasperServerError"))&&e.stopWaiting(),baseErrorHandler(t)};ajaxTargettedUpdate(this.urlGetChildren+"&provider="+this.providerId+"&uri="+encodeURIComponent(encodeURIComponent(n))+"&"+this._evaluateAdditionalParams(),{fillLocation:this.ajaxBufferId,callback:o,errorHandler:s,hideLoader:this.hideLoader}),this.inInit||e.wait()}),dynamicTree.TreeSupport.addMethod("getTreeNodeChildrenCallback",function(e,t,i){var n=document.getElementById(this.nodeTextId);if(null==n)return void(i?i():this.fireServerErrorEvent());var o=xssUtil.unescape(jQuery(n).text()).evalJSON(),s=dynamicTree.nodes[e];this.modifyRootObject&&(o=this.modifyRootObject(o,!0,s)),n=document.getElementById(this.ajaxBufferId),n.innerHTML="",s.resetChilds(),s.stopWaiting();var r=o.length;if(0===r)s.setHasChilds(!1);else{var a=s.getTreeId(),l=a?dynamicTree.trees[a]:null,c=l?l.sortNodes:null;l&&(l.sortNodes=!1);for(var u=0;r>u;u++){var d=this.processNode(o[u]);s.addChild(d)}l&&(l.sortNodes=c,s.resortChilds())}s.isloaded=!0,s.refreshNode(),t?t(s.childs):this.fireChildrenLoadedEvent(s.childs)}),dynamicTree.TreeSupport.addMethod("getTreeMultipleNodesChildren",function(e,t,i){var n,o="",s=[];if(e&&e.length)for(n=0;n<e.length;n++)n>0&&(o+=","),o+=encodeURIComponent(encodeURIComponent(e[n].param.uri)),s[n]=e[n].id;if(o.length){var r=function(e,t,i,n){return function(){return e.getTreeMultipleNodesChildrenCallback(t,i,n)}}(this,s,t,i);if(ajaxTargettedUpdate(this.urlGetMultipleChildren+"&provider="+this.providerId,{fillLocation:this.ajaxBufferId,callback:r,postData:"uris="+o,errorHandler:baseErrorHandler,hideLoader:this.hideLoader}),!this.inInit)for(n=0;n<e.length;n++)e[n].wait()}}),dynamicTree.TreeSupport.addMethod("getTreeMultipleNodesChildrenCallback",function(e,t,i){var n=document.getElementById(this.nodeTextId);if(null==n)return void(i?i():this.fireServerErrorEvent());var o=xssUtil.unescape(jQuery(n).text()).evalJSON();n=document.getElementById(this.ajaxBufferId),n.innerHTML="",t?t(e,o):(this.setMultipleNodesChilden(e,o),this.fireMultipleChildrenLoadedEvent(e,o))}),dynamicTree.TreeSupport.addMethod("setMultipleNodesChilden",function(e,t,i){if(e&&t)for(var n=0;n<t.length;n++){for(var o=t[n],s=o.children,r=null,a=0;a<e.length;a++){var l=dynamicTree.nodes[e[a]];if(l.param.uri==o.parentUri){r=l;break}}if(r){r.resetChilds(),r.stopWaiting();var c=s.length;if(0===c)r.setHasChilds(!1);else{var u=r.getTreeId(),d=u?dynamicTree.trees[u]:null,h=d?d.sortNodes:null;d&&(d.sortNodes=!1);for(var p=0;c>p;p++){var f=this.processNode(s[p]);r.addChild(f)}d&&(d.sortNodes=h,r.resortChilds())}r.isloaded=!0,i||r.refreshNode()}}}),dynamicTree.TreeSupport.addMethod("getTreeNodeChildrenPrefetched",function(e,t,i,n,o,s,r){var a=e.param.uri,l=this.urlGetNode+"&provider="+this.providerId+"&uri="+a,c="";t&&(c="&prefetch="+t),o&&(l+="&depth="+o);var u=function(e,t,i,n,o,s){return function(){return e.getTreeNodeChildrenPrefetchedCallback(t,i,n,o,s)}}(this,e.id,i,n,s,r);ajaxTargettedUpdate(l,{fillLocation:this.ajaxBufferId,callback:u,postData:c,errorHandler:baseErrorHandler,hideLoader:this.hideLoader}),this.inInit||e.wait()}),dynamicTree.TreeSupport.addMethod("getTreeNodeChildrenPrefetchedCallback",function(e,t,i,n,o){var s=document.getElementById(this.nodeTextId);if(null==s)return void(i?i():this.fireServerErrorEvent());var r=xssUtil.unescape(jQuery(s).text()).evalJSON();
s=document.getElementById(this.ajaxBufferId),s.innerHTML="";var a=dynamicTree.nodes[e];if(a.resetChilds(),a.stopWaiting(),r.children){var l=a.getTreeId(),c=l?dynamicTree.trees[l]:null,u=c?c.sortNodes:null;c&&(c.sortNodes=!1);for(var d=0;d<r.children.length;d++){var h=this.processNode(r.children[d]);a.addChild(h)}c&&(c.sortNodes=u,n||a.resortChilds())}a.isloaded=!0,o||a.refreshNode(),t?t():this.fireChildredPrefetchedLoadedEvent(a.childs)}),dynamicTree.TreeSupport.addMethod("openAndSelectNode",function(e,t,i,n){var o=function(e){var t=dynamicTree.trees[e.getTreeId()];e.parent&&t&&t.rootNode!=e.parent&&t.getState(e.parent.id)==dynamicTree.TreeNode.State.CLOSED&&e.parent.handleNode(),e&&jQuery("#dataChooserSource").length&&(e.nofocus=!0),t._selectOrEditNode(void 0,e,!1,!1,!1,n)};this.processNodePath(e,o,i);var s=this.getSelectedNode();s&&s.scroll(),t&&t()}),dynamicTree.TreeSupport.addMethod("processNodePath",function(e,t,i){var n=this.getRootNode();if("/"===e)t(n);else{var o,s=e.split("/");for(o=0;o<s.length;o++)if(s[o]){var r=n;if(n=this.findNodeChildByMetaName(n,s[o]),!n){if(!i)return;if(n=this.findNodeFirstNodeChildByAlphabeticalOrder(r),!n)return}t(n)}}}),dynamicTree.TreeSupport.addMethod("findLastLoadedNode",function(e){var t={node:null},i=function(e){return function(t){e.node=t}}(t);return this.processNodePath(e,i),t.node}),dynamicTree.TreeSupport.addMethod("findNodeChildByMetaName",function(e,t){if(e.hasChilds())for(var i=0;i<e.childs.length;i++)if(e.childs[i].param.id==t)return e.childs[i];return null}),dynamicTree.TreeSupport.addMethod("findNodeFirstNodeChildByAlphabeticalOrder",function(e){var t=null,i=null;if(e.childs.length>0){t=e.childs[0].param.id,i=0;for(var n=null,o=null,s=1;s<e.childs.length;s++){n=e.childs[s].param.id,o=s;for(var r=n.length<t.length?n.length:t.length,a=0;r>a;a++){if(n.charCodeAt(a)<t.charCodeAt(a)){t=n,i=o;break}if(n.charCodeAt(a)>t.charCodeAt(a))break}}return e.childs[i]}return null}),dynamicTree.TreeSupport.addMethod("findNodeById",function(e,t){return function i(e,t){if(!t||!e)return null;if(t.param.id===e)return t;if(t.hasChilds())for(var n=0;n<t.childs.length;++n){var o=i(e,t.childs[n]);if(o)return o}return null}(e,t?t:this.getRootNode())}),dynamicTree.TreeSupport.addMethod("hasVisibleFolders",function(e){if(this.bShowRoot)return!0;var t=e.children;if(t)for(var i=0;i<t.length;i++){var n=e.children[i].children;if(n&&n.length>0)return!0}return!1}),dynamicTree.TreeSupport.addMethod("getMessage",function(e,t,i){var n=this.urlGetMessage+"&messageId="+e,o=function(e,t,i){return function(){return e.getMessageCallback(t,i)}}(this,t,i);ajaxTargettedUpdate(n,{fillLocation:this.ajaxBufferId,callback:o,errorHandler:baseErrorHandler,hideLoader:this.hideLoader})}),dynamicTree.TreeSupport.addMethod("getMessageCallback",function(e,t){var i=document.getElementById(this.ajaxBufferId);if(null==i)return void(t&&t());var n=trim(i.innerHTML);i.innerHTML="",e&&e(n)}),dynamicTree.TreeSupport.addMethod("fireServerErrorEvent",function(){this._getElement().fire("server:error",{})}),dynamicTree.TreeSupport.addMethod("fireTreeLoadedEvent",function(e){this._getElement().fire("tree:loaded",{tree:e})}),dynamicTree.TreeSupport.addMethod("fireChildrenLoadedEvent",function(e){this._getElement().fire("children:loaded",{nodes:e})}),dynamicTree.TreeSupport.addMethod("fireMultipleChildrenLoadedEvent",function(e,t){this._getElement().fire("multipleChildren:loaded",{parentNodeIds:e,metaNodes:t})}),dynamicTree.TreeSupport.addMethod("fireChildredPrefetchedLoadedEvent",function(e){this._getElement().fire("childredPrefetched:loaded",{nodes:e})}),define("components.dynamicTree",["prototype","dynamicTree.tree","dynamicTree.treenode","dynamicTree.events","core.ajax"],function(e){return function(){var t;return t||e.dynamicTree}}(this)),dynamicTree.RepositoryFolder=function(e){dynamicTree.TreeNode.call(this,e),this.Types={Folder:new dynamicTree.TreeNode.Type("com.jaspersoft.jasperserver.api.metadata.common.domain.Folder"),SuperRoot:new dynamicTree.TreeNode.Type("superroot"),Root:new dynamicTree.TreeNode.Type("root")},this.nodeHeaderTemplateDomId="list_responsive_collapsible_folders:folders",this.param.extra&&this.param.extra.isActiveThemeFolder&&(this.param.cssClass=this.ACTIVE_THEME_CLASS)},dynamicTree.TreeNode&&(dynamicTree.RepositoryFolder.prototype=deepClone(dynamicTree.TreeNode.prototype)),dynamicTree.RepositoryFolder.addVar("ACTIVE_THEME_CLASS","activeTheme"),dynamicTree.RepositoryFolder.addMethod("isParent",function(){return this.param.type==this.Types.Folder.name||this.param.type==this.Types.SuperRoot.name||this.param.type==this.Types.Root.name}),dynamicTree.RepositoryFolder.addMethod("isSuperRoot",function(){return this.param.type==this.Types.SuperRoot.name}),dynamicTree.RepositoryFolder.addMethod("isPublic",function(){return"public"===this.param.id}),dynamicTree.createRepositoryTree=function(e,t){var i=null!=t.organizationId&&""!==t.organizationId;null==t.bShowRoot&&(t.bShowRoot=!i),t.nodeClass||(t.nodeClass=dynamicTree.RepositoryFolder),t.templateDomId="list_responsive_collapsible_folders";var n=new dynamicTree.TreeSupport(e,t);if(n.organizationId=t.organizationId,n.publicFolderUri=t.publicFolderUri,n.orgMode=i,n.modifyRootObject=function(e,t,i){var n;if(t){n=[];for(var o=0;o<e.length;o++)e[o].uri==this.publicFolderUri&&i&&"/"!=i.param.uri||n.push(e[o])}else if(this.orgMode&&null!=e.children){for(var s,r=e.children,a=[],o=0;o<r.length;o++)r[o].uri==this.publicFolderUri?s=r[o]:a.push(r[o]);e.children=a,n={type:"superroot",label:"",extra:{}},n.children=[e,s]}else n=e;return n},n.getRootNode=function(){var e=this.rootNode;return e.isSuperRoot()?e.childs[0].isPublic()?e.childs[1]:e.childs[0]:e},n.findNodeChildByMetaName=function(e,t){if(e.isSuperRoot()){var i,o;if(e.childs[0].isPublic()?(i=e.childs[0],o=e.childs[1]):(i=e.childs[1],o=e.childs[0]),"public"===t)return i;e=o}if(e.hasChilds())for(var s=0;s<e.childs.length;s++)if(e.childs[s].param.id==t)return e.childs[s];return"public"==t&&e.parent&&e.parent.isSuperRoot()?n.findNodeChildByMetaName(e.parent,t):null},isIPad()){var o=$(e);n.touchController=new TouchController(o,o.up(1),{absolute:!0})}return n},define("dynamicTree.utils",["components.dynamicTree","touchcontroller","dynamicTree.treenode"],function(e){return function(){var t;return t||e.dynamicTree}}(this)),repositorySearch.secondarySearchBox={_searchBox:null,initialize:function(e){this._searchBox=new SearchBox({id:"secondarySearchBox"}),this._searchBox.onSearch=function(e){repositorySearch.fire(repositorySearch.Event.SEARCH_SEARCH,{text:e})},this.setText(e)},setText:function(e){this._searchBox.setText(e)}},repositorySearch.toolbar={_bulkActions:{},initialize:function(e){this._bulkActions=e,toolbarButtonModule.initialize(this._toActionMap(this._bulkActions)),this.refresh()},refresh:function(){for(var e in this._bulkActions){var t=this._bulkActions[e].buttonId,i=toFunction(this._bulkActions[e].test);toolbarButtonModule.setButtonState($(t),i())}},_toActionMap:function(e){var t={};for(var i in e){var n=e[i],o=n.buttonId;t[o]=function(e,t){return function(){var i=getAsFunction(e),n=t,o=localContext&&localContext[e];n&&isArray(n)?i.apply(o?localContext:null,n):i.call(o?localContext:null,n)}}(n.action,n.actionArgs)}return t}},repositorySearch.foldersPanel={_treeId:"foldersTree",_uri:"/",_cookieName:"lastFolderUri",_canDoBrowse:!0,_touchController:null,initialize:function(e){if(e.isFolderSet)this._uri=e.state.folderUri;else{var t=window.localStorage?localStorage.getItem(this._cookieName):void 0;this._uri=t&&t.length>0?t:"/"}return this._container=$(this.getTreeId()).up(1),this.tree=new dynamicTree.createRepositoryTree(this.getTreeId(),{providerId:"repositoryExplorerTreeFoldersProvider",rootUri:repositorySearch.model.getRootFolderUri(),organizationId:e.organizationId,publicFolderUri:e.publicFolderUri,urlGetNode:"flow.html?_flowId=searchFlow&method=getNode",urlGetChildren:"flow.html?_flowId=searchFlow&method=getChildren",dragPattern:".draggable",selectOnMousedown:!1}),disableSelectionWithoutCursorStyle($(this.getTreeId()).up(1)),this.tree.observe("key:contextMenu",function(e){var t=e.memo.node,i=getBoxOffsets(t,!0);repositorySearch.actionModel.showFolderMenu(e,{menuLeft:i[0]+100,menuTop:i[1]+20}),Event.stop(e)}),this.tree.observe("key:escape",function(e){actionModel.hideMenu(),Event.stop(e)}),this.tree.observe("tree:mouseover",function(e){this.tree._overNode=e.memo.node}.bindAsEventListener(this)),this.tree.observe("tree:mouseout",function(e){this.tree.refreshDropTarget(!1),this.tree._overNode==e.memo.node&&(this.tree._overNode=null)}.bindAsEventListener(this)),this.tree.setDragStartState=function(e,t,i){dynamicTree.Tree.prototype.setDragStartState.call(this,e,t,i);var n=new Folder(e);isMetaHeld(i,!0)?(canFolderBeCopied(n)&&invokeFolderAction("CopyFolder",n),$(document.body).addClassName(layoutModule.COPY_CLASS)):canFolderBeMoved(n)&&invokeFolderAction("MoveFolder",n)},this.tree.setDragEndState=function(e,t,i){repositorySearch.CopyMoveController.cancel(),this.refreshDropTarget(!1),$(document.body).removeClassName(layoutModule.COPY_CLASS),dynamicTree.Tree.prototype.setDragEndState.call(this,e,t,i)},this.tree.refreshDropTarget=function(e){this._overNode&&(this._overNode.isDropTarget=e,this._overNode.refreshStyle())},Droppables.remove(this.getTreeId()),Droppables.add(this.getTreeId(),{accept:["dragging","wrap"],onHover:function(e){if(this.tree._overNode){var t=new Folder(this.tree._overNode),i=e.node&&canFolderBeCopiedOrMovedToFolder(t)||e.items&&canAllBeCopiedOrMovedToFolder(t);this.tree.refreshDropTarget(i)}}.bind(this),onDrop:function(e,t,i){var n;if(Draggables.supportsTouch){var o=i.changedTouches[0];n=this.tree.getTreeNodeByElement($(document.elementFromPoint(o.pageX,o.pageY)))}else n=this.tree.getTreeNodeByEvent(i);if(n&&(this.tree._overNode=n),this.tree._overNode){var s=new Folder(this.tree._overNode);e.node&&canFolderBeCopiedOrMovedToFolder(s)&&invokeFolderAction("PasteFolder",s),e.items&&canAllBeCopiedOrMovedToFolder(s)&&invokeFolderAction("PasteResources",s)}}.bind(this)}),this.tree.observe("server:error",function(){window.console&&alert("Tree load error.")}),this.tree.observe("childredPrefetched:loaded",function(){this.tree.openAndSelectNode(this._uri)}.bindAsEventListener(this)),this.tree.observe("tree:loaded",function(){this._canDoBrowse=!1,"/"==this._uri?this.tree.rootNode.select():this.tree.openAndSelectNode(this._uri),this._canDoBrowse=!0;var e=this.tree.getSelectedNode();e&&e.scroll($(this._treeId).parentNode),this.doBrowse()}.bindAsEventListener(this)),this.tree.observe("node:selected",function(e){this._uri=e.memo.node.param.uri,window.localStorage&&localStorage.setItem(this._cookieName,this._uri),repositorySearch.model.setSelectedFolder(new Folder(e.memo.node)),this.doBrowse()}.bindAsEventListener(this)),this.tree.observe("node:mouseup",function(e){repositorySearch.model.setContextFolder(new Folder(e.memo.node))}),this.tree.showTreePrefetchNodes(this._uri),this},doBrowse:function(){this._canDoBrowse&&repositorySearch.fire(repositorySearch.Event.SEARCH_BROWSE,{uri:this._uri})},getSelectedUri:function(){return this._uri},getTreeId:function(){return this._treeId},selectFolder:function(e){this.tree.openAndSelectNode(e.URI)},reselectFolder:function(e){e.node.isSelected()&&(e.node.deselect(),e.node.select())},refreshFolder:function(e){this.selectFolder(e),this.updateSubFolders(e)},updateFolder:function(e,t,i){e.label=t,e.description=i,e.node.changeName(e.label),e.node.param.extra.desc=e.description,this.tree.resortSubtree(e.node.parent),e.node.parent.refreshNode()},updateSubFolders:function(e){e.node.hasChilds()||e.node.setHasChilds(!0),e.node.isOpen()&&e.node.handleNode(),e.node.isloaded=!1,e.node.handleNode()},isFolderContextMenu:function(e){return this.tree.getTreeNodeByEvent(e)&&!this.tree.isIconEvent(e)},moveOrCopyFolder:function(e,t,i){var n=e.getParentFolder().node;return i||n.removeChild(e.node),this.tree.getTreeNodeChildren(t.node,function(t){if(t){var i=t.detect(function(t){return t.param.id==e.name});i&&this.tree.openAndSelectNode(i.param.uri)}}.bind(this))}},repositorySearch.resultsPanel={_list:null,_infiniteScroll:null,_resultListHeaderId:"resultsListHeader",_resultListId:"resultsList",_resultsContainerId:"resultsContainer",_touchScroller:null,_folderDisplayPathCache:{},NOTHING_TO_DISPLAY_ID:"nothingToDisplay",RESOURCE_NAME_TOOLTIP_ID:"resourceNameTooltip",NAME_PATTERN:".resourceName",LINK_NAME_PATTERN:".resourceName > a",DISCLOSURE_PATTERN:".disclosure",SCHEDULED_PATTERN:".scheduled",LOADING_CLASS_NAME:"loading",initialize:function(e){var t=this;return this._container=$(this._resultListId).up(),this._header=$(this._resultListHeaderId),this._list=new dynamicList.List(this._resultListId,{listTemplateDomId:"tabular_fourColumn_resources",itemTemplateDomId:"tabular_fourColumn_resources:leaf",dragPattern:e.enableDnD?".draggable":"",multiSelect:!0,selectOnMousedown:!isIPad()}),this._intiListEvents(),this._initDnD(),this.getList().show(),isSupportsTouch()&&(this._touchController=new TouchController(document.getElementById(this._resultListId),document.getElementById(this._resultsContainerId),{scrollbars:!0}),jQuery("#"+this._resultListId).on("layout_update orientationchange",function(){jQuery("#"+t._resultListId).css("min-width",jQuery("#"+t._resultsContainerId).width()+"px"),jQuery("#"+t._resultListId).width(jQuery("#"+t._resultsContainerId).width())})),this._infiniteScroll=new InfiniteScroll(isIPad()?{id:this._container.identify(),contentId:this._resultListId,scroll:this._touchController}:{id:this._container.identify(),contentId:this._resultListId}),this._infiniteScroll.onLoad=function(){repositorySearch.fire(repositorySearch.Event.SEARCH_NEXT)},disableSelectionWithoutCursorStyle(this._container),Event.observe($(window),"resize",function(){this.refresh()}.bind(this)),this._fixHeaderWidth(),this},_fixHeaderWidth:function(){isIPad()||this._header.setStyle({marginRight:this._container.getWidth()-$(this._resultListId).getWidth()+"px"})},_createResourceItem:function(e){var t;e.hasChildren?(t=new dynamicList.CompositeItem({cssClassName:layoutModule.NODE_CLASS,label:e.label,value:e,openHandlerPattern:".disclosure.icon",closeHandlerPattern:".disclosure.icon",excludeFromSelectionTriggers:[".disclosure.icon"],listOptions:{listTemplateDomId:"tabular_fourColumn_resources_sublist",itemTemplateDomId:"tabular_fourColumn_resources_sublist:leaf",multiSelect:!0}}),t.setLoading=function(e){this.isLoading=e,this.refreshStyle(),repositorySearch.resultsPanel.refresh()}):t=new dynamicList.ListItem({cssClassName:layoutModule.LEAF_CLASS,label:e.label,value:e}),t.processTemplate=function(e){var t=canBeRun(this.getValue())||canBeOpened(this.getValue()),i=t?repositorySearch.resultsPanel.LINK_NAME_PATTERN:repositorySearch.resultsPanel.NAME_PATTERN,n=e.select(i)[0],o=e.select(repositorySearch.resultsPanel.NAME_PATTERN)[0],s=e.select(".resourceDescription")[0];n.update(xssUtil.escape(this.getValue().label));var r=this;new JSTooltip(o,{text:[xssUtil.escape(this.getValue().label),xssUtil.escape(repositorySearch.messages.loading)],templateId:repositorySearch.resultsPanel.RESOURCE_NAME_TOOLTIP_ID,loadTextCallback:function(e){var t=r.getValue().parentFolder,i=repositorySearch.resultsPanel._folderDisplayPathCache[t];if(repositorySearch.resultsPanel._folderDisplayPathCache[t])e.updateText([xssUtil.escape(r.getValue().label),xssUtil.escape(i+repositorySearch.model.getFolderSeparator()+r.getValue().label)]);else{var n=new repositorySearch.ServerAction(repositorySearch.InfoAction.GET_DISPLAY_PATH,{data:{resourceUri:t,isFolder:!0}});n.onSuccess=function(i){repositorySearch.resultsPanel._folderDisplayPathCache[t]=i,e.updateText([xssUtil.escape(r.getValue().label),xssUtil.escape(i+repositorySearch.model.getFolderSeparator()+r.getValue().label)])},n.onError=repositorySearch.defaultErrorHandler,n.invokeAction()}}}),s.update(xssUtil.escape(this.getValue().description)),new JSTooltip(s,{text:this.getValue().description});var a=e.select(".resourceType")[0],l=e.select(".modifiedDate")[0],c=e.select(".createdDate")[0];return a.update(this.getValue().type),l.update(this.getValue().updateDate),new JSTooltip(l,{text:this.getValue().updateDateTime}),c.update(this.getValue().date),new JSTooltip(c,{text:this.getValue().dateTime}),e};var i=t.refreshStyle;return t.refreshStyle=function(){i.call(this);var e=this._getElement();this.getValue().isScheduled&&e.addClassName(layoutModule.SCHEDULED_CLASS),this.isLoading&&e.addClassName(layoutModule.LOADING_CLASS)},t},_initDnD:function(){var e=this.getList();e.setDragStartState=function(e,t,i){dynamicList.List.prototype.setDragStartState.call(this,e,t,i),isMetaHeld(i,!0)&&$(document.body).addClassName(layoutModule.COPY_CLASS).setStyle({cursor:null}),invokeBulkAction(isMetaHeld(i,!0)?"Copy":"Move")},e.setDragEndState=function(e,t,i){repositorySearch.CopyMoveController.cancel(),repositorySearch.foldersPanel.tree.refreshDropTarget(!1),$(document.body).removeClassName(layoutModule.COPY_CLASS),dynamicList.List.prototype.setDragEndState.call(this,e,t,i)}},_intiListEvents:function(){this.getList().observe("item:click",function(e){var t=e.memo.item,i=e.memo.targetEvent,n=t.getValue();this._isLinkEvent(i)&&(canBeRun(n)?invokeRedirectAction("RunResourceAction"):canBeOpened(n)&&invokeRedirectAction("OpenResourceAction")),this._isScheduleIconEvent(i)&&canBeScheduled(n)&&invokeRedirectAction("ScheduleAction")}.bindAsEventListener(this)),this.getList().observe("item:selected",function(e){var t=(e.memo.item,this.getList().getSelectedItems().collect(function(e){return e.getValue()}));repositorySearch.model.setSelectedResources(t),repositorySearch.actionModel.refreshToolbar()}.bindAsEventListener(this)),this.getList().observe("item:unselected",function(e){var t=(e.memo.item,this.getList().getSelectedItems().collect(function(e){return e.getValue()}));repositorySearch.model.setSelectedResources(t),repositorySearch.actionModel.refreshToolbar()}.bindAsEventListener(this)),this.getList().observe("item:mouseup",function(){}),this.getList().observe("item:open",function(e){var t=e.memo.item,i=t.getValue();i.isLoaded()||(t.setLoading(!0),repositorySearch.fire(repositorySearch.Event.SEARCH_CHILDREN,{resource:i,item:t})),this.refresh()}.bindAsEventListener(this)),this.getList().observe("item:closed",function(){this.refresh()}.bindAsEventListener(this)),this.getList().observe("key:contextMenu",function(e){var t=e.memo.node,i=getBoxOffsets(t,!0),n={menuLeft:i[0]+100,menuTop:i[1]+20};this.getList().getSelectedItems().length>1?repositorySearch.actionModel.showResourceBulkMenu(e,n):repositorySearch.actionModel.showResourceMenu(e,n),Event.stop(e)}.bindAsEventListener(this)),this.getList().observe("key:escape",function(e){actionModel.hideMenu(),Event.stop(e)})},_isLinkEvent:function(e){var t=Event.element(e);return null!=matchAny(t,[this.LINK_NAME_PATTERN])},_isScheduleIconEvent:function(e){var t=Event.element(e);return t.match(this.SCHEDULED_PATTERN)},_isDisclosureEvent:function(e){var t=Event.element(e);return null!=matchAny(t,[this.DISCLOSURE_PATTERN])},_refreshEmptyListMessage:function(){var e=$(this.NOTHING_TO_DISPLAY_ID);0===this._list.getItems().length?(e.removeClassName(layoutModule.HIDDEN_CLASS),centerElement(e,{horz:!0,vert:!0})):e.addClassName(layoutModule.HIDDEN_CLASS)},getList:function(){return this._list},removeResources:function(e){var t=e.findAll(function(e){return e.isChild}),i=e.findAll(function(e){return!e.isChild}),n=this.getList().getItems(),o=[],s=[];n.each(function(e){e.isComposite&&s.push(e),i.include(e.getValue())&&o.push(e)}),s.each(function(e){e.getItems()&&e.removeItems(e.getItems().findAll(function(e){return t.include(e.getValue())}))}),this.getList().removeItems(o),this._refreshEmptyListMessage(),this.refresh()},setResources:function(e,t){var i=e.collect(this._createResourceItem);t?(t.setItems(i),t.refresh()):(this._infiniteScroll&&this._infiniteScroll.reset(),this.getList().setItems(i),this.getList().show(),this._refreshEmptyListMessage()),this.refresh(),this._infiniteScroll.stopWaiting()},addResources:function(e){var t=e.collect(this._createResourceItem);this.getList().addItems(t),this.getList().refresh(),this.refresh(),this._infiniteScroll.stopWaiting()},isResourceContextMenu:function(e){return this.getList().getItemByEvent(e)},updateResource:function(e){var t=this.getList().getItems();t.each(function(t){t.getValue().URIString==e.URIString&&(t.setValue(e),t.refresh(),this.getList().isItemSelected(t)&&this.getList().selectItem(t))}.bind(this))},findResource:function(e){var t=this.getList().getItems(),i=t.detect(function(t){return t.getValue().URIString===e});return i?i.getValue():null},refresh:function(){this._fixHeaderWidth(),tooltipModule.cleanUp()}},repositorySearch.filtersPanel={_id:"filtersPanel",_container:void 0,_filtersLists:{},_cookieName:"filtersPopularity",_ignoreFilterEvent:!1,initialize:function(e,t){this._getContainer().update(),e.each(function(e,t){this._getContainer().insert(new Element("ul",{id:e.id,"data-tab-index":5+t,"data-component-type":"list"}));var i=this._createFiltersList(e.id,e);i.show(),this._filtersLists[e.id]=i}.bind(this));for(var i in t)this.select(i,t[i]);return isSupportsTouch()&&(this._touchController=new TouchController(document.getElementById(this._id),$(this._id).up())),this},_refreshScroll:function(){var e=layoutModule.scrolls.get(this._id);e&&e.refresh()},_createItemsList:function(e){var t=e.options,i=0,n=t.collect(function(e){return new dynamicList.ListItem({value:e,cssClassName:layoutModule.LEAF_CLASS,label:repositorySearch.getMessage(e.labelId)})}).partition(function(){return i++,-1===e.showCount||e.showCount>i});return n[1].length>0&&n[0].push(new dynamicList.CompositeItem({value:{isMore:!0},templateDomId:"list_responsive_filters:node",openUp:!0,openHandlerPattern:".more.launcher",closeHandlerPattern:".fewer.launcher",respondOnItemEvents:!1,items:n[1]})),n[0]},_createFiltersList:function(e,t){var i=new dynamicList.List(e,{listTemplateDomId:"list_responsive_filters",itemTemplateDomId:"list_responsive_filters:leaf",items:this._createItemsList(t)});return i.addItems([new dynamicList.CompositeItem({templateDomId:"list_responsive_filters:separator",respondOnItemEvents:!1,value:{isSeparator:!0}})].compact()),i.observe("item:selected",function(e){var t=e.memo.item;t.getValue().isSeparator||t.getValue().isMore||this._ignoreFilterEvent||repositorySearch.fire(repositorySearch.Event.SEARCH_FILTER,{filterId:i.getId(),optionId:t.getValue().id})}.bindAsEventListener(this)),i},select:function(e,t,i){var n=this._filtersLists[e],o=function(e){if(e.getValue().id==t)throw e.isSelected()||(this._ignoreFilterEvent=i,e.select(),this._ignoreFilterEvent=!1),$break;if(e.isComposite){var n=e._getElement();baseList.isItemOpen(n)||baseList.openItem(n),e.getItems()&&e.getItems().each(o)}}.bind(this);n.getItems().each(o)},_getContainer:function(){return this._container||(this._container=$(this._id),this._container.hasClassName(layoutModule.SWIPE_SCROLL_PATTERN)&&(this._container=this._container.down())),this._container}},repositorySearch.filterPath={_containerId:"filterPath",_contentBodySelector:".primary.column>.content>.body",initialize:function(){return this._filterPathList=new dynamicList.List(this._containerId,{listTemplateDomId:"list_control_path",itemTemplateDomId:"list_control_path:step"}),this._filterPathList.observe("item:selected",function(e){var t=e.memo.item;t.getValue().isLast||repositorySearch.fire(repositorySearch.Event.SEARCH_ROLLBACK,{position:t.getValue().position})}),this},setPathItems:function(e){if(e.length>1){var t=e.length-1,i=e.collect(function(e,i){return e.isLast=i==t,new dynamicList.ListItem({label:e.label,value:e})});this._filterPathList.setItems(i),this._filterPathList.show(),$(this._containerId).up().removeClassName("hidden"),$(document.body).select(this._contentBodySelector)[0].addClassName("showingSubHeader")}else this._filterPathList.setItems([]),this._filterPathList.show(),$(this._containerId).up().addClassName("hidden"),$(document.body).select(this._contentBodySelector)[0].removeClassName("showingSubHeader")}},repositorySearch.sortersPanel={_LABEL_TEMPLATE_DOM_ID:"sortPanelLabelTemplate",_containerId:"sortMode",_ignoreSortEvent:!1,sortersList:null,initialize:function(e,t){var i=new dynamicList.ListItem({label:repositorySearch.getMessage("SEARCH_SORT_BY")+":",value:{isLabel:!0},templateDomId:"tabSet_control_horizontal_responsive:label",respondOnItemEvents:!1}),n=e.collect(function(e){return new dynamicList.ListItem({label:repositorySearch.getMessage(e.labelId),value:e})});return this.sortersList=new dynamicList.List(this._containerId,{listTemplateDomId:"tabSet_control_horizontal_responsive",itemTemplateDomId:"tabSet_control_horizontal_responsive:tab",items:[i].concat(n)}),this.sortersList.observe(this.sortersList.Event.ITEM_SELECTED,function(e){var t=e.memo.item;t.getValue().isLabel||this._ignoreSortEvent||repositorySearch.fire(repositorySearch.Event.SEARCH_SORT,{sorterId:t.getValue().id})}),this.sortersList.show(),i.disable(),this.select(t),this},select:function(e,t){this.sortersList.getItems().each(function(i){return i.getValue().id!=e||i.isSelected()?void 0:(this._ignoreSortEvent=t,this.sortersList.selectItem(i),void(this._ignoreSortEvent=!1))}.bind(this))},_getContainer:function(){return this._container||(this._container=$(this._containerId)),this._container},_getLabelTemplate:function(){var e=$(this._LABEL_TEMPLATE_DOM_ID).cloneNode(!0);return e.removeAttribute("id"),e}};var ResourcePermissions=function(e){this._resource=e,this._isVisible=!1,this._listId=this.ENTITY_LIST_ID,this._listContainerId=this.LIST_CONTAINER_ID,this._searchBoxId=this.SEARCH_BOX_ID,this.viewBy="USER",this._processTemplate()};ResourcePermissions.addVar("TEMPLATE_DOM_ID","permissions"),ResourcePermissions.addVar("TOOLTIP_TEMPLATE_DOM_ID","orgTooltip"),ResourcePermissions.addVar("LIST_TEMPLATE_ID","tabular_twoColumn_setLeft"),ResourcePermissions.addVar("ITEM_TEMPLATE_ID","tabular_twoColumn_setLeft:leaf"),ResourcePermissions.addVar("WAIT_ITEM_TEMPLATE_ID","tabular_twoColumn_setLeft:loading"),ResourcePermissions.addVar("ENTITY_LIST_ID","permissionsList"),ResourcePermissions.addVar("LIST_CONTAINER_ID","permissionsListContainer"),ResourcePermissions.addVar("SEARCH_BOX_ID","searchPermissionsBox"),ResourcePermissions.addVar("NAME_TOOLTIP_PATTERN",".one"),ResourcePermissions.addVar("NAME_PATTERN",".one>a.launcher"),ResourcePermissions.addVar("PERMISSIONS_PATTERN",".two>select"),ResourcePermissions.addVar("VIEW_BY_TAB_SET_PATTERN","#permissionsViewBy"),ResourcePermissions.addVar("TAB_PATTERN",".tab>p"),ResourcePermissions.addVar("PATH_PATTERN",".path"),ResourcePermissions.addVar("SUBMIT_BUTTON","#permissionsOk"),ResourcePermissions.addVar("APPLAY_BUTTON","#permissionsApply"),ResourcePermissions.addVar("CANCEL_BUTTON","#permissionsCancel"),ResourcePermissions.addVar("BODY_PATTERN","div.body"),ResourcePermissions.addMethod("_processTemplate",function(){this._dom=$(this.TEMPLATE_DOM_ID).cloneNode(!0),this._dom.writeAttribute("id",null),this._dom.down(".body").writeAttribute("id","");var e=this._dom.select(this.PATH_PATTERN)[0];e.update(xssUtil.escape(this._resource.URIString.truncate(50))),e.writeAttribute("title",this._resource.URIString),this._viewByTabSet=this._dom.select(this.VIEW_BY_TAB_SET_PATTERN)[0],this._byUsersButton=this._dom.select(this.TAB_PATTERN)[0],this._byRolesButton=this._dom.select(this.TAB_PATTERN)[1],this._submitButton=this._dom.select(this.SUBMIT_BUTTON)[0],this._applyButton=this._dom.select(this.APPLAY_BUTTON)[0],this._cancelButton=this._dom.select(this.CANCEL_BUTTON)[0],this._byUsersButton.viewType="USER",this._byRolesButton.viewType="ROLE",this._submitButton.writeAttribute("id",null),this._applyButton.writeAttribute("id",null),this._cancelButton.writeAttribute("id",null);var t=this._dom.select("#"+this.ENTITY_LIST_ID)[0],i=this._dom.select("#"+this.LIST_CONTAINER_ID)[0],n=this._dom.select("#"+this.SEARCH_BOX_ID)[0];this._listId=t.writeAttribute("id",null).identify(),this._listContainerId=i.writeAttribute("id",null).identify(),this._searchBoxId=n.writeAttribute("id",null).identify()}),ResourcePermissions.addMethod("_updateValueAndLabel",function(e,t,i,n){var o=e.select(t)[0];return o.writeAttribute("id",null),o.setValue(i),e.select(n)[0].writeAttribute("for",o.identify()),o}),ResourcePermissions.addMethod("_updateContentAndLabel",function(e,t,i,n){var o=e.select(t)[0];return o.writeAttribute("id",null),o.update(i),e.select(n)[0].writeAttribute("for",o.identify()),o}),ResourcePermissions.addMethod("_buttonClickHandler",function(e){var t=e.element();if(!this._waiting){var i=matchAny(t,[layoutModule.BUTTON_PATTERN],!0),n=this._resource.URIString;[this._submitButton,this._applyButton].include(i)&&(this._byUsersButton.addClassName(layoutModule.BUTTON_CLASS),this._byRolesButton.addClassName(layoutModule.BUTTON_CLASS),repositorySearch.fire(repositorySearch.PermissionEvent.UPDATE,{uri:n,entities:this.getChangedEntities(),finishEdit:i==this._submitButton})),[this._byUsersButton,this._byRolesButton].include(i)&&(this.isChanged()?(this._showWarning(),e.stop()):(this._hideWarning(),this.viewBy=i.viewType,repositorySearch.fire(repositorySearch.PermissionEvent.BROWSE,{uri:n,type:this.viewBy}))),[this._cancelButton].include(i)&&this.hide()}}),ResourcePermissions.addMethod("_showWarning",function(){this._dom.select(this.BODY_PATTERN)[0].addClassName(layoutModule.ERROR_CLASS)}),ResourcePermissions.addMethod("_hideWarning",function(){this._dom.select(this.BODY_PATTERN)[0].removeClassName(layoutModule.ERROR_CLASS)}),ResourcePermissions.addMethod("_launcherClickHandler",function(e){var t=e.element();if(!this._waiting){var i=matchAny(t,[this.NAME_PATTERN],!0);if(i){var n=t.up("li");if(n&&n.listItem){var o=n.listItem.getValue();o.navigateToManager()}}}e.stop()}),ResourcePermissions.addMethod("_selectChangeHandler",function(e){var t=e.element();if(e.stop(),!this._waiting){if("select"==t.tagName.toLowerCase()){var i=t.options[t.selectedIndex].value,n=t.up("li");if(n&&n.listItem){var o=n.listItem.getValue();n.listItem.getValue().permission.newPermission=i!=o.permission.getResolvedPermission()?i:void 0,n.listItem.refresh()}}this.isChanged()?(this._byUsersButton.removeClassName(layoutModule.BUTTON_CLASS),this._byRolesButton.removeClassName(layoutModule.BUTTON_CLASS)):(this._byUsersButton.addClassName(layoutModule.BUTTON_CLASS),this._byRolesButton.addClassName(layoutModule.BUTTON_CLASS))}}),ResourcePermissions.addMethod("_selectMouseOverHandler",function(e){var t=matchAny(e.element(),[this.PERMISSIONS_PATTERN],!0);t&&e.stop()}),ResourcePermissions.addMethod("_initControls",function(){this.list=new dynamicList.List(this._listId,{listTemplateDomId:this.LIST_TEMPLATE_ID,itemTemplateDomId:this.ITEM_TEMPLATE_ID});var e=$(this._listId).up();isSupportsTouch()&&(this._touchController||(this._touchController=new TouchController($(this._listId),$(this._listId).up(),{forceLayout:!0}))),this._infiniteScroll=new InfiniteScroll({id:e.identify(),contentId:this._listId,scroll:this._touchController||void 0}),this._searchBox=new SearchBox({id:this._searchBoxId});var t=this._resource.URIString;this._infiniteScroll.onLoad=function(){this._waiting||repositorySearch.fire(repositorySearch.PermissionEvent.NEXT,{text:this._searchBox.getText(),uri:t,type:this.viewBy})}.bind(this),this._searchBox.onSearch=function(e){this._waiting||(this.isChanged()?this._showWarning():(this._hideWarning(),repositorySearch.fire(repositorySearch.PermissionEvent.SEARCH,{text:e,uri:t,type:this.viewBy})))}.bind(this)}),ResourcePermissions.addMethod("show",function(){this._isVisible||(document.body.insert(this._dom),this._initControls(),this.list.setItems([]),this.list.show(),orgModule.entityList._createEntityItem=this._createEntityItem,this.viewBy="ROLE",repositorySearch.fire(repositorySearch.PermissionEvent.BROWSE,{initialize:!0,uri:this._resource.URIString,type:this.viewBy,isFolder:this._resource.isFolder()}),this._isVisible=!0,document.getElementById(this._listId).parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.style.height="360px",dialogs.popup.show(this._dom),this._dom.observe("click",this._buttonClickHandler.bindAsEventListener(this)),isSupportsTouch()&&this._viewByTabSet.observe("touchstart",this._buttonClickHandler.bindAsEventListener(this)),this._dom.observe("click",this._launcherClickHandler.bindAsEventListener(this)),this._dom.observe("mouseover",this._selectMouseOverHandler.bindAsEventListener(this)))
}),ResourcePermissions.addMethod("showAndWait",function(){this._isVisible||(this._waiting=!0,this.show(),this._waitingItem=new dynamicList.ListItem({templateDomId:this.WAIT_ITEM_TEMPLATE_ID}),this.list.addItems([this._waitingItem]),this.list.refresh(),this.disable())}),ResourcePermissions.addMethod("stopWaiting",function(){this._waiting&&(this._waiting=!1,this.list.removeItems([this._waitingItem]),this.enable())}),ResourcePermissions.addMethod("hide",function(){dialogs.popup.hide(this._dom),this._dom.remove(),this._dom.stopObserving("click"),this._dom.stopObserving("change"),this._dom.stopObserving("mouseover"),isSupportsTouch()&&this._viewByTabSet.stopObserving("touchstart"),repositorySearch.dialogsPool.removePermissionsDialog(this._resource)}),ResourcePermissions.addMethod("enable",function(){this._searchBox.enable(),buttonManager.enable(this._byUsersButton),buttonManager.enable(this._byRolesButton)}),ResourcePermissions.addMethod("disable",function(){this._searchBox.disable(),buttonManager.disable(this._byUsersButton),buttonManager.disable(this._byRolesButton)}),ResourcePermissions.addMethod("_createItem",function(e){var t=new dynamicList.ListItem({label:e.getDisplayName(),value:e}),i=this.NAME_TOOLTIP_PATTERN,n=this.NAME_PATTERN,o=this.PERMISSIONS_PATTERN,s=this.TOOLTIP_TEMPLATE_DOM_ID,r=this;return t.processTemplate=function(e){var t=e.select(i)[0],a=e.select(n)[0],l=e.select(o)[0],c=this.getValue().permission,u=this.getValue().tenantId;if(c.newPermission?a.addClassName(layoutModule.EMPHASIS_CLASS):a.removeClassName(layoutModule.EMPHASIS_CLASS),a.update(xssUtil.escape(this.getValue().getDisplayName())),u&&u.length>0){new JSTooltip(t,{text:xssUtil.escape(u),templateId:s});var d=e.remove;e.remove=function(){tooltipModule.hideJSTooltip(t),tooltipModule.cleanUp(),d.apply(this)}}l.update("");for(var h=0,p=repositorySearch.model.getConfiguration().permissions,f=0;f<p.length;f++){var m=repositorySearch.getMessage(p[f].labelId),g=new Element("option",{value:p[f].name});l.insert(g.update(xssUtil.escape(c.inheritedPermission==p[f].name?m+" *":m))),c.newPermission?c.newPermission==p[f].name&&(h=f):c.getResolvedPermission()==p[f].name&&(h=f)}return l.observe("change",r._selectChangeHandler.bindAsEventListener(r)),l.selectedIndex=h,this.getValue().permission.isDisabled&&l.writeAttribute("disabled","disabled"),e},t}),ResourcePermissions.addMethod("addEntities",function(e){var t=e.collect(this._createItem.bind(this));this.list.addItems(t),this.list.refresh(),this._infiniteScroll.stopWaiting()}),ResourcePermissions.addMethod("setEntities",function(e){this.list.setItems([]),this._touchController&&this._touchController.reset(),this.addEntities(e)}),ResourcePermissions.addMethod("getChangedEntities",function(){var e=this.list.getItems(),t=[];return e.each(function(e){var i=e.getValue();i.permission&&i.permission.newPermission&&t.push(i)}),t}),ResourcePermissions.addMethod("updateEntities",function(e){var t=this.list.getItems();t.each(function(t){var i=t.getValue(),n=e.detect(function(e){return e.equals(i)});n&&(t.setValue(n),t.refresh())})}),ResourcePermissions.addMethod("isChanged",function(){return this.getChangedEntities().length>0}),repositorySearch.dialogsPool={POOL_NOT_FOUND_EXCEPTION:"PoolNotFoundException",DIALOD_EXIST_EXCEPTION:"DialodExistException",NULL_RESOURCE_EXCEPTION:"NullResourceException",_permissionsDialogPool:{},_propertiesDialogPool:{},_getPool:function(e){var t;if(e==ResourcePermissions&&(t=this._permissionsDialogPool),e==ResourceProperties&&(t=this._propertiesDialogPool),t)return t;throw{name:this.POOL_NOT_FOUND_EXCEPTION,message:"Can't find pool for "+e.toString()}},_createDialog:function(e,t,i){var n=t.URIString,o=this._getPool(e);if(null==t)throw{name:this.NULL_RESOURCE_EXCEPTION,message:"Resource is null."};if(o[n])throw{name:this.DIALOD_EXIST_EXCEPTION,message:e.toString()+" dilaog for resource '"+n+"' arleady exist."};return o[n]=new e(t,i),o[n]},_createOrGetDialog:function(e,t,i){try{return this._createDialog(e,t,i)}catch(n){if(n.name==this.DIALOD_EXIST_EXCEPTION)return this._getDialog(e,t);throw n}},_getDialog:function(e,t){var i=Object.isString(t)?t:t.URIString;return this._getPool(e)[i]},_getAllDialogs:function(e){var t=this._getPool(e),i=[];for(var n in t)t[n]&&i.push(t[n]);return i},_removeDialog:function(e,t){var i=Object.isString(t)?t:t.URIString;this._getPool(e)[i]=void 0},createPermissionsDialog:function(e){return this._createDialog(ResourcePermissions,e)},createPropertiesDialog:function(e){return this._createDialog(ResourceProperties,e)},createOrGetPermissionsDialog:function(e){return this._createOrGetDialog(ResourcePermissions,e)},createOrGetPropertiesDialog:function(e,t){return this._createOrGetDialog(ResourceProperties,e,t)},getAllPermissionsDialogs:function(){return this._getAllDialogs(ResourcePermissions)},getAllPropertiesDialogs:function(){return this._getAllDialogs(ResourceProperties)},getPermissionsDialog:function(e){return this._getDialog(ResourcePermissions,e)},getPropertiesDialog:function(e){return this._getDialog(ResourceProperties,e)},removePermissionsDialog:function(e){return this._removeDialog(ResourcePermissions,e)},removePropertiesDialog:function(e){return this._removeDialog(ResourceProperties,e)}};var ResourceProperties=function(e,t){this._resource=e,this._changedCallback=t.changedCallback,this._showMode=t.showMode,this._processTemplate()};ResourceProperties.addVar("TEMPLATE_DOM_ID","propertiesResource"),ResourceProperties.addMethod("_processTemplate",function(){this._dom=$(this.TEMPLATE_DOM_ID).cloneNode(!0),this._dom.writeAttribute("id",null),this._dom.addClassName("_activeResourcePropertiesDialog");var e=this._dom.select(".title")[0];e.update(e.innerHTML.strip()+": "+xssUtil.escape(this._resource.label).truncate(50)),this._label=this._updateValueAndLabel(this._dom,"input#displayName",this._resource.label,'label[for="displayName"]'),this._description=this._updateContentAndLabel(this._dom,"textarea#description",xssUtil.escape(this._resource.description),'label[for="description"]'),this._path=this._updateValueAndLabel(this._dom,"input#path",xssUtil.escape(this._resource.URIString),'label[for="path"]'),this._showMode&&(this._dom.addClassName("showMode"),this._label.writeAttribute("readonly","readonly"),this._description.writeAttribute("readonly","readonly")),this._updateValueAndLabel(this._dom,"div#resourceID",xssUtil.escape(this._resource.name),'label[for="resourceID"]'),this._updateValueAndLabel(this._dom,"input#type",xssUtil.escape(this._resource.type),'label[for="type"]'),this._updateValueAndLabel(this._dom,"input#createdDate",xssUtil.escape(this._resource.date),'label[for="createdDate"]'),this._updateValueAndLabel(this._dom,"input#userAccess",xssUtil.escape(this._resource.permissionsToString()),'label[for="userAccess"]'),this._submitButton=this._dom.select("button.submit")[0],this._cancelButton=this._dom.select("button.cancel")[0],this._okButton=this._dom.select("button.ok")[0]}),ResourceProperties.addMethod("_updateValueAndLabel",function(e,t,i,n){var o=e.select(t)[0];return o.writeAttribute("id",null),o.writeAttribute("value",i),o.setValue?o.setValue(i):o.update(i),e.select(n)[0].writeAttribute("for",o.identify()),o}),ResourceProperties.addMethod("_updateContentAndLabel",function(e,t,i,n){var o=e.select(t)[0];return o.writeAttribute("id",null),o.update(i),e.select(n)[0].writeAttribute("for",o.identify()),o}),ResourceProperties.addMethod("_buttonClickHandler",function(e){var t=matchAny(e.element(),[layoutModule.BUTTON_PATTERN],!0);if(t==this._submitButton){if(this._showMode)this._hide();else if(this._isDataValid()){if(this._changedCallback){var i=this._resource.clone();i.label=this._label.getValue(),i.description=this._description.getValue(),this._changedCallback(i)}this._hide()}}else(t==this._cancelButton||t==this._okButton)&&this._hide()}),ResourceProperties.addMethod("_isDataValid",function(){return ValidationModule.validate([{validator:ResourcesUtils.labelValidator,element:this._label},{validator:ResourcesUtils.descriptionValidator,element:this._description}])}),ResourceProperties.addMethod("show",function(e){document.body.insert(this._dom),e&&e.cascade?dialogs.popup.show(this._dom,!1,e):dialogs.popup.show(this._dom),this._dom.observe("click",this._buttonClickHandler.bindAsEventListener(this))}),ResourceProperties.addMethod("_hide",function(){dialogs.popup.hide(this._dom),this._dom.remove(),this._dom.stopObserving("click"),repositorySearch.dialogsPool.removePropertiesDialog(this._resource)}),ResourceProperties.addMethod("isChanged",function(){return this._resource.label!=this._label.getValue()||this._resource.description!=this._description.getValue()}),repositorySearch.showCreateFolderConfirm=function(e){var t,i=$("addFolder"),n=$("addFolderInputName"),o=$("addFolderInputDescription"),s=$("addFolderBtnAdd"),r=$("addFolderBtnCancel"),a=function(e){t=e,dialogs.popup.show(i),n.setValue(repositorySearch.messages["action.create.folder.name"]),accessibilityModule.disable(),setTimeout(function(){n.focus(),n.select()},500)},l=function(e){n.clear(),o.clear(),ValidationModule.hideError(n),ValidationModule.hideError(o),dialogs.popup.hide(i),accessibilityModule.enable(),e.stop()},c=function(){var e=ValidationModule.validate([{validator:ResourcesUtils.labelValidator,element:n},{validator:ResourcesUtils.descriptionValidator,element:o}]);return e},u=function(e){"disabled"!==s.readAttribute("disabled")&&(new repositorySearch.ServerAction.createFolderAction(repositorySearch.FolderAction.CREATE,{toFolder:t,label:n.getValue(),desc:o.getValue()}).invokeAction(),l(e))};s.observe("click",function(e){c()&&u(e),e.stop()}),r.observe("click",l),repositorySearch.showCreateFolderConfirm=a,a(e)},repositorySearch.DeleteConfirmation={ID_DELETE_DIALOG_CONTAINER:"standardConfirm",ID_DELETE_DIALOG_OK_BUTTON:"deleteResourceOK",ID_DELETE_DIALOG_CANCEL_BUTTON:"deleteResourceCancel"},repositorySearch.showDeleteFolderConfirm=function(e){var t=repositorySearch.getMessage("SEARCH_DELETE_FOLDER_CONFIRM_MSG",{folderUri:e.URI}),i=new repositorySearch.ServerAction.createFolderAction(repositorySearch.FolderAction.DELETE,{folder:e});repositorySearch._showDeleteDialog(t,i)},repositorySearch.showDeleteResourceConfirm=function(e){var t=repositorySearch.getMessage("SEARCH_DELETE_CONFIRM_MSG",{resourceUri:e.URIString}),i=new repositorySearch.ServerAction.createResourceAction(repositorySearch.ResourceAction.DELETE,{resources:[e]});repositorySearch._showDeleteDialog(t,i)},repositorySearch.showBulkDeleteResourcesConfirm=function(e){var t=repositorySearch.getMessage("SEARCH_BULK_DELETE_CONFIRM_MSG",{count:e.length}),i=new repositorySearch.ServerAction.createResourceAction(repositorySearch.ResourceAction.DELETE,{resources:e});repositorySearch._showDeleteDialog(t,i)},repositorySearch._showDeleteDialog=function(e,t){var i=$(repositorySearch.DeleteConfirmation.ID_DELETE_DIALOG_CONTAINER);i.down(".body").update(e),dialogs.popupConfirm.show(i,!0,{okButtonSelector:"#"+repositorySearch.DeleteConfirmation.ID_DELETE_DIALOG_OK_BUTTON,cancelButtonSelector:"#"+repositorySearch.DeleteConfirmation.ID_DELETE_DIALOG_CANCEL_BUTTON}),jQuery("#"+repositorySearch.DeleteConfirmation.ID_DELETE_DIALOG_OK_BUTTON).on("click",function(){t.invokeAction()})},repositorySearch.showResourceProperties=function(e,t){var i=repositorySearch.dialogsPool.createOrGetPropertiesDialog(e,{showMode:!0});i.show(t)},repositorySearch.editResourceProperties=function(e,t){var i=repositorySearch.dialogsPool.createOrGetPropertiesDialog(e,{changedCallback:function(e){var t=new repositorySearch.ServerAction.createResourceAction(repositorySearch.ResourceAction.UPDATE,{resource:e});t.invokeAction()}});i.show(t)},repositorySearch.showFolderProperties=function(e){var t=repositorySearch.dialogsPool.createOrGetPropertiesDialog(e,{showMode:!0});t.show()},repositorySearch.editFolderProperties=function(e){var t=repositorySearch.dialogsPool.createOrGetPropertiesDialog(e,{changedCallback:function(e){var t=new repositorySearch.ServerAction.createFolderAction(repositorySearch.FolderAction.UPDATE,{folder:e});t.invokeAction()}});t.show()},repositorySearch.editResourcePermissions=function(e){var t=repositorySearch.dialogsPool.createOrGetPermissionsDialog(e);t.showAndWait()},repositorySearch.editFolderPermissions=function(e){var t=repositorySearch.dialogsPool.createOrGetPermissionsDialog(e);t.showAndWait()},repositorySearch.showUploadThemeConfirm=function(e,t){var i,n,o=$("uploadTheme"),s=$("themeName"),r=$("themeZip"),a=$("uploadThemeBtnUpload"),l=$("uploadThemeBtnCancel"),c=function(e,t){i=e,n=t,dialogs.popup.show(o),s.removeAttribute("disabled"),s.setValue(repositorySearch.messages.RM_NEW_THEME_NAME),n&&(s.writeAttribute("disabled"),s.setValue(i.name)),s.select(),s.focus()},u=function(e){s.clear(),r.clear(),dialogs.popup.hide(o),e.stop()},d=function(){var e=ValidationModule.validate([{validator:ResourcesUtils.labelValidator,element:s},{validator:ResourcesUtils.zipFileTypeValidator,element:r}]);return e},h=function(e){var t={};if(t.themeName=s.getValue(),t._eventId="uploadTheme",t._flowExecutionKey=repositorySearch.flowExecutionKey,t.folderUri=i.URI,t.folderUri=i.URI,n){var o=i.URI;t.folderUri=o.slice(0,o.lastIndexOf("/")),t.reuploadAction=n,t._eventId="reuploadTheme"}var a=function(e){var o;if(r=$("themeZip"),e)try{if(o=e.evalJSON(),o&&"OK"==o.status){if(o.data.themeExist){var s=confirm(repositorySearch.messages.SEARCH_OVERWRITE_THEME_CONFIRM_MSG);if(s){var a=new repositorySearch.ServerAction.createFolderAction(repositorySearch.ThemeAction.REUPLOAD,t);a.invokeAction()}}else if(o.data.isActiveTheme){var l=o.data.themeUri,a=new repositorySearch.ServerAction.createFolderAction(repositorySearch.ThemeAction.SETTHEME,{folderUri:l});a.invokeAction()}}else alert(o&&"ERROR"==o.status?o.data:repositorySearch.messages.RM_UPLOAD_THEME_ERROR)}catch(c){alert(c)}n&&o.data.isActiveTheme||repositorySearch.foldersPanel.refreshFolder(i)};fileSender.upload(r,"searchFlow",t,a),u(e)};a.observe("click",function(e){d()&&h(e),e.stop()}),l.observe("click",u),repositorySearch.showUploadThemeConfirm=c,c(e,t)};var GenerateResource=function(e,t){this._resource=e,this._callback=t.okCallback,this._processTemplate(t);var i=this;repositorySearch.observe("resource:generated",function(){i._hide()})};GenerateResource.addVar("TEMPLATE_DOM_ID","generateResource"),GenerateResource.addVar("TEMPLATE_TITLE_TEXT",!1),GenerateResource.addVar("LABEL_MAX_LEN",94),GenerateResource.addVar("DESC_MAX_LEN",200),GenerateResource.addMethod("_processTemplate",function(e){this._dom=$(this.TEMPLATE_DOM_ID);var t=this._dom.select(".title")[0];this.TEMPLATE_TITLE_TEXT||(GenerateResource.prototype.TEMPLATE_TITLE_TEXT=t.innerHTML.strip()),t.update(this.TEMPLATE_TITLE_TEXT+" "+xssUtil.escape(this._resource.label.truncate(50)));var i=e.useDefaultLabel?this._resource.label+" "+repositorySearch.messages["dialog.generateResource.defaultNameSuffix"]:"";this._nameInput=this._dom.select("#generateResourceInputName")[0],this._nameInput.setValue(i),this._descriptionInput=this._dom.select("#generateResourceInputDescription")[0],this._descriptionInput.setValue(this._resource.description),this._tree=dynamicTree.createRepositoryTree("generateResourceFoldersTree",{providerId:"repositorySaveReportProvider",rootUri:repositorySearch.model.getRootFolderUri(),organizationId:localContext.rsInitOptions.organizationId,publicFolderUri:localContext.rsInitOptions.publicFolderUri,urlGetNode:"flow.html?_flowId=searchFlow&method=getNode",urlGetChildren:"flow.html?_flowId=searchFlow&method=getChildren"}),this._cancelButton=this._dom.select("#generateResourceBtnCancel")[0],this._okButton=this._dom.select("#generateResourceBtnCreate")[0],this._okAndRunButton=this._dom.select("#generateResourceBtnCreateAndRun")[0]}),GenerateResource.addMethod("_buttonClickHandler",function(e){var t=matchAny(e.element(),[layoutModule.BUTTON_PATTERN],!0);if(t==this._okButton||t==this._okAndRunButton){var i=this._nameInput.getValue(),n=this._descriptionInput.getValue();if(i.length<=this.LABEL_MAX_LEN&&n.length<=this.DESC_MAX_LEN){var o=this._tree.getSelectedNode();o||alert(repositorySearch.messages.ADH_162_NULL_SAVE_REPORT_FOLDER_MESSAGE),o.param.extra&&!o.param.extra.isWritable&&this.showAccessDenied(o.param.uri),this._callback&&this._callback({label:i,description:n,location:o.param.uri,overwrite:!1,run:t==this._okAndRunButton})}else{var s,r;i.length>this.LABEL_MAX_LEN?(s=repositorySearch.messages.ADH_1001_ADHOC_SAVE_REPORT_LABEL_ERROR,r=this.LABEL_MAX_LEN):n.length>this.DESC_MAX_LEN&&(s=repositorySearch.messages.ADH_1001_ADHOC_SAVE_REPORT_DESCRIPTION_ERROR,r=this.DESC_MAX_LEN),s&&alert(s.replace("{0}",r))}}t==this._cancelButton&&this._hide()}),GenerateResource.addMethod("_focusName",function(){this._nameInput.select(),this._nameInput.focus()}),GenerateResource.addMethod("_enableSave",function(e){this._okButton.disabled=!e,this._okAndRunButton.disabled=!e}),GenerateResource.addMethod("show",function(){var e=this;this._tree.showTreePrefetchNodes("/",function(){e._focusName()}),this._dom.observe("click",this._buttonClickHandler.bindAsEventListener(this)),dialogs.popup.show(this._dom),setTimeout(function(){e._focusName()},500)}),GenerateResource.addMethod("showAccessDenied",function(e){var t=repositorySearch.messages.ADH_1001_SERVER_REPOSITORY_ACCESS_DENIED;alert(t.replace("{0}",e))}),GenerateResource.addMethod("_hide",function(){dialogs.popup.hide(this._dom),this._dom.stopObserving("click")}),define("repository.search.components",["repository.search.main","prototype","underscore","utils.common","dynamicTree.utils"],function(e){return function(){var t;return t||e.GenerateResource}}(this)),repositorySearch.Action=function(e){Object.isFunction(e)&&(this.invokeAction=e)},repositorySearch.Action.DEFAULT="default-action",repositorySearch.Action.addMethod("invokeAction",doNothing),repositorySearch.folderActionFactory={CreateFolder:function(e){return new repositorySearch.Action(function(){repositorySearch.showCreateFolderConfirm(e)})},CopyFolder:function(e){return new repositorySearch.Action(function(){repositorySearch.CopyMoveController.copy(e)})},MoveFolder:function(e){return new repositorySearch.Action(function(){repositorySearch.CopyMoveController.move(e)})},PasteFolder:function(e){return new repositorySearch.Action(function(){{var t,i=e?e:repositorySearch.model.getContextFolder();repositorySearch.CopyMoveController.object}if(repositorySearch.CopyMoveController.isCopyFolder())t=repositorySearch.FolderAction.COPY;else{if(!repositorySearch.CopyMoveController.isMoveFolder())return;t=repositorySearch.FolderAction.MOVE}var n=new repositorySearch.ServerAction.createFolderAction(t,{toFolder:i,folder:repositorySearch.CopyMoveController.object});n.invokeAction()})},PasteResources:function(e){return new repositorySearch.Action(function(){var t,i=e?e:repositorySearch.model.getContextFolder(),n=repositorySearch.CopyMoveController.object,o=repositorySearch.CopyMoveController.isBulkAction()?[].concat(n):[n];if(repositorySearch.CopyMoveController.isCopyResource())t=repositorySearch.ResourceAction.COPY;else{if(!repositorySearch.CopyMoveController.isMoveResource())return;t=repositorySearch.ResourceAction.MOVE}for(var s=0;s<o.length;s++)if(o[s].parentResource){for(var r=o[s].parentResource.URI,a=!1,l=0;l<o.length&&!a;l++)a|=o[l].URI==r;a||o.push(o[s].parentResource)}var c=new repositorySearch.ServerAction.createResourceAction(t,{resources:o,folder:i});c.invokeAction()})},DeleteFolder:function(e){return new repositorySearch.Action(function(){actionModel.hideMenu(),repositorySearch.showDeleteFolderConfirm(e)})},ShowFolderProperties:function(e){return new repositorySearch.Action(function(){repositorySearch.showFolderProperties(e)})},EditFolderProperties:function(e){return new repositorySearch.Action(function(){repositorySearch.editFolderProperties(e)})},AssignPermissions:function(e){return new repositorySearch.Action(function(){repositorySearch.editFolderPermissions(e)})},SetActiveThemeFolder:function(e){return new repositorySearch.Action(function(){var t=new repositorySearch.ServerAction.createFolderAction(repositorySearch.ThemeAction.SETTHEME,{folder:e});t.invokeAction()})},DownloadTheme:function(e){return new repositorySearch.Action(function(){var t=new repositorySearch.ServerAction.createFolderAction(repositorySearch.ThemeAction.DOWNLOAD_THEME,{folder:e});t.initDownload()})},UploadTheme:function(e){return new repositorySearch.Action(function(){repositorySearch.showUploadThemeConfirm(e,!1)})},ReuploadTheme:function(e){return new repositorySearch.Action(function(){repositorySearch.showUploadThemeConfirm(e,!0)})},Export:function(e){return new repositorySearch.Action(function(){JRS.Export&&JRS.Export.App.showDialogFor(e)})}},repositorySearch.resourceActionFactory={Copy:function(e){return new repositorySearch.Action(function(){repositorySearch.CopyMoveController.copy(e)})},Move:function(e){return new repositorySearch.Action(function(){repositorySearch.CopyMoveController.move(e)})},Delete:function(e){return new repositorySearch.Action(function(){actionModel.hideMenu(),repositorySearch.showDeleteResourceConfirm(e)})},Export:function(e){return new repositorySearch.Action(function(){JRS.Export&&JRS.Export.App.showDialogFor(e)})},ShowProperties:function(e,t){return new repositorySearch.Action(function(){repositorySearch.showResourceProperties(e,t)})},EditProperties:function(e,t){return new repositorySearch.Action(function(){repositorySearch.editResourceProperties(e,t)})},AssignPermissionsToResourceAction:function(e){return new repositorySearch.Action(function(){repositorySearch.editResourcePermissions(e)})},GenerateResourceAction:function(e){return new repositorySearch.Action(function(){JRS.CreateReport.selectGenerator(e.URIString)})},ConvertResourceAction:function(e){return new repositorySearch.Action(function(){var t=new repositorySearch.ServerAction.createConvertAction(repositorySearch.ResourceAction.CONVERT,{reportUri:e.URIString});t.invokeAction()})}},repositorySearch.bulkActionFactory={Run:function(e){return new repositorySearch.Action(function(){e.each(function(e,t){var i=repositorySearch.RedirectAction.createRunResourceAction(e,0!==t);i.invokeAction()})})},Edit:function(e){return new repositorySearch.Action(function(){e.each(function(e,t){var i=repositorySearch.RedirectAction.createEditResourceAction(e,0!==t);i.invokeAction()})})},Open:function(e){return new repositorySearch.Action(function(){e.each(function(t){var i=repositorySearch.RedirectAction.createOpenResourceAction(t,e.length>1);i.invokeAction()})})},Copy:function(e){return new repositorySearch.Action(function(){repositorySearch.CopyMoveController.copy(e)})},Move:function(e){return new repositorySearch.Action(function(){repositorySearch.CopyMoveController.move(e)})},Delete:function(e){return new repositorySearch.Action(function(){actionModel.hideMenu(),1==e.length?repositorySearch.showDeleteResourceConfirm(e[0]):repositorySearch.showBulkDeleteResourcesConfirm(e)})},ShowProperties:function(e){return new repositorySearch.Action(function(){e.each(function(t,i){invokeResourceAction("ShowProperties",t,{cascade:!0,position:i,number:e.length})})})},EditProperties:function(e){return new repositorySearch.Action(function(){e.each(function(t,i){invokeResourceAction("EditProperties",t,{cascade:!0,position:i,number:e.length})})})},Export:function(e){return new repositorySearch.Action(function(){JRS.Export&&JRS.Export.App.showDialogFor(e)})}},repositorySearch.ServerAction=function(e,t){this.actionURL="flow.html?_flowExecutionKey="+repositorySearch.flowExecutionKey+"&_eventId="+e,this.data=Object.toQueryString(t.data)},repositorySearch.ServerAction.addMethod("invokeAction",function(){ajaxTargettedUpdate(this.actionURL,{postData:this.data,callback:function(e){"OK"==e.status?this.onSuccess(e.data):this.onError(e.data)}.bind(this),errorHandler:this._serverErrorHandler,mode:AjaxRequester.prototype.EVAL_JSON})}),repositorySearch.ServerAction.addMethod("initDownload",function(){var e=this.actionURL+"&"+this.data;ajaxIframeDownload(e,{onload:function(){var e=$("ajax-download-iframe").contentDocument.body.innerHTML;try{var t=e.evalJSON();alert(t.data)}catch(i){}}})}),repositorySearch.ServerAction.addMethod("_serverErrorHandler",function(e){return baseErrorHandler(e)}),repositorySearch.ServerAction.addMethod("onSuccess",doNothing),repositorySearch.ServerAction.addMethod("onError",doNothing),repositorySearch.ServerAction.createSearchAction=function(e,t){t.mode=repositorySearch.mode;var i=new repositorySearch.ServerAction(e,{data:t});return i.onSuccess=function(i){e==repositorySearch.SearchAction.NEXT?repositorySearch.fire(repositorySearch.Event.RESULT_NEXT,i):e==repositorySearch.SearchAction.GET_RESOURCE_CHILDREN?repositorySearch.fire(repositorySearch.Event.CHILDREN_LOADED,{inputData:t,responseData:i}):(repositorySearch.fire(repositorySearch.Event.RESULT_CHANGED,i),repositorySearch.fire(repositorySearch.Event.STATE_CHANGED,i),repositorySearch.mode==repositorySearch.Mode.SEARCH&&repositorySearch.fire(repositorySearch.Event.FILTER_PATH_CHANGED,i))},i.onError=function(e){repositorySearch.fire(repositorySearch.Event.RESULT_ERROR,e)},i},repositorySearch.ServerAction.createFolderAction=function(e,t){var i,n,o;repositorySearch.FolderAction.DELETE==e?(i={sourceFolderUri:t.folder.URI},n=repositorySearch.FolderEvent.DELETED,o=repositorySearch.FolderEvent.DELETE_ERROR):repositorySearch.FolderAction.CREATE==e?(i={destFolderUri:t.toFolder.URI,folder:Object.toJSON({URI:"",label:t.label,desc:t.desc})},n=repositorySearch.FolderEvent.CREATED,o=repositorySearch.FolderEvent.CREATE_ERROR):repositorySearch.FolderAction.COPY==e?(i={destFolderUri:t.toFolder.URI,sourceFolderUri:t.folder.URI},n=repositorySearch.FolderEvent.COPIED,o=repositorySearch.FolderEvent.COPY_ERROR):repositorySearch.FolderAction.MOVE==e?(i={destFolderUri:t.toFolder.URI,sourceFolderUri:t.folder.URI},n=repositorySearch.FolderEvent.MOVED,o=repositorySearch.FolderEvent.MOVE_ERROR):repositorySearch.FolderAction.UPDATE==e?(i={folder:Object.toJSON({URI:t.folder.URI,label:t.folder.label,desc:t.folder.description})},n=repositorySearch.FolderEvent.UPDATED,o=repositorySearch.FolderEvent.UPDATE_ERROR):repositorySearch.ThemeAction.SETTHEME==e?(t.folder?i={folderUri:t.folder.URI}:t.folderUri&&(i={folderUri:t.folderUri}),n=repositorySearch.ThemeEvent.UPDATED):repositorySearch.ThemeAction.DOWNLOAD_THEME==e?(i={folderUri:t.folder.URI},o=repositorySearch.ThemeEvent.THEME_ERROR):repositorySearch.ThemeAction.REUPLOAD==e&&(i={themeName:t.themeName,folderUri:t.folderUri},n=repositorySearch.ThemeEvent.REUPLOADED,o=repositorySearch.ThemeEvent.THEME_ERROR),i&&n&&o||new Error("Unsupported folder action.");var s=new repositorySearch.ServerAction(e,{data:i});return s.onSuccess=function(e){repositorySearch.fire(n,{responseData:e,inputData:t})},s.onError=function(e){repositorySearch.fire(o,{responseData:e,inputData:t})},s},repositorySearch.ServerAction.createResourceAction=function(e,t){function i(i,n){dialogs.dependentResources.show(i,{dependenciesBtnOk:function(){var i=new repositorySearch.ServerAction.createResourceAction(e,{resources:n,folder:t.folder});i.invokeAction()}},{buttons:["ok","cancel"],dialogTitle:repositorySearch.getMessage("dialog.resources.exist.title"),topMessage:repositorySearch.getMessage("dialog.resources.exist"),bottomMessage:repositorySearch.getMessage("dialog.resources.exist.confirm.skip")})}function n(n){var o;if(repositorySearch.ResourceAction.COPY!=e&&repositorySearch.ResourceAction.MOVE!=e)return n;try{o=jQuery.parseJSON(n)}catch(s){return n}if(!o||!o.existingLabels)return n;var r=_.filter(t.resources,function(e){return-1==o.existingLabels.indexOf(e.label)});return 0===r.length?repositorySearch.getMessage(1==o.existingLabels.length?"dialog.resources.one.exists":"dialog.resources.all.exist")+" "+t.folder.URIString:(i(o.existingLabels,r),null)}var o,s,r;if(repositorySearch.ResourceAction.DELETE==e){var a=ResourcesUtils.getResourceUriAndTypeList(t.resources);o={selectedResources:Object.toJSON(a)},s=repositorySearch.ResourceEvent.DELETED,r=repositorySearch.ResourceEvent.DELETE_ERROR}else if(repositorySearch.ResourceAction.COPY==e){var l=ResourcesUtils.getResourceUris(t.resources);o={selectedResources:Object.toJSON(l),destFolderUri:t.folder.URI},s=repositorySearch.ResourceEvent.COPIED,r=repositorySearch.ResourceEvent.COPY_ERROR}else if(repositorySearch.ResourceAction.MOVE==e){var c=ResourcesUtils.getResourceUris(t.resources);o={selectedResources:Object.toJSON(c),destFolderUri:t.folder.URI},s=repositorySearch.ResourceEvent.MOVED,r=repositorySearch.ResourceEvent.MOVE_ERROR}else repositorySearch.ResourceAction.UPDATE==e&&(o={selectedResource:Object.toJSON(t.resource)},s=repositorySearch.ResourceEvent.UPDATED,r=repositorySearch.ResourceEvent.UPDATE_ERROR);o&&s&&r||new Error("Unsupported resource action.");var u=new repositorySearch.ServerAction(e,{data:o});return u.onSuccess=function(i){repositorySearch.ResourceAction.MOVE==e&&repositorySearch.CopyMoveController.cancel(),repositorySearch.fire(s,{responseData:i,inputData:t})},u.onError=function(e){var i=n(e);i&&repositorySearch.fire(r,{responseData:i,inputData:t})},u},repositorySearch.ServerAction.createPermissionAction=function(e,t){var i=new repositorySearch.ServerAction(e,{data:t}),n=e==repositorySearch.PermissionAction.UPDATE?repositorySearch.PermissionEvent.UPDATED:repositorySearch.PermissionEvent.LOADED;return i.onSuccess=function(i){repositorySearch.fire(n,{responseData:i,inputData:t,doSet:e!=repositorySearch.PermissionAction.NEXT})},i.onError=function(e){repositorySearch.fire(repositorySearch.PermissionEvent.ERROR,e)},i},repositorySearch.ServerAction.createGenerateAction=function(e,t){var i=new repositorySearch.ServerAction(e,{data:{data:Object.toJSON(t)}});return i.actionURL="reportGenerator.html?action="+e,i.onSuccess=function(e){repositorySearch.fire(repositorySearch.ResourceEvent.GENERATED,{responseData:e,inputData:t})},i.onError=function(e){repositorySearch.fire(repositorySearch.ResourceEvent.GENERATE_ERROR,{responseData:e,inputData:t})},i},repositorySearch.ServerAction.createConvertAction=function(e,t){var i=new repositorySearch.ServerAction(e,{data:t});return i.actionURL="dataViewConverter.html?action="+e,i.onSuccess=function(e){repositorySearch.fire(repositorySearch.ResourceEvent.CONVERTED,{responseData:e,inputData:t})},i.onError=function(e){repositorySearch.fire(repositorySearch.ResourceEvent.CONVERT_ERROR,{responseData:e,inputData:t})},i},repositorySearch.RedirectAction=function(e,t){this.type=e,this.flowId=t.flowId,this.url=t.url?t.url:this.flowId?this.FLOW_URL:void 0,this.paramsMap=t.paramsMap||{},this.hash=t.hash?"#"+t.hash:"",this.encode=t.encode,this.type!==repositorySearch.RedirectType.FLOW_REDIRECT&&this.url===this.FLOW_URL&&(this.paramsMap._flowId=this.flowId)},repositorySearch.RedirectAction.addMethod("FLOW_URL","flow.html"),repositorySearch.RedirectAction.addMethod("_serializeParams",function(e,t){if(e){var i="";for(var n in e)Object.isUndefined(n)||(i+="&"+n+"="+(t?encodeURIComponent(e[n]):e[n]));return i&&i.length>0?i.substring(1):""}return""}),repositorySearch.RedirectAction.addMethod("invokeAction",function(){if(this.type===repositorySearch.RedirectType.FLOW_REDIRECT){var e=$("redirectForm"),t=$("flowParams");t.setValue(this.flowId+"?"+this._serializeParams(this.paramsMap,this.encode));var i=new repositorySearch.ServerAction("isServerAvailable",{data:{}});i.onSuccess=function(t){"Yes"==t.strip()?(++ajax.ajaxRequestCount,dialogs.popup.show(ajax.LOADING_ID,!0),e.submit(),repositorySearch.fire(repositorySearch.Event.FLOW_REDIRECT_RUNNING,t)):repositorySearch.fire(repositorySearch.Event.REDIRECT_ERROR,t)},i.onError=function(e){repositorySearch.fire(repositorySearch.Event.REDIRECT_ERROR,e)},i.invokeAction()}else if(this.type===repositorySearch.RedirectType.LOCATION_REDIRECT){var n=this.url+(jQuery.isEmptyObject(this.paramsMap)?"":"?"+this._serializeParams(this.paramsMap,this.encode))+this.hash;redirectToUrl(n)}else if(this.type===repositorySearch.RedirectType.WINDOW_REDIRECT){var o=window.open(),s=this._serializeParams(this.paramsMap,this.encode);
o.opener=null,o.document.location=this.url+(s?"?"+s:"")+this.hash}}),repositorySearch.runActionFactory={ReportUnit:function(e,t){var i=t?repositorySearch.RedirectType.WINDOW_REDIRECT:repositorySearch.RedirectType.FLOW_REDIRECT;return new repositorySearch.RedirectAction(i,{url:"flow.html",flowId:"viewReportFlow",paramsMap:{_flowId:"viewReportFlow",reportUnit:t?encodeURIComponent(e.URIString):e.URIString,standAlone:!0,ParentFolderUri:e.parentFolder}})},AdhocReportUnit:function(e,t){var i=t?repositorySearch.RedirectType.WINDOW_REDIRECT:repositorySearch.RedirectType.FLOW_REDIRECT;return new repositorySearch.RedirectAction(i,{url:"flow.html",flowId:"viewAdhocReportFlow",paramsMap:{reportUnit:t?encodeURIComponent(e.URIString):e.URIString,standAlone:!0,ParentFolderUri:e.parentFolder}})},OlapUnit:function(e,t){var i=t?repositorySearch.RedirectType.WINDOW_REDIRECT:repositorySearch.RedirectType.LOCATION_REDIRECT;return new repositorySearch.RedirectAction(i,{url:"olap/viewOlap.html",paramsMap:{name:t?encodeURIComponent(e.URIString):e.URIString,"new":!0,parentFlow:"searchFlow",ParentFolderUri:e.parentFolder}})},DashboardResource:function(e,t){var i=t?repositorySearch.RedirectType.WINDOW_REDIRECT:repositorySearch.RedirectType.FLOW_REDIRECT;return new repositorySearch.RedirectAction(i,{url:"flow.html",flowId:"dashboardRuntimeFlow",paramsMap:{dashboardResource:t?encodeURIComponent(e.URIString):e.URIString}})},DashboardModelResource:function(e,t){var i=t?repositorySearch.RedirectType.WINDOW_REDIRECT:repositorySearch.RedirectType.LOCATION_REDIRECT;return new repositorySearch.RedirectAction(i,{url:"dashboard/viewer.html#"+encodeURIComponent(e.URIString)})},ReportOptions:function(e,t){var i,n={reportOptionsURI:t?encodeURIComponent(e.URIString):e.URIString,standAlone:!0,ParentFolderUri:e.parentFolder},o=e.parentResource;o&&o.typeEquals(repositorySearch.ResourceType.ADHOC_REPORT_UNIT)?(i="viewAdhocReportFlow",n.reportUnit=t?encodeURIComponent(o.URIString):o.URIString):i="viewReportFlow";var s=t?repositorySearch.RedirectType.WINDOW_REDIRECT:repositorySearch.RedirectType.FLOW_REDIRECT;return new repositorySearch.RedirectAction(s,{url:"flow.html",flowId:i,paramsMap:n})}},repositorySearch.RedirectAction.createRunResourceAction=function(e,t){e||(e=e?e:repositorySearch.model.getSelectedResources()[0]);var i=repositorySearch.runActionFactory[e.typeSuffix()];return i?i(e,t):new repositorySearch.Action(function(){alert("Run action for resource type '"+e.resourceType+"' is not implemented!")})},repositorySearch.RedirectAction.createRunResourceInNewTabAction=function(e){return repositorySearch.RedirectAction.createRunResourceAction(e,!0)},repositorySearch.editActionFactory={"default-action":function(e,t){return ResourcesUtils.isCustomDataSource(e)?repositorySearch.editActionFactory.JdbcReportDataSource(e,t):new repositorySearch.Action(function(){alert("Edit action for resource type '"+e.resourceType+"' is not implemented!")})},ReportUnit:function(e,t){return new repositorySearch.RedirectAction(t,{flowId:"reportUnitFlow",paramsMap:{selectedResource:e.URIString,ParentFolderUri:e.parentFolder}})},AdhocReportUnit:function(e,t){return repositorySearch.editActionFactory.ReportUnit(e,t)},DataDefinerUnit:function(e,t){return new repositorySearch.RedirectAction(t,{flowId:"queryBuilderFlow",paramsMap:{uri:e.URIString,ParentFolderUri:e.parentFolder}})},OlapUnit:function(e,t){return new repositorySearch.RedirectAction(t,{flowId:"olapUnitFlow",paramsMap:{resource:e.URIString,isEdit:"edit",ParentFolderUri:e.parentFolder}})},DashboardResource:function(e,t){return new repositorySearch.RedirectAction(t,{flowId:"dashboardRuntimeFlow",paramsMap:{dashboardResource:e.URIString}})},ReportOptions:function(e,t){return new repositorySearch.RedirectAction(t,{flowId:"reportOptionsEditFlow",paramsMap:{reportOptionsURI:e.URIString,ParentFolderUri:e.parentFolder}})},JdbcReportDataSource:function(e,t){return new repositorySearch.RedirectAction(t,{flowId:"addDataSourceFlow",paramsMap:{resource:e.URIString,ParentFolderUri:e.parentFolder}})},JndiJdbcReportDataSource:function(e,t){return repositorySearch.editActionFactory.JdbcReportDataSource(e,t)},CustomReportDataSource:function(e,t){return repositorySearch.editActionFactory.JdbcReportDataSource(e,t)},BeanReportDataSource:function(e,t){return repositorySearch.editActionFactory.JdbcReportDataSource(e,t)},VirtualReportDataSource:function(e,t){return repositorySearch.editActionFactory.JdbcReportDataSource(e,t)},HiveDataSourceService:function(e,t){return repositorySearch.editActionFactory.JdbcReportDataSource(e,t)},CassandraDataSourceService:function(e,t){return repositorySearch.editActionFactory.JdbcReportDataSource(e,t)},DiagnosticCustomDataSourceService:function(e,t){return repositorySearch.editActionFactory.JdbcReportDataSource(e,t)},MongoDbDataSourceService:function(e,t){return repositorySearch.editActionFactory.JdbcReportDataSource(e,t)},AwsReportDataSource:function(e,t){return repositorySearch.editActionFactory.JdbcReportDataSource(e,t)},Query:function(e,t){return new repositorySearch.RedirectAction(t,{flowId:"queryFlow",paramsMap:{currentQuery:e.URIString,isEdit:!0,ParentFolderUri:e.parentFolder}})},InputControl:function(e,t){return new repositorySearch.RedirectAction(t,{flowId:"addInputControlFlow",paramsMap:{isEdit:!0,resource:e.URIString,ParentFolderUri:e.parentFolder}})},ListOfValues:function(e,t){return new repositorySearch.RedirectAction(t,{flowId:"addListOfValuesFlow",paramsMap:{resource:e.URIString,isEdit:"edit",ParentFolderUri:e.parentFolder}})},DataType:function(e,t){return new repositorySearch.RedirectAction(t,{flowId:"dataTypeFlow",paramsMap:{resource:e.URIString,isEdit:"edit",ParentFolderUri:e.parentFolder}})},MondrianConnection:function(e,t){return new repositorySearch.RedirectAction(t,{flowId:"olapClientConnectionFlow",paramsMap:{selectedResource:e.URIString,isEdit:"edit",ParentFolderUri:e.parentFolder}})},SecureMondrianConnection:function(e,t){return repositorySearch.editActionFactory.MondrianConnection(e,t)},XMLAConnection:function(e,t){return repositorySearch.editActionFactory.MondrianConnection(e,t)},MondrianXMLADefinition:function(e,t){return new repositorySearch.RedirectAction(t,{flowId:"mondrianXmlaSourceFlow",paramsMap:{selectedResource:e.URIString,isEdit:"edit",ParentFolderUri:e.parentFolder}})},FileResource:function(e,t){return new repositorySearch.RedirectAction(t,{flowId:"addFileResourceFlow",paramsMap:{selectedResource:e.URIString,ParentFolderUri:e.parentFolder}})},SemanticLayerDataSource:function(e,t){return new repositorySearch.RedirectAction(t,{flowId:"createSLDatasourceFlow",paramsMap:{uri:e.URIString,ParentFolderUri:e.parentFolder}})}},repositorySearch.RedirectAction.createEditResourceAction=function(e,t){e||(e=repositorySearch.model.getSelectedResources()[0]);var i=t?repositorySearch.RedirectType.WINDOW_REDIRECT:repositorySearch.RedirectType.FLOW_REDIRECT,n=repositorySearch.editActionFactory[e.typeSuffix()];return n?n(e,i):repositorySearch.editActionFactory[repositorySearch.Action.DEFAULT](e,i)},repositorySearch.openActionFactory={ContentResource:function(e,t){return t===repositorySearch.RedirectType.FLOW_REDIRECT&&(t=repositorySearch.RedirectType.LOCATION_REDIRECT),new repositorySearch.RedirectAction(t,{url:"fileview/fileview"+e.URIString,paramsMap:{}})},DashboardResource:function(e,t){return new repositorySearch.RedirectAction(t,{flowId:"dashboardDesignerFlow",paramsMap:{resource:e.URIString,ParentFolderUri:e.parentFolder}})},DashboardModelResource:function(e,t){var i=t?repositorySearch.RedirectType.WINDOW_REDIRECT:repositorySearch.RedirectType.LOCATION_REDIRECT;return new repositorySearch.RedirectAction(i,{url:"dashboard/designer.html#"+encodeURIComponent(e.URIString)})},DataDefinerUnit:function(e,t){return new repositorySearch.RedirectAction(t,{flowId:"queryBuilderFlow",paramsMap:{uri:e.URIString,ParentFolderUri:e.parentFolder}})},AdhocReportUnit:function(e,t){return new repositorySearch.RedirectAction(t,{flowId:"adhocFlow",paramsMap:{resource:e.URIString,ParentFolderUri:e.parentFolder}})},AdhocDataView:function(e,t){return new repositorySearch.RedirectAction(t,{flowId:"adhocFlow",paramsMap:{resource:e.URIString,ParentFolderUri:e.parentFolder}})}},repositorySearch.RedirectAction.createOpenResourceAction=function(e,t){e||(e=repositorySearch.model.getSelectedResources()[0]);var i=t?repositorySearch.RedirectType.WINDOW_REDIRECT:repositorySearch.RedirectType.FLOW_REDIRECT,n=repositorySearch.openActionFactory[e.typeSuffix()];return n?n(e,i):new repositorySearch.Action(function(){alert("Open action for resource type '"+e.resourceType+"' is not implemented!")})},repositorySearch.RedirectAction.createRunInBackgroundResourceAction=function(){var e=repositorySearch.model.getSelectedResources()[0],t="";return e.resourceType.endsWith(".ReportUnit")||e.resourceType.endsWith(".AdhocReportUnit")||e.resourceType.endsWith(".ReportOptions")?(e.parentResource&&(t="@@parentReportURI="+e.parentResource.URIString+"@@"),new repositorySearch.RedirectAction(repositorySearch.RedirectType.LOCATION_REDIRECT,{url:JRS.vars.contextPath+"/scheduler/main.html",paramsMap:{reportUnitURI:e.URIString,parentReportUnitURI:e.parentResource?e.parentResource.URIString:""},hash:"create"+e.URIString+"$fast"+t,encode:!0})):void 0},repositorySearch.RedirectAction.createScheduleAction=function(){var e=repositorySearch.model.getSelectedResources()[0],t="";return e.resourceType.endsWith(".ReportUnit")||e.resourceType.endsWith(".AdhocReportUnit")||e.resourceType.endsWith(".ReportOptions")?(e.parentResource&&(t="@@parentReportURI="+e.parentResource.URIString+"@@"),new repositorySearch.RedirectAction(repositorySearch.RedirectType.LOCATION_REDIRECT,{url:JRS.vars.contextPath+"/scheduler/main.html",paramsMap:{reportUnitURI:e.URIString,parentReportUnitURI:e.parentResource?e.parentResource.URIString:""},hash:"list"+e.URIString+t,encode:!0})):void 0},repositorySearch.createActionFactory={OlapClientConnection:function(e){return new repositorySearch.RedirectAction(repositorySearch.RedirectType.FLOW_REDIRECT,{flowId:"olapClientConnectionFlow",paramsMap:{ParentFolderUri:e.URI}})},OlapUnit:function(e){return new repositorySearch.RedirectAction(repositorySearch.RedirectType.FLOW_REDIRECT,{flowId:"olapUnitFlow",paramsMap:{ParentFolderUri:e.URI}})},ReportDataSource:function(e){return new repositorySearch.RedirectAction(repositorySearch.RedirectType.FLOW_REDIRECT,{flowId:"addDataSourceFlow",paramsMap:{ParentFolderUri:e.URI}})},SemanticLayerDataSource:function(e){return new repositorySearch.RedirectAction(repositorySearch.RedirectType.FLOW_REDIRECT,{flowId:"createSLDatasourceFlow",paramsMap:{ParentFolderUri:e.URI}})},FileResource:function(e,t){return new repositorySearch.RedirectAction(repositorySearch.RedirectType.FLOW_REDIRECT,{flowId:"addFileResourceFlow",paramsMap:{expectedFileType:t,parentFolder:e.URI}})},ReportUnit:function(e){return new repositorySearch.RedirectAction(repositorySearch.RedirectType.FLOW_REDIRECT,{flowId:"reportUnitFlow",paramsMap:{ParentFolderUri:e.URI}})},Query:function(e){return new repositorySearch.RedirectAction(repositorySearch.RedirectType.FLOW_REDIRECT,{flowId:"queryFlow",paramsMap:{ParentFolderUri:e.URI}})},InputControl:function(e){return new repositorySearch.RedirectAction(repositorySearch.RedirectType.FLOW_REDIRECT,{flowId:"addInputControlFlow",paramsMap:{ParentFolderUri:e.URI}})},DataType:function(e){return new repositorySearch.RedirectAction(repositorySearch.RedirectType.FLOW_REDIRECT,{flowId:"dataTypeFlow",paramsMap:{ParentFolderUri:e.URI}})},ListOfValues:function(e){return new repositorySearch.RedirectAction(repositorySearch.RedirectType.FLOW_REDIRECT,{flowId:"addListOfValuesFlow",paramsMap:{ParentFolderUri:e.URI}})},XMLAConnection:function(e){return new repositorySearch.RedirectAction(repositorySearch.RedirectType.FLOW_REDIRECT,{flowId:"mondrianXmlaSourceFlow",paramsMap:{ParentFolderUri:e.URI}})}},repositorySearch.RedirectAction.createCreateResourceAction=function(e,t){var i=repositorySearch.model.getContextFolder(),n=repositorySearch.createActionFactory[e];return n?n(i,t):new repositorySearch.Action(function(){alert("Create action for resource type suffix '"+e+"' is not implemented!")})},repositorySearch.confirmAndLeave=function(){return new repositorySearch.Action(function(){return!isPropertiesChanged()&&!isPermissionsChanged()||confirm(repositorySearch.getMessage("RM_CANCEL_EDIT_MESSAGE"))}).invokeAction()},define("component.repository.search",["repository.search.main","repository.search.components","prototype","actionModel.modelGenerator","utils.common","core.ajax"],function(e){return function(){var t;return t||e.repositorySearch}}(this)),window,define("localContext",function(e){return function(){var t;return t||e.window}}(this)),"object"!=typeof JSON&&(JSON={}),function(){"use strict";function f(e){return 10>e?"0"+e:e}function this_value(){return this.valueOf()}function quote(e){return rx_escapable.lastIndex=0,rx_escapable.test(e)?'"'+e.replace(rx_escapable,function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var i,n,o,s,r,a=gap,l=t[e];switch(l&&"object"==typeof l&&"function"==typeof l.toJSON&&(l=l.toJSON(e)),"function"==typeof rep&&(l=rep.call(t,e,l)),typeof l){case"string":return quote(l);case"number":return isFinite(l)?String(l):"null";case"boolean":case"null":return String(l);case"object":if(!l)return"null";if(gap+=indent,r=[],"[object Array]"===Object.prototype.toString.apply(l)){for(s=l.length,i=0;s>i;i+=1)r[i]=str(i,l)||"null";return o=0===r.length?"[]":gap?"[\n"+gap+r.join(",\n"+gap)+"\n"+a+"]":"["+r.join(",")+"]",gap=a,o}if(rep&&"object"==typeof rep)for(s=rep.length,i=0;s>i;i+=1)"string"==typeof rep[i]&&(n=rep[i],o=str(n,l),o&&r.push(quote(n)+(gap?": ":":")+o));else for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(o=str(n,l),o&&r.push(quote(n)+(gap?": ":":")+o));return o=0===r.length?"{}":gap?"{\n"+gap+r.join(",\n"+gap)+"\n"+a+"}":"{"+r.join(",")+"}",gap=a,o}}var rx_one=/^[\],:{}\s]*$/,rx_two=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,rx_three=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,rx_four=/(?:^|:|,)(?:\s*\[)+/g,rx_escapable=/[\\\"\u0000-\u001f\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,rx_dangerous=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},Boolean.prototype.toJSON=this_value,Number.prototype.toJSON=this_value,String.prototype.toJSON=this_value);var gap,indent,meta,rep;"function"!=typeof JSON.stringify&&(meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},JSON.stringify=function(e,t,i){var n;if(gap="",indent="","number"==typeof i)for(n=0;i>n;n+=1)indent+=" ";else"string"==typeof i&&(indent=i);if(rep=t,t&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw new Error("JSON.stringify");return str("",{"":e})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(e,t){var i,n,o=e[t];if(o&&"object"==typeof o)for(i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n=walk(o,i),void 0!==n?o[i]=n:delete o[i]);return reviver.call(e,t,o)}var j;if(text=String(text),rx_dangerous.lastIndex=0,rx_dangerous.test(text)&&(text=text.replace(rx_dangerous,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})),rx_one.test(text.replace(rx_two,"@").replace(rx_three,"]").replace(rx_four,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),define("json2",function(e){return function(){var t;return t||e.JSON}}(this)),dialogs.dependentResources={dependenciesPanel:null,show:function(e,t,i){this.dependenciesPanel=jQuery("#dependencies"),this._$title=this.dependenciesPanel.find(".content .header .title"),i.dialogTitle&&(this._titleBackup=this._$title.html(),this._$title.html(i.dialogTitle)),dialogs.popup.show(this.dependenciesPanel[0]),this._changeMessage(i),this._switchButtons(i);var n=this._initList(e);this.dependenciesPanel.on("click",function(e){var i=jQuery(e.target).closest("button").attr("id"),o=t&&t[i];_.include(["dependenciesBtnSave","dependenciesBtnSaveAs","dependenciesBtnOk","dependenciesBtnCancel"],i)&&(dialogs.dependentResources.hide(),n.setItems([]),e.stopPropagation(),o&&o())})},hide:function(){this.dependenciesPanel&&(this.dependenciesPanel.off("click"),dialogs.popup.hide(this.dependenciesPanel[0]),this.dependenciesPanel=null),this._titleBackup&&this._$title&&(this._$title.html(this._titleBackup),this._titleBackup=null)},_changeMessage:function(e){jQuery("#topMessage").html(e.topMessage),jQuery("#bottomMessage").html(e.bottomMessage)},_initList:function(e){var t=new dynamicList.List("dependenciesList",{listTemplateDomId:"tabular_oneColumn",itemTemplateDomId:"tabular_oneColumn:leaf"}),i=[];return e&&(i=e.collect(function(e){var t=new dynamicList.ListItem({cssClassName:layoutModule.LEAF_CLASS,value:e});return t.processTemplate=function(e){var t,i=e.select(".uri")[0];return t="string"==typeof this.getValue()?this.getValue():this.getValue().uristring?this.getValue().uristring:this.getValue().URIString,i.update(xssUtil.escape(t)),e},t})),t.setItems(i),t.show(),t},_switchButtons:function(e){var t,i={save:jQuery("#dependenciesBtnSave"),saveAs:jQuery("#dependenciesBtnSaveAs"),ok:jQuery("#dependenciesBtnOk"),cancel:jQuery("#dependenciesBtnCancel")};t=e.buttons?e.buttons:e.okOnly?["ok"]:e.canSave?["save","saveAs","cancel"]:["ok","cancel"],_.each(i,function(e,i){t.indexOf(i)<0?e.addClass("hidden"):e.removeClass("hidden")})}},define("components.dependent.dialog",["prototype","components.dialogs","jquery","components.list"],function(e){return function(){var t;return t||e.dialogs.dependentResources}}(this));var toolbarButtonModule={UP:"up",DOWN:"down",OVER:"over",DISABLED:"disabled",PRESSED:"pressed",CONTENT_PREFIX:"toolbar_",MenuClass:"menu vertical dropDown",TOOLBAR_MENU_CLASS:"menu vertical dropDown fitable",ACTION_MODEL_TAG:"adhocActionModel",CAPSULE_PATTERN:"capsule",showButtonMenu:function(e,t){t=jQuery(t);var i=this.CONTENT_PREFIX+t.attr("id"),n="adhocActionModel"==this.ACTION_MODEL_TAG?this.actionModel:this.ACTION_MODEL_TAG;actionModel.showDropDownMenu(e,t,i,this.TOOLBAR_MENU_CLASS,n)},setActionModel:function(e){this.actionModel=e},isToolBarButton:function(e){return e?jQuery(e).hasClass("capsule"):!1},enable:function(e){buttonManager.enable(e)},disable:function(e){buttonManager.disable(e)},setButtonState:function(e,t){t?this.enable(e):this.disable(e)}};define("components.toolbarButtons",["jquery","prototype"],function(e){return function(){var t;return t||e.toolbarButtonModule}}(this)),toolbarButtonModule.initialize=function(e){toolbarButtonModule.actionMap=e,jQuery(".toolbar").on("mouseup mouseover mouseout","button",function(e){jQuery(this).prop("disabled")||toolbarButtonModule["mouse"+e.type.substring(5,6).toUpperCase()+e.type.substring(6)+"Handler"](e,this)}),isFirefox()&&jQuery(".toolbar li").each(function(e,t){jQuery(t).css("padding","0 2px")})},toolbarButtonModule.mouseUpHandler=function(e,t){var i=t.className.indexOf("capsule")>=0?toolbarButtonModule.actionMap[t.id]:null;if(i){var n=getAsFunction(i);n(e),e.stopPropagation()}},toolbarButtonModule.mouseOverHandler=function(e,t){t.className.indexOf("capsule")>=0&&t.className.indexOf("mutton")>=0&&!buttonManager.isDisabled(t)&&toolbarButtonModule.showButtonMenu(e.originalEvent,t)},toolbarButtonModule.mouseOutHandler=function(){},define("components.toolbar",["jquery","prototype","utils.common","components.toolbarButtons"],function(e){return function(){var t;return t||e.toolbarButtonModule}}(this));var InfiniteScroll=function(e){this._scroll=e.scroll,this._id=e.id,this._loadFactor=e.loadFactor?e.loadFactor:.95,this._contentId=e.contentId?e.contentId:void 0,this._lastContentHeight=0,this._loading=!1,this._control=this._scroll?this._scroll.parent:$(this._id),this._content=this._scroll?this._scroll.element:this._contentId?$(this._contentId):this._control.childElements()[0],this._eventType=isSupportsTouch()?"touchmove":"scroll",this._control.observe(this._eventType,this._onScrollHandler.bind(this))};InfiniteScroll.addMethod("destroy",function(){this._control&&this._control.stopObserving(this._eventType,this._handler)}),InfiniteScroll.addMethod("_onScrollHandler",function(){var e=this._scroll?-1*this._scroll.y:this._control.scrollTop,t=this._content.getHeight(),i=this._control.getHeight();t!=this._lastContentHeight&&(this._loading=!1);var n=!this._loading&&0!=t;n=this._scroll?n&&this._scroll.isBottom():n&&(i+e)/t>this._loadFactor,n&&(this._loading=!0,this._lastContentHeight=t,isIPad()&&this.wait(),this.onLoad())}),InfiniteScroll.addMethod("onLoad",doNothing),InfiniteScroll.addMethod("reset",function(){isIPad()?this._scroll.reset():this._control.scrollTop=0,this._loading=!1}),InfiniteScroll.addMethod("wait",function(){if(!this._waitIndicator){this._waitIndicator=new Element("div",{"class":"dimmer resultsOverlay"});var e=this._control.getDimensions(),t=this._control.positionedOffset();this._waitIndicator.setStyle({zIndex:"4000",top:t.top+"px",left:t.left+"px",height:e.height+"px",width:e.width+"px"}),this._control.insert({after:this._waitIndicator})}this._waitIndicator.show()}),InfiniteScroll.addMethod("stopWaiting",function(){this._waitIndicator&&this._waitIndicator.hide()}),define("tools.infiniteScroll",["jquery","prototype","utils.common"],function(e){return function(){var t;return t||e.InfiniteScroll}}(this));var orgModule={TREE_ID:"orgTree",COOKIE_NAME:"selectedOrganization",messages:[],ActionMap:{SEARCH:"search",BROWSE:"browse",NEXT:"next",SELECT_AND_GET_DETAILS:"selectAndGetDetails",SEARCH_AVAILABLE:"searchAvailable",SEARCH_ASSIGNED:"searchAssigned",NEXT_AVAILABLE:"nextAvailable",NEXT_ASSIGNED:"nextAssigned",CREATE:"create",UPDATE:"update",DELETE:"delete",DELETE_ALL:"deleteAll",EXIST:"exist"},Event:{ORG_BROWSE:"org:browse",ENTITY_SEARCH:"entity:search",ENTITY_NEXT:"entity:next",ENTITY_SELECT_AND_GET_DETAILS:"entity:selectAndGetDetails",RESULT_CHANGED:"result:changed",RESULT_NEXT:"result:next",ENTITY_DETAILS_LOADED:"entity:detailsLoaded",SEARCH_AVAILABLE_LOADED:"searchAvailable:loaded",SEARCH_ASSIGNED_LOADED:"searchAssigned:loaded",NEXT_AVAILABLE_LOADED:"nextAvailable:loaded",NEXT_ASSIGNED_LOADED:"nextAssigned:loaded",SERVER_ERROR:"server:error",SERVER_UNAVAILABLE:"server:unavailable",ENTITY_CREATED:"entity:created",ENTITY_UPDATED:"entity:updated",ENTITY_DELETED:"entity:deleted",ENTITIES_DELETED:"entities:deleted"},observe:function(e,t){this._getContainer().observe(e,t)},stopObserving:function(e,t){this._getContainer().stopObserving(e,t)},fire:function(e,t){this._getContainer().fire(e,t)},getMessage:function(e,t){var i=orgModule.messages[e];return i?new Template(i).evaluate(t?t:{}):""},_getContainer:function(){return this._container||(this._container=document.body),this._container},Configuration:{nameSeparator:"|",userDefaultRole:"ROLE_USER",userNameNotSupportedSymbols:"[|]",roleNameNotSupportedSymbols:"[|]",emailRegExpPattern:"^[\\p{L}\\p{M}\\p{N}._%'-\\@\\,\\;\\s]+$",superuserRole:"ROLE_SUPERUSER",adminRole:"ROLE_ADMINISTRATOR",anonymousRole:"ROLE_ANONYMOUS"}};if(orgModule.systemRoles=[orgModule.Configuration.userDefaultRole,orgModule.Configuration.superuserRole,orgModule.Configuration.adminRole,orgModule.Configuration.anonymousRole],orgModule.Organization=function(e){if(!e)throw new Error("Can't create Organization from undefined json or node");e.param?(this.id=e.param.id,this.name=e.name,this.uri=e.param.uri,this.treeNode=e):(this.id=e.tenantId,this.name=e.tenantName,this.alias=e.tenantAlias,this.desc=e.tenantDesc,this.uri=e.tenantUri,this.parentId=e.parentId,this.subTenantCount=e.subTenantCount)},orgModule.Organization.addMethod("isRoot",function(){return"organizations"==this.id}),orgModule.Organization.addMethod("getNameWithTenant",function(){return this.id}),orgModule.Organization.addMethod("getDisplayName",function(){return this.name}),orgModule.Organization.addMethod("equals",function(e){return e&&this.id==e.id}),orgModule.Organization.addMethod("toJSON",function(){return{tenantId:this.id,tenantName:this.name,tenantAlias:this.alias,tenantDesc:this.desc,parentId:this.parentId,tenantUri:this.uri}}),orgModule.Organization.addMethod("navigateToManager",function(){primaryNavModule.navigationPaths.tempNavigateToManager=deepClone(primaryNavModule.navigationPaths.organization),primaryNavModule.navigationPaths.tempNavigateToManager.params+="&"+Object.toQueryString({tenantId:this.id}),primaryNavModule.navigationOption("tempNavigateToManager")}),orgModule.Permission=function(e){this.isInherited=!!e.isInherited,e.permission&&(this.permission=e.permission),e.inheritedPermission&&(this.inheritedPermission=e.inheritedPermission),this.isDisabled=!!e.isDisabled},orgModule.Permission.addMethod("getResolvedPermission",function(){return this.isInherited?this.inheritedPermission:this.permission}),orgModule.Permission.addMethod("toJSON",function(){return{permission:this.permission,isInherited:this.isInherited,inheritedPermission:this.inheritedPermission,newPermission:this.newPermission}}),orgModule.Permission.addMethod("toData",function(){return{permission:this.permission,isInherited:this.isInherited,inheritedPermission:this.inheritedPermission,newPermission:this.newPermission}}),orgModule.User=function(e){e&&(this.userName=e.userName,this.fullName=e.fullName,this.password=e.password||"",this.confirmPassword=e.confirmPassword||"",this.tenantId=e.tenantId,this.email=e.email,this.enabled=e.enabled,this.external=e.external,this.roles=[],e.roles&&e.roles.each(function(e){this.roles.push(new orgModule.Role(e))}.bind(this)),e.permissionToDisplay&&(this.permission=new orgModule.Permission(e.permissionToDisplay)))},orgModule.User.addVar("FLOW_ID","userListFlow"),orgModule.User.addMethod("getDisplayName",function(){return this.userName}),orgModule.User.addMethod("getNameWithTenant",function(){return this.tenantId&&!this.tenantId.blank()?this.userName+orgModule.Configuration.userNameSeparator+this.tenantId:this.userName}),orgModule.User.addMethod("getManagerURL",function(){return"flow.html?"+Object.toQueryString({_flowId:this.FLOW_ID,text:"undefined"!=typeof this.userName?encodeURIComponent(this.userName):this.userName,tenantId:"undefined"!=typeof this.tenantId?encodeURIComponent(this.tenantId):this.tenantId})}),orgModule.User.addMethod("navigateToManager",function(){primaryNavModule.navigationPaths.tempNavigateToManager=deepClone(primaryNavModule.navigationPaths.user),primaryNavModule.navigationPaths.tempNavigateToManager.params+="&"+Object.toQueryString({text:this.userName,tenantId:this.tenantId}),primaryNavModule.navigationOption("tempNavigateToManager")}),orgModule.User.addMethod("equals",function(e){return e&&this.userName==e.userName&&this.tenantId==e.tenantId}),orgModule.User.addMethod("toPermissionData",function(){return{userName:this.userName,tenantId:this.tenantId,permissionToDisplay:this.permission.toData()}}),orgModule.Role=function(e){e&&(this.roleName=e.roleName,this.external=e.external,this.tenantId=e.tenantId),e.permissionToDisplay&&(this.permission=new orgModule.Permission(e.permissionToDisplay))},orgModule.Role.addVar("FLOW_ID","roleListFlow"),orgModule.Role.addMethod("getDisplayName",function(){return this.roleName}),orgModule.Role.addMethod("getNameWithTenant",function(){return this.tenantId&&!this.tenantId.blank()?this.roleName+orgModule.Configuration.userNameSeparator+this.tenantId:this.roleName}),orgModule.Role.addMethod("getManagerURL",function(){return"flow.html?"+Object.toQueryString({_flowId:this.FLOW_ID,text:"undefined"!=typeof this.roleName?encodeURIComponent(this.roleName):this.roleName,tenantId:"undefined"!=typeof this.tenantId?encodeURIComponent(this.tenantId):this.tenantId})}),orgModule.Role.addMethod("navigateToManager",function(){primaryNavModule.navigationPaths.tempNavigateToManager=deepClone(primaryNavModule.navigationPaths.role),primaryNavModule.navigationPaths.tempNavigateToManager.params+="&"+Object.toQueryString({text:this.roleName,tenantId:this.tenantId}),primaryNavModule.navigationOption("tempNavigateToManager")}),orgModule.Role.addMethod("equals",function(e){return e&&this.roleName==e.roleName&&this.tenantId==e.tenantId}),orgModule.Role.addMethod("toPermissionData",function(){return{roleName:this.roleName,tenantId:this.tenantId,permissionToDisplay:this.permission.toData()}}),orgModule.createOrganizationsTree=function(e){dynamicTree.Organization=function(e){dynamicTree.TreeNode.call(this,e),this.Types={Folder:new dynamicTree.TreeNode.Type("com.jaspersoft.jasperserver.api.metadata.common.domain.Folder")},this.nodeHeaderTemplateDomId="list_responsive_collapsible_folders:folders"},dynamicTree.Organization.prototype=deepClone(dynamicTree.TreeNode.prototype);var t=new dynamicTree.TreeSupport(orgModule.TREE_ID,Object.extend({providerId:"tenantTreeFoldersProvider",rootUri:"/",nodeClass:dynamicTree.Organization,templateDomId:"list_responsive_collapsible_folders",bShowRoot:!0},e?e:{}));return t.observe("node:selected",function(e){var t=e.memo.node,i=t.param.uri,n=orgModule.properties;window.localStorage&&localStorage.setItem(orgModule.COOKIE_NAME,i),orgModule.fire(orgModule.Event.ORG_BROWSE,{organization:new orgModule.Organization(t),entityEvent:!1}),orgModule.orgManager&&(n.changeDisable(!1,["#"+n._EDIT_BUTTON_ID]),orgModule.fire(orgModule.Event.ENTITY_SELECT_AND_GET_DETAILS,{entity:new orgModule.Organization(t),entityEvent:!1})),(orgModule.userManager||orgModule.roleManager)&&n.hide()}),t.showOrganizations=function(e){var t=window.localStorage?localStorage.getItem(orgModule.COOKIE_NAME):void 0;t=e||t||"/",this.showTreePrefetchNodes(t,function(){"/"==t?this.getRootNode().select():this.openAndSelectNode(t)}.bind(this))},t.getOrganization=function(){var e=this.getSelectedNode();return e?new orgModule.Organization(e):null},t.selectOrganization=function(e,t){var i=e.treeNode;this.openAndSelectNode(i.param.uri,!1,!1,t)},t.updateOrganization=function(e,t){var i=this.findNodeById(e.id,t?t.treeNode:void 0);i&&i.changeName(e.name)},t.updateSubOrganizations=function(e){e.treeNode&&(e.treeNode.hasChilds()||e.treeNode.setHasChilds(!0),e.treeNode.isOpen()&&e.treeNode.handleNode(),e.treeNode.isloaded=!1,e.treeNode.handleNode())},t},orgModule.entityList={ID_PATTERN:".ID > a",_listId:"entitiesList",_containerId:"listContainer",_searchBoxId:"secondarySearchBox",initialize:function(e){this.list=new dynamicList.List(this._listId,{listTemplateDomId:e.listTemplateId,itemTemplateDomId:e.itemTemplateId,multiSelect:!0,comparator:function(e,t){var i=e.getLabel(),n=t.getLabel();return i>n?1:n>i?-1:0}}),this._initEvents(),this._infiniteScroll=new InfiniteScroll({id:this._containerId,contentId:this._listId}),this._searchBox=new SearchBox({id:this._searchBoxId}),e.text&&this._searchBox.setText(e.text),this._infiniteScroll.onLoad=function(){orgModule.fire(orgModule.Event.ENTITY_NEXT,{})},this._searchBox.onSearch=function(e){orgModule.fire(orgModule.Event.ENTITY_SEARCH,{text:e})},orgModule.toolbar.initialize(e.toolbarModel),this.toolbar=orgModule.toolbar,this.list.show()},_initEvents:function(){this.list.observe("item:selected",function(e){var t=e.memo.item,i=orgModule.properties;this.lastSelectedName=t.getValue().getNameWithTenant(),orgModule.fire(orgModule.Event.ENTITY_SELECT_AND_GET_DETAILS,{entity:t.getValue(),entityEvent:!0}),i.changeDisable(!1,["#"+i._EDIT_BUTTON_ID])}.bindAsEventListener(this)),this.list.observe("item:unselected",function(e){var t=orgModule.manager.tree,i=orgModule.properties;i.changeDisable(!1,["#"+i._EDIT_BUTTON_ID]),!i.locked&&t?orgModule.fire(orgModule.Event.ENTITY_SELECT_AND_GET_DETAILS,{entity:new orgModule.Organization(t.getSelectedNode()),entityEvent:!0,isCtrlHeld:e.memo.isCtrlHeld}):(i.hide(),this.toolbar.refresh())
}.bindAsEventListener(this)),this.list.observe("item:beforeSelectOrUnselect",function(e){var t=e.memo.item;e.stopSelectOrUnselect=!invokeClientAction("cancelIfEdit",{entity:t.getValue(),showConfirm:e.memo.showConfirm})}.bindAsEventListener(this))},_createEntityItem:function(e){var t=new dynamicList.ListItem({label:e.getDisplayName(),value:e}),i=this;return t.processTemplate=function(e){var t=e.select(i.ID_PATTERN)[0];return t.update(xssUtil.escape(this.getValue().getDisplayName())),e},t},getSearchText:function(){return this._searchBox.getText()},setSearchText:function(e){return this._searchBox.setText(e)},getSelectedEntities:function(){return this.list?this.list.getSelectedItems().collect(function(e){return e.getValue()}):[]},setEntities:function(e){var t=e.collect(this._createEntityItem.bind(this));this._infiniteScroll.reset(),this.list.setItems(t),this.list.show(),this.toolbar.refresh()},findEntity:function(e){var t=this.list.getItems(),i=orgModule.properties.options||orgModule.userManager.options;return i._.find(t,function(t){return t.getValue().fullName===e})},addEntities:function(e){var t=e.collect(this._createEntityItem.bind(this));this.list.addItems(t),this.list.refresh(),this.toolbar.refresh()},selectEntity:function(e){var t=this.list.getItems(),i=t.detect(function(t){return t.getValue().getNameWithTenant()==e});i&&(i.isSelected()&&i.deselect(),i.select(),this.lastSelectedName=i.getValue().getNameWithTenant())},restoreSelectedEntity:function(e){this.selectEntity(this.lastSelectedName?this.lastSelectedName:e)},deselectAll:function(){this.list.resetSelected()},update:function(e,t){var i=this.list.getItems(),n=i.findAll(function(t){return t.getValue().getNameWithTenant()==e});n.each(function(e){e.setValue(t),e.refresh()})},remove:function(e){var t,i=this.list.getItems();t=i.findAll(isArray(e)?function(t){return e.include(t.getValue().getNameWithTenant())}:function(t){return t.getValue().getNameWithTenant()==e}),this.list.resetSelected(),this.list.removeItems(t)}},orgModule.properties={_EDIT_MODE_CLASS:"editMode",_moveButtonsId:"moveButtons",_id:"properties",_value:null,isEditMode:!1,_NOTHING_TO_DISPLAY_ID:"nothingToDisplay",_ASSIGNED_VIEW_ID:"assignedView",_ASSIGNED_VIEW_LIST_ID:"assignedViewList",_ASSIGNED_ID:"assigned",_AVAILABLE_ID:"available",_ASSIGNED_LIST_ID:"assignedList",_AVAILABLE_LIST_ID:"availableList",_ATTRIBUTES_LIST_ID:"attributesTab",_EDIT_BUTTON_ID:"edit",_SAVE_BUTTON_ID:"save",_CANCEL_BUTTON_ID:"cancel",_DELETE_BUTTON_ID:"delete",_REMOVE_FROM_ASSIGNED_BUTTON_ID:"removeFromAssigned",_ADD_TO_ASSIGNED_BUTTON_ID:"addToAssigned",_BUTTONS_CONTAINER_ID:"propertiesButtons",_MOVE_BUTTONS_CONTAINER_ID:"moveButtons",_DND_CLASS:".draggable",_DROP_CLASS:"wrap",buttonsFunctions:{},initialize:function(e){var t=e.attributesTypesEnum;if(this.options=e,this.locked=!1,this.hide(),this.processTemplate(e),this._toggleButton(),e.attributes){var i=!orgModule.userManager&&orgModule.orgManager?t.TENANT:t.USER,n=e.attributesViewOptionsFactory,o=e.scrollEventTrait,s=e.AttributesViewFacade;this.options._.extend(this,o),this.attributesFacade=new s(n({context:e.attributes.context,container:jQuery("#attributesTab"),type:i}))}this.options.showAssigned&&this.initDnD(),this.initEvents(),this.initButtonsFunctions(),this.options.ConfirmationDialog&&this._initConfirmationDialog()},_initConfirmationDialog:function(){{var e=this,t=this.options.i18n;this.options.i18n2}this.confirmationDialog=new this.options.ConfirmationDialog({title:t["attributes.confirm.dialog.title"],text:t["attributes.confirm.cancel.dialog.text"]}),this.confirmationDialog.on("button:yes",function(){e.cancelOnEdit()})},_toggleButton:function(){var e=this.isChanged(),t=this.attributesFacade&&this.attributesFacade.containsUnsavedItems()||e;t?this.saveButton.removeAttribute("disabled"):this.saveButton.removeClassName("over").setAttribute("disabled","disabled")},show:function(e){if(!this.locked){if(this.attributesFacade){var t=this,i=e.isRoot&&e.isRoot(),n=i?this.options._.extend({},e,{id:null}):e;this.attributesFacade.getCurrentView().setContext(n).done(function(){t.attributesFacade.render(i)})}var o=$(this._NOTHING_TO_DISPLAY_ID);o.addClassName(layoutModule.HIDDEN_CLASS),document.body.removeClassName(layoutModule.NOTHING_TO_DISPLAY_CLASS),this._value=e,this.changeMode(!1)}},hide:function(){if(!this.locked){var e=$(this._NOTHING_TO_DISPLAY_ID);e.removeClassName(layoutModule.HIDDEN_CLASS),centerElement(e,{horz:!0,vert:!0}),document.body.addClassName(layoutModule.NOTHING_TO_DISPLAY_CLASS),this._value=null,this.changeMode(!1)}},lock:function(){this.locked=!0},unlock:function(){this.locked=!1},setDetailsLoadedEntity:function(e){this.detailsLoadedEntity=e},getDetailsLoadedEntity:function(){return this.detailsLoadedEntity},processTemplate:function(e){if(this.editButton=$(this._EDIT_BUTTON_ID),this.saveButton=$(this._SAVE_BUTTON_ID),this.cancelButton=$(this._CANCEL_BUTTON_ID),this.deleteButton=$(this._DELETE_BUTTON_ID),this.options.showAssigned){this.removeFromAssigned=$(this._REMOVE_FROM_ASSIGNED_BUTTON_ID),this.addToAssigned=$(this._ADD_TO_ASSIGNED_BUTTON_ID),this.assignedViewList=new dynamicList.List(this._ASSIGNED_VIEW_LIST_ID,{listTemplateDomId:e.viewAssignedListTemplateDomId,itemTemplateDomId:e.viewAssignedItemTemplateDomId,comparator:this.assignedComparator});var t={listTemplateDomId:"list_responsive_collapsible_fields",itemTemplateDomId:"list_responsive_collapsible_fields:fields",comparator:this.assignedComparator,dragPattern:this._DND_CLASS,multiSelect:!0,selectOnMousedown:!0};this.assignedList=new dynamicList.List(this._ASSIGNED_LIST_ID,t),this.availableList=new dynamicList.List(this._AVAILABLE_LIST_ID,t),e.searchAssigned&&(this.assignedViewSearchBox=new SearchBox({id:$(this._ASSIGNED_VIEW_ID).select(layoutModule.SEARCH_LOCKUP_PATTERN)[0].identify()}),this.assignedViewSearchBox.onSearch=function(e){invokeServerAction(orgModule.ActionMap.SEARCH_ASSIGNED,{text:e})}),this.availableSearchBox=new SearchBox({id:$(this._AVAILABLE_ID).select(layoutModule.SEARCH_LOCKUP_PATTERN)[0].identify()}),this.availableSearchBox.onSearch=function(e){invokeServerAction(orgModule.ActionMap.SEARCH_AVAILABLE,{text:e})},this.assignedSearchBox=new SearchBox({id:$(this._ASSIGNED_ID).select(layoutModule.SEARCH_LOCKUP_PATTERN)[0].identify()}),this.assignedSearchBox.onSearch=function(e){invokeServerAction(orgModule.ActionMap.SEARCH_ASSIGNED,{text:e})},e.searchAssigned&&(this.assignedViewInfiniteScroll=new InfiniteScroll({id:$($(this._ASSIGNED_VIEW_LIST_ID).parentNode).identify(),contentId:this._ASSIGNED_VIEW_LIST_ID}),this.assignedViewInfiniteScroll.onLoad=function(){invokeServerAction(orgModule.ActionMap.NEXT_ASSIGNED,{})}),this.availableInfiniteScroll=new InfiniteScroll({id:$($(this._AVAILABLE_LIST_ID).parentNode).identify(),contentId:this._AVAILABLE_LIST_ID}),this.availableInfiniteScroll.onLoad=function(){invokeServerAction(orgModule.ActionMap.NEXT_AVAILABLE,{})},this.assignedInfiniteScroll=new InfiniteScroll({id:$($(this._ASSIGNED_LIST_ID).parentNode).identify(),contentId:this._ASSIGNED_LIST_ID}),this.assignedInfiniteScroll.onLoad=function(){invokeServerAction(orgModule.ActionMap.NEXT_ASSIGNED,{})}}},initDnD:function(){Droppables.add($(this._ASSIGNED_LIST_ID).up(),{accept:[this._DROP_CLASS],hoverclass:layoutModule.DROP_TARGET_CLASS,onDrop:function(e){e.items&&this._addToAssigned()}.bind(this)}),Droppables.add($(this._AVAILABLE_LIST_ID).up(),{accept:[this._DROP_CLASS],hoverclass:layoutModule.DROP_TARGET_CLASS,onDrop:function(e){e.items&&this._removeFromAssigned()}.bind(this)})},initEvents:function(){function e(){(this.assignedList.getSelectedItems().length>0?buttonManager.enable:buttonManager.disable)(this.removeFromAssigned)}function t(){(this.availableList.getSelectedItems().length>0?buttonManager.enable:buttonManager.disable)(this.addToAssigned)}$(this._BUTTONS_CONTAINER_ID).observe("click",function(e){var t=e.element(),i=matchAny(t,[layoutModule.BUTTON_PATTERN],!0);i&&this.buttonsFunctions[i.identify()]&&this.buttonsFunctions[i.identify()].call(this),e.stop()}.bindAsEventListener(this)),this.options.showAssigned&&($(this._MOVE_BUTTONS_CONTAINER_ID).observe("click",function(e){var t=e.element(),i=matchAny(t,[layoutModule.BUTTON_PATTERN],!0);i&&(i==this.removeFromAssigned?this._removeFromAssigned():i==this.addToAssigned&&this._addToAssigned()),e.stop()}.bindAsEventListener(this)),this.assignedList.observe("item:selected",e.bindAsEventListener(this)),this.assignedList.observe("item:unselected",e.bindAsEventListener(this)),this.assignedList.observe("item:dblclick",function(){this._removeFromAssigned()}.bindAsEventListener(this)),this.availableList.observe("item:selected",t.bindAsEventListener(this)),this.availableList.observe("item:unselected",t.bindAsEventListener(this)),this.availableList.observe("item:dblclick",function(){this._addToAssigned()}.bindAsEventListener(this))),this.attributesFacade&&this.attributesFacade.on("change",this.options._.bind(this._toggleButton,this))},initButtonsFunctions:function(){this.buttonsFunctions[this._EDIT_BUTTON_ID]=function(){this.changeMode(!0)},this.buttonsFunctions[this._SAVE_BUTTON_ID]=function(){var e=this,t=new jQuery.Deferred;this.validate()&&(this.attributesFacade?this.attributesFacade.getCurrentView().saveChildren().done(function(){t.resolve()}):t.resolve(),t.done(function(){e.save(function(){e.changeMode(!1)})}))},this.buttonsFunctions[this._CANCEL_BUTTON_ID]=function(){this.attributesFacade?this.isChanged()?this.confirmationDialog.open():this.cancelOnEdit():invokeClientAction("cancelIfEdit",{entity:this.getValue()})},this.buttonsFunctions[this._DELETE_BUTTON_ID]=function(){this._deleteEntity()},this.buttonsFunctions[this._REMOVE_FROM_ASSIGNED_BUTTON_ID]=function(){this._removeFromAssigned()},this.buttonsFunctions[this._ADD_TO_ASSIGNED_BUTTON_ID]=function(){this._addFromAssigned()}},cancelOnEdit:function(){var e=this;this.isEditMode&&this.cancel().done(function(){e.unlock(),e.changeMode(!1),e._toggleButton()})},changeMode:function(e){this.isEditMode=e;var t,i,n,o;if(this.attributesFacade){i=$("attributesTab");var s=!!this._value&&"organizations"===this._value.id;this.detachScrollEvent(this.attributesFacade.getCurrentView().$container.parent()),this.attributesFacade.toggleMode(e,s),e&&this.initScrollEvent(this.attributesFacade.getCurrentView()),t=$$(".tertiary")[0],n=$("propertiesTab"),o=jQuery(".control.tabSet.anchor")}e?($(this._id).addClassName(this._EDIT_MODE_CLASS),t&&(t.down(".selected").removeClassName("selected"),t.down("li",0).addClassName("selected"),t.addClassName("tabbed"),i.addClassName("hidden"),n.removeClassName("hidden"),o.removeClass("attributesAnchor")),this._assigned=[],this._unassigned=[],this.options.showAssigned&&(centerElement($(this._moveButtonsId),{horz:!0}),$(this._moveButtonsId).style.zIndex=1e3,this.assignedList.setItems([]),this.assignedList.show(),this.availableList.setItems([]),this.availableList.show(),buttonManager.disable(this.removeFromAssigned),buttonManager.disable(this.addToAssigned),this.assignedSearchBox.setText(""),this.availableSearchBox.setText(""),invokeServerAction(orgModule.ActionMap.SEARCH_ASSIGNED,{text:this.assignedSearchBox.getText()}),invokeServerAction(orgModule.ActionMap.SEARCH_AVAILABLE,{text:this.availableSearchBox.getText()})),this._editEntity(),this._toggleButton()):($(this._id).removeClassName(this._EDIT_MODE_CLASS),t&&(i.removeClassName("hidden"),n.removeClassName("hidden"),t.removeClassName("tabbed")),this.options.searchAssigned&&this.assignedViewSearchBox&&this.assignedViewSearchBox.setText(""),this.changeDisable(this.canEdit(),["#"+this._EDIT_BUTTON_ID]),this.changeDisable(this.canDelete(),["#"+this._DELETE_BUTTON_ID]),this._showEntity(),this._assigned=[],this._unassigned=[])},canEdit:function(){return!0},canDelete:function(){var e=orgModule.manager.tree&&orgModule.manager.tree.getOrganization();return e&&"/"===e.uri&&!orgModule.entityList.getSelectedEntities().length?!1:!0},getValue:function(){return this._value},setProperties:function(){},isChanged:function(){},save:function(){},validate:function(){return!0},assignedComparator:function(e,t){var i=e.getLabel(),n=t.getLabel();return i>n?1:n>i?-1:0},_moveEntities:function(e){var t,i,n,o;e?(t=this._unassigned,n=this.availableList,i=this._assigned,o=this.assignedList):(t=this._assigned,n=this.assignedList,i=this._unassigned,o=this.availableList);var s=n.getSelectedItems(),r=s.collect(function(e){return e.getValue()});i=i.concat(r.collect(function(t){return t.available==e?t:null})).compact(),t=t.reject(function(e){return r.detect(function(t){return e.equals(t)})}),n.removeItems(s),o.addItems(s,!0),o.refresh(),e?(this._unassigned=t,this._assigned=i):(this._assigned=t,this._unassigned=i)},_addToAssigned:function(){this._moveEntities(!0)},_removeFromAssigned:function(){this._moveEntities(!1)},_entitiesToItems:function(e,t){return e=e?e:[],e.collect(function(e){var i="",n=[],o="orgTooltip";e instanceof orgModule.User?(i=e.userName,e.fullName&&e.fullName.length>0&&(n=[e.fullName]),o=e.tenantId?"fullNameAndOrgTooltip":"fullNameTooltip"):e instanceof orgModule.Role&&(i=e.roleName,o=e.tenantId?"orgTooltip":void 0),e.tenantId&&e.tenantId.length>0&&n.push(e.tenantId),e.available=!!t;var s=new dynamicList.ListItem({label:i,value:e});return s.processTemplate=this.isEditMode?function(e){return n.length>0&&new JSTooltip(e,{text:xssUtil.escape(n),templateId:o}),dynamicList.ListItem.prototype.processTemplate.call(this,e)}:function(e){var t=e.select("a")[0];return t.insert(xssUtil.escape(this.getLabel())),t.writeAttribute("href",this.getValue().getManagerURL()),n.length>0&&new JSTooltip(e,{text:xssUtil.escape(n),templateId:o}),e},s}.bind(this))},getAssignedEntities:function(){return this._assigned},getUnassignedEntities:function(){return this._unassigned},setAssignedEntities:function(e){this.assignedViewInfiniteScroll&&this.assignedViewInfiniteScroll.reset(),this.assignedInfiniteScroll&&this.assignedInfiniteScroll.reset();var t=this.isEditMode?this.assignedList:this.assignedViewList,i=this._filterEntities(e,this._unassigned,this._assigned,this.assignedSearchBox.getText());t.setItems(this._entitiesToItems(i)),t.refresh()},addAssignedEntities:function(e){var t=this.isEditMode?this.assignedList:this.assignedViewList,i=this._filterEntities(e,this._unassigned,this._assigned,this.assignedSearchBox.getText());t.addItems(this._entitiesToItems(i)),t.refresh()},setAvailableEntities:function(e){this.availableInfiniteScroll.reset();var t=this._filterEntities(e,this._assigned,this._unassigned,this.availableSearchBox.getText());this.availableList.setItems(this._entitiesToItems(t,!0)),this.availableList.refresh()},addAvailableEntities:function(e){var t=this._filterEntities(e,this._assigned,this._unassigned,this.availableSearchBox.getText());this.availableList.addItems(this._entitiesToItems(t,!0)),this.availableList.refresh()},_filterEntities:function(e,t,i,n){var o=e.reject(function(e){return t.detect(function(t){return t.equals(e)})});return n=n.toLowerCase(),o=o.concat(i.findAll(function(e){return e.getDisplayName().toLowerCase().include(n)}))},changeReadonly:function(e,t){t.each(function(t){$(this._id).select(t)[0].writeAttribute(layoutModule.READONLY_ATTR_NAME,e?null:layoutModule.READONLY_ATTR_NAME)}.bind(this))},resetValidation:function(e){var t=$(this._id);e.each(function(e){ValidationModule.hideError(t.select(e)[0])}.bind(this))},changeDisable:function(e,t){t.each(function(t){e?buttonManager.enable($(this._id).select(t)[0]):buttonManager.disable($(this._id).select(t)[0])}.bind(this))},_deleteEntity:function(){},_editEntity:function(){},_showEntity:function(){}},orgModule.addDialog={show:function(){},hide:function(){}},orgModule.Action=function(e,t){Object.isFunction(e)&&(t=t&&Object.isFunction(t)?t:this.beforeInvoke,this.invokeAction=function(){return t()?e.apply(this,arguments):void 0})},orgModule.Action.addMethod("invokeAction",doNothing),orgModule.Action.addMethod("beforeInvoke",function(){return!0}),orgModule.ServerAction=function(e,t){this.actionURL="flow.html?_flowExecutionKey="+localContext.flowExecutionKey+"&_eventId="+e,this.data=Object.toQueryString(t),this.onSuccess=doNothing(),this.onError=doNothing()},orgModule.ServerAction.addMethod("invokeAction",function(){this.beforeInvoke()&&ajaxTargettedUpdate(this.actionURL,{postData:this.data,callback:function(e){e.error?this.onError(e.error):this.onSuccess(e.data)}.bind(this),errorHandler:function(e){return e.getResponseHeader("LoginRequested")?(orgModule.fire(orgModule.Event.SERVER_UNAVAILABLE,{}),!0):baseErrorHandler(e)},mode:AjaxRequester.prototype.EVAL_JSON})}),orgModule.ServerAction.addMethod("beforeInvoke",function(){return!0}),orgModule.toolbar={_actionModel:{},initialize:function(e){this._actionModel=e,toolbarButtonModule.initialize(this._toActionMap(this._actionModel)),this.refresh()},refresh:function(){for(var e in this._actionModel){var t=this._actionModel[e].buttonId,i=toFunction(this._actionModel[e].test);toolbarButtonModule.setButtonState($(t),i())}},_toActionMap:function(e){var t={};for(var i in e){var n=e[i],o=n.buttonId;t[o]=function(e,t){return function(){var i=getAsFunction(e),n=t,o=localContext&&localContext[e];n&&isArray(n)?i.apply(o?localContext:null,n):i.call(o?localContext:null,n)}}(n.action,n.actionArgs)}return t}},orgModule.createInputRegExValidator=function(e){return{validator:function(t){var i=e.regExp.test(t),n=!i,o=n?"":orgModule.getMessage("unsupportedSymbols",{symbols:e.unsupportedSymbols});return e.isValid=n,{isValid:n,errorMessage:o}},element:e}},orgModule.createBlankValidator=function(e,t,i,n){return{validator:function(e){var i=!e.blank(),n=i?"":orgModule.getMessage(t);return{isValid:i,errorMessage:n}},element:e,onValid:i,onInvalid:n}},orgModule.createMaxLengthValidator=function(e,t,i){return{validator:function(n){var o=e.hasAttribute("maxlength")?e.readAttribute("maxlength"):e.maxlength,s=n.length<parseInt(o),r=s?"":orgModule.getMessage(t);return i&&(r=r.replace(i,o)),{isValid:s,errorMessage:r}},element:e}},orgModule.createSameValidator=function(e,t,i){return{validator:function(e){var n=e===t.getValue(),o=n?"":orgModule.getMessage(i);return{isValid:n,errorMessage:o}},element:e}},orgModule.createRegExpValidator=function(e,t,i){return"string"==typeof i&&(i=window.XRegExp?XRegExp(i):new RegExp(i)),{validator:function(e){var n=i.exec(e),o=!n&&0===e.length||n&&e==n[0],s=o?"":orgModule.getMessage(t);return{isValid:o,errorMessage:s}},element:e}},orgModule.truncateOrgName=function(e){return e&&e.length>0?e.truncate(15):""},RegExpRepresenter.addMethod("__parse",function(e){for(var t=$A(),i=1;i<e.length-1;i++){var n=e.charAt(i);"\\"==n&&(n+=e.charAt(++i)),"\\u"==n&&(n+=e.substring(++i,i+4),i+=3),t.push(n)}return t}),RegExpRepresenter.addMethod("getCharacters",function(){var result=$A();return this.expressionTokens.each(function(token){if(token.startsWith("\\u"))result.push(eval('"'+token+'"'));else if(token.startsWith("\\")){var ch=this.charMap[token];result.push(ch?ch:token.substring(1,token.length))}else result.push(token)}.bind(this)),result}),RegExpRepresenter.addMethod("getRepresentedString",function(){for(var e="",t=this.getCharacters(),i=t.length,n=0;i>n;n++){var o=t[n];e+=" "==o||"."==o||","==o?"["+o+"]":o,i-1>n&&(e+=", ")}return e}),define("mng.common",["jquery","underscore","prototype","utils.common","tools.infiniteScroll","components.list","components.dynamicTree","components.toolbar"],function(e){return function(){var t;return t||e.orgModule}}(this)),"undefined"==typeof jaspersoft&&(jaspersoft={}),jaspersoft.components||(jaspersoft.components={}),jaspersoft.components.ServerErrorsBackboneTrait=function(e){return{statuses:{},defaultErrorDelegator:function(e,t){401==t.status?window.location.href=window.location.href:this.trigger("error:server",this.parseServerError(t))},parseServerError:function(t){var i;try{i=e.parseJSON(t.responseText)}catch(n){i=this.mapUnserializableErrors(t)}return i},mapUnserializableErrors:function(e){var t={errorCode:"unserializable.error"};return t.message=this.statuses[e.status]?this.statuses[e.status]:e.statusText,t}}}(jQuery,_),define("components.servererrorsbackbonetrait",["namespace","jquery","underscore"],function(e){return function(){var t;return t||e.jaspersoft.components.ServerErrorsBackboneTrait}}(this)),JRS.Export.ServerErrorTrait=function(e,t,i,n){return i.extend(n,{statuses:{0:e.i18n["export.server.not.avaliable"],403:e.i18n["export.session.expired"],503:e.i18n["export.server.not.avaliable"],404:e.i18n["export.server.not.avaliable"]}})}(JRS.Export,jQuery,_,jaspersoft.components.ServerErrorsBackboneTrait),define("export.servererrortrait",["underscore","components.servererrorsbackbonetrait"],function(e){return function(){var t;return t||e.JRS.Export.ServerErrorTrait}}(this)),jaspersoft.components.State=function(e,t,i,n,o){return i.Model.extend(o).extend({name:"export.zip",urlTemplate:"rest_v2/{service}/{id}/state",defaults:{id:null,phase:"not started",message:""},initialize:function(){t.bindAll(this),this.on("change:phase",this.notify)},url:function(){if(!this.has("id"))throw Error("Can't initialize export state without 'id'");return this.urlTemplate.replace("{id}",this.get("id"))},reset:function(){this.name="export.zip",this.set(this.defaults)},notify:function(){this.get("phase")===n.State.FAILED?(this.trigger("error:server",this.attributes),this.reset()):this.get("phase")===n.State.READY&&this.trigger("notification:show",this.attributes)}},{NOT_STARTED:"not started",INPROGRESS:"inprogress",READY:"finished",FAILED:"failed",instance:function(e){var t=new this;return e&&e.urlTemplate&&(t.urlTemplate=e.urlTemplate),t}})}(jQuery,_,Backbone,jaspersoft.components,jaspersoft.components.ServerErrorsBackboneTrait),define("components.state",["namespace","jquery","underscore","backbone","components.servererrorsbackbonetrait"],function(e){return function(){var t;return t||e.jaspersoft.components.State}}(this)),JRS.Export.FormModel=function(e,t,i,n,o,s){return n.Model.extend(o).extend({defaults:{roles:null,users:null,uris:null,fileName:"export.zip",everything:!0,includeSystemProperties:!1,userForRoles:!1,rolesForUser:!1,includeAccessEvents:!1,includeAuditEvents:!1,includeMonitoringEvents:!1,includeRepositoryPermissions:!0,includeReportJobs:!0,state:i.extend(s.instance({urlTemplate:"rest_v2/export/{id}/state"}),o)},initialize:function(){i.bindAll(this)},url:function(){return"rest_v2/export"},save:function(){var e=new n.Model;e.url=this.url,e.save(this.prepareServerObject(),{success:this.updateState,error:this.defaultErrorDelegator})},isAcceptable:function(){var e=this.prepareServerObject();return e.uris||e.roles||e.users||i.filter(e.parameters,function(e){return"role-users"!==e&&"users-roles"!==e}).length},prepareServerObject:function(){return{roles:i.isArray(this.get("roles"))&&this.get("roles").length?this.get("roles"):null,users:i.isArray(this.get("users"))&&this.get("users").length?this.get("users"):null,uris:i.clone(this.get("uris")),parameters:this.getConvertedParameters()}},validate:function(t){return t.fileName.length?t.fileName.length>256?e.i18n["file.name.too.long"]:/[\/\\?%\*:|"<>]+/.test(t.fileName)?e.i18n["file.name.not.valid"]:void 0:e.i18n["file.name.empty"]},updateState:function(e){var t=this.get("state");t.get("phase")===s.NOT_STARTED&&(t.set({id:e.get("id")}),t.name=this.get("fileName")),t.set({phase:e.get("phase"),message:e.get("message")})},getConvertedParameters:function(){var e=this,t=this.get("uris");t=t&&t.length;var n=this.get("everything"),o=i(this.attributes).chain().keys().filter(function(t){return"roles"!==t&&"users"!==t&&"roles"!==t&&"uris"!=t&&"state"!=t&&"fileName"!=t&&"hasReports"!=t&&e.get(t)}).filter(function(e){return n?n:"includeAccessEvents"!=e}).filter(function(e){return t?t:"includeRepositoryPermissions"!=e&&"includeReportJobs"!=e}).map(function(e){return"userForRoles"===e?"role-users":"rolesForUser"===e?"users-roles":"includeSystemProperties"===e?"include-server-settings":"includeAccessEvents"===e?"include-access-events":"includeAuditEvents"===e?"include-audit-events":"includeRepositoryPermissions"===e?"repository-permissions":"includeReportJobs"===e?"report-jobs":"includeMonitoringEvents"===e?"include-monitoring-events":e}).value();return o?o:[]}})}(__jrsConfigs__.Export,jQuery,_,Backbone,JRS.Export.ServerErrorTrait,jaspersoft.components.State),define("export.formmodel",["jquery","underscore","backbone","export.servererrortrait","components.state"],function(e){return function(){var t;return t||e.JRS.Export.FormModel}}(this)),jaspersoft.components.StateControllerTrait=function(e,t,i,n,o){return{initialize:function(e){t.bindAll(this),this.model&&(this.model.on("change:phase",this.handleStateChanges),this.model.on("change:id",this.startObserver)),e&&(this.timeout=e.timeout,this.delay=e.delay)},handleStateChanges:function(e,t){t===o.INPROGRESS?this.handleInprogressPhase(e):t===o.READY?this.handleReadyPhase(e):t===o.FAILED&&this.handleFailedPhase(e)},startObserver:function(e){var t=e.get("phase");this.intervalId||t!=o.INPROGRESS&&t!=o.NOT_STARTED||(this.intervalId=this.observePhase(e,this.timeout))},handleInprogressPhase:function(){},handleReadyPhase:function(){this.reset()},handleFailedPhase:function(){},handleServerError:function(e){e.defaultErrorDelegator.apply(e,arguments),this.reset()},observePhase:function(e,i){function s(){var e=(new Date).getTime();return e-a>=i}var r,a=(new Date).getTime(),l=this;return r=setInterval(t.bind(function(){var t=e.get("phase"),i=function(t){clearInterval(r),delete l.intervalId,t&&e.set({phase:o.FAILED,message:n[t]})};if(t===o.INPROGRESS)if(s())i("error.timeout");else try{e.fetch({error:this.handleServerError})}catch(a){i("error.invalid.request")}else i()},this),this.delay)},reset:function(){this.model&&this.model.reset(),this.intervalId&&(clearInterval(this.intervalId),delete this.intervalId)}}}(jQuery,_,Backbone,jaspersoft.i18n,jaspersoft.components.State),define("components.statecontrollertrait",["namespace","jquery","underscore","backbone","components.state"],function(e){return function(){var t;return t||e.jaspersoft.components.StateControllerTrait}}(this)),jaspersoft.components.AjaxDownloader=function(e,t,i){return i.View.extend({initialize:function(){t.bindAll(this),e(document).ready(this.defaultLayout)},start:function(t){e(this.el).attr("src",t)},defaultLayout:function(){e("body").append(this.render().el)},render:function(){var t="<iframe data-downloader-id='{cid}' style='display:none;' src=''></iframe>".replace("{cid}",this.cid);return this.el=e(t)[0],this}})}(jQuery,_,Backbone),define("components.ajaxdownloader",["namespace","jquery","underscore","backbone"],function(e){return function(){var t;return t||e.jaspersoft.components.AjaxDownloader}}(this)),JRS.Export.StateController=function(e,t,i,n){return i.View.extend(n.StateControllerTrait).extend({initialize:function(){n.StateControllerTrait.initialize.apply(this,arguments),this.downloader=new n.AjaxDownloader},handleReadyPhase:function(e){var t=this.getFileUrl(e);this.downloader.start(t),this.reset()},getFileUrl:function(e){var t=encodeURIComponent(e.name.replace(/\.zip\s*$/,""));return"rest_v2/export/{fileId}/{filename}.zip".replace("{fileId}",e.get("id")).replace("{filename}",t)}})}(jQuery,_,Backbone,jaspersoft.components),define("export.statecontroller",["jquery","underscore","backbone","components.statecontrollertrait","components.ajaxdownloader"],function(e){return function(){var t;return t||e.JRS.Export.StateController}}(this)),JRS.Export.App=function(e,t,i,n){return{initialize:function(o){i.bindAll(this),this.formModel=new e.FormModel;var s=i.extend({model:this.formModel,namespace:e},o),r=this.ui=new n.Layout(s),a=this.formModel.get("state");this.stateController=new e.StateController({model:a,timeout:e.configs.TIMEOUT,delay:e.configs.DELAY}),o&&!o.containerID&&a.on("change:phase",function(e,t){t===n.State.READY&&r.dialog&&r.dialog.hide()}),t(document).ready(function(){r.render(o)})},showDialogFor:function(e){this.formModel.set({uris:this.parseRepoData(e),includeReportJobs:this.hasReports(e)}),this.ui.showDialog()},parseRepoData:function(e){return i.isArray(e)?i.pluck(e,"URIString"):[e.URIString]},hasReports:function(e){return i.isArray(e)||(e=[e]),i.reduce(e,function(e,t){return e||!t.resourceType||t.resourceType.indexOf("ReportUnit")+1||t.resourceType.indexOf("ReportOptions")+1},!1)}}}(JRS.Export,jQuery,_,jaspersoft.components),define("export.app",["jquery","underscore","export.formmodel","components.layout","export.statecontroller","components.state"],function(e){return function(){var t;return t||e.JRS.Export.App}}(this)),JRS.Import)throw new Error("JRS.Import already exist");JRS.Import=function(){return{Events:{INITIALIZE:"initialize"},configs:{TIMEOUT:12e5,DELAY:3e3}}}(),define("import",["namespace"],function(e){return function(){var t;return t||e.JRS.Import}}(this)),jaspersoft||(jaspersoft={components:{}}),jaspersoft.components||(jaspersoft.components={}),jaspersoft.components.AjaxUploader=function(e,t){function i(e){var t;e.firstChild.innerText&&""!==e.firstChild.innerText&&e.body?(t=new ActiveXObject("Microsoft.XMLDOM"),t.async=!1,t.loadXML(e.firstChild.innerText.replace("\r\n-","\r\n"))):t=e;var i=null;return t.firstChild&&(i=t.firstChild.nodeName.toLowerCase()),i&&"html"!==i&&"#comment"!==i?n("xml"===t.firstChild.nodeName.toLowerCase()?t.firstChild.nextSibling:t.firstChild):{errorCode:"unexpected.error"}}function n(e){var t,i;if(e.children)t=e.children;else{t=[];for(var o=0,s=e.childNodes.length;s>o;o++)null===e.childNodes[o].nodeValue&&t.push(e.childNodes[o])}if(0===t.length&&1===e.childNodes.length)return e.childNodes[0].nodeValue;if(t.length>1&&t[0].nodeName===t[1].nodeName){i=[];for(var o=0,s=t.length;s>o;o++)i[o]=n(t[o])}else{i={};for(var o=0,s=t.length;s>o;o++)i[t[o].nodeName]=n(t[o])}return i}var o=function(n,o,s){this.name=_.uniqueId("uploadTarget"),s&&(this.timeout=s);var r=t.createTemplate("ajaxUploadTemplate");r||(r=t.createTemplateFromText("<iframe class='hidden' name='{{name}}'></iframe>")),this.iframe=e(r({name:this.name})),e(n).append(this.iframe).attr("target",this.name),function(e,t){e.iframe.load(function(){if(e.isTimeout())t({errorCode:"error.timeout"});else if(jQuery(this.contentWindow.document).text())try{t(i(this.contentWindow.document))}catch(n){t({errorCode:"error.invalid.response"})}e.stopTimeoutLookup()})}(this,o),this.parceXmlDocToObject=i};return o.prototype.startTimeoutLookup=function(e){if(this.timeout){var t=1e3,i=0,n=function(){i+=t,i>=this.timeout&&(this.stopTimeoutLookup(),e({errorCode:"error.timeout"}))};this._intervalId=setInterval(_.bind(n,this),t)}},o.prototype.stopTimeoutLookup=function(){this.timeout&&(clearInterval(this._intervalId),this._intervalId=-1)},o.prototype.isTimeout=function(){return-1===this._intervalId},o}(jQuery,jaspersoft.components.templateEngine),define("components.ajaxuploader",["namespace","jquery","underscore","components.templateengine"],function(e){return function(){var t;return t||e.jaspersoft.components.AjaxUploader}}(this)),jaspersoft.components.utils=function(e,t,i,n,o){var s=navigator.userAgent.toLowerCase().indexOf("msie")>-1;return{LOADING_DIALOG_DELAY:800,isElementInDom:function(e){var t=e.nextSibling,i=e.parentNode&&11!==e.parentNode.nodeType;return t||i},setInnerHtml:function(e,i,n){var o,r,a;if(this.isElementInDom(e)&&(o=e.nextSibling,r=e.parentNode,a=e.style.display,e.style.display="none",r.removeChild(e)),e.innerHTML="",s&&"SELECT"==e.tagName){var l=document.createDocumentFragment();t.each(n.data,function(e){var i=document.createElement("OPTION");i.value=t.isUndefined(e.value)?e.id:e.value,i.innerHTML=e.label,e.selected&&i.setAttribute("selected","selected"),l.appendChild(i)}),e.appendChild(l)}else e.innerHTML=i(n);if(o?r.insertBefore(e,o):r.appendChild(e),e.style.display=a,s&&"SELECT"==e.tagName){var c=e.getAttribute("style");e.removeAttribute("style"),e.setAttribute("style",c)}},wait:function(t){return e.Deferred(function(e){setTimeout(e.resolve,t)})},showLoadingDialogOn:function(i,s,r){this.wait(s?s:this.LOADING_DIALOG_DELAY).then(t.bind(function(){"pending"==i.state()&&(n.popup.show($(o.LOADING_ID),r),e.when(i).always(t.bind(function(){this.wait(500).then(function(){n.popup.hide($(o.LOADING_ID))
})},this)))},this))},createTimer:function(t){var i=new e.Deferred;return i.done(function(e){var i=(new Date).getTime(),n=i-e;console.log(t+" took time: "+n+" msec.")}),{start:function(){return this.startTime=(new Date).getTime(),this},stop:function(){return i.resolve(this.startTime),this}}}}}(jQuery,_,Mustache,dialogs,ajax),define("components.utils",["jquery","underscore","mustache","components.dialogs","core.ajax"],function(e){return function(){var t;return t||e.jaspersoft.components.utils}}(this)),jaspersoft.components.StateView=function(e,t,i,n,o){return i.View.extend({initialize:function(){t.bindAll(this),this.model&&(this.model.on("change:phase",this.handleStateChanges),this.model.on("error:server",this.handleError))},handleStateChanges:function(e,t){t===o.INPROGRESS?this.handleInprogressPhase(e):t===o.READY?this.dialogDfd.resolve():t===o.FAILED&&this.dialogDfd.resolve()},handleInprogressPhase:function(e){e.previous("phase")===o.NOT_STARTED&&(this.dialogDfd=this.createDeferredDialog())},createDeferredDialog:function(){var t=new e.Deferred;return n.showLoadingDialogOn(t,500,!0),t},handleError:function(){this.dialogDfd&&this.dialogDfd.resolve()}})}(jQuery,_,Backbone,jaspersoft.components.utils,jaspersoft.components.State),define("components.stateview",["namespace","jquery","underscore","components.utils","components.state"],function(e){return function(){var t;return t||e.jaspersoft.components.StateView}}(this)),JRS.Import.ExtendedFormView=function(e,t,i,n,o,s,r){return n.View.extend({events:{"change #importOptions input[type='checkbox']":"setValue","change #importDataFile input[type='file']":"validateFile","click #importDataFile .checkBox label":"clickOnCheckbox","click #importButton":"performImport"},initialize:function(){i.bindAll(this),this.mainTemplateId="importMainTemplate",this.footerTemplateId="importFooterTemplate"},render:function(i){var n=s.createTemplate(this.mainTemplateId),o=s.createTemplate(this.footerTemplateId),a=n(this.model.attributes),l=o();return i&&i.container?(this.undelegateEvents(),this.$el=t(i.container),this.el=this.$el[0],this.$el.find(".body").append(a),this.$el.find(".footer").prepend(l),this.delegateEvents()):t(this.el).html(a+l),this.form=this.$el.find("form")[0],this.uploader=new r(this.form,this.setResponseData,e.configs.TIMEOUT),this},changeEnabledState:function(e,t){var i=e.parents(".checkBox").next();i.length&&i.first().find('input[type="checkbox"]').attr("disabled",t)},clickOnCheckbox:function(e){var i=t(e.target).next();i[0].disabled||(i[0].checked=!i[0].checked,i.trigger("change"))},setValue:function(e){var i=t(e.target),n=i[0].checked;this.model.set(i[0].id,n),this.changeEnabledState(i,!n)},validateFile:function(e){var i=t(e.target);/\.zip$/.test(i.val())?(this.$el.find("#importButton").attr("disabled",!1),this.valid=!0,i.parent().removeClass("error")):(this.$el.find("#importButton").attr("disabled",!0),i.parent().addClass("error"),this.valid=!1)},performImport:function(){this.isValid()&&(new(n.Model.extend({url:"rest_v2/import"}))).fetch({success:i.bind(function(){this.model.get("state").reset(),this.model.get("state").set({phase:o.INPROGRESS}),this.form.submit(),this.uploader.startTimeoutLookup(this.setResponseData)},this),error:this.model.defaultErrorDelegator})},setResponseData:function(t){t.errorCode&&(t.phase=o.FAILED,e.i18n[t.errorCode]&&(t.message=e.i18n[t.errorCode]));var i=this.model.get("state");i.reset(),i.set(t)},isValid:function(){return this.valid}})}(JRS.Import,jQuery,_,Backbone,jaspersoft.components.State,jaspersoft.components.templateEngine,jaspersoft.components.AjaxUploader),define("import.extendedformview",["jquery","underscore","import","backbone","components.templateengine","components.state","components.ajaxuploader","components.stateview"],function(e){return function(){var t;return t||e.JRS.Import.ExtendedFormView}}(this)),jaspersoft.components.AuthorityModel=function(e,t,i,n){return i.Model.extend({defaults:{items:[]},url:function(){return n.renderUrl(this.urlTemplate,this.context,!0)},parse:function(e){return{items:e?e.role?e.role:e.user:[]}},defaultErrorHandler:function(t,i){var n;try{n=e.parseJSON(i.responseText)}catch(o){n=null}this.trigger("error:server",i.status,n,t)},setContext:function(e){this.context=e,this.fetch({error:t.bind(this.defaultErrorHandler,this)})}},{instance:function(e,t){var i=new this;return i.urlTemplate=e,t&&i.setContext(t),i}})}(jQuery,_,Backbone,jaspersoft.components.templateEngine),define("components.authoritymodel",["namespace","jquery","underscore","backbone","components.templateengine"],function(e){return function(){var t;return t||e.jaspersoft.components.AuthorityModel}}(this)),jaspersoft.components.AuthorityPickerView=function(e,t,i,n){function o(e,t,i){return i<=Math.max(e,t)&&i>=Math.min(e,t)}return i.View.extend({events:{"click .button.search":"search","click .button.searchClear":"clear","keydown input[type=text]":"keyHandler","mousedown li":"selectionStarted","mouseenter li":"mouseEntered","mouseleave li":"mouseLeave","mouseup ul":"selectionFinished","mouseenter ul":"stopScroll","mouseleave ul":"startScroll"},cursor:-1,baseCursor:-1,selecting:!1,scrollSpeed:30,initialize:function(e){this.mainTemplateId="authorityPickerTemplate",this.optionsTemplateId="authorityPickerOptions",this.model.on("change",t.bind(this.renderList,this)),this.model.on("error:server",t.bind(function(){this.trigger("error:server",arguments)},this)),this.upHandler=t.bind(function(e){this.stopScroll(e),this.selecting=!1},this),this.el=!1,this.initOptions=e},render:function(){return this.mainTemplate||(this.mainTemplate=n.createTemplate(this.mainTemplateId)),this.optionsTemplate||(this.optionsTemplate=n.createTemplate(this.optionsTemplateId)),this.el||(this.$el=e("<div/>").html(this.mainTemplate(this.initOptions)).children(),this.el=this.$el[0],this.subEl=this.$el.find(".authorityPicker ul"),this.delegateEvents()),this.model.setContext(),this},renderList:function(){return this.subEl.html(this.optionsTemplate(this.model.attributes)).find("li").each(function(t,i){e(i).attr("index",t)}),this.cursor=-1,this.baseCursor=-1,this.scrollSpeed=this.subEl.find("li:eq(0)").height(),this.subEl.scrollTop(0),this.trigger("change:selection",[]),this},getSelected:function(){return t.reduce(this.subEl.find(".selected"),function(i,n){return i.push(t.pluck(e(n).find("span"),"innerHTML").join("|")),i},[])},search:function(){var e=this.$el.find("input[type=text]").val();this.model.setContext({searchString:e}),e?this.$el.find(".button.searchClear").addClass("up"):this.$el.find(".button.searchClear").removeClass("up")},clear:function(){this.$el.find("input[type=text]").val(""),this.search()},keyHandler:function(e){13===e.which&&this.search()},setDisabled:function(e){e?(this.subEl.addClass("disabled"),this.undelegateEvents()):(this.subEl.removeClass("disabled"),this.delegateEvents()),this.$el.find("input[type=text]").attr("disabled",e)},highlightSet:function(i){this.subEl.find("li").each(function(n,o){o=e(o),o.toggleClass("highlighted",t.contains(i,t.pluck(o.find("span"),"innerHTML").join("|")))})},selectAll:function(t){this.subEl.find("li").each(function(t,i){e(i).addClass("selected")}),t||this.trigger("change:selection",this.getSelected())},selectNone:function(t){this.subEl.find("li").each(function(t,i){e(i).removeClass("selected")}),t||this.trigger("change:selection",this.getSelected())},selectInverse:function(t){this.subEl.find("li").each(function(t,i){e(i).toggleClass("selected")}),t||this.trigger("change:selection",this.getSelected())},selectItem:function(e,t){this.subEl.find("li[index="+e+"]").addClass("selected"),t||this.trigger("change:selection",this.getSelected())},unSelectItem:function(e,t){this.subEl.find("li[index="+e+"]").removeClass("selected"),t||this.trigger("change:selection",this.getSelected())},selectRange:function(t,i,n){var o=Math.min(t,i),s=Math.max(t,i);this.subEl.find("li:lt("+(s+1)+")").each(function(t,i){t>=o&&e(i).addClass("selected")}),n||this.trigger("change:selection",this.getSelected())},selectionStarted:function(t){this.selecting=!0,t.ctrlKey||t.metaKey||this.selectNone(!0);var i=+e(t.target).parents("li").toggleClass("selected").attr("index");t.shiftKey?-1!=this.cursor&&this.selectRange(this.cursor,i,!0):(this.cursor=i,this.baseCursor=this.cursor)},mouseEntered:function(t){this.selecting&&(this.cursor=+e(t.target).parents("li").addClass("selected").attr("index"))},mouseLeave:function(t){if(this.selecting){var i=e(t.target).parents("li"),n=e(t.relatedTarget).parents("li");o(this.cursor,this.baseCursor,+n.attr("index"))&&i.removeClass("selected")}},selectionFinished:function(){this.selecting=!1,this.trigger("change:selection",this.getSelected())},startScroll:function(i){if(this.selecting){if(e(i.relatedTarget).hasClass("upper"))this.direction=-1;else{if(!e(i.relatedTarget).hasClass("lower"))return void(this.selecting=!1);this.direction=1}e(document.body).on("mouseup",this.upHandler),this.scrollTimer=setInterval(t.bind(this.scrollList,this),200)}},stopScroll:function(){this.selecting&&(clearInterval(this.scrollTimer),this.direction=0,e(document.body).off("mouseup",this.upHandler))},scrollList:function(){this.subEl.scrollTop(+this.subEl.scrollTop()+this.scrollSpeed*this.direction),o(this.cursor,this.baseCursor,this.cursor+this.direction)?this.unSelectItem(this.cursor,!0):this.selectItem(this.cursor+this.direction,!0),this.cursor=this.cursor+this.direction}})}(jQuery,_,Backbone,jaspersoft.components.templateEngine),define("components.authoritypickerview",["namespace","jquery","underscore","backbone","components.templateengine"],function(e){return function(){var t;return t||e.jaspersoft.components.AuthorityPickerView}}(this)),JRS.Export.ExtendedFormView=function(e,t,i,n,o,s,r){var a=navigator.userAgent.toLowerCase().indexOf("msie")>-1;return n.View.extend({events:{"keyup #exportDataFile #filenameId":"editFileName","change #exportOptions #everything":"exportEverything","change #exportOptions #includeSystemProperties":"includeSystemProperties","change #exportOptions #roleUsers":"includeRolesByUsers","change #exportOptions #usersRoles":"includeUsersWithRoles","change #exportOptions #noUsersRoles":"includeSelectedRolesUsersOnly","change #exportOptions #includeAccessEvents":"includeAccessEvents","change #exportOptions #includeAuditEvents":"includeAuditEvents","change #exportOptions #includeMonitoringEvents ":"includeMonitoringEvents","click #exportOptions .checkBox label":"clickOnCheckbox","click #exportButton":"sendParameters"},initialize:function(){i.bindAll(this),this.rolesList=new r({model:s.instance("rest_v2/roles{{#searchString}}?search={{{searchString}}}{{/searchString}}"),customClass:"selectedRoles",title:e.i18n["export.select.roles"]}),this.rolesList.on("change:selection",this.bindWithRoles),this.rolesList.render(),this.usersList=new r({model:s.instance("rest_v2/users{{#searchString}}?search={{{searchString}}}{{/searchString}}"),customClass:"select selectedUsers",title:e.i18n["export.select.users"]}),this.usersList.on("change:selection",this.bindWithUsers),this.usersList.render(),this.rolesToUsers=s.instance("rest_v2/users?hasAllRequiredRoles=false{{#roles}}&requiredRole={{{.}}}{{/roles}}"),this.rolesToUsers.on("change",this.onRolesToUsersChange),this.usersToRoles=s.instance("rest_v2/roles?hasAllUsers=false{{#users}}&user={{{.}}}{{/users}}"),this.usersToRoles.on("change",this.onUsersToRolesChange),this.fileTemplate=o.createTemplate("exportDataFileTemplate"),this.optionsTemplate=o.createTemplate("exportOptionsTemplates"),this.controlsTemplate=o.createTemplate("controlButtonsTemplate"),this.model.on("change",this.onModelChange)},render:function(e){var i=this.fileTemplate({defaultFileName:this.model.get("fileName")}),n=this.optionsTemplate({everything:this.model.get("everything"),includeSystemProperties:this.model.get("includeSystemProperties"),userForRoles:this.model.get("userForRoles"),rolesForUser:this.model.get("rolesForUser"),includeAccessEvents:this.model.get("includeAccessEvents"),includeAuditEvents:this.model.get("includeAuditEvents")}),o=this.controlsTemplate();return e&&e.container?(this.undelegateEvents(),this.$el=t(e.container),this.el=this.$el[0],this.$el.find(".body").append(i+n),this.$el.find(".footer").prepend(o),this.delegateEvents()):this.$el.html(i+n+o),this.$el.find("#selectRolesUsers").append(this.rolesList.el).append(this.usersList.el),a&&this.$el.find("#exportDataFile #filenameId").on("propertychange input",this.editFileName),this.changeEnabledState(this.model.get("everything")),this},bindWithRoles:function(e){this.model.set({roles:e}),this.onUsersToRolesChange(),e.length?this.rolesToUsers.setContext({roles:e}):this.rolesToUsers.set({items:[]})},bindWithUsers:function(e){this.model.set({users:e}),this.onRolesToUsersChange(),e.length?this.usersToRoles.setContext({users:e}):this.usersToRoles.set({items:[]})},changeEnabledState:function(e){this.rolesList.setDisabled(e||this.model.get("rolesForUser")),this.usersList.setDisabled(e||this.model.get("userForRoles")),this.$el.find("#roleUsers").prop("disabled",e),this.$el.find("#usersRoles").prop("disabled",e),this.$el.find("#noUsersRoles").prop("disabled",e),this.$el.find("#includeAccessEvents").prop("disabled",!e).prop("checked",this.model.get("includeAccessEvents"))},editFileName:function(e){var i=t(e.target),n=this.$el.find("#exportButton").prop("disabled",!1);i.parent().removeClass("error"),this.model.once("invalid",function(e,t){i.next().html(t),i.parent().addClass("error"),n.prop("disabled",!0)}),this.model.set("fileName",i.val(),{validate:!0})},exportEverything:function(e){var i=t(e.target).is(":checked");this.model.set({everything:i}),this.changeEnabledState(i),i&&(this.rolesList.selectNone(),this.usersList.selectNone())},includeSystemProperties:function(e){var i=t(e.target).is(":checked");this.model.set({includeSystemProperties:i})},includeRolesByUsers:function(e){var i=t(e.target).is(":checked");this.model.set({rolesForUser:!i,userForRoles:i}),this.onRolesToUsersChange(),this.rolesList.setDisabled(!i),this.usersList.setDisabled(i),this.rolesList.selectNone(),this.usersList.selectNone()},includeUsersWithRoles:function(e){var i=t(e.target).is(":checked");this.model.set({rolesForUser:i,userForRoles:!i}),this.onUsersToRolesChange(),this.rolesList.setDisabled(i),this.usersList.setDisabled(!i),this.rolesList.selectNone(),this.usersList.selectNone()},includeSelectedRolesUsersOnly:function(e){t(e.target).is(":checked")&&(this.model.set({userForRoles:!1,rolesForUser:!1}),this.onRolesToUsersChange(),this.onUsersToRolesChange(),this.rolesList.setDisabled(!1),this.usersList.setDisabled(!1),this.rolesList.selectNone(),this.usersList.selectNone())},includeAccessEvents:function(e){var i=t(e.target).is(":checked");this.model.set({includeAccessEvents:i})},includeAuditEvents:function(e){var i=t(e.target).is(":checked");this.model.set({includeAuditEvents:i})},includeMonitoringEvents:function(e){var i=t(e.target).is(":checked");this.model.set({includeMonitoringEvents:i})},sendParameters:function(){this.model.isValid()&&this.model.isAcceptable()&&this.isValid()&&this.model.save()},clickOnCheckbox:function(e){var i=t(e.target).next();i[0].disabled||(i[0].checked=!i[0].checked,i.trigger("change"))},isValid:function(){return!this.$el.find("fieldset .error").length},onModelChange:function(){var e=this.$el.find("#exportButton");e.prop("disabled",!(this.model.isAcceptable()&&this.isValid()))},onRolesToUsersChange:function(){this.model.get("userForRoles")?(this.usersList.highlightSet(i.map(this.rolesToUsers.get("items"),function(e){return e.username+(e.tenantId?"|"+e.tenantId:"")})),this.rolesList.highlightSet([])):this.usersList.highlightSet([])},onUsersToRolesChange:function(){this.model.get("rolesForUser")?(this.rolesList.highlightSet(i.map(this.usersToRoles.get("items"),function(e){return e.name+(e.tenantId?"|"+e.tenantId:"")})),this.usersList.highlightSet([])):this.rolesList.highlightSet([])}})}(JRS.Export,jQuery,_,Backbone,jaspersoft.components.templateEngine,jaspersoft.components.AuthorityModel,jaspersoft.components.AuthorityPickerView,jaspersoft.components.State),define("export.extendedformview",["jquery","underscore","backbone","components.templateengine","components.authoritymodel","components.authoritypickerview","components.state"],function(e){return function(){var t;return t||e.JRS.Export.ExtendedFormView}}(this)),JRS.Export.ShortFormView=function(e,t,i,n,o){var s=navigator.userAgent.toLowerCase().indexOf("msie")>-1;return n.View.extend({events:{"input input[type='text']":"editFileName","change input[type='checkbox']":"setValue","click .checkBox label":"clickOnCheckbox","click #exportButton":"sendParameters"},initialize:function(){i.bindAll(this),this.model.set({everything:!1}),this.fileTemplateId="exportDataFileTemplate",this.optionsTemplateId="exportOptionsTemplatesShort",this.controlsTemplateId="controlButtonsTemplate",this.fileTemplate=o.createTemplate(this.fileTemplateId),this.optionsTemplate=o.createTemplate(this.optionsTemplateId),this.controlsTemplate=o.createTemplate(this.controlsTemplateId)},render:function(e){var i=this.fileTemplate({defaultFileName:this.model.get("fileName")}),n=this.optionsTemplate({includeReportJobs:this.model.get("includeReportJobs"),includeRepositoryPermissions:this.model.get("includeRepositoryPermissions")}),o=this.controlsTemplate();return e&&e.container?(this.undelegateEvents(),this.$el=t(e.container),this.el=this.$el[0],this.$el.find(".body").append(i+n),this.$el.find(".footer").prepend(o),this.delegateEvents()):this.$el.html(i+n+o),s&&this.$el.find("input[type='text']").on("propertychange input",this.editFileName),this},setValue:function(e){var i=t(e.target)[0],n={};n[i.id]=i.checked,this.model.set(n)},editFileName:function(e){var i=t(e.target);i.parent().removeClass("error");var n=this.$el.find("#exportButton").prop("disabled",!1);this.model.once("invalid",function(e,t){i.next().html(t),i.parent().addClass("error"),n.prop("disabled",!0)}),this.model.set("fileName",i.val(),{validate:!0})},sendParameters:function(){this.model.isValid()&&this.isValid()&&this.model.save()},clickOnCheckbox:function(e){var i=t(e.target).next();i[0].disabled||(i[0].checked=!i[0].checked,i.trigger("change"))},isValid:function(){return!this.$el.find(".error").length},prepareToShow:function(){this.$el.find("input[type='text']").val(this.model.defaults.fileName).parent().removeClass("error"),this.$el.find("#exportButton").prop("disabled",!1),this.$el.find("#includeReportJobs").prop("disabled",!this.model.get("includeReportJobs")).prop("checked",!!this.model.get("includeReportJobs")),this.model.set({fileName:this.model.defaults.fileName})}})}(JRS.Export,jQuery,_,Backbone,jaspersoft.components.templateEngine),define("export.shortformview",["jquery","underscore","backbone","components.templateengine","components.state"],function(e){return function(){var t;return t||e.JRS.Export.ShortFormView}}(this)),define("repository.main",["require","!domReady","namespace","export","component.repository.search","jrs.configs","components.list","underscore","localContext","json2","backbone","csrf.guard","components.dependent.dialog","components.toolbar","components.tooltip","tools.infiniteScroll","mng.common","export.app","import.extendedformview","export.extendedformview","export.shortformview"],function(e){"use strict";var t=e("!domReady"),i=e("namespace"),n=e("export"),o=e("component.repository.search"),s=e("jrs.configs"),r=e("components.list"),a=e("underscore"),l=e("localContext");e("json2"),e("backbone"),e("csrf.guard"),e("components.dependent.dialog"),e("components.toolbar"),e("components.tooltip"),e("tools.infiniteScroll"),e("mng.common"),e("export.app"),e("import.extendedformview"),e("export.extendedformview"),e("export.shortformview"),t(function(){a.extend(o.messages,s.repositorySearch.i18n),a.extend(r.messages,s.dynamicList.i18n),a.extend(l,s.repositorySearch.localContext),a.extend(i.i18n,s.Export.i18n),n.App.initialize(s.Export.initParams),o.initialize(l)})}),define("results.page",["require","commons.main","repository.main"],function(e){e("commons.main"),e("repository.main")});