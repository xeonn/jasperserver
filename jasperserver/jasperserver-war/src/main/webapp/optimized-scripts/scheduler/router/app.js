define("scheduler/router/app",["backbone"],function(t){return t.Router.extend({routes:{"*url":"defaultRoute"},initialize:function(t){this.app=t,this.route(/^list\/([^@]*)?[@@]?.*$/,"list"),this.route(/^edit\/([^@]*)@?(.*)?$/,"edit"),this.route(/^create\/([^\$@]*)\$?([^@\/]*)?@?([^@]*)?[@@]?.*$/,"create"),this.on("all",function(){this.save(location.hash.substr(1))})},list:function(t){t=decodeURI(t),this.app.list.show(t)},edit:function(t,e){this.app.editor.edit(t,e)},create:function(t,e,i){t=decodeURI(t),this.app.editor.create(t,i,e)},navigate:function(e){this.save(e),t.Router.prototype.navigate.apply(this,arguments)},save:function(t){try{window.localStorage&&localStorage.setItem("scheduler-last-url",t)}catch(e){window.console&&console.log(e)}},defaultRoute:function(t){if(!t&&window.localStorage&&(t=localStorage.getItem("scheduler-last-url")))return this.navigate(t,!0);var e;(e=location.search.match(/\?reportUnitURI=(.*)/))&&(location.hash="list"+e[1]),this.app.current&&this.app.current.$el.addClass("hidden")}})});