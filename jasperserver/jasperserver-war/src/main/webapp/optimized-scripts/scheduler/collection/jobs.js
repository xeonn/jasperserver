define("scheduler/collection/jobs",["require","underscore","backbone","jrs.configs","scheduler/model/job"],function(e){var r=e("underscore"),o=e("backbone"),n=e("jrs.configs"),t=e("scheduler/model/job");return o.Collection.extend({url:n.contextPath+"/rest_v2/jobs",model:t,parse:function(e){return e?e.jobsummary:[]},fetch:function(e,o){var t=this,s=0,c=[],i=[e],u=n.contextPath+"/rest_v2/reports"+e+"/options";n.isProVersion?t.request({url:u},function(e,o){if(!e&&(o=o.reportOptionsSummary))for(var n=0,u=o.length;u>n;n++)o[n].uri&&i.push(o[n].uri);r.each(i,function(e){t.request({url:t.url+"?reportUnitURI="+e},function(e,r){return s++,e?t.trigger("error",e):(c=c.concat(t.parse(r)),void(s===i.length&&t.reset(c)))})})}):t.request({url:t.url+"?reportUnitURI="+e},function(e,r){return e?t.trigger("error",e):void t.reset(t.parse(r))})},request:function(e,r){return e||(e={}),e.success=function(e,o){r(void 0,e)},e.error=function(e){r(e)},o.sync.call(this,"read",new o.Model,e)},permission:function(e,r){return o.sync.call(this,"read",new o.Model,{url:n.contextPath+"/rest_v2/resources/"+e.replace(/\/[^\/]+$/,""),headers:{Accept:"application/repository.folder+json"},type:"GET",success:function(e,o){"function"==typeof r&&r(void 0,e.permissionMask)},error:function(e){"function"==typeof r&&r(e)}})}})});