(function(){function e(n,r){function i(e){if(i[e]!==m)return i[e];var n;if("bug-string-char-index"==e)n="a"!="a"[0];else if("json"==e)n=i("json-stringify")&&i("json-parse");else{var t,o='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if("json-stringify"==e){var c=r.stringify,s="function"==typeof c&&w;if(s){(t=function(){return 1}).toJSON=t;try{s="0"===c(0)&&"0"===c(new a)&&'""'==c(new u)&&c(y)===m&&c(m)===m&&c()===m&&"1"===c(t)&&"[1]"==c([t])&&"[null]"==c([m])&&"null"==c(null)&&"[null,null,null]"==c([m,y,null])&&c({a:[t,!0,!1,null,"\x00\b\n\f\r	"]})==o&&"1"===c(null,t)&&"[\n 1,\n 2\n]"==c([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==c(new l(-864e13))&&'"+275760-09-13T00:00:00.000Z"'==c(new l(864e13))&&'"-000001-01-01T00:00:00.000Z"'==c(new l(-621987552e5))&&'"1969-12-31T23:59:59.999Z"'==c(new l(-1))}catch(f){s=!1}}n=s}if("json-parse"==e){var p=r.parse;if("function"==typeof p)try{if(0===p("0")&&!p(!1)){t=p(o);var g=5==t.a.length&&1===t.a[0];if(g){try{g=!p('"	"')}catch(f){}if(g)try{g=1!==p("01")}catch(f){}if(g)try{g=1!==p("1.")}catch(f){}}}}catch(f){g=!1}n=g}}return i[e]=!!n}n||(n=o.Object()),r||(r=o.Object());var a=n.Number||o.Number,u=n.String||o.String,c=n.Object||o.Object,l=n.Date||o.Date,s=n.SyntaxError||o.SyntaxError,f=n.TypeError||o.TypeError,p=n.Math||o.Math,g=n.JSON||o.JSON;"object"==typeof g&&g&&(r.stringify=g.stringify,r.parse=g.parse);var d,h,m,v=c.prototype,y=v.toString,w=new l(-0xc782b5b800cec);try{w=-109252==w.getUTCFullYear()&&0===w.getUTCMonth()&&1===w.getUTCDate()&&10==w.getUTCHours()&&37==w.getUTCMinutes()&&6==w.getUTCSeconds()&&708==w.getUTCMilliseconds()}catch(b){}if(!i("json")){var _="[object Function]",x="[object Date]",k="[object Number]",O="[object String]",E="[object Array]",S="[object Boolean]",j=i("bug-string-char-index");if(!w)var T=p.floor,C=[0,31,59,90,120,151,181,212,243,273,304,334],R=function(e,n){return C[n]+365*(e-1970)+T((e-1969+(n=+(n>1)))/4)-T((e-1901+n)/100)+T((e-1601+n)/400)};if((d=v.hasOwnProperty)||(d=function(e){var n,t={};return(t.__proto__=null,t.__proto__={toString:1},t).toString!=y?d=function(e){var n=this.__proto__,t=e in(this.__proto__=null,this);return this.__proto__=n,t}:(n=t.constructor,d=function(e){var t=(this.constructor||n).prototype;return e in this&&!(e in t&&this[e]===t[e])}),t=null,d.call(this,e)}),h=function(e,n){var r,o,i,a=0;(r=function(){this.valueOf=0}).prototype.valueOf=0,o=new r;for(i in o)d.call(o,i)&&a++;return r=o=null,a?h=2==a?function(e,n){var t,r={},o=y.call(e)==_;for(t in e)o&&"prototype"==t||d.call(r,t)||!(r[t]=1)||!d.call(e,t)||n(t)}:function(e,n){var t,r,o=y.call(e)==_;for(t in e)o&&"prototype"==t||!d.call(e,t)||(r="constructor"===t)||n(t);(r||d.call(e,t="constructor"))&&n(t)}:(o=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],h=function(e,n){var r,i,a=y.call(e)==_,u=!a&&"function"!=typeof e.constructor&&t[typeof e.hasOwnProperty]&&e.hasOwnProperty||d;for(r in e)a&&"prototype"==r||!u.call(e,r)||n(r);for(i=o.length;r=o[--i];u.call(e,r)&&n(r));}),h(e,n)},!i("json-stringify")){var M={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},A="000000",N=function(e,n){return(A+(n||0)).slice(-e)},L="\\u00",D=function(e){for(var n='"',t=0,r=e.length,o=!j||r>10,i=o&&(j?e.split(""):e);r>t;t++){var a=e.charCodeAt(t);switch(a){case 8:case 9:case 10:case 12:case 13:case 34:case 92:n+=M[a];break;default:if(32>a){n+=L+N(2,a.toString(16));break}n+=o?i[t]:e.charAt(t)}}return n+'"'},F=function(e,n,t,r,o,i,a){var u,c,l,s,p,g,v,w,b,_,j,C,M,A,L,P;try{u=n[e]}catch(I){}if("object"==typeof u&&u)if(c=y.call(u),c!=x||d.call(u,"toJSON"))"function"==typeof u.toJSON&&(c!=k&&c!=O&&c!=E||d.call(u,"toJSON"))&&(u=u.toJSON(e));else if(u>-1/0&&1/0>u){if(R){for(p=T(u/864e5),l=T(p/365.2425)+1970-1;R(l+1,0)<=p;l++);for(s=T((p-R(l,0))/30.42);R(l,s+1)<=p;s++);p=1+p-R(l,s),g=(u%864e5+864e5)%864e5,v=T(g/36e5)%24,w=T(g/6e4)%60,b=T(g/1e3)%60,_=g%1e3}else l=u.getUTCFullYear(),s=u.getUTCMonth(),p=u.getUTCDate(),v=u.getUTCHours(),w=u.getUTCMinutes(),b=u.getUTCSeconds(),_=u.getUTCMilliseconds();u=(0>=l||l>=1e4?(0>l?"-":"+")+N(6,0>l?-l:l):N(4,l))+"-"+N(2,s+1)+"-"+N(2,p)+"T"+N(2,v)+":"+N(2,w)+":"+N(2,b)+"."+N(3,_)+"Z"}else u=null;if(t&&(u=t.call(n,e,u)),null===u)return"null";if(c=y.call(u),c==S)return""+u;if(c==k)return u>-1/0&&1/0>u?""+u:"null";if(c==O)return D(""+u);if("object"==typeof u){for(A=a.length;A--;)if(a[A]===u)throw f();if(a.push(u),j=[],L=i,i+=o,c==E){for(M=0,A=u.length;A>M;M++)C=F(M,u,t,r,o,i,a),j.push(C===m?"null":C);P=j.length?o?"[\n"+i+j.join(",\n"+i)+"\n"+L+"]":"["+j.join(",")+"]":"[]"}else h(r||u,function(e){var n=F(e,u,t,r,o,i,a);n!==m&&j.push(D(e)+":"+(o?" ":"")+n)}),P=j.length?o?"{\n"+i+j.join(",\n"+i)+"\n"+L+"}":"{"+j.join(",")+"}":"{}";return a.pop(),P}};r.stringify=function(e,n,r){var o,i,a,u;if(t[typeof n]&&n)if((u=y.call(n))==_)i=n;else if(u==E){a={};for(var c,l=0,s=n.length;s>l;c=n[l++],u=y.call(c),(u==O||u==k)&&(a[c]=1));}if(r)if((u=y.call(r))==k){if((r-=r%1)>0)for(o="",r>10&&(r=10);o.length<r;o+=" ");}else u==O&&(o=r.length<=10?r:r.slice(0,10));return F("",(c={},c[""]=e,c),i,a,o,"",[])}}if(!i("json-parse")){var P,I,U=u.fromCharCode,$={92:"\\",34:'"',47:"/",98:"\b",116:"	",110:"\n",102:"\f",114:"\r"},H=function(){throw P=I=null,s()},q=function(){for(var e,n,t,r,o,i=I,a=i.length;a>P;)switch(o=i.charCodeAt(P)){case 9:case 10:case 13:case 32:P++;break;case 123:case 125:case 91:case 93:case 58:case 44:return e=j?i.charAt(P):i[P],P++,e;case 34:for(e="@",P++;a>P;)if(o=i.charCodeAt(P),32>o)H();else if(92==o)switch(o=i.charCodeAt(++P)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:e+=$[o],P++;break;case 117:for(n=++P,t=P+4;t>P;P++)o=i.charCodeAt(P),o>=48&&57>=o||o>=97&&102>=o||o>=65&&70>=o||H();e+=U("0x"+i.slice(n,P));break;default:H()}else{if(34==o)break;for(o=i.charCodeAt(P),n=P;o>=32&&92!=o&&34!=o;)o=i.charCodeAt(++P);e+=i.slice(n,P)}if(34==i.charCodeAt(P))return P++,e;H();default:if(n=P,45==o&&(r=!0,o=i.charCodeAt(++P)),o>=48&&57>=o){for(48==o&&(o=i.charCodeAt(P+1),o>=48&&57>=o)&&H(),r=!1;a>P&&(o=i.charCodeAt(P),o>=48&&57>=o);P++);if(46==i.charCodeAt(P)){for(t=++P;a>t&&(o=i.charCodeAt(t),o>=48&&57>=o);t++);t==P&&H(),P=t}if(o=i.charCodeAt(P),101==o||69==o){for(o=i.charCodeAt(++P),(43==o||45==o)&&P++,t=P;a>t&&(o=i.charCodeAt(t),o>=48&&57>=o);t++);t==P&&H(),P=t}return+i.slice(n,P)}if(r&&H(),"true"==i.slice(P,P+4))return P+=4,!0;if("false"==i.slice(P,P+5))return P+=5,!1;if("null"==i.slice(P,P+4))return P+=4,null;H()}return"$"},B=function(e){var n,t;if("$"==e&&H(),"string"==typeof e){if("@"==(j?e.charAt(0):e[0]))return e.slice(1);if("["==e){for(n=[];e=q(),"]"!=e;t||(t=!0))t&&(","==e?(e=q(),"]"==e&&H()):H()),","==e&&H(),n.push(B(e));return n}if("{"==e){for(n={};e=q(),"}"!=e;t||(t=!0))t&&(","==e?(e=q(),"}"==e&&H()):H()),(","==e||"string"!=typeof e||"@"!=(j?e.charAt(0):e[0])||":"!=q())&&H(),n[e.slice(1)]=B(q());return n}H()}return e},z=function(e,n,t){var r=J(e,n,t);r===m?delete e[n]:e[n]=r},J=function(e,n,t){var r,o=e[n];if("object"==typeof o&&o)if(y.call(o)==E)for(r=o.length;r--;)z(o,r,t);else h(o,function(e){z(o,e,t)});return t.call(e,n,o)};r.parse=function(e,n){var t,r;return P=0,I=""+e,t=B(q()),"$"!=q()&&H(),P=I=null,n&&y.call(n)==_?J((r={},r[""]=t,r),"",n):t}}}return r.runInContext=e,r}var n="function"==typeof define&&define.amd,t={"function":!0,object:!0},r=t[typeof exports]&&exports&&!exports.nodeType&&exports,o=t[typeof window]&&window||this,i=r&&t[typeof module]&&module&&!module.nodeType&&"object"==typeof global&&global;if(!i||i.global!==i&&i.window!==i&&i.self!==i||(o=i),r&&!n)e(o,r);else{var a=o.JSON,u=o.JSON3,c=!1,l=e(o,o.JSON3={noConflict:function(){return c||(c=!0,o.JSON=a,o.JSON3=u,a=u=null),l}});o.JSON={parse:l.parse,stringify:l.stringify}}n&&define("json3",[],function(){return l})}).call(this),function(){function e(e,n,t){for(var r=(t||0)-1,o=e?e.length:0;++r<o;)if(e[r]===n)return r;return-1}function n(e,n){for(var t=e.criteria,r=n.criteria,o=-1,i=t.length;++o<i;){var a=t[o],u=r[o];if(a!==u){if(a>u||"undefined"==typeof a)return 1;if(u>a||"undefined"==typeof u)return-1}}return e.index-n.index}function t(e){return"\\"+Nn[e]}function r(){return gn.pop()||[]}function o(e){e.length=0,gn.length<vn&&gn.push(e)}function i(e,n,t){n||(n=0),"undefined"==typeof t&&(t=e?e.length:0);for(var r=-1,o=t-n||0,i=Array(0>o?0:o);++r<o;)i[r]=e[n+r];return i}function a(e){return e instanceof a?e:new u(e)}function u(e,n){this.__chain__=!!n,this.__wrapped__=e}function c(e){function n(){if(r){var e=i(r);Vn.apply(e,arguments)}if(this instanceof n){var a=s(t.prototype),u=t.apply(a,e||arguments);return H(u)?u:a}return t.apply(o,e||arguments)}var t=e[0],r=e[2],o=e[4];return n}function l(e,n,t,a,u){if(t){var c=t(e);if("undefined"!=typeof c)return c}var s=H(e);if(!s)return e;var f=qn.call(e);if(!Mn[f])return e;var p=ot[f];switch(f){case On:case En:return new p(+e);case jn:case Rn:return new p(e);case Cn:return c=p(e.source,yn.exec(e)),c.lastIndex=e.lastIndex,c}var g=at(e);if(n){var d=!a;a||(a=r()),u||(u=r());for(var h=a.length;h--;)if(a[h]==e)return u[h];c=g?p(e.length):{}}else c=g?i(e):j({},e);return g&&(Wn.call(e,"index")&&(c.index=e.index),Wn.call(e,"input")&&(c.input=e.input)),n?(a.push(e),u.push(c),(g?oe:dt)(e,function(e,r){c[r]=l(e,n,t,a,u)}),d&&(o(a),o(u)),c):c}function s(e,n){return H(e)?Zn(e):{}}function f(e,n,t){if("function"!=typeof e)return Qe;if("undefined"==typeof n||!("prototype"in e))return e;switch(t){case 1:return function(t){return e.call(n,t)};case 2:return function(t,r){return e.call(n,t,r)};case 3:return function(t,r,o){return e.call(n,t,r,o)};case 4:return function(t,r,o,i){return e.call(n,t,r,o,i)}}return Ie(e,n)}function p(e){function n(){var e=l?u:this;if(o){var m=i(o);Vn.apply(m,arguments)}if((a||g)&&(m||(m=i(arguments)),a&&Vn.apply(m,a),g&&m.length<c))return r|=16,p([t,d?r:-4&r,m,null,u,c]);if(m||(m=arguments),f&&(t=e[h]),this instanceof n){e=s(t.prototype);var v=t.apply(e,m);return H(v)?v:e}return t.apply(e,m)}var t=e[0],r=e[1],o=e[2],a=e[3],u=e[4],c=e[5],l=1&r,f=2&r,g=4&r,d=8&r,h=t;return n}function g(e,n){for(var t=-1,r=x(),o=e?e.length:0,i=[];++t<o;){var a=e[t];r(n,a)<0&&i.push(a)}return i}function d(e,n,t,r){for(var o=(r||0)-1,i=e?e.length:0,a=[];++o<i;){var u=e[o];if(u&&"object"==typeof u&&"number"==typeof u.length&&(at(u)||S(u))){n||(u=d(u,n,t));var c=-1,l=u.length,s=a.length;for(a.length+=l;++c<l;)a[s++]=u[c]}else t||a.push(u)}return a}function h(e,n,t,r){if(e===n)return 0!==e||1/e==1/n;var o=typeof e,i=typeof n;if(!(e!==e||e&&An[o]||n&&An[i]))return!1;if(null==e||null==n)return e===n;var u=qn.call(e),c=qn.call(n);if(u!=c)return!1;switch(u){case On:case En:return+e==+n;case jn:return e!=+e?n!=+n:0==e?1/e==1/n:e==+n;case Cn:case Rn:return e==String(n)}var l=u==kn;if(!l){var s=e instanceof a,f=n instanceof a;if(s||f)return h(s?e.__wrapped__:e,f?n.__wrapped__:n,t,r);if(u!=Tn)return!1;var p=e.constructor,g=n.constructor;if(p!=g&&!($(p)&&p instanceof p&&$(g)&&g instanceof g)&&"constructor"in e&&"constructor"in n)return!1}t||(t=[]),r||(r=[]);for(var d=t.length;d--;)if(t[d]==e)return r[d]==n;var m=!0,v=0;if(t.push(e),r.push(n),l){if(v=n.length,m=v==e.length)for(;v--&&(m=h(e[v],n[v],t,r)););}else gt(n,function(n,o,i){return Wn.call(i,o)?(v++,!(m=Wn.call(e,o)&&h(e[o],n,t,r))&&hn):void 0}),m&&gt(e,function(e,n,t){return Wn.call(t,n)?!(m=--v>-1)&&hn:void 0});return t.pop(),r.pop(),m}function m(e,n,t,r,o){(at(n)?oe:dt)(n,function(n,i){var a,u,c=n,l=e[i];if(n&&((u=at(n))||ht(n))){for(var s=r.length;s--;)if(a=r[s]==n){l=o[s];break}if(!a){var f;t&&(c=t(l,n),(f="undefined"!=typeof c)&&(l=c)),f||(l=u?at(l)?l:[]:ht(l)?l:{}),r.push(n),o.push(l),f||m(l,n,t,r,o)}}else t&&(c=t(l,n),"undefined"==typeof c&&(c=n)),"undefined"!=typeof c&&(l=c);e[i]=l})}function v(e,n){return e+Jn(rt()*(n-e+1))}function y(e,n,t){for(var r=-1,o=x(),i=e?e.length:0,a=[],u=t?[]:a;++r<i;){var c=e[r],l=t?t(c,r,e):c;(n?!r||u[u.length-1]!==l:o(u,l)<0)&&(t&&u.push(l),a.push(c))}return a}function w(e){return function(n,t,r){var o={};t=Ge(t,r,3);var i=-1,a=n?n.length:0;if("number"==typeof a)for(;++i<a;){var u=n[i];e(o,u,t(u,i,n),n)}else dt(n,function(n,r,i){e(o,n,t(n,r,i),i)});return o}}function b(e,n,t,r,o,i){var a=2&n,u=16&n,l=32&n;if(!a&&!$(e))throw new TypeError;u&&!t.length&&(n&=-17,u=t=!1),l&&!r.length&&(n&=-33,l=r=!1);var s=1==n||17===n?c:p;return s([e,n,t,r,o,i])}function _(e){return lt[e]}function x(){var n=(n=a.indexOf)===Oe?e:n;return n}function k(e){return"function"==typeof e&&Bn.test(e)}function O(e){var n,t;return e&&qn.call(e)==Tn&&(n=e.constructor,!$(n)||n instanceof n)?(gt(e,function(e,n){t=n}),"undefined"==typeof t||Wn.call(e,t)):hn}function E(e){return st[e]}function S(e){return e&&"object"==typeof e&&"number"==typeof e.length&&qn.call(e)==xn||!1}function j(e){if(!e)return e;for(var n=1,t=arguments.length;t>n;n++){var r=arguments[n];if(r)for(var o in r)e[o]=r[o]}return e}function T(e,n,t,r){return"boolean"!=typeof n&&null!=n&&(r=t,t=n,n=!1),l(e,n,"function"==typeof t&&f(t,r,1))}function C(e,n,t){return l(e,!0,"function"==typeof n&&f(n,t,1))}function R(e){if(!e)return e;for(var n=1,t=arguments.length;t>n;n++){var r=arguments[n];if(r)for(var o in r)"undefined"==typeof e[o]&&(e[o]=r[o])}return e}function M(e){var n=[];return gt(e,function(e,t){$(e)&&n.push(t)}),n.sort()}function A(e,n){return e?Wn.call(e,n):!1}function N(e){for(var n=-1,t=ct(e),r=t.length,o={};++n<r;){var i=t[n];o[e[i]]=i}return o}function L(e){return e===!0||e===!1||e&&"object"==typeof e&&qn.call(e)==On||!1}function D(e){return e&&"object"==typeof e&&qn.call(e)==En||!1}function F(e){return e&&1===e.nodeType||!1}function P(e){if(!e)return!0;if(at(e)||X(e))return!e.length;for(var n in e)if(Wn.call(e,n))return!1;return!0}function I(e,n){return h(e,n)}function U(e){return Yn(e)&&!Kn(parseFloat(e))}function $(e){return"function"==typeof e}function H(e){return!(!e||!An[typeof e])}function q(e){return z(e)&&e!=+e}function B(e){return null===e}function z(e){return"number"==typeof e||e&&"object"==typeof e&&qn.call(e)==jn||!1}function J(e){return e&&An[typeof e]&&qn.call(e)==Cn||!1}function X(e){return"string"==typeof e||e&&"object"==typeof e&&qn.call(e)==Rn||!1}function W(e){return"undefined"==typeof e}function V(e){var n=arguments,t=2;if(!H(e))return e;if("number"!=typeof n[2]&&(t=n.length),t>3&&"function"==typeof n[t-2])var a=f(n[--t-1],n[t--],2);else t>2&&"function"==typeof n[t-1]&&(a=n[--t]);for(var u=i(arguments,1,t),c=-1,l=r(),s=r();++c<t;)m(e,u[c],a,l,s);return o(l),o(s),e}function G(e){var n=[];gt(e,function(e,t){n.push(t)}),n=g(n,d(arguments,!0,!1,1));for(var t=-1,r=n.length,o={};++t<r;){var i=n[t];o[i]=e[i]}return o}function Z(e){for(var n=-1,t=ct(e),r=t.length,o=Array(r);++n<r;){var i=t[n];o[n]=[i,e[i]]}return o}function Q(e){for(var n=-1,t=d(arguments,!0,!1,1),r=t.length,o={};++n<r;){var i=t[n];i in e&&(o[i]=e[i])}return o}function Y(e){for(var n=-1,t=ct(e),r=t.length,o=Array(r);++n<r;)o[n]=e[t[n]];return o}function K(e,n){var t=x(),r=e?e.length:0,o=!1;return r&&"number"==typeof r?o=t(e,n)>-1:dt(e,function(e){return(o=e===n)&&hn}),o}function ee(e,n,t){var r=!0;n=Ge(n,t,3);var o=-1,i=e?e.length:0;if("number"==typeof i)for(;++o<i&&(r=!!n(e[o],o,e)););else dt(e,function(e,t,o){return!(r=!!n(e,t,o))&&hn});return r}function ne(e,n,t){var r=[];n=Ge(n,t,3);var o=-1,i=e?e.length:0;if("number"==typeof i)for(;++o<i;){var a=e[o];n(a,o,e)&&r.push(a)}else dt(e,function(e,t,o){n(e,t,o)&&r.push(e)});return r}function te(e,n,t){n=Ge(n,t,3);var r=-1,o=e?e.length:0;if("number"!=typeof o){var i;return dt(e,function(e,t,r){return n(e,t,r)?(i=e,hn):void 0}),i}for(;++r<o;){var a=e[r];if(n(a,r,e))return a}}function re(e,n){return we(e,n,!0)}function oe(e,n,t){var r=-1,o=e?e.length:0;if(n=n&&"undefined"==typeof t?n:f(n,t,3),"number"==typeof o)for(;++r<o&&n(e[r],r,e)!==hn;);else dt(e,n)}function ie(e,n){var t=e?e.length:0;if("number"==typeof t)for(;t--&&n(e[t],t,e)!==!1;);else{var r=ct(e);t=r.length,dt(e,function(e,o,i){return o=r?r[--t]:--t,n(i[o],o,i)===!1&&hn})}}function ae(e,n){var t=i(arguments,2),r=-1,o="function"==typeof n,a=e?e.length:0,u=Array("number"==typeof a?a:0);return oe(e,function(e){u[++r]=(o?n:e[n]).apply(e,t)}),u}function ue(e,n,t){var r=-1,o=e?e.length:0;if(n=Ge(n,t,3),"number"==typeof o)for(var i=Array(o);++r<o;)i[r]=n(e[r],r,e);else i=[],dt(e,function(e,t,o){i[++r]=n(e,t,o)});return i}function ce(e,n,t){var r=-(1/0),o=r;"function"!=typeof n&&t&&t[n]===e&&(n=null);var i=-1,a=e?e.length:0;if(null==n&&"number"==typeof a)for(;++i<a;){var u=e[i];u>o&&(o=u)}else n=Ge(n,t,3),oe(e,function(e,t,i){var a=n(e,t,i);a>r&&(r=a,o=e)});return o}function le(e,n,t){var r=1/0,o=r;"function"!=typeof n&&t&&t[n]===e&&(n=null);var i=-1,a=e?e.length:0;if(null==n&&"number"==typeof a)for(;++i<a;){var u=e[i];o>u&&(o=u)}else n=Ge(n,t,3),oe(e,function(e,t,i){var a=n(e,t,i);r>a&&(r=a,o=e)});return o}function se(e,n,t,r){if(!e)return t;var o=arguments.length<3;n=Ge(n,r,4);var i=-1,a=e.length;if("number"==typeof a)for(o&&(t=e[++i]);++i<a;)t=n(t,e[i],i,e);else dt(e,function(e,r,i){t=o?(o=!1,e):n(t,e,r,i)});return t}function fe(e,n,t,r){var o=arguments.length<3;return n=Ge(n,r,4),ie(e,function(e,r,i){t=o?(o=!1,e):n(t,e,r,i)}),t}function pe(e,n,t){return n=Ge(n,t,3),ne(e,function(e,t,r){return!n(e,t,r)})}function ge(e,n,t){if(e&&"number"!=typeof e.length&&(e=Y(e)),null==n||t)return e?e[v(0,e.length-1)]:pn;var r=de(e);return r.length=tt(nt(0,n),r.length),r}function de(e){var n=-1,t=e?e.length:0,r=Array("number"==typeof t?t:0);return oe(e,function(e){var t=v(0,++n);r[n]=r[t],r[t]=e}),r}function he(e){var n=e?e.length:0;return"number"==typeof n?n:ct(e).length}function me(e,n,t){var r;n=Ge(n,t,3);var o=-1,i=e?e.length:0;if("number"==typeof i)for(;++o<i&&!(r=n(e[o],o,e)););else dt(e,function(e,t,o){return(r=n(e,t,o))&&hn});return!!r}function ve(e,t,r){var o=-1,i=e?e.length:0,a=Array("number"==typeof i?i:0);for(t=Ge(t,r,3),oe(e,function(e,n,r){a[++o]={criteria:[t(e,n,r)],index:o,value:e}}),i=a.length,a.sort(n);i--;)a[i]=a[i].value;return a}function ye(e){return at(e)?i(e):e&&"number"==typeof e.length?ue(e):Y(e)}function we(e,n,t){return t&&P(n)?pn:(t?te:ne)(e,n)}function be(e){for(var n=-1,t=e?e.length:0,r=[];++n<t;){var o=e[n];o&&r.push(o)}return r}function _e(e){return g(e,d(arguments,!0,!0,1))}function xe(e,n,t){var r=0,o=e?e.length:0;if("number"!=typeof n&&null!=n){var a=-1;for(n=Ge(n,t,3);++a<o&&n(e[a],a,e);)r++}else if(r=n,null==r||t)return e?e[0]:pn;return i(e,0,tt(nt(0,r),o))}function ke(e,n){return d(e,n)}function Oe(n,t,r){if("number"==typeof r){var o=n?n.length:0;r=0>r?nt(0,o+r):r||0}else if(r){var i=Me(n,t);return n[i]===t?i:-1}return e(n,t,r)}function Ee(e,n,t){var r=0,o=e?e.length:0;if("number"!=typeof n&&null!=n){var a=o;for(n=Ge(n,t,3);a--&&n(e[a],a,e);)r++}else r=null==n||t?1:n||r;return i(e,0,tt(nt(0,o-r),o))}function Se(){for(var e=[],n=-1,t=arguments.length;++n<t;){var r=arguments[n];(at(r)||S(r))&&e.push(r)}var o=e[0],i=-1,a=x(),u=o?o.length:0,c=[];e:for(;++i<u;)if(r=o[i],a(c,r)<0){for(var n=t;--n;)if(a(e[n],r)<0)continue e;c.push(r)}return c}function je(e,n,t){var r=0,o=e?e.length:0;if("number"!=typeof n&&null!=n){var a=o;for(n=Ge(n,t,3);a--&&n(e[a],a,e);)r++}else if(r=n,null==r||t)return e?e[o-1]:pn;return i(e,nt(0,o-r))}function Te(e,n,t){var r=e?e.length:0;for("number"==typeof t&&(r=(0>t?nt(0,r+t):tt(t,r-1))+1);r--;)if(e[r]===n)return r;return-1}function Ce(e,n,t){e=+e||0,t=+t||1,null==n&&(n=e,e=0);for(var r=-1,o=nt(0,zn((n-e)/t)),i=Array(o);++r<o;)i[r]=e,e+=t;return i}function Re(e,n,t){if("number"!=typeof n&&null!=n){var r=0,o=-1,a=e?e.length:0;for(n=Ge(n,t,3);++o<a&&n(e[o],o,e);)r++}else r=null==n||t?1:nt(0,n);return i(e,r)}function Me(e,n,t,r){var o=0,i=e?e.length:o;for(t=t?Ge(t,r,1):Qe,n=t(n);i>o;){var a=o+i>>>1;t(e[a])<n?o=a+1:i=a}return o}function Ae(){return y(d(arguments,!0,!0))}function Ne(e,n,t,r){return"boolean"!=typeof n&&null!=n&&(r=t,t="function"!=typeof n&&r&&r[n]===e?null:n,n=!1),null!=t&&(t=Ge(t,r,3)),y(e,n,t)}function Le(e){return g(e,i(arguments,1))}function De(){for(var e=-1,n=ce(wt(arguments,"length")),t=Array(0>n?0:n);++e<n;)t[e]=wt(arguments,e);return t}function Fe(e,n){var t=-1,r=e?e.length:0,o={};for(n||!r||at(e[0])||(n=[]);++t<r;){var i=e[t];n?o[i]=n[t]:i&&(o[i[0]]=i[1])}return o}function Pe(e,n){if(!$(n))throw new TypeError;return function(){return--e<1?n.apply(this,arguments):void 0}}function Ie(e,n){return arguments.length>2?b(e,17,i(arguments,2),null,n):b(e,1,null,null,n)}function Ue(e){for(var n=arguments.length>1?d(arguments,!0,!1,1):M(e),t=-1,r=n.length;++t<r;){var o=n[t];e[o]=b(e[o],1,null,null,e)}return e}function $e(){for(var e=arguments,n=e.length;n--;)if(!$(e[n]))throw new TypeError;return function(){for(var n=arguments,t=e.length;t--;)n=[e[t].apply(this,n)];return n[0]}}function He(e,n,t){var r,o,i,a,u,c,l,s=0,f=!1,p=!0;if(!$(e))throw new TypeError;if(n=nt(0,n)||0,t===!0){var g=!0;p=!1}else H(t)&&(g=t.leading,f="maxWait"in t&&(nt(n,t.maxWait)||0),p="trailing"in t?t.trailing:p);var d=function(){var t=n-(bt()-a);if(0>=t){o&&clearTimeout(o);var f=l;o=c=l=pn,f&&(s=bt(),i=e.apply(u,r),c||o||(r=u=null))}else c=setTimeout(d,t)},h=function(){c&&clearTimeout(c),o=c=l=pn,(p||f!==n)&&(s=bt(),i=e.apply(u,r),c||o||(r=u=null))};return function(){if(r=arguments,a=bt(),u=this,l=p&&(c||!g),f===!1)var t=g&&!c;else{o||g||(s=a);var m=f-(a-s),v=0>=m;v?(o&&(o=clearTimeout(o)),s=a,i=e.apply(u,r)):o||(o=setTimeout(h,m))}return v&&c?c=clearTimeout(c):c||n===f||(c=setTimeout(d,n)),t&&(v=!0,i=e.apply(u,r)),!v||c||o||(r=u=null),i}}function qe(e){if(!$(e))throw new TypeError;var n=i(arguments,1);return setTimeout(function(){e.apply(pn,n)},1)}function Be(e,n){if(!$(e))throw new TypeError;var t=i(arguments,2);return setTimeout(function(){e.apply(pn,t)},n)}function ze(e,n){var t={};return function(){var r=n?n.apply(this,arguments):mn+arguments[0];return Wn.call(t,r)?t[r]:t[r]=e.apply(this,arguments)}}function Je(e){var n,t;if(!$(e))throw new TypeError;return function(){return n?t:(n=!0,t=e.apply(this,arguments),e=null,t)}}function Xe(e){return b(e,16,i(arguments,1))}function We(e,n,t){var r=!0,o=!0;if(!$(e))throw new TypeError;return t===!1?r=!1:H(t)&&(r="leading"in t?t.leading:r,o="trailing"in t?t.trailing:o),t={},t.leading=r,t.maxWait=n,t.trailing=o,He(e,n,t)}function Ve(e,n){return b(n,16,[e])}function Ge(e,n,t){var r=typeof e;if(null==e||"function"==r)return f(e,n,t);if("object"!=r)return en(e);var o=ct(e);return function(n){for(var t=o.length,r=!1;t--&&(r=n[o[t]]===e[o[t]]););return r}}function Ze(e){return null==e?"":String(e).replace(pt,_)}function Qe(e){return e}function Ye(e){oe(M(e),function(n){var t=a[n]=e[n];a.prototype[n]=function(){var e=[this.__wrapped__];Vn.apply(e,arguments);var n=t.apply(a,e);return this.__chain__?new u(n,!0):n}})}function Ke(){return Ln._=Hn,this}function en(e){return function(n){return n[e]}}function nn(e,n){return null==e&&null==n&&(n=1),e=+e||0,null==n?(n=e,e=0):n=+n||0,e+Jn(rt()*(n-e+1))}function tn(e,n){if(e){var t=e[n];return $(t)?e[n]():t}}function rn(e,n,r){var o=a,i=o.templateSettings;e=String(e||""),r=R({},r,i);var u=0,c="__p += '",l=r.variable,s=RegExp((r.escape||bn).source+"|"+(r.interpolate||bn).source+"|"+(r.evaluate||bn).source+"|$","g");e.replace(s,function(n,r,o,i,a){return c+=e.slice(u,a).replace(_n,t),r&&(c+="' +\n_.escape("+r+") +\n'"),i&&(c+="';\n"+i+";\n__p += '"),o&&(c+="' +\n((__t = ("+o+")) == null ? '' : __t) +\n'"),u=a+n.length,n}),c+="';\n",l||(l="obj",c="with ("+l+" || {}) {\n"+c+"\n}\n"),c="function("+l+") {\nvar __t, __p = '', __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n"+c+"return __p\n}";try{var f=Function("_","return "+c)(o)}catch(p){throw p.source=c,p}return n?f(n):(f.source=c,f)}function on(e,n,t){e=(e=+e)>-1?e:0;var r=-1,o=Array(e);for(n=f(n,t,1);++r<e;)o[r]=n(r);return o}function an(e){return null==e?"":String(e).replace(ft,E)}function un(e){var n=++dn+"";return e?e+n:n}function cn(e){return e=new u(e),e.__chain__=!0,e}function ln(e,n){return n(e),e}function sn(){return this.__chain__=!0,this}function fn(){return this.__wrapped__}var pn,gn=[],dn=0,hn={},mn=+new Date+"",vn=40,yn=/\w*$/,wn=/<%=([\s\S]+?)%>/g,bn=/($^)/,_n=/['\n\r\t\u2028\u2029\\]/g,xn="[object Arguments]",kn="[object Array]",On="[object Boolean]",En="[object Date]",Sn="[object Function]",jn="[object Number]",Tn="[object Object]",Cn="[object RegExp]",Rn="[object String]",Mn={};Mn[Sn]=!1,Mn[xn]=Mn[kn]=Mn[On]=Mn[En]=Mn[jn]=Mn[Tn]=Mn[Cn]=Mn[Rn]=!0;var An={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1},Nn={"\\":"\\","'":"'","\n":"n","\r":"r","	":"t","\u2028":"u2028","\u2029":"u2029"},Ln=An[typeof window]&&window||this,Dn=An[typeof exports]&&exports&&!exports.nodeType&&exports,Fn=An[typeof module]&&module&&!module.nodeType&&module,Pn=Fn&&Fn.exports===Dn&&Dn,In=An[typeof global]&&global;!In||In.global!==In&&In.window!==In||(Ln=In);var Un=[],$n=Object.prototype,Hn=Ln._,qn=$n.toString,Bn=RegExp("^"+String(qn).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$"),zn=Math.ceil,Jn=Math.floor,Xn=k(Xn=Object.getPrototypeOf)&&Xn,Wn=$n.hasOwnProperty,Vn=Un.push,Gn=$n.propertyIsEnumerable,Zn=k(Zn=Object.create)&&Zn,Qn=k(Qn=Array.isArray)&&Qn,Yn=Ln.isFinite,Kn=Ln.isNaN,et=k(et=Object.keys)&&et,nt=Math.max,tt=Math.min,rt=Math.random,ot={};ot[kn]=Array,ot[On]=Boolean,ot[En]=Date,ot[Sn]=Function,ot[Tn]=Object,ot[jn]=Number,ot[Cn]=RegExp,ot[Rn]=String,u.prototype=a.prototype;var it={};!function(){var e={0:1,length:1};it.spliceObjects=(Un.splice.call(e,0,1),!e[0])}(1),a.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:wn,variable:""},Zn||(s=function(){function e(){}return function(n){if(H(n)){e.prototype=n;var t=new e;e.prototype=null}return t||Ln.Object()}}()),S(arguments)||(S=function(e){return e&&"object"==typeof e&&"number"==typeof e.length&&Wn.call(e,"callee")&&!Gn.call(e,"callee")||!1});var at=Qn||function(e){return e&&"object"==typeof e&&"number"==typeof e.length&&qn.call(e)==kn||!1},ut=function(e){var n,t=e,r=[];if(!t)return r;if(!An[typeof e])return r;for(n in t)Wn.call(t,n)&&r.push(n);return r},ct=et?function(e){return H(e)?et(e):[]}:ut,lt={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"},st=N(lt),ft=RegExp("("+ct(st).join("|")+")","g"),pt=RegExp("["+ct(lt).join("")+"]","g"),gt=function(e,n){var t,r=e,o=r;if(!r)return o;if(!An[typeof r])return o;for(t in r)if(n(r[t],t,e)===hn)return o;return o},dt=function(e,n){var t,r=e,o=r;if(!r)return o;if(!An[typeof r])return o;for(t in r)if(Wn.call(r,t)&&n(r[t],t,e)===hn)return o;return o};$(/x/)&&($=function(e){return"function"==typeof e&&qn.call(e)==Sn});var ht=Xn?function(e){if(!e||qn.call(e)!=Tn)return!1;var n=e.valueOf,t=k(n)&&(t=Xn(n))&&Xn(t);return t?e==t||Xn(e)==t:O(e)}:O,mt=w(function(e,n,t){Wn.call(e,t)?e[t]++:e[t]=1}),vt=w(function(e,n,t){(Wn.call(e,t)?e[t]:e[t]=[]).push(n)}),yt=w(function(e,n,t){e[t]=n}),wt=ue,bt=k(bt=Date.now)&&bt||function(){return(new Date).getTime()};a.after=Pe,a.bind=Ie,a.bindAll=Ue,a.chain=cn,a.compact=be,a.compose=$e,a.countBy=mt,a.debounce=He,a.defaults=R,a.defer=qe,a.delay=Be,a.difference=_e,a.filter=ne,a.flatten=ke,a.forEach=oe,a.functions=M,a.groupBy=vt,a.indexBy=yt,a.initial=Ee,a.intersection=Se,a.invert=N,a.invoke=ae,a.keys=ct,a.map=ue,a.max=ce,a.memoize=ze,a.merge=V,a.min=le,a.omit=G,a.once=Je,a.pairs=Z,a.partial=Xe,a.pick=Q,a.pluck=wt,a.range=Ce,a.reject=pe,a.rest=Re,a.shuffle=de,a.sortBy=ve,a.tap=ln,a.throttle=We,a.times=on,a.toArray=ye,a.union=Ae,a.uniq=Ne,a.values=Y,a.where=we,a.without=Le,a.wrap=Ve,a.zip=De,a.collect=ue,a.drop=Re,a.each=oe,a.extend=j,a.methods=M,a.object=Fe,a.select=ne,a.tail=Re,a.unique=Ne,a.clone=T,a.cloneDeep=C,a.contains=K,a.escape=Ze,a.every=ee,a.find=te,a.has=A,a.identity=Qe,a.indexOf=Oe,a.isArguments=S,a.isArray=at,a.isBoolean=L,a.isDate=D,a.isElement=F,a.isEmpty=P,a.isEqual=I,a.isFinite=U,a.isFunction=$,a.isNaN=q,a.isNull=B,a.isNumber=z,a.isObject=H,a.isRegExp=J,a.isString=X,a.isUndefined=W,a.lastIndexOf=Te,a.mixin=Ye,a.noConflict=Ke,a.random=nn,a.reduce=se,a.reduceRight=fe,a.result=tn,a.size=he,a.some=me,a.sortedIndex=Me,a.template=rn,a.unescape=an,a.uniqueId=un,a.all=ee,a.any=me,a.detect=te,a.findWhere=re,a.foldl=se,a.foldr=fe,a.include=K,a.inject=se,a.first=xe,a.last=je,a.sample=ge,a.take=xe,a.head=xe,Ye(a),a.VERSION="2.4.1",a.prototype.chain=sn,a.prototype.value=fn,oe(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var n=Un[e];a.prototype[e]=function(){var e=this.__wrapped__;return n.apply(e,arguments),it.spliceObjects||0!==e.length||delete e[0],this}}),oe(["concat","join","slice"],function(e){var n=Un[e];a.prototype[e]=function(){var e=this.__wrapped__,t=n.apply(e,arguments);return this.__chain__&&(t=new u(t),t.__chain__=!0),t}}),"function"==typeof define&&"object"==typeof define.amd&&define.amd?(Ln._=a,define("lodash.custom",[],function(){return a})):Dn&&Fn?Pn?(Fn.exports=a)._=a:Dn._=a:Ln._=a}.call(this),define("common/util/xssUtil",["require"],function(e){var n="a,abbr,acronym,address,area,article,aside,b,bdi,bdo,big,blockquote,body,br,caption,center,center,cite,code,col,colgroup,dd,details,dfn,div,dl,dt,em,fieldset,font,footer,form,h1,h2,h3,h4,h5,h6,head,header,hr,html,i,iframe,img,input,label,legend,li,main,map,mark,menu,menuitem,meta,nav,ol,option,p,pre,section,select,small,span,strike,strong,sub,summary,sup,table,tbody,td,textarea,th,thead,title,tr,u,ul,!--",t={"(":"&#40;",")":"&#41;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},r=function(e){return null==e?"":e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")},o=function(e){var n=[];for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.push(r(t));return n},i=function(){var e,n={"&#111;":"o","&#110;":"n","&amp;":"&"};for(e in t)Object.prototype.hasOwnProperty.call(t,e)&&(n[t[e]]=e);return n}(),a="(?:"+o(t).join("|")+")",u=RegExp(a),c=RegExp(a,"g"),l="(?:\\)|\\()",s=RegExp(l),f=RegExp(l,"g"),p="\\b='(.*?)'",g=RegExp(p),d=RegExp(p,"g"),h='\\b="(.*?)"',m=RegExp(h),v=RegExp(h,"g"),y="<(?!/|"+n.replace(/,/g,"|")+")",w=RegExp(y,"i"),b=RegExp(y,"ig"),_="</(?!"+n.replace(/,/g,"|")+")",x=RegExp(_,"i"),k=RegExp(_,"ig"),O="\\bjavascript:",E=RegExp(O,"i"),S=RegExp(O,"ig"),j="\\bon(\\w+?)=",T=RegExp(j,"i"),C=RegExp(j,"ig"),R=function(e,n){if(e=null==e?"":e,n=n||{},!("string"==typeof e||e instanceof String))return e;if(n.softHTMLEscape){if(e=s.test(e)?e.replace(f,function(e){return t[e]}):e,e=g.test(e)?e.replace(d,"=`$1`").replace(/'/g,"&#39;").replace(/\b=`(.*?)`/g,"='$1'"):e.replace(/'/g,"&#39;"),e=m.test(e)?e.replace(v,"=`$1`").replace(/"/g,"&quot;").replace(/\b=`(.*?)`/g,'="$1"'):e.replace(/"/g,"&quot;"),n.whiteList&&n.whiteList instanceof Array&&n.whiteList.length>0){var r="<(?!/|"+n.whiteList.join("|")+")",o=RegExp(r,"i"),i=RegExp(r,"ig");e=o.test(e)?e.replace(i,"&lt;"):e;var a="</(?!"+n.whiteList.join("|")+")",l=RegExp(a,"i"),p=RegExp(a,"ig");e=l.test(e)?e.replace(p,"&lt;/"):e}else e=w.test(e)?e.replace(b,"&lt;"):e,e=x.test(e)?e.replace(k,"&lt;/"):e;e=E.test(e)?e.replace(S,""):e,e=T.test(e)?e.replace(C,"&#111;&#110;$1="):e}else e=u.test(e)?e.replace(c,function(e){return t[e]}):e;return e},M="(?:"+o(i).join("|")+")",A=RegExp(M,"i"),N=RegExp(M,"ig"),L=function(e){return e=null==e?"":e,("string"==typeof e||e instanceof String)&&A.test(e)?e.replace(N,function(e){return i[e]}):e};return xssUtil={escape:R,unescape:L,noConflict:function(){}},xssUtil}),!function(e,n){"use strict";var t=n.prototype.trim,r=n.prototype.trimRight,o=n.prototype.trimLeft,i=function(e){return 1*e||0},a=function(e,n){if(1>n)return"";for(var t="";n>0;)1&n&&(t+=e),n>>=1,e+=e;return t},u=[].slice,c=function(e){return null==e?"\\s":e.source?e.source:"["+g.escapeRegExp(e)+"]"},l={lt:"<",gt:">",quot:'"',apos:"'",amp:"&"},s={};for(var f in l)s[l[f]]=f;var p=function(){function e(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()}var t=a,r=function(){return r.cache.hasOwnProperty(arguments[0])||(r.cache[arguments[0]]=r.parse(arguments[0])),r.format.call(null,r.cache[arguments[0]],arguments)};return r.format=function(r,o){var i,a,u,c,l,s,f,g=1,d=r.length,h="",m=[];for(a=0;d>a;a++)if(h=e(r[a]),
"string"===h)m.push(r[a]);else if("array"===h){if(c=r[a],c[2])for(i=o[g],u=0;u<c[2].length;u++){if(!i.hasOwnProperty(c[2][u]))throw new Error(p('[_.sprintf] property "%s" does not exist',c[2][u]));i=i[c[2][u]]}else i=c[1]?o[c[1]]:o[g++];if(/[^s]/.test(c[8])&&"number"!=e(i))throw new Error(p("[_.sprintf] expecting number but found %s",e(i)));switch(c[8]){case"b":i=i.toString(2);break;case"c":i=n.fromCharCode(i);break;case"d":i=parseInt(i,10);break;case"e":i=c[7]?i.toExponential(c[7]):i.toExponential();break;case"f":i=c[7]?parseFloat(i).toFixed(c[7]):parseFloat(i);break;case"o":i=i.toString(8);break;case"s":i=(i=n(i))&&c[7]?i.substring(0,c[7]):i;break;case"u":i=Math.abs(i);break;case"x":i=i.toString(16);break;case"X":i=i.toString(16).toUpperCase()}i=/[def]/.test(c[8])&&c[3]&&i>=0?"+"+i:i,s=c[4]?"0"==c[4]?"0":c[4].charAt(1):" ",f=c[6]-n(i).length,l=c[6]?t(s,f):"",m.push(c[5]?i+l:l+i)}return m.join("")},r.cache={},r.parse=function(e){for(var n=e,t=[],r=[],o=0;n;){if(null!==(t=/^[^\x25]+/.exec(n)))r.push(t[0]);else if(null!==(t=/^\x25{2}/.exec(n)))r.push("%");else{if(null===(t=/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(n)))throw new Error("[_.sprintf] huh?");if(t[2]){o|=1;var i=[],a=t[2],u=[];if(null===(u=/^([a-z_][a-z_\d]*)/i.exec(a)))throw new Error("[_.sprintf] huh?");for(i.push(u[1]);""!==(a=a.substring(u[0].length));)if(null!==(u=/^\.([a-z_][a-z_\d]*)/i.exec(a)))i.push(u[1]);else{if(null===(u=/^\[(\d+)\]/.exec(a)))throw new Error("[_.sprintf] huh?");i.push(u[1])}t[2]=i}else o|=2;if(3===o)throw new Error("[_.sprintf] mixing positional and named placeholders is not (yet) supported");r.push(t)}n=n.substring(t[0].length)}return r},r}(),g={VERSION:"2.3.0",isBlank:function(e){return null==e&&(e=""),/^\s*$/.test(e)},stripTags:function(e){return null==e?"":n(e).replace(/<\/?[^>]+>/g,"")},capitalize:function(e){return e=null==e?"":n(e),e.charAt(0).toUpperCase()+e.slice(1)},chop:function(e,t){return null==e?[]:(e=n(e),t=~~t,t>0?e.match(new RegExp(".{1,"+t+"}","g")):[e])},clean:function(e){return g.strip(e).replace(/\s+/g," ")},count:function(e,t){return null==e||null==t?0:n(e).split(t).length-1},chars:function(e){return null==e?[]:n(e).split("")},swapCase:function(e){return null==e?"":n(e).replace(/\S/g,function(e){return e===e.toUpperCase()?e.toLowerCase():e.toUpperCase()})},escapeHTML:function(e){return null==e?"":n(e).replace(/[&<>"']/g,function(e){return"&"+s[e]+";"})},unescapeHTML:function(e){return null==e?"":n(e).replace(/\&([^;]+);/g,function(e,t){var r;return t in l?l[t]:(r=t.match(/^#x([\da-fA-F]+)$/))?n.fromCharCode(parseInt(r[1],16)):(r=t.match(/^#(\d+)$/))?n.fromCharCode(~~r[1]):e})},escapeRegExp:function(e){return null==e?"":n(e).replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")},splice:function(e,n,t,r){var o=g.chars(e);return o.splice(~~n,~~t,r),o.join("")},insert:function(e,n,t){return g.splice(e,n,0,t)},include:function(e,t){return""===t?!0:null==e?!1:-1!==n(e).indexOf(t)},join:function(){var e=u.call(arguments),n=e.shift();return null==n&&(n=""),e.join(n)},lines:function(e){return null==e?[]:n(e).split("\n")},reverse:function(e){return g.chars(e).reverse().join("")},startsWith:function(e,t){return""===t?!0:null==e||null==t?!1:(e=n(e),t=n(t),e.length>=t.length&&e.slice(0,t.length)===t)},endsWith:function(e,t){return""===t?!0:null==e||null==t?!1:(e=n(e),t=n(t),e.length>=t.length&&e.slice(e.length-t.length)===t)},succ:function(e){return null==e?"":(e=n(e),e.slice(0,-1)+n.fromCharCode(e.charCodeAt(e.length-1)+1))},titleize:function(e){return null==e?"":n(e).replace(/(?:^|\s)\S/g,function(e){return e.toUpperCase()})},camelize:function(e){return g.trim(e).replace(/[-_\s]+(.)?/g,function(e,n){return n.toUpperCase()})},underscored:function(e){return g.trim(e).replace(/([a-z\d])([A-Z]+)/g,"$1_$2").replace(/[-\s]+/g,"_").toLowerCase()},dasherize:function(e){return g.trim(e).replace(/([A-Z])/g,"-$1").replace(/[-_\s]+/g,"-").toLowerCase()},classify:function(e){return g.titleize(n(e).replace(/_/g," ")).replace(/\s/g,"")},humanize:function(e){return g.capitalize(g.underscored(e).replace(/_id$/,"").replace(/_/g," "))},trim:function(e,r){return null==e?"":!r&&t?t.call(e):(r=c(r),n(e).replace(new RegExp("^"+r+"+|"+r+"+$","g"),""))},ltrim:function(e,t){return null==e?"":!t&&o?o.call(e):(t=c(t),n(e).replace(new RegExp("^"+t+"+"),""))},rtrim:function(e,t){return null==e?"":!t&&r?r.call(e):(t=c(t),n(e).replace(new RegExp(t+"+$"),""))},truncate:function(e,t,r){return null==e?"":(e=n(e),r=r||"...",t=~~t,e.length>t?e.slice(0,t)+r:e)},prune:function(e,t,r){if(null==e)return"";if(e=n(e),t=~~t,r=null!=r?n(r):"...",e.length<=t)return e;var o=function(e){return e.toUpperCase()!==e.toLowerCase()?"A":" "},i=e.slice(0,t+1).replace(/.(?=\W*\w*$)/g,o);return i=i.slice(i.length-2).match(/\w\w/)?i.replace(/\s*\S+$/,""):g.rtrim(i.slice(0,i.length-1)),(i+r).length>e.length?e:e.slice(0,i.length)+r},words:function(e,n){return g.isBlank(e)?[]:g.trim(e,n).split(n||/\s+/)},pad:function(e,t,r,o){e=null==e?"":n(e),t=~~t;var i=0;switch(r?r.length>1&&(r=r.charAt(0)):r=" ",o){case"right":return i=t-e.length,e+a(r,i);case"both":return i=t-e.length,a(r,Math.ceil(i/2))+e+a(r,Math.floor(i/2));default:return i=t-e.length,a(r,i)+e}},lpad:function(e,n,t){return g.pad(e,n,t)},rpad:function(e,n,t){return g.pad(e,n,t,"right")},lrpad:function(e,n,t){return g.pad(e,n,t,"both")},sprintf:p,vsprintf:function(e,n){return n.unshift(e),p.apply(null,n)},toNumber:function(e,t){if(null==e||""==e)return 0;e=n(e);var r=i(i(e).toFixed(~~t));return 0!==r||e.match(/^0+$/)?r:Number.NaN},numberFormat:function(e,n,t,r){if(isNaN(e)||null==e)return"";e=e.toFixed(~~n),r=r||",";var o=e.split("."),i=o[0],a=o[1]?(t||".")+o[1]:"";return i.replace(/(\d)(?=(?:\d{3})+$)/g,"$1"+r)+a},strRight:function(e,t){if(null==e)return"";e=n(e),t=null!=t?n(t):t;var r=t?e.indexOf(t):-1;return~r?e.slice(r+t.length,e.length):e},strRightBack:function(e,t){if(null==e)return"";e=n(e),t=null!=t?n(t):t;var r=t?e.lastIndexOf(t):-1;return~r?e.slice(r+t.length,e.length):e},strLeft:function(e,t){if(null==e)return"";e=n(e),t=null!=t?n(t):t;var r=t?e.indexOf(t):-1;return~r?e.slice(0,r):e},strLeftBack:function(e,n){if(null==e)return"";e+="",n=null!=n?""+n:n;var t=e.lastIndexOf(n);return~t?e.slice(0,t):e},toSentence:function(e,n,t,r){n=n||", ",t=t||" and ";var o=e.slice(),i=o.pop();return e.length>2&&r&&(t=g.rtrim(n)+t),o.length?o.join(n)+t+i:i},toSentenceSerial:function(){var e=u.call(arguments);return e[3]=!0,g.toSentence.apply(g,e)},slugify:function(e){if(null==e)return"";var t="ąàáäâãåæćęèéëêìíïîłńòóöôõøùúüûñçżź",r="aaaaaaaaceeeeeiiiilnoooooouuuunczz",o=new RegExp(c(t),"g");return e=n(e).toLowerCase().replace(o,function(e){var n=t.indexOf(e);return r.charAt(n)||"-"}),g.dasherize(e.replace(/[^\w\s-]/g,""))},surround:function(e,n){return[n,e,n].join("")},quote:function(e){return g.surround(e,'"')},exports:function(){var e={};for(var n in this)this.hasOwnProperty(n)&&!n.match(/^(?:include|contains|reverse)$/)&&(e[n]=this[n]);return e},repeat:function(e,t,r){if(null==e)return"";if(t=~~t,null==r)return a(n(e),t);for(var o=[];t>0;o[--t]=e);return o.join(r)},levenshtein:function(e,t){if(null==e&&null==t)return 0;if(null==e)return n(t).length;if(null==t)return n(e).length;e=n(e),t=n(t);for(var r,o,i=[],a=0;a<=t.length;a++)for(var u=0;u<=e.length;u++)o=a&&u?e.charAt(u-1)===t.charAt(a-1)?r:Math.min(i[u],i[u-1],r)+1:a+u,r=i[u],i[u]=o;return i.pop()}};g.strip=g.trim,g.lstrip=g.ltrim,g.rstrip=g.rtrim,g.center=g.lrpad,g.rjust=g.lpad,g.ljust=g.rpad,g.contains=g.include,g.q=g.quote,"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(module.exports=g),exports._s=g):"function"==typeof define&&define.amd?define("underscore.string",[],function(){return g}):(e._=e._||{},e._.string=e._.str=g)}(this,String),define("underscore",["require","lodash.custom","common/util/xssUtil","underscore.string"],function(e){"use strict";var n=e("lodash.custom"),t=e("common/util/xssUtil");n.str=e("underscore.string"),n.templateSettings={evaluate:/\{\{([\s\S]+?)\}\}/g,interpolate:/\{\{=([\s\S]+?)\}\}/g,escape:/\{\{-([\s\S]+?)\}\}/g},n.mixin(n.str.exports()),n.xssEscape=t.escape;var r=n.template;return n.template=function(e,t,o){var i=n.templateSettings,a=/($^)/;e=String(e||""),o=n.defaults({},o,i);var u=RegExp((o.escape||a).source+"|$","g");return e=e.replace(u,"{{ print(_.xssEscape($1)); }}"),r.call(n,e,t,o)},n}),function(e,n){"function"==typeof define&&define.amd?define("common/enum/loggingLevels",[],e):(n.logging||(n.logging={}),n.logging.loggingLevels=e())}(function(){return{DEBUG:100,INFO:200,WARN:300,ERROR:400}},this),function(e,n){"function"==typeof define&&define.amd?define("common/logging/Level",["common/enum/loggingLevels"],e):(n.logging||(n.logging={}),n.logging.Level=e(n.logging.loggingLevels))}(function(e){function n(e,n){this.level=e,this.name=n.toUpperCase()}n.prototype.isGreaterOrEqual=function(e){var t=(e instanceof n?e:n.getLevel(e)).level;return this.level>=t},n.prototype.toString=function(){return this.name},n.getLevel=function(e){return n[e.toUpperCase()]};for(var t in e)e.hasOwnProperty(t)&&(n[t]=new n(e[t],t));return n},this),function(e,n){"function"==typeof define&&define.amd?define("common/logging/LogItem",[],e):(n.logging||(n.logging={}),n.logging.LogItem=e())}(function(){"use strict";function e(e){var n,t=e.getHours().toString(),r=e.getMinutes().toString(),o=e.getSeconds().toString(),i=e.getMilliseconds();return 1==t.length&&(t="0"+t),1==r.length&&(r="0"+r),1==o.length&&(o="0"+o),n=t+":"+r+":"+o+"."+i}function n(e){for(var n in e)if(e.hasOwnProperty(n)){if("args"===n)for(var t=0,r=e[n].length;r>t;t++)e[n][t]instanceof Error&&(e[n][t]=e[n][t].message);this[n]=e[n]}}return n.prototype.toArray=function(){var n=[];return n.push(e(this.time)),n.push("["+this.id+"]"),"unknown"!==this.file&&n.push("["+this.file+":"+this.line+"]"),n.push("["+this.level.toString()+"] -"),n=n.concat(this.args)},n},this),function(e,n){"function"==typeof define&&define.amd?define("common/logging/Log",["common/logging/Level","common/logging/LogItem"],e):(n.logging||(n.logging={}),n.logging.Log=e(n.logging.Level,n.logging.LogItem))}(function(e,n){function t(n){return function(){return this._prepareLogItem({level:e.getLevel(n),args:arguments})}}function r(e,n){this._id=e.id,this._callback=n}return r.prototype._prepareLogItem=function(e){e.id=this._id,e.args=Array.prototype.slice.call(e.args,0),e.time=new Date;var t=(new Error).stack;if(t){var r=t.split("\n")[2],o=r.match(/\/(\w+\.\w+):(\d+)/i);o&&(e.file=o[1],e.line=o[2])}return e.file||(e.file="unknown",e.line="0"),e=new n(e),this._callback(e),e},r.prototype.debug=t("debug"),r.prototype.info=t("info"),r.prototype.warn=t("warn"),r.prototype.error=t("error"),r},this),function(e,n){"function"==typeof define&&define.amd?define("common/logging/appender/ConsoleAppender",[],e):(n.logging||(n.logging={}),n.logging.appender||(n.logging.appender={}),n.logging.appender.ConsoleAppender=e())}(function(){function e(){}return e.prototype.console=function(){if("undefined"==typeof console){var e=function(){};return{assert:e,clear:e,count:e,debug:e,dir:e,dirxml:e,error:e,group:e,groupCollapsed:e,groupEnd:e,info:e,log:e,markTimeline:e,profile:e,profileEnd:e,table:e,time:e,timeEnd:e,timeStamp:e,trace:e,warn:e}}return console}(),e.prototype.write=function(e){var n=this.console.log;switch(e.level.toString()){case"DEBUG":n=this.console.debug||this.console.log;break;case"INFO":n=this.console.info||this.console.log;break;case"WARN":n=this.console.warn;break;case"ERROR":n=this.console.error}try{n.apply(this.console,e.toArray())}catch(t){try{Function.prototype.apply.call(n,this.console,e.toArray())}catch(r){}}},e},this),function(e,n,t){"function"==typeof define&&define.amd?define("common/logging/LoggerManager",["underscore","common/logging/Log","common/logging/Level","common/logging/appender/ConsoleAppender"],e):(n.logging||(n.logging={}),n.logging.LoggerManager=e(t,n.logging.Log,n.logging.Level,n.logging.appender.ConsoleAppender))}(function(e,n,t,r){var o={console:r},i=function(e){this.initialize(e||{})};return e.extend(i.prototype,{defaults:function(){return{enabled:!1,level:"error",appenders:{},appenderInstances:{},loggers:{}}},initialize:function(n){this.attributes=e.defaults(n,this.defaults());var t={};e.each(o,function(e,n){t[n]=new e}),this.set("appenderInstances",t)},get:function(e){return this.attributes[e]},set:function(e,n){this.attributes[e]=n},register:function(t){var r={id:"root"};if("string"==typeof t&&""!==t?r.id=t:t&&t.hasOwnProperty("id")&&(r.id=t.id),!this.get("loggers").hasOwnProperty(r.id)){var o=this.get("loggers");o[r.id]=new n(r,e.bind(this._processLogItem,this)),this.set("loggers",o)}return this.get("loggers")[r.id]},disable:function(){this.set("enabled",!1)},enable:function(e){e&&this.set("level",t.getLevel(e)),this.set("enabled",!0)},setLevel:function(e){this.set("level",e)},_processLogItem:function(e){this.get("enabled")&&e.level.isGreaterOrEqual(this.get("level"))&&this._appendLogItem(e)},_appendLogItem:function(e){var n=this.get("appenders"),t=this.get("appenderInstances");for(var r in n)t.hasOwnProperty(n[r])&&t[n[r]].write(e)}}),i},this,this._),define("logger",["require","exports","module","common/logging/LoggerManager"],function(e,n,t){"use strict";var r=e("common/logging/LoggerManager"),o=t.config(),i=new r(o);return i}),function(e){"use strict";define("xdm",["json3","logger"],e)}(function(e,n){function t(e,n){var t=typeof e[n];return"function"==t||!("object"!=t||!e[n])||"unknown"==t}function r(e,n){return!("object"!=typeof e[n]||!e[n])}function o(e){return"[object Array]"===Object.prototype.toString.call(e)}function i(){var e="Shockwave Flash",n="application/x-shockwave-flash";if(!h(navigator.plugins)&&"object"==typeof navigator.plugins[e]){var t=navigator.plugins[e].description;t&&!h(navigator.mimeTypes)&&navigator.mimeTypes[n]&&navigator.mimeTypes[n].enabledPlugin&&(O=t.match(/\d+/g))}if(!O){var r;try{r=new ActiveXObject("ShockwaveFlash.ShockwaveFlash"),O=Array.prototype.slice.call(r.GetVariable("$version").match(/(\d+),(\d+),(\d+),(\d+)/),1),r=null}catch(o){}}if(!O)return!1;var i=parseInt(O[0],10),a=parseInt(O[1],10);return E=i>9&&a>0,!0}function a(){if(!B){B=!0,H("firing dom_onReady");for(var e=0;e<z.length;e++)z[e]();z.length=0}}function u(e,n){return B?void e.call(n):void z.push(function(){e.call(n)})}function c(){var e=parent;if(""!==F)for(var n=0,t=F.split(".");n<t.length;n++)e=e[t[n]];return e.easyXDM}function l(e){return H("Settings namespace to '"+e+"'"),window.easyXDM=I,F=e,F&&(U="easyXDM_"+F.replace(".","_")+"_"),P}function s(e){return e.match(N)[3]}function f(e){return e.match(N)[4]||""}function p(e){var n=e.toLowerCase().match(N),t=n[2],r=n[3],o=n[4]||"";return("http:"==t&&":80"==o||"https:"==t&&":443"==o)&&(o=""),t+"//"+r+o}function g(e){if(e=e.replace(D,"$1/"),!e.match(/^(http||https):\/\//)){var n="/"===e.substring(0,1)?"":location.pathname;"/"!==n.substring(n.length-1)&&(n=n.substring(0,n.lastIndexOf("/")+1)),e=location.protocol+"//"+location.host+n+e}for(;L.test(e);)e=e.replace(L,"");return H("resolved url '"+e+"'"),e}function d(e,n){var t="",r=e.indexOf("#");-1!==r&&(t=e.substring(r),e=e.substring(0,r));var o=[];for(var i in n)n.hasOwnProperty(i)&&o.push(i+"="+encodeURIComponent(n[i]));return e+($?"#":-1==e.indexOf("?")?"?":"&")+o.join("&")+t}function h(e){return"undefined"==typeof e}function m(e,n,t){var r;for(var o in n)n.hasOwnProperty(o)&&(o in e?(r=n[o],"object"==typeof r?m(e[o],r,t):t||(e[o]=n[o])):e[o]=n[o]);return e}function v(){var e=document.body.appendChild(document.createElement("form")),n=e.appendChild(document.createElement("input"));n.name=U+"TEST"+M,k=n!==e.elements[n.name],document.body.removeChild(e),H("HAS_NAME_PROPERTY_BUG: "+k)}function y(e){H("creating frame: "+e.props.src),h(k)&&v();var n;k?n=document.createElement('<iframe name="'+e.props.name+'"/>'):(n=document.createElement("IFRAME"),n.name=e.props.name),n.id=n.name=e.props.name,delete e.props.name,"string"==typeof e.container&&(e.container=document.getElementById(e.container)),e.container||(m(n.style,{position:"absolute",top:"-2000px",left:"0px"}),e.container=document.body);var t=e.props.src;if(e.props.src="javascript:false",m(n,e.props),n.border=n.frameBorder=0,n.allowTransparency=!0,e.container.appendChild(n),e.onLoad&&S(n,"load",e.onLoad),e.usePost){var r,o=e.container.appendChild(document.createElement("form"));if(o.target=n.name,o.action=t,o.method="POST","object"==typeof e.usePost)for(var i in e.usePost)e.usePost.hasOwnProperty(i)&&(k?r=document.createElement('<input name="'+i+'"/>'):(r=document.createElement("INPUT"),r.name=i),r.value=e.usePost[i],o.appendChild(r));o.submit(),o.parentNode.removeChild(o)}else n.src=t;return e.props.src=t,n}function w(e,n){"string"==typeof e&&(e=[e]);for(var t,r=e.length;r--;)if(t=e[r],t=new RegExp("^"==t.substr(0,1)?t:"^"+t.replace(/(\*)/g,".$1").replace(/\?/g,".")+"$"),t.test(n))return!0;return!1}function b(e){var n,r=e.protocol;if(e.isHost=e.isHost||h(X.xdm_p),$=e.hash||!1,H("preparing transport stack"),e.props||(e.props={}),e.isHost)e.remote=g(e.remote),e.channel=e.channel||"default"+M++,e.secret=Math.random().toString(16).substring(2),h(r)?(r=p(location.href)==p(e.remote)?"4":t(window,"postMessage")||t(document,"postMessage")?"1":e.swf&&t(window,"ActiveXObject")&&i()?"6":"Gecko"===navigator.product&&"frameElement"in window&&-1==navigator.userAgent.indexOf("WebKit")?"5":e.remoteHelper?"2":"0",H("selecting protocol: "+r)):H("using protocol: "+r);else if(H("using parameters from query"),e.channel=X.xdm_c.replace(/["'<>\\]/g,""),e.secret=X.xdm_s,e.remote=X.xdm_e.replace(/["'<>\\]/g,""),r=X.xdm_p,e.acl&&!w(e.acl,e.remote))throw new Error("Access denied for "+e.remote);switch(e.protocol=r,r){case"0":if(m(e,{interval:100,delay:2e3,useResize:!0,useParent:!1,usePolling:!1},!0),e.isHost){if(!e.local){H("looking for image to use as local");for(var o,a=location.protocol+"//"+location.host,u=document.body.getElementsByTagName("img"),c=u.length;c--;)if(o=u[c],o.src.substring(0,a.length)===a){e.local=o.src;break}e.local||(H("no image found, defaulting to using the window"),e.local=window)}var l={xdm_c:e.channel,xdm_p:0};e.local===window?(e.usePolling=!0,e.useParent=!0,e.local=location.protocol+"//"+location.host+location.pathname+location.search,l.xdm_e=e.local,l.xdm_pa=1):l.xdm_e=g(e.local),e.container&&(e.useResize=!1,l.xdm_po=1),e.remote=d(e.remote,l)}else m(e,{channel:X.xdm_c,remote:X.xdm_e,useParent:!h(X.xdm_pa),usePolling:!h(X.xdm_po),useResize:e.useParent?!1:e.useResize});n=[new P.stack.HashTransport(e),new P.stack.ReliableBehavior({}),new P.stack.QueueBehavior({encode:!0,maxLength:4e3-e.remote.length}),new P.stack.VerifyBehavior({initiate:e.isHost})];break;case"1":n=[new P.stack.PostMessageTransport(e)];break;case"2":e.isHost&&(e.remoteHelper=g(e.remoteHelper)),n=[new P.stack.NameTransport(e),new P.stack.QueueBehavior,new P.stack.VerifyBehavior({initiate:e.isHost})];break;case"3":n=[new P.stack.NixTransport(e)];break;case"4":n=[new P.stack.SameOriginTransport(e)];break;case"5":n=[new P.stack.FrameElementTransport(e)];break;case"6":O||i(),n=[new P.stack.FlashTransport(e)]}return n.push(new P.stack.QueueBehavior({lazy:e.lazy,remove:!0})),n}function _(e){for(var n,t={incoming:function(e,n){this.up.incoming(e,n)},outgoing:function(e,n){this.down.outgoing(e,n)},callback:function(e){this.up.callback(e)},init:function(){this.down.init()},destroy:function(){this.down.destroy()}},r=0,o=e.length;o>r;r++)n=e[r],m(n,t,!0),0!==r&&(n.down=e[r-1]),r!==o-1&&(n.up=e[r+1]);return n}function x(e){e.up.down=e.down,e.down.up=e.up,e.up=e.down=null}if("undefined"==typeof document)return{};var k,O,E,S,j,T=window.setTimeout,C=n.register("EasyXDM"),R=this,M=Math.floor(1e4*Math.random()),A=Function.prototype,N=/^((http.?:)\/\/([^:\/\s]+)(:\d+)*)/,L=/[\-\w]+\/\.\.\//,D=/([^:])\/\//g,F="",P={},I=window.easyXDM,U="easyXDM_",$=!1,H=A;if(t(window,"addEventListener"))S=function(e,n,t){H("adding listener "+n),e.addEventListener(n,t,!1)},j=function(e,n,t){H("removing listener "+n),e.removeEventListener(n,t,!1)};else{if(!t(window,"attachEvent"))throw new Error("Browser not supported");S=function(e,n,t){H("adding listener "+n),e.attachEvent("on"+n,t)},j=function(e,n,t){H("removing listener "+n),e.detachEvent("on"+n,t)}}var q,B=!1,z=[];if("readyState"in document?(q=document.readyState,B="complete"==q||~navigator.userAgent.indexOf("AppleWebKit/")&&("loaded"==q||"interactive"==q)):B=!!document.body,!B){if(t(window,"addEventListener"))S(document,"DOMContentLoaded",a);else if(S(document,"readystatechange",function(){"complete"==document.readyState&&a()}),document.documentElement.doScroll&&window===top){var J=function(){if(!B){try{document.documentElement.doScroll("left")}catch(e){return void T(J,1)}a()}};J()}S(window,"load",a)}var X=function(e){e=e.substring(1).split("&");for(var n,t={},r=e.length;r--;)n=e[r].split("="),t[n[0]]=decodeURIComponent(n[1]);return t}(/xdm_e=/.test(location.search)?location.search:location.hash),W=function(){var e={},n={a:[1,2,3]},t='{"a":[1,2,3]}';return"undefined"!=typeof JSON&&"function"==typeof JSON.stringify&&JSON.stringify(n).replace(/\s/g,"")===t?JSON:(Object.toJSON&&Object.toJSON(n).replace(/\s/g,"")===t&&(e.stringify=Object.toJSON),"function"==typeof String.prototype.evalJSON&&(n=t.evalJSON(),n.a&&3===n.a.length&&3===n.a[2]&&(e.parse=function(e){return e.evalJSON()})),e.stringify&&e.parse?(W=function(){return e},e):null)};m(P,{version:"2.4.19.1",query:X,stack:{},apply:m,getJSONObject:W,whenReady:u,noConflict:l});var V={_deferred:[],flush:function(){this.trace("... deferred messages ...");for(var e=0,n=this._deferred.length;n>e;e++)this.trace(this._deferred[e]);this._deferred.length=0,this.trace("... end of deferred messages ...")},getTime:function(){var e=new Date,n=e.getHours()+"",t=e.getMinutes()+"",r=e.getSeconds()+"",o=e.getMilliseconds()+"",i="000";return 1==n.length&&(n="0"+n),1==t.length&&(t="0"+t),1==r.length&&(r="0"+r),o=i.substring(o.length)+o,n+":"+t+":"+r+"."+o},log:function(e){C.debug(location.host+(F?":"+F:"")+": "+e)},getTracer:function(e){var t=n.register(e);return function(e){t.debug(e)}}};return V.log("easyXDM present on '"+location.href),P.Debug=V,H=V.getTracer("EasyXDM.{Private}"),P.DomHelper={on:S,un:j,requiresJSON:function(e){r(window,"JSON")?V.log("native JSON found"):(V.log("loading external JSON"),document.write('<script type="text/javascript" src="'+e+'"></script>'))}},function(){var e={};P.Fn={set:function(n,t){this._trace("storing function "+n),e[n]=t},get:function(n,t){if(this._trace("retrieving function "+n),e.hasOwnProperty(n)){var r=e[n];return r||this._trace(n+" not found"),t&&delete e[n],r}}},P.Fn._trace=V.getTracer("easyXDM.Fn")}(),P.Socket=function(e){var n=V.getTracer("easyXDM.Socket");n("constructor");var t=_(b(e).concat([{incoming:function(n,t){e.onMessage(n,t)},callback:function(n){e.onReady&&e.onReady(n)}}])),r=p(e.remote);this.origin=p(e.remote),this.destroy=function(){t.destroy()},this.postMessage=function(e){t.outgoing(e,r)},t.init()},P.Rpc=function(e,n){var t=V.getTracer("easyXDM.Rpc");if(t("constructor"),n.local)for(var r in n.local)if(n.local.hasOwnProperty(r)){var o=n.local[r];"function"==typeof o&&(n.local[r]={method:o})}var i=_(b(e).concat([new P.stack.RpcBehavior(this,n),{callback:function(n){e.onReady&&e.onReady(n)}}]));this.origin=p(e.remote),this.destroy=function(){i.destroy()},i.init()},P.stack.SameOriginTransport=function(e){var n=V.getTracer("easyXDM.stack.SameOriginTransport");n("constructor");var t,r,o,i;return t={outgoing:function(e,n,t){o(e),t&&t()},destroy:function(){n("destroy"),r&&(r.parentNode.removeChild(r),r=null)},onDOMReady:function(){n("init"),i=p(e.remote),e.isHost?(m(e.props,{src:d(e.remote,{xdm_e:location.protocol+"//"+location.host+location.pathname,xdm_c:e.channel,xdm_p:4}),name:U+e.channel+"_provider"}),r=y(e),P.Fn.set(e.channel,function(e){return o=e,T(function(){t.up.callback(!0)},0),function(e){t.up.incoming(e,i)}})):(o=c().Fn.get(e.channel,!0)(function(e){t.up.incoming(e,i)}),T(function(){t.up.callback(!0)},0))},init:function(){u(t.onDOMReady,t)}}},P.stack.FlashTransport=function(e){function n(e,n){T(function(){r("received message"),o.up.incoming(e,a)},0)}function t(n){r("creating factory with SWF from "+n);var t=e.swf+"?host="+e.isHost,o="easyXDM_swf_"+Math.floor(1e4*Math.random());P.Fn.set("flash_loaded"+n.replace(/[\-.]/g,"_"),function(){P.stack.FlashTransport[n].swf=c=l.firstChild;for(var e=P.stack.FlashTransport[n].queue,t=0;t<e.length;t++)e[t]();e.length=0}),e.swfContainer?l="string"==typeof e.swfContainer?document.getElementById(e.swfContainer):e.swfContainer:(l=document.createElement("div"),m(l.style,E&&e.swfNoThrottle?{height:"20px",width:"20px",position:"fixed",right:0,top:0}:{height:"1px",width:"1px",position:"absolute",overflow:"hidden",right:0,top:0}),document.body.appendChild(l));var i="callback=flash_loaded"+encodeURIComponent(n.replace(/[\-.]/g,"_"))+"&proto="+R.location.protocol+"&domain="+encodeURIComponent(s(R.location.href))+"&port="+encodeURIComponent(f(R.location.href))+"&ns="+encodeURIComponent(F);i+="&log=true",l.innerHTML="<object height='20' width='20' type='application/x-shockwave-flash' id='"+o+"' data='"+t+"'><param name='allowScriptAccess' value='always'></param><param name='wmode' value='transparent'><param name='movie' value='"+t+"'></param><param name='flashvars' value='"+i+"'></param><embed type='application/x-shockwave-flash' FlashVars='"+i+"' allowScriptAccess='always' wmode='transparent' src='"+t+"' height='1' width='1'></embed></object>"}var r=V.getTracer("easyXDM.stack.FlashTransport");r("constructor");var o,i,a,c,l;return o={outgoing:function(n,t,r){c.postMessage(e.channel,n.toString()),r&&r()},destroy:function(){r("destroy");try{c.destroyChannel(e.channel)}catch(n){}c=null,i&&(i.parentNode.removeChild(i),i=null)},onDOMReady:function(){r("init"),a=e.remote,P.Fn.set("flash_"+e.channel+"_init",function(){T(function(){r("firing onReady"),o.up.callback(!0)})}),P.Fn.set("flash_"+e.channel+"_onMessage",n),e.swf=g(e.swf);var u=s(e.swf),l=function(){P.stack.FlashTransport[u].init=!0,c=P.stack.FlashTransport[u].swf,c.createChannel(e.channel,e.secret,p(e.remote),e.isHost),e.isHost&&(E&&e.swfNoThrottle&&m(e.props,{position:"fixed",right:0,top:0,height:"20px",width:"20px"}),m(e.props,{src:d(e.remote,{xdm_e:p(location.href),xdm_c:e.channel,xdm_p:6,xdm_s:e.secret}),name:U+e.channel+"_provider"}),i=y(e))};P.stack.FlashTransport[u]&&P.stack.FlashTransport[u].init?l():P.stack.FlashTransport[u]?P.stack.FlashTransport[u].queue.push(l):(P.stack.FlashTransport[u]={queue:[l]},t(u))},init:function(){u(o.onDOMReady,o)}}},P.stack.PostMessageTransport=function(e){function n(e){if(e.origin)return p(e.origin);if(e.uri)return p(e.uri);if(e.domain)return location.protocol+"//"+e.domain;throw"Unable to retrieve the origin of the event"}function t(t){var i=n(t);r("received message '"+t.data+"' from "+i),i==c&&t.data.substring(0,e.channel.length+1)==e.channel+" "&&o.up.incoming(t.data.substring(e.channel.length+1),i)}var r=V.getTracer("easyXDM.stack.PostMessageTransport");r("constructor");var o,i,a,c;return o={outgoing:function(n,t,r){a.postMessage(e.channel+" "+n,t||c),r&&r()},destroy:function(){r("destroy"),j(window,"message",t),i&&(a=null,i.parentNode.removeChild(i),i=null)},onDOMReady:function(){if(r("init"),c=p(e.remote),e.isHost){var n=function(u){u.data==e.channel+"-ready"&&(r("firing onReady"),a="postMessage"in i.contentWindow?i.contentWindow:i.contentWindow.document,j(window,"message",n),S(window,"message",t),T(function(){o.up.callback(!0)},0))};S(window,"message",n),m(e.props,{src:d(e.remote,{xdm_e:p(location.href),xdm_c:e.channel,xdm_p:1}),name:U+e.channel+"_provider"}),i=y(e)}else S(window,"message",t),a="postMessage"in window.parent?window.parent:window.parent.document,a.postMessage(e.channel+"-ready",c),T(function(){o.up.callback(!0)},0)},init:function(){u(o.onDOMReady,o)}}},P.stack.FrameElementTransport=function(e){var n=V.getTracer("easyXDM.stack.FrameElementTransport");n("constructor");var t,r,o,i;return t={outgoing:function(e,n,t){o.call(this,e),t&&t()},destroy:function(){n("destroy"),r&&(r.parentNode.removeChild(r),r=null)},onDOMReady:function(){n("init"),i=p(e.remote),e.isHost?(m(e.props,{src:d(e.remote,{xdm_e:p(location.href),xdm_c:e.channel,xdm_p:5}),name:U+e.channel+"_provider"}),r=y(e),r.fn=function(e){return delete r.fn,o=e,T(function(){t.up.callback(!0)},0),function(e){t.up.incoming(e,i)}}):(document.referrer&&p(document.referrer)!=X.xdm_e&&(window.top.location=X.xdm_e),o=window.frameElement.fn(function(e){t.up.incoming(e,i)}),t.up.callback(!0))},init:function(){u(t.onDOMReady,t)}}},P.stack.NameTransport=function(e){function n(n){var t=e.remoteHelper+(c?"#_3":"#_2")+e.channel;i("sending message "+n),i("navigating to  '"+t+"'"),l.contentWindow.sendMessage(n,t)}function t(){c?2!==++f&&c||a.up.callback(!0):(n("ready"),i("calling onReady"),a.up.callback(!0))}function r(e){i("received message "+e),a.up.incoming(e,w)}function o(){v&&T(function(){v(!0)},0)}var i=V.getTracer("easyXDM.stack.NameTransport");i("constructor"),e.isHost&&h(e.remoteHelper)&&i("missing remoteHelper");var a,c,l,s,f,v,w,b;return a={outgoing:function(e,t,r){v=r,n(e)},destroy:function(){i("destroy"),l.parentNode.removeChild(l),l=null,c&&(s.parentNode.removeChild(s),s=null)},onDOMReady:function(){i("init"),c=e.isHost,f=0,w=p(e.remote),e.local=g(e.local),c?(P.Fn.set(e.channel,function(n){i("received initial message "+n),c&&"ready"===n&&(P.Fn.set(e.channel,r),t())}),b=d(e.remote,{xdm_e:e.local,xdm_c:e.channel,xdm_p:2}),m(e.props,{src:b+"#"+e.channel,name:U+e.channel+"_provider"}),s=y(e)):(e.remoteHelper=e.remote,P.Fn.set(e.channel,r));var n=function(){var r=l||this;j(r,"load",n),P.Fn.set(e.channel+"_load",o),function i(){"function"==typeof r.contentWindow.sendMessage?t():T(i,50)}()};l=y({props:{src:e.local+"#_4"+e.channel},onLoad:n})},init:function(){u(a.onDOMReady,a)}}},P.stack.HashTransport=function(e){function n(n){if(i("sending message '"+(g+1)+" "+n+"' to "+w),!h)return void i("no caller window");var t=e.remote+"#"+g++ +"_"+n;(c||!v?h.contentWindow:h).location=t}function t(e){f=e,i("received message '"+f+"' from "+w),a.up.incoming(f.substring(f.indexOf("_")+1),w)}function r(){if(d){var e=d.location.href,n="",r=e.indexOf("#");-1!=r&&(n=e.substring(r)),n&&n!=f&&(i("poll: new message"),t(n))}}function o(){i("starting polling"),l=setInterval(r,s)}var i=V.getTracer("easyXDM.stack.HashTransport");i("constructor");var a,c,l,s,f,g,d,h,v,w;return a={outgoing:function(e,t){n(e)},destroy:function(){window.clearInterval(l),(c||!v)&&h.parentNode.removeChild(h),h=null},onDOMReady:function(){if(c=e.isHost,s=e.interval,f="#"+e.channel,g=0,v=e.useParent,w=p(e.remote),c){if(m(e.props,{src:e.remote,name:U+e.channel+"_provider"}),v)e.onLoad=function(){d=window,o(),a.up.callback(!0)};else{var n=0,t=e.delay/50;!function r(){if(++n>t)throw i("unable to get reference to _listenerWindow, giving up"),new Error("Unable to reference listenerwindow");try{d=h.contentWindow.frames[U+e.channel+"_consumer"]}catch(u){}d?(o(),i("got a reference to _listenerWindow"),a.up.callback(!0)):T(r,50)}()}h=y(e)}else d=window,o(),v?(h=parent,a.up.callback(!0)):(m(e,{props:{src:e.remote+"#"+e.channel+new Date,name:U+e.channel+"_consumer"},onLoad:function(){a.up.callback(!0)}}),h=y(e))},init:function(){u(a.onDOMReady,a)}}},P.stack.ReliableBehavior=function(e){var n=V.getTracer("easyXDM.stack.ReliableBehavior");n("constructor");var t,r,o=0,i=0,a="";return t={incoming:function(e,u){n("incoming: "+e);var c=e.indexOf("_"),l=e.substring(0,c).split(",");e=e.substring(c+1),l[0]==o&&(n("message delivered"),a="",r&&r(!0)),e.length>0&&(n("sending ack, and passing on "+e),t.down.outgoing(l[1]+","+o+"_"+a,u),i!=l[1]&&(i=l[1],t.up.incoming(e,u)))},outgoing:function(e,n,u){a=e,r=u,t.down.outgoing(i+","+ ++o+"_"+e,n)}}},P.stack.QueueBehavior=function(e){function n(){if(e.remove&&0===i.length)return t("removing myself from the stack"),void x(r);if(!a&&0!==i.length&&!o){
t("dispatching from queue"),a=!0;var u=i.shift();r.down.outgoing(u.data,u.origin,function(e){a=!1,u.callback&&T(function(){u.callback(e)},0),n()})}}var t=V.getTracer("easyXDM.stack.QueueBehavior");t("constructor");var r,o,i=[],a=!0,u="",c=0,l=!1,s=!1;return r={init:function(){h(e)&&(e={}),e.maxLength&&(c=e.maxLength,s=!0),e.lazy?l=!0:r.down.init()},callback:function(e){a=!1;var t=r.up;n(),t.callback(e)},incoming:function(n,o){if(s){var i=n.indexOf("_"),a=parseInt(n.substring(0,i),10);u+=n.substring(i+1),0===a?(t("received the last fragment"),e.encode&&(u=decodeURIComponent(u)),r.up.incoming(u,o),u=""):t("waiting for more fragments, seq="+n)}else r.up.incoming(n,o)},outgoing:function(o,a,u){e.encode&&(o=encodeURIComponent(o));var f,p=[];if(s){for(;0!==o.length;)f=o.substring(0,c),o=o.substring(f.length),p.push(f);for(;f=p.shift();)t("enqueuing"),i.push({data:p.length+"_"+f,origin:a,callback:0===p.length?u:null})}else i.push({data:o,origin:a,callback:u});l?r.down.init():n()},destroy:function(){t("destroy"),o=!0,r.down.destroy()}}},P.stack.VerifyBehavior=function(e){function n(){t("requesting verification"),o=Math.random().toString(16).substring(2),r.down.outgoing(o)}var t=V.getTracer("easyXDM.stack.VerifyBehavior");t("constructor");var r,o,i;return r={incoming:function(a,u){var c=a.indexOf("_");-1===c?a===o?(t("verified, calling callback"),r.up.callback(!0)):i||(t("returning secret"),i=a,e.initiate||n(),r.down.outgoing(a)):a.substring(0,c)===i&&r.up.incoming(a.substring(c+1),u)},outgoing:function(e,n,t){r.down.outgoing(o+"_"+e,n,t)},callback:function(t){e.initiate&&n()}}},P.stack.RpcBehavior=function(e,n){function t(e){e.jsonrpc="2.0",a.down.outgoing(c.stringify(e))}function r(e,n){var r=Array.prototype.slice;return u("creating method "+n),function(){u("executing method "+n);var o,i=arguments.length,a={method:n};return i>0&&"function"==typeof arguments[i-1]?(i>1&&"function"==typeof arguments[i-2]?(o={success:arguments[i-2],error:arguments[i-1]},a.params=r.call(arguments,0,i-2)):(o={success:arguments[i-1]},a.params=r.call(arguments,0,i-1)),s[""+ ++l]=o,a.id=l):a.params=r.call(arguments,0),e.namedParams&&1===a.params.length&&(a.params=a.params[0]),t(a),a.id}}function i(e,n,r,i){if(!r)return u("requested to execute non-existent procedure "+e),void(n&&t({id:n,error:{code:-32601,message:"Procedure not found."}}));u("requested to execute procedure "+e);var a,c;n?(a=function(e){a=A,t({id:n,result:e})},c=function(e,r){c=A;var o={id:n,error:{code:-32099,message:e}};r&&(o.error.data=r),t(o)}):a=c=A,o(i)||(i=[i]);try{var l=r.method.apply(r.scope,i.concat([a,c]));h(l)||a(l)}catch(s){c(s.message)}}var a,u=V.getTracer("easyXDM.stack.RpcBehavior"),c=n.serializer||W(),l=0,s={};return a={incoming:function(e,r){var o=c.parse(e);if(o.method)u("received request to execute method "+o.method+(o.id?" using callback id "+o.id:"")),o&&o.params&&o.params[0]&&"object"==typeof o.params[0]&&(o.params[0].id=o.id),n.handle?n.handle(o,t):i(o.method,o.id,n.local[o.method],o.params);else{u("received return value destined to callback with id "+o.id);var a=s[o.id];o.error?a.error?a.error(o.error):u("unhandled error returned."):a.success&&a.success(o.result),delete s[o.id]}},init:function(){if(u("init"),n.remote){u("creating stubs");for(var t in n.remote)n.remote.hasOwnProperty(t)&&(e[t]=r(n.remote[t],t))}a.down.init()},destroy:function(){u("destroy");for(var t in n.remote)n.remote.hasOwnProperty(t)&&e.hasOwnProperty(t)&&delete e[t];a.down.destroy()}}},P}),define("xdm.remote.page",["require","jquery","xdm"],function(e){var n=e("jquery"),t=e("xdm"),r={},o=new t.Rpc({acl:["*"]},{local:{request:function(e,t,o){var i=n.ajax(e);e.id&&(r[e.id]=i),i.then(function(e,n,r){r.responseHeadersString=r.getAllResponseHeaders(),t({data:e,status:n,xhr:r})},o)},abort:function(e){r[e]&&"pending"==r[e].state()&&r[e].abort(),delete r[e]}}});return o});